<!DOCTYPE html>
<html>

<head>
  <title>My Flask App</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <script src="{{ url_for('static', filename='js/script.js') }}"></script>
 <title>My Flask App</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <script src="{{ url_for('static', filename='js/script.js') }}"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <style>
    .resizedvideo {
      width: 200px;
      height: 200px;
    }
    .resized_video {
      width: 300px;
      height: auto;
    }

    .section {
      margin-top: 50px;
      width: 95%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
    }

    .sectionl {
      width: 35%;
      display: flex;
      flex-direction: column;
      align-items: left;
      justify-content: left;
      height: 100vh;
    }

    .sectionr {
      width: 35%;
      display: flex;
      flex-direction: column;
      align-items: right;
      justify-content: right;
      height: 100vh;
    }
  </style>
  <style>
    html {
      font-family: sans-serif;
    background-color: black;
    }
    body {
      width: 95%;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      background-color: rgb(167, 196, 189);
      color: black;
    }
    h1 {
      color: rgb(255, 255, 255);
    }
    #wrapper {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      background-color: teal;
    }
    </style>
</head>

<body>  <center>  
  <div class="container">

    <h1 style="color: brown;">Creating a speaking Avatar with A Flask App. <br />Click the videos below for
      step-by-step instructions. </p></h1>  

      <video controls class="resizedvideo">
        <source src="static/assets/result_cl.webm" type="video/mp4">
        Your browser does not support the video tag.
      </video><br />

      <a href="{{ url_for('text_mp3') }}">First:  Create the mp3</a><br />

      <video controls class="resizedvideo">
        <source src="static/assets/result_convert_mp3_wav.webm" type="video/mp4">
        Your browser does not support the video tag.
      </video><br />
      <a href="{{ url_for('convert_mp3_to_wav') }}">Second: convert_mp3_to_wav</a><br />
      <video controls class="resizedvideo">
        <source src="static/assets/result_indian.webm" type="video/mp4">
        Your browser does not support the video tag.
      </video><br />
      <a href="{{ url_for('generate_vid') }}">Third: Create a Video the same length as the wav Created</a><br />
      <video controls class="resizedvideo">
        <source src="static/assets/Water-blinking.webm" type="video/mp4">
        Your browser does not support the video tag.
      </video><br />
      <a href="{{ url_for('create_avatar') }}">Fourth and Last Step: Create Avatar</a><br />
      <br /><br />
      <video controls class="resized_video">
        <source src="static/assets/final_with_border.mp4" type="video/mp4">
      </video><br />
        <a href="{{ url_for('indexA') }}">Create a Background for your Avatar</a><br />
        The above video is an example of what will be created.<br /><br /><br />
      <form action="/search" method="GET">
        <label for="search-term">Search:</label>
        <input type="text" id="search-term" name="q">
        <button type="submit">Search</button>
      </form>
      <br />
      <h3>Debug test</h3>
      <a href="{{ url_for('upload_file') }}">Upload Image</a><br />
      <video controls class="resized_video">
      <a href="{{ url_for('choose_dir') }}">Debug Test</a><br />
    </div>
</center>
  <footer class="footer">
    <center>
      <video controls class="resized-video">
        <source src="static/assets/result_cl.webm" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      &nbsp;&nbsp;&nbsp;&nbsp;
      <img style="width: 30%; height: auto;" src="{{ url_for('static', filename='images/image2.jpg') }}"
        alt="Example image"><br />&nbsp;&nbsp;&nbsp;
    </center>
    <h2 style="color: brown;">Links to YouTube Channels</h2>
    <style>
      .resized-video {
        width: 25%;
        height: auto;
      }
    </style>

    <video controls class="resized-video">
      <source src="static/assets/Talking_AI_Images.webm" type="video/mp4">
      Your browser does not support the video tag.
    </video>
  <div class="wrapper">
    <header class="header">
      <h1 style="color: brown;">Image Processing With Flask and Executeable Functions</h1><br />
      <p>Below are links to various Image Processing Functions. </p>
    </header>

    <div class="content">
      <a href="{{ url_for('get_gallery') }}">View Images</a><br />
      <a href="{{ url_for('view_thumbs') }}">View Thumbnails</a><br />
      <a href="{{ url_for('upload_file') }}">Upload Image</a><br />
      <a href="{{ url_for('flask_info') }}">Video</a><br />
      <a href="{{ url_for('add_text') }}">Add text to chat.txt</a><br />
      <a href="{{ url_for('search_txt') }}">Search chat.txt</a><br />
      <a href="{{ url_for('blend_pil') }}">upload and blend images.</a><br />
      <a href="{{ url_for('add_border') }}">Add a border to an image.</a><br />
      <a href="{{ url_for('process_images') }}">Process Images With Mask</a><br />
      <a href="{{ url_for('text_mp3') }}">Create an mp3 from aText Entry</a><br />
    </div>
    <div class="content">
      <a href="{{ url_for('generate_video') }}">Create an mp4 from video_resources</a><br />
      <a href="{{ url_for('generate_video2') }}">Create an mp4 from Uploads</a><br />
      <a href="{{ url_for('generate_video3') }}">Choose A directory to create video</a><br />
      <a href="{{ url_for('image_directories') }}">Choose Image directories</a><br />
      <a href="{{ url_for('select_playmp3') }}">Select and play mp3 from audio_mp3/</a><br />
      <a href="{{ url_for('make_animation') }}">Create an Animated Gif (20 images @ 1 per second.)</a><br />
      <a href="{{ url_for('build_stackedvids') }}">Video Stacked on Images</a><br />
      <a href="{{ url_for('build_stackedvid') }}">Two Video Stacked</a><br />
      <a href="{{ url_for('title_page') }}">Create a title Page</a><br />
      <a href="{{ url_for('add_title') }}">Add a Title to a Video</a><br />
      <a href="{{ url_for('add_effects') }}">Add effects to a Video</a><br />
      <a href="{{ url_for('choose_dir') }}">Choose a directory</a><br />
      <a href="{{ url_for('indexA') }}">Working With Text</a><br />

      <form action="{{ url_for('clean_images_route') }}" method="POST">
        <button type="submit">Clean Images</button>
      </form>
      <form action="/search" method="GET">
        <label for="search-term">Search:</label>
        <input type="text" id="search-term" name="q">
        <button type="submit">Search</button>
    </form>
    <form method="post" action="/mk_vid" enctype="multipart/form-data">
      <label for="directory">Select a directory:</label>
      <select id="directory" name="directory" required>
          {% for directory in directories %}
              <option value="{{ directory }}">{{ directory }}</option>
          {% endfor %}
      </select>
      <br><br>
      <input type="submit" value="Process Video">
  </form>
  <h1>Text to Video Conversion</h1>
  <form method="post" action="/maketext" enctype="multipart/form-data">
      <label for="input_file">Select a text file:</label><br>
      <input type="file" id="input_file" name="input_file" required><br><br>
      <input type="submit" value="Convert to Video">
  </form>
  <a href="/format_text">Format Text</a>
    </div>
    <footer class="footer">
      <center>
        &nbsp;&nbsp;<img style="width: 30%; height: auto;"
          src="{{ url_for('static', filename='images/' + random_image_file) }}"
          alt="Example image">&nbsp;&nbsp;&nbsp;&nbsp;
        <img style="width: 30%; height: auto;" src="{{ url_for('static', filename='images/image2.jpg') }}"
          alt="Example image"><br />&nbsp;&nbsp;&nbsp;
      </center>
      <h2 style="color: brown;">Links to YouTube Channels</h2>
      <a href="https://www.youtube.com/@totallyinsaneart3345" target="_blank ">Totally Insane Art</a><br />
      <a href="https://www.youtube.com/@JackNorthrup" target="_blank ">Jack Northrup</a><br />
      <a href="https://app.prodia.com/#/" target="_blank ">prodia</a><br />
      <a href="https://app.leonardo.ai/" target="_blank ">leonardo.ai</a><br />
    </footer>
  </div>

</body>

</html>
-----index-----
<!DOCTYPE html>
<html><link type="text/css" rel="stylesheet" id="dark-mode-custom-link"><link type="text/css" rel="stylesheet" id="dark-mode-general-link"><style lang="en" type="text/css" id="dark-mode-custom-style"></style><style lang="en" type="text/css" id="dark-mode-native-style"></style><style lang="en" type="text/css" id="dark-mode-native-sheet"></style><head>
<meta http-equiv="content-type" content="text/html; charset=windows-1252">
    <title>HTML5 Canvas Cheat Sheet</title>
    <meta name="viewport" content="width=device-width">
    <link href="HTML5%20Canvas%20Cheat%20Sheet_files/normalize.css" rel="stylesheet" media="screen">
    <link href="HTML5%20Canvas%20Cheat%20Sheet_files/main.css" rel="stylesheet">
    
    <script src="HTML5%20Canvas%20Cheat%20Sheet_files/prompt.js"></script></head>
  <body>
    <div class="content">
   
      <h1>HTML5 Canvas Cheat Sheet</h1>
  
  <p id="intro">
  This cheat sheet summarizes the complete HTML5 Canvas API for the 2D context, based on to the <a href="http://www.w3.org/TR/2dcontext/" target="_blank">W3C HTML5 Canvas Spec</a>.  It also provides techniques for handling common proceedures.
</p>

<ul id="items" style="position: relative; height: 2380px;">
  <!---------------------- ITEM ---------------------->
  <li class="item" style="position: absolute; left: 0px; top: 0px;">
    <h2>HTML5 Canvas Element</h2>
 
<h3>Html5 canvas element</h3>
<pre class="prettyprint">&lt;canvas id="myCanvas" width="500" height="300"&gt;
</pre>

<h3>Html5 canvas element with fallback content</h3>
<pre class="prettyprint">&lt;canvas id="myCanvas" width="500" height="300"&gt;
  your browser doesn't support canvas!
&lt;/canvas&gt;
</pre>
   
<h3>2d context</h3>
<pre class="prettyprint">var context = canvas.getContext('2d');
</pre>

<h3>Webgl context (3d)</h3>
<pre class="prettyprint">var context = canvas.getContext('webgl');
</pre>

  </li>
  
  <!---------------------- SHAPES ---------------------->
  <li class="item" style="position: absolute; left: 380px; top: 0px;">
    <h2>Shapes</h2>
    
<h3>Draw rectangle</h3>
<pre class="prettyprint">context.rect(x, y, width, height);
context.fill();
context.stroke();
</pre>

<h3>Fill rectangle shorthand</h3>
<pre class="prettyprint">context.fillRect(x, y, width, height);
</pre>

<h3>Stroke rectangle shorthand</h3>
<pre class="prettyprint">context.strokeRect(x, y, width, height);
</pre>

<h3>Draw circle</h3>
<pre class="prettyprint">context.arc(x, y, radius, 0, Math.PI * 2);
context.fill();
context.stroke();
</pre>

  </li>
  
  <!---------------------- STYLES ---------------------->
  <li class="item" style="position: absolute; left: 760px; top: 0px;">
    <h2>Styles</h2>

<h3>Fill</h3>
<pre class="prettyprint">context.fillStyle = 'red';
context.fill();
</pre>
    
<h3>Stroke</h3>
<pre class="prettyprint">context.strokeStyle = 'red';
context.stroke();
</pre>

<h3>Linear gradient</h3>
<pre class="prettyprint">var grd = context.createLinearGradient(x1, y1, x2, y2);
grd.addColorStop(0, 'red');   
grd.addColorStop(1, 'blue');
context.fillStyle = grd;
context.fill();
</pre>

<h3>Radial gradient</h3>
<pre class="prettyprint">var grd = context.createRadialGradient(x1, y1, radius1, x2, y2, radius2);
grd.addColorStop(0, 'red');
grd.addColorStop(1, 'blue');
context.fillStyle = grd;
context.fill();
</pre>


<h3>Pattern</h3>
<pre class="prettyprint">var imageObj = new Image();
imageObj.onload = function() {
  var pattern = context.createPattern(imageObj, 'repeat');
  context.fillStyle = pattern;
  context.fill();
};
imageObj.src = 'path/to/my/image.jpg';
</pre>

<h3>Line Join</h3>
<pre class="prettyprint">context.lineJoin = 'miter|round|bevel';
</pre>

<h3>Line Cap</h3>
<pre class="prettyprint">context.lineCap = 'butt|round|square';
</pre>

<h3>Shadow</h3>
<pre class="prettyprint">context.shadowColor = 'black';
context.shadowBlur = 20;
context.shadowOffsetX = 10;
context.shadowOffsetY = 10;
</pre>

<h3>Alpha (Opacity)</h3>
<pre class="prettyprint">context.globalAlpha = 0.5; // between 0 and 1
</pre>
      
      
  <!---------------------- COLOR FORMATS ---------------------->
  </li><li class="item" style="position: absolute; left: 380px; top: 374px;">
    <h2>Color Formats</h2>
    
<h3>String</h3>
<pre class="prettyprint">context.fillStyle = 'red';
</pre>

<h3>Hex Long</h3>
<pre class="prettyprint">context.fillStyle = '#ff0000';
</pre>

<h3>Hex Short</h3>
<pre class="prettyprint">context.fillStyle = '#f00';
</pre>

<h3>RGB</h3>
<pre class="prettyprint">context.fillStyle = 'rgb(255,0,0)';
</pre>

<h3>RGBA</h3>
<pre class="prettyprint">context.fillStyle = 'rgba(255,0,0,1)';
</pre>

  </li>

  <!---------------------- PATHS ---------------------->
  <li class="item" style="position: absolute; left: 0px; top: 390px;">
    <h2>Paths</h2>
  
<h3>Begin Path</h3>
<pre class="prettyprint">context.beginPath();
</pre>
 
<h3>Line</h3>
<pre class="prettyprint">context.lineTo(x, y);
</pre>

<h3>Arc</h3>
<pre class="prettyprint">context.arc(x, y, radius, startAngle, endAngle, counterClockwise);
</pre>

<h3>Quadratic curve</h3>
<pre class="prettyprint">context.quadraticCurveTo(cx, cy, x, y);
</pre>
 
<h3>Bezier curve</h3>
<pre class="prettyprint">context.bezierCurveTo(cx1, cy1, cx2, cy2, x, y);
</pre>

<h3>Close Path</h3>
<pre class="prettyprint">context.closePath();
</pre>
  </li>
  
  <!---------------------- IMAGES ---------------------->
  <li class="item" style="position: absolute; left: 380px; top: 721px;">
    <h2>Images</h2>
    
<h3>Draw Image with default size</h3>
<pre class="prettyprint">var imageObj = new Image();
imageObj.onload = function() {
  context.drawImage(imageObj, x, y);
};
imageObj.src = 'path/to/my/image.jpg';
</pre>

<h3>Draw image and set size</h3>
<pre class="prettyprint">var imageObj = new Image();
imageObj.onload = function() {
  context.drawImage(imageObj, x, y, width, height);
};
imageObj.src = 'path/to/my/image.jpg';
</pre>

<h3>Crop image</h3>
<pre class="prettyprint">var imageObj = new Image();
imageObj.onload = function() {
  context.drawImage(imageObj, sx, sy, sw, sh, dx, dy, dw, dh);
};
imageObj.src = 'path/to/my/image.jpg';
</pre>

  <!---------------------- TEXT ---------------------->
  </li><li class="item" style="position: absolute; left: 0px; top: 836px;">
    <h2>Text</h2>

<h3>Fill Text</h3>
<pre class="prettyprint">context.font = '40px Arial';
context.fillStyle = 'red';
context.fillText('Hello World!', x, y);
</pre>

<h3>Stroke Text</h3>
<pre class="prettyprint">context.font = '40pt Arial';
context.strokeStyle = 'red';
context.strokeText('Hello World!', x, y);
</pre>

<h3>Bold Text</h3>
<pre class="prettyprint">context.font = 'bold 40px Arial';
</pre>

<h3>Italic Text</h3>
<pre class="prettyprint">context.font = 'italic 40px Arial';
</pre>

<h3>Text Align</h3>
<pre class="prettyprint">context.textAlign = 'start|end|left|center|right';
</pre>

<h3>Text Baseline</h3>
<pre class="prettyprint">context.textBaseline = 'top|hanging|middle|alphabetic|ideographic
|bottom';
</pre>

<h3>Get Text Width</h3>
<pre class="prettyprint">var width = context.measureText('Hello world').width;
</pre>


  <!---------------------- TRANSFORMS ---------------------->
  </li><li class="item" style="position: absolute; left: 760px; top: 1058px;">
    <h2>Transforms</h2>

<h3>Translate</h3>
<pre class="prettyprint">context.translate(x, y);
</pre>

<h3>Scale</h3>
<pre class="prettyprint">context.scale(x, y);
</pre>

<h3>Rotate</h3>
<pre class="prettyprint">context.rotate(radians);
</pre>

<h3>Flip Horizontally</h3>
<pre class="prettyprint">context.scale(-1, 1);
</pre>

<h3>Flip Vertically</h3>
<pre class="prettyprint">context.scale(1, -1);
</pre>

<h3>Custom Transform</h3>
<pre class="prettyprint">context.transform(a, b, c, d ,e, f);
</pre>

<h3>Set Transform</h3>
<pre class="prettyprint">context.setTransform(a, b, c, d ,e, f);
</pre>

<h3>Shear</h3>
<pre class="prettyprint">context.transform(1, sy, sx, 1, 0, 0);
</pre>

<h3>Reset</h3>
<pre class="prettyprint">context.setTransform(1, 0, 0, 1, 0, 0);
</pre>
  </li>
  
  <!---------------------- STATE STACK ---------------------->
  <li class="item" style="position: absolute; left: 380px; top: 1248px;">
    <h2>State Stack</h2>

<h3>Push State onto Stack</h3>
<pre class="prettyprint">context.save();
</pre>

<h3>Pop State off of Stack</h3>
<pre class="prettyprint">context.restore();
</pre>

  </li>    
 
 
   <!---------------------- CLIPPING ---------------------->
  <li class="item" style="position: absolute; left: 380px; top: 1424px;">
    <h2>Clipping</h2>

<h3>Clip</h3>
<pre class="prettyprint">// draw path here
context.clip();
</pre>

  </li> 
  
  <!---------------------- IMAGE DATA ---------------------->
  <li class="item" style="position: absolute; left: 0px; top: 1465px;">
    <h2>Image Data</h2>

<h3>Get Image Data</h3>
<pre class="prettyprint">var imageData = context.getImageData(x, y, width, height);
var data = imageData.data;
</pre>

<h3>Loop Through Image Pixels</h3>
<pre class="prettyprint">var imageData = context.getImageData(x, y, width, height);
var data = imageData.data;
var len = data.length;
var i, red, green, blue, alpha;

for(i = 0; i &lt; len; i += 4) {
  red = data[i];
  green = data[i + 1];
  blue = data[i + 2];
  alpha = data[i + 3];
}
</pre>


<h3>Loop Through Image Pixels With Coordinates</h3>
<pre class="prettyprint">var imageData = context.getImageData(x, y, width, height);
var data = imageData.data;
var x, y, red, green, blue, alpha;

for(y = 0; y &lt; imageHeight; y++) {
  for(x = 0; x &lt; imageWidth; x++) {
    red = data[((imageWidth * y) + x) * 4];
    green = data[((imageWidth * y) + x) * 4 + 1];
    blue = data[((imageWidth * y) + x) * 4 + 2];
    alpha = data[((imageWidth * y) + x) * 4 + 3];
  }
}
</pre>

<h3>Set Image Data</h3>
<pre class="prettyprint">context.putImageData(imageData, x, y);
</pre>

  </li> 
  
    <!---------------------- DATA URLS ---------------------->
  <li class="item" style="position: absolute; left: 380px; top: 1564px;">
    <h2>Data URLs</h2>

<h3>Get Data URL</h3>
<pre class="prettyprint">var dataURL = canvas.toDataURL();
</pre>

<h3>Render Canvas with Data URL</h3>
<pre class="prettyprint">var imageObj = new Image();
imageObj.onload = function() {
  context.drawImage(imageObj, 0, 0);
};

imageObj.src = dataURL;
</pre>

  </li> 
  
   <!---------------------- COMPOSITES ---------------------->
  <li class="item" style="position: absolute; left: 760px; top: 1633px;">
    <h2>Composites</h2>

<h3>Composite Operations</h3>
<pre class="prettyprint">context.globalCompositeOperation = 'source-atop|source-in|source-out|source-over|destination-atop|destination-in|destination-out|destination-over|lighter|xor|copy';
</pre>


  </li> 
  
       
  
  
</ul>  
  
      <script src="HTML5%20Canvas%20Cheat%20Sheet_files/masonry.pkgd.min.js"></script>
      <script src="HTML5%20Canvas%20Cheat%20Sheet_files/main.js"></script>
     
    </div>
  

</body></html>
-----index-----
<!-- index.html-->
<!DOCTYPE html>
<html>

<head>
    <title>My Flask App</title>
    <style>
        html,
        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
            /* Image is centered vertically and horizontally at all times */
            background-position: center center;
            /* Image doesn't repeat */
            background-repeat: no-repeat;
            font-family: Arial, sans-serif;
            /* Makes the image fixed in the viewport so that it doesn't move when 
            the content height is greater than the image height */
            background-attachment: fixed;
            }
    </style>
</head>

<body>
    <h1>Choose a Directory</h1>
    <form method="post">
        <select name="selected_directory">
            {% for directory in directory_list %}
            <option value="{{ directory }}">{{ directory }}</option>
            {% endfor %}
        </select>
        <input type="submit" value="Get Image List">
    </form>

    {% if video %}
    <h2>Generated Video:</h2>
    <video controls>
        <source src="{{ video }}" type="video/mp4">
        Your browser does not support the video tag.
    </video>
    {% endif %}

</body>

</html>
-----index-----

<a href="https://freefrontend.com/javascript-background-effects/">javascript-background-effects</a  >
    <a href="https://www.sliderrevolution.com/resources/css-animated-background/">more background-effects</a  >
<a href="https://codepen.io/acauamontiel/pen/abpLEG">more background-codepen</a  >
@app.route('/preview')
def preview():
    # HTML content to be displayed
    html_content = "&lt;h2&gt;This is a dynamic HTML content&lt;/h2&gt;"
    html_content += "&lt;p&gt;It can include various elements, such as paragraphs, headings, lists, etc.&lt;/p&gt;"

    return render_template('preview.html', html_content=html_content)


<pre>
    
    User
@app.route('/convert', methods=['GET', 'POST'])
def convert():
    if request.method == 'POST':
        try:
            audio_file = request.files['audio_file']
            audio_file_path = f'static/audio_mp3/{audio_file.filename}'  # Path for audio file
            audio_file.save(audio_file_path)  # Save the audio file to the specified location

            formatted_text_file = request.files['formatted_text_file']
            formatted_text_file_path = f'static/formatted_text/{formatted_text_file.filename}'  # Path for formatted text file
            formatted_text_file.save(formatted_text_file_path)  # Save the formatted text file to the specified location

            output_filename = datetime.datetime.now().strftime('%Y-%m-%d') + '.mp4'
            output_path = 'static/videos/' + output_filename

            command = [
    'ffmpeg',
    '-i', audio_file_path,
    '-f', 'lavfi',
    '-i', f"color='#470000'@0.0:s=1280x720:rate=60,format=rgba",
    '-vf', f"drawtext=textfile='{os.path.abspath(formatted_text_file_path)}':y=(h-120)-12*t:x=550:fontcolor=orange:fontfile=/home/jack/Arimo-Regular.ttf:fontsize=26",
    '-t', '26',
    '-y', output_path
]
ChatGPT

The code you provided seems to be a part of a Flask application that handles a route called '/convert'. This route accepts both GET and POST requests. Let me explain what this code does step by step:

    It checks if the request method is POST:

python
if request.method == 'POST':

    It retrieves the audio file and saves it to a specified location:

python
audio_file = request.files['audio_file']
audio_file_path = f'static/audio_mp3/{audio_file.filename}'
audio_file.save(audio_file_path)

    It retrieves the formatted text file and saves it to a specified location:

python
formatted_text_file = request.files['formatted_text_file']
formatted_text_file_path = f'static/formatted_text/{formatted_text_file.filename}'
formatted_text_file.save(formatted_text_file_path)

    It generates an output filename based on the current date and time and sets the output path:

python
output_filename = datetime.datetime.now().strftime('%Y-%m-%d') + '.mp4'
output_path = 'static/videos/' + output_filename

    It constructs a command to be executed by ffmpeg, a command-line tool for handling multimedia:

python
command = [
    'ffmpeg',
    '-i', audio_file_path,
    '-f', 'lavfi',
    '-i', f"color='#470000'@0.0:s=1280x720:rate=60,format=rgba",
    '-vf', f"drawtext=textfile='{os.path.abspath(formatted_text_file_path)}':y=(h-120)-12*t:x=550:fontcolor=orange:fontfile=/home/jack/Arimo-Regular.ttf:fontsize=26",
    '-t', '26',
    '-y', output_path
]

The command includes options and arguments for ffmpeg to perform the following operations:

    -i audio_file_path: Specifies the input audio file.
    -f lavfi -i color=...: Generates a colored background for the video.
    -vf drawtext=...: Adds text to the video using the specified font, font size, and color. The text is read from the formatted text file.
    -t 26: Sets the duration of the output video to 26 seconds.
    -y output_path: Specifies the output path and filename for the video.

The resulting command will be executed by ffmpeg to convert the audio and formatted text into a video file at the specified output path.

Please note that the code provided is incomplete, and there might be additional Flask routes and functionality missing for a complete application.
User
i get  File "appp", line 36
    audio_file_path = f'static/audio_mp3/{audio_file.filename}'  # Path for audio file
                                                              ^
SyntaxError: invalid syntax
ChatGPT

The SyntaxError you're encountering is pointing to the line where you are trying to format the string using an f-string. This error typically occurs when using f-strings in Python versions earlier than Python 3.6.

To resolve this issue, you can modify the string formatting to use the str.format() method instead of an f-string. Here's the modified code snippet:

python
audio_file_path = 'static/audio_mp3/{}'.format(audio_file.filename)

You would need to make similar changes in other parts of your code where you're using f-strings. By replacing the f-strings with the str.format() method, you should be able to fix the SyntaxError and continue running your code.
User
if __name__ == '__main__':
    app.run(debug=True)                      I want this to run on port 5100
ChatGPT

To run your Flask application on port 5100, you can modify the app.run() statement as follows:

python
if __name__ == '__main__':
    app.run(debug=True, port=5100)

By specifying port=5100 as an argument in the app.run() function, your Flask application will be served on port 5100 when you run the script.

After making this change, you can execute your Flask application, and it will be accessible at http://localhost:5100/.
User
what if i use 0,0,0,0
ChatGPT

If you want to run your Flask application on all available network interfaces and use port 5100, you can modify the app.run() statement as follows:

python
if __name__ == '__main__':
    app.run(debug=True, host='0.0.0.0', port=5100)

By specifying host='0.0.0.0' and port=5100 as arguments in the app.run() function, your Flask application will be served on all network interfaces (allowing access from external devices) and using port 5100.

After making this change, you can execute your Flask application, and it will be accessible at http://&lt;your-ip-address&gt;:5100/, where &lt;your-ip-address&gt; is the IP address of the machine running the Flask application.
User
datetime has no attribut now
ChatGPT

I apologize for the confusion. It seems that there was an error related to the datetime.now() function.

The correct import statement for the datetime module should be added at the beginning of your code:

python
import datetime

By including this import statement, you will have access to the datetime module and its datetime class, which includes the now() method.

Here's an updated version of your code with the correct import statement:

python
import datetime

@app.route('/convert', methods=['GET', 'POST'])
def convert():
    if request.method == 'POST':
        try:
            audio_file = request.files['audio_file']
            audio_file_path = f'static/audio_mp3/{audio_file.filename}'  # Path for audio file
            audio_file.save(audio_file_path)  # Save the audio file to the specified location

            formatted_text_file = request.files['formatted_text_file']
            formatted_text_file_path = f'static/formatted_text/{formatted_text_file.filename}'  # Path for formatted text file
            formatted_text_file.save(formatted_text_file_path)  # Save the formatted text file to the specified location

            output_filename = datetime.datetime.now().strftime('%Y-%m-%d') + '.mp4'
            output_path = 'static/videos/' + output_filename

            command = [
                'ffmpeg',
                '-i', audio_file_path,
                '-f', 'lavfi',
                '-i', f"color='#470000'@0.0:s=1280x720:rate=60,format=rgba",
                '-vf', f"drawtext=textfile='{os.path.abspath(formatted_text_file_path)}':y=(h-120)-12*t:x=550:fontcolor=orange:fontfile=/home/jack/Arimo-Regular.ttf:fontsize=26",
                '-t', '26',
                '-y', output_path
            ]
            
            # Rest of your code...

        except Exception as e:
            # Handle exceptions

if __name__ == '__main__':
    app.run(debug=True)

Make sure to add the import datetime statement at the beginning of your script, and the datetime module should be accessible, allowing you to use the datetime.datetime.now() method without any issues.
User
use time str instead of datetime
ChatGPT

If you want to use a time string instead of the datetime.now() method, you can replace the datetime.datetime.now().strftime('%Y-%m-%d') portion with the time.strftime() function, which allows you to format the current time as a string.

Here's an updated version of your code using time.strftime():

python
import time

@app.route('/convert', methods=['GET', 'POST'])
def convert():
    if request.method == 'POST':
        try:
            audio_file = request.files['audio_file']
            audio_file_path = f'static/audio_mp3/{audio_file.filename}'  # Path for audio file
            audio_file.save(audio_file_path)  # Save the audio file to the specified location

            formatted_text_file = request.files['formatted_text_file']
            formatted_text_file_path = f'static/formatted_text/{formatted_text_file.filename}'  # Path for formatted text file
            formatted_text_file.save(formatted_text_file_path)  # Save the formatted text file to the specified location

            output_filename = time.strftime('%Y-%m-%d', time.localtime()) + '.mp4'
            output_path = 'static/videos/' + output_filename

            command = [
                'ffmpeg',
                '-i', audio_file_path,
                '-f', 'lavfi',
                '-i', f"color='#470000'@0.0:s=1280x720:rate=60,format=rgba",
                '-vf', f"drawtext=textfile='{os.path.abspath(formatted_text_file_path)}':y=(h-120)-12*t:x=550:fontcolor=orange:fontfile=/home/jack/Arimo-Regular.ttf:fontsize=26",
                '-t', '26',
                '-y', output_path
            ]
            
            # Rest of your code...

        except Exception as e:
            # Handle exceptions

if __name__ == '__main__':
    app.run(debug=True)

In this updated code, I replaced datetime.datetime.now().strftime('%Y-%m-%d') with time.strftime('%Y-%m-%d', time.localtime()). The time.strftime() function takes a format string as the first argument and the time as a tuple from time.localtime() as the second argument. By using '%Y-%m-%d' as the format string, you'll get the current date in the desired format.
User
iwant the time to seconds
ChatGPT

If you want to get the current time in seconds instead of the date, you can use the time.time() function, which returns the current time in seconds since the epoch. You can then convert this timestamp to a string using str().

Here's an updated version of your code using time.time() to get the current time in seconds:

python
import time

@app.route('/convert', methods=['GET', 'POST'])
def convert():
    if request.method == 'POST':
        try:
            audio_file = request.files['audio_file']
            audio_file_path = f'static/audio_mp3/{audio_file.filename}'  # Path for audio file
            audio_file.save(audio_file_path)  # Save the audio file to the specified location

            formatted_text_file = request.files['formatted_text_file']
            formatted_text_file_path = f'static/formatted_text/{formatted_text_file.filename}'  # Path for formatted text file
            formatted_text_file.save(formatted_text_file_path)  # Save the formatted text file to the specified location

            output_filename = str(int(time.time())) + '.mp4'
            output_path = 'static/videos/' + output_filename

            command = [
                'ffmpeg',
                '-i', audio_file_path,
                '-f', 'lavfi',
                '-i', f"color='#470000'@0.0:s=1280x720:rate=60,format=rgba",
                '-vf', f"drawtext=textfile='{os.path.abspath(formatted_text_file_path)}':y=(h-120)-12*t:x=550:fontcolor=orange:fontfile=/home/jack/Arimo-Regular.ttf:fontsize=26",
                '-t', '26',
                '-y', output_path
            ]
            
            # Rest of your code...

        except Exception as e:
            # Handle exceptions

if __name__ == '__main__':
    app.run(debug=True)

In this updated code, I replaced the datetime.datetime.now().strftime('%Y-%m-%d') with str(int(time.time())). The time.time() function returns the current time in seconds since the epoch (as a floating-point number), which is then converted to an integer using int(). Finally, the integer timestamp is converted to a string using str().
User
python make a directory if not exist\
ChatGPT

To create a directory in Python if it doesn't exist, you can use the os.makedirs() function. This function recursively creates directories along the given path. If the directory already exists, it doesn't raise an error.

Here's an example of how you can use os.makedirs() to create a directory if it doesn't exist:

python
import os

directory_path = 'path/to/directory'  # Replace with the desired directory path

# Create the directory if it doesn't exist
os.makedirs(directory_path, exist_ok=True)

In the above code, you need to replace 'path/to/directory' with the actual path of the directory you want to create. The exist_ok=True argument ensures that no error is raised if the directory already exists.

After executing this code, the directory will be created if it doesn't already exist. If the directory exists, no action will be taken.

Make sure you have the necessary permissions to create directories in the specified location.
User
File "/home/jack/Desktop/StoryMaker/env/lib/python3.8/site-packages/flask/app.py", line 1523, in full_dispatch_request
rv = self.dispatch_request()
File "/home/jack/Desktop/StoryMaker/env/lib/python3.8/site-packages/flask/app.py", line 1509, in dispatch_request
return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
File "/home/jack/Desktop/StoryMaker/SuperAvatar", line 221, in generate_video
extract_eyes(image_path, eyes_filename, shape_predictor_path)
File "/home/jack/Desktop/StoryMaker/SuperAvatar", line 280, in extract_eyes
gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)
cv2.error: OpenCV(4.6.0) /io/opencv/modules/imgproc/src/color.cpp:182: error: (-215:Assertion failed) !_src.empty() in function 'cvtColor'
ChatGPT

The error message you provided suggests that an error occurred in the cvtColor() function of OpenCV. Specifically, it indicates that the input image passed to cvtColor() is empty (_src.empty() assertion failed).

The issue is likely related to the image file you are trying to process. It could be that the image file path is incorrect, or the image file itself is not accessible or empty.

To resolve this error, you can check the following:

    Verify that the image file exists at the specified path.
    Ensure that the image file is accessible and not being used by any other process.
    Double-check that the image file is a valid image file format (e.g., JPEG, PNG).
    Confirm that the image file is not empty or corrupted.

You can add some error handling and logging to your code to identify the specific image file causing the issue and provide more context for troubleshooting.

If you need further assistance, please provide the relevant code snippet that includes the extract_eyes() function and how you are passing the image path to it.
User
What do you know about the final fantasy series ?
ChatGPT

The Final Fantasy series is a highly popular and influential role-playing video game franchise developed and published by Square Enix (formerly Square). The series was created by Hironobu Sakaguchi and debuted in 1987 with the release of the first game in the series, simply titled "Final Fantasy."

Key aspects of the Final Fantasy series include:

    Gameplay: The games typically feature turn-based combat, exploration of vast fantasy worlds, character development, and engaging storytelling. However, gameplay mechanics can vary between installments, with some featuring real-time combat or tactical elements.

    Fantasy Setting: The series is known for its immersive and richly detailed fantasy settings, often combining elements of magic, technology, and various races, such as humans, elves, dwarves, and creatures unique to the Final Fantasy universe.

    Standalone Stories: Each mainline entry in the series typically presents a unique storyline, with new worlds, characters, and themes. However, common elements like chocobos (large, bird-like creatures), airships, and recurring creatures called "summons" (or "espers") are often featured across different games.

    Music: The Final Fantasy series is renowned for its memorable and iconic music, composed by Nobuo Uematsu and other talented composers. The music often complements the game's narrative and evokes a range of emotions in players.

    Iterations and Spin-offs: The success of the franchise has led to numerous sequels, prequels, spin-offs, and adaptations across various platforms. Some notable spin-off titles include Final Fantasy Tactics, Final Fantasy Crystal Chronicles, and Final Fantasy Brave Exvius.

    Cultural Impact: Final Fantasy has had a significant impact on the gaming industry, shaping the RPG genre and inspiring many other video games and media. The series has garnered a dedicated fan base worldwide, and its success has helped establish Square Enix as a prominent game developer.

It's important to note that since my knowledge cutoff is in September 2021, the information I provided reflects the state of the series up until that time. New games and developments may have occurred since then.
User
could you set the plot for a two page comic book using final fantasy 
ChatGPT

Certainly! Here's a potential plot for a two-page comic book using Final Fantasy as inspiration:

Page 1:
Panel 1:

    A sprawling fantasy kingdom is shown, with magnificent castles, bustling towns, and beautiful landscapes.
    The main protagonist, a young warrior, is introduced. They are seen walking through a town, their face determined and their sword strapped to their back.

Panel 2:

    The warrior enters a tavern filled with adventurers and townsfolk.
    They overhear a rumor about a powerful artifact hidden in a nearby ancient temple.
    The warrior decides to embark on a quest to retrieve the artifact and bring peace to the kingdom.

Panel 3:

    The warrior is shown journeying through a dense forest, encountering magical creatures along the way.
    They face a small group of goblins, displaying their combat skills and bravery.

Page 2:
Panel 4:

    The warrior reaches the entrance of the ancient temple, an awe-inspiring structure covered in moss and vines.
    They cautiously step inside, encountering traps and puzzles that test their intelligence and agility.

Panel 5:

    The warrior finally reaches the inner chamber of the temple, where the artifact is guarded by a fearsome monster.
    A thrilling battle ensues, showcasing the warrior's skills and determination to protect the kingdom.

Panel 6:

    The warrior emerges victorious, holding the artifact triumphantly.
    They return to the kingdom as a hero, greeted by grateful townsfolk and a jubilant celebration.

Panel 7:

    The comic concludes with the warrior contemplating their next adventure, hinting at future quests and the continuation of their heroic journey.

This two-page comic book plot draws inspiration from the Final Fantasy series by incorporating elements such as a fantasy setting, a hero on a quest, magical creatures, and epic battles. It captures the essence of a classic Final Fantasy storyline, combining adventure, exploration, and the triumph of good over evil in a condensed format.
User
what was the main castle / city name
ChatGPT

In the plot for the two-page comic book using Final Fantasy as inspiration, the specific names of the main castle or city were not provided. However, you can create unique names for the castle and city based on the theme and style you envision for your story. Here are a couple of examples:

    Castle/City Name: "Valoria"
    Description: Valoria is a majestic castle that serves as the center of power in the kingdom. It is situated on a high hill, overlooking the sprawling city below. The city itself is a bustling hub of commerce and culture, filled with lively markets, grand architecture, and diverse inhabitants.

    Castle/City Name: "Silverreach"
    Description: Silverreach is a fortified city located on the edge of a shimmering lake. The castle, also known as Silverreach, is made of gleaming white stone and stands as a symbol of prosperity and strength. The city is known for its advanced magical arts, with enchanters, scholars, and alchemists residing within its walls.

Feel free to modify or create your own castle and city names that resonate with your story and the atmosphere you want to portray in your Final Fantasy-inspired comic book.
User
what are the illustrators bubbles that represent a dream called?
ChatGPT

The speech bubbles that represent a dream or a character's thoughts in comic books are commonly referred to as "thought bubbles" or "thought balloons." These thought bubbles are typically depicted as cloud-like shapes with a series of dots or wavy lines connecting them to the character's head.

Thought bubbles are used to convey a character's inner monologue, private thoughts, or dreams. They are often drawn differently from regular speech bubbles to indicate that the text within them represents the character's mental or imagined dialogue rather than spoken words. The use of thought bubbles helps readers understand the character's perspective, emotions, or reflections.

It's important to note that different comic artists and authors may have their own unique styles and variations when it comes to depicting thought bubbles. Some may use different shapes, colors, or visual effects to convey specific nuances or emphasize the dream-like quality of the thoughts or dreams being depicted.
User
import * as datGui from "https://cdn.skypack.dev/dat.gui@0.7.7";

const state = {
  fps: 60,
  color: "#0f0",
  charset: "0123456789ABCDEF",
  size: 10
};

const gui = new datGui.GUI();
const fpsCtrl = gui.add(state, "fps").min(1).max(120).step(1);
gui.addColor(state, "color");
gui.add(state, "charset");
const sizeCtrl = gui.add(state, "size").min(1).max(120).step(1);

const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

let w, h, p;
const resize = () =&gt; {
  w = canvas.width = innerWidth;
  h = canvas.height = innerHeight;

  p = Array(Math.ceil(w / state.size)).fill(0);
};
window.addEventListener("resize", resize);
sizeCtrl.onFinishChange((s) =&gt; resize())
resize();

const random = (items) =&gt; items[Math.floor(Math.random() * items.length)];

const draw = () =&gt; {
  ctx.fillStyle = "rgba(0,0,0,.05)";
  ctx.fillRect(0, 0, w, h);
  ctx.fillStyle = state.color;

  ctx.font = state.size + 'px sans-serif'
  for (let i = 0; i &lt; p.length; i++) {
    let v = p[i];
    ctx.fillText(random(state.charset), i * state.size, v);
    p[i] = v &gt;= h || v &gt;= 10000 * Math.random() ? 0 : v + state.size;
  }
};

let interval = setInterval(draw, 1000 / state.fps);
fpsCtrl.onFinishChange((fps) =&gt; {
  if (interval) {
    clearInterval(interval);
  }
  interval = setInterval(draw, 1000 / fps);
});
body {
  margin: 0;
  overflow: hidden;
}                               &lt;canvas id="canvas"&gt;                                   Can you create that using only a javascript and no additional html or css ??
ChatGPT

Yes, the provided code can be used to create a visualization using only JavaScript without additional HTML or CSS files. However, there is a small issue with the placement of the &lt;canvas&gt; element in your question. I assume that you meant to place it before the CSS code. Here's the corrected version of the code:

javascript
import * as datGui from "https://cdn.skypack.dev/dat.gui@0.7.7";

const state = {
  fps: 60,
  color: "#0f0",
  charset: "0123456789ABCDEF",
  size: 10
};

const gui = new datGui.GUI();
const fpsCtrl = gui.add(state, "fps").min(1).max(120).step(1);
gui.addColor(state, "color");
gui.add(state, "charset");
const sizeCtrl = gui.add(state, "size").min(1).max(120).step(1);

const canvas = document.createElement("canvas");
document.body.appendChild(canvas);
const ctx = canvas.getContext("2d");

let w, h, p;
const resize = () =&gt; {
  w = canvas.width = innerWidth;
  h = canvas.height = innerHeight;

  p = Array(Math.ceil(w / state.size)).fill(0);
};
window.addEventListener("resize", resize);
sizeCtrl.onFinishChange((s) =&gt; resize());
resize();

const random = (items) =&gt; items[Math.floor(Math.random() * items.length)];

const draw = () =&gt; {
  ctx.fillStyle = "rgba(0,0,0,.05)";
  ctx.fillRect(0, 0, w, h);
  ctx.fillStyle = state.color;

  ctx.font = state.size + 'px sans-serif';
  for (let i = 0; i &lt; p.length; i++) {
    let v = p[i];
    ctx.fillText(random(state.charset), i * state.size, v);
    p[i] = v &gt;= h || v &gt;= 10000 * Math.random() ? 0 : v + state.size;
  }
};

let interval = setInterval(draw, 1000 / state.fps);
fpsCtrl.onFinishChange((fps) =&gt; {
  if (interval) {
    clearInterval(interval);
  }
  interval = setInterval(draw, 1000 / fps);
});

In this code, a &lt;canvas&gt; element is created dynamically using document.createElement("canvas"). The canvas is then appended to the &lt;body&gt; element using document.body.appendChild(canvas). This allows you to generate the visualization using JavaScript without the need for additional HTML or CSS files.

Please note that you will still need an HTML file to load and run this JavaScript code. You can create an HTML file and include a &lt;script&gt; tag to reference this JavaScript code.
User
run flask on port 5100
ChatGPT

To run a Flask application on port 5100, you can modify the app.run() statement in your Python script. Here's an example of how you can do it:

python
from flask import Flask

app = Flask(__name__)

@app.route('/')
def hello():
    return 'Hello, World!'

if __name__ == '__main__':
    app.run(port=5100)

In this example, the Flask application is defined with a simple route that returns "Hello, World!" when accessed. The app.run() statement is modified to include port=5100 as an argument.

When you run this script, Flask will start the application on port 5100. You can access it by navigating to http://localhost:5100/ in your web browser.

Please ensure that you have Flask installed and any required dependencies before running the script.
User
import * as datGui from "https://cdn.skypack.dev/dat.gui@0.7.7";

const state = {
  fps: 60,
  color: "#0f0",
  charset: "0123456789ABCDEF",
  size: 10
};

const gui = new datGui.GUI();
const fpsCtrl = gui.add(state, "fps").min(1).max(120).step(1);
gui.addColor(state, "color");
gui.add(state, "charset");
const sizeCtrl = gui.add(state, "size").min(1).max(120).step(1);

const canvas = document.createElement("canvas");
document.body.appendChild(canvas);
const ctx = canvas.getContext("2d");

let w, h, p;
const resize = () =&gt; {
  w = canvas.width = innerWidth;
  h = canvas.height = innerHeight;

  p = Array(Math.ceil(w / state.size)).fill(0);
};
window.addEventListener("resize", resize);
sizeCtrl.onFinishChange((s) =&gt; resize());
resize();

const random = (items) =&gt; items[Math.floor(Math.random() * items.length)];

const draw = () =&gt; {
  ctx.fillStyle = "rgba(0,0,0,.05)";
  ctx.fillRect(0, 0, w, h);
  ctx.fillStyle = state.color;

  ctx.font = state.size + 'px sans-serif';
  for (let i = 0; i &lt; p.length; i++) {
    let v = p[i];
    ctx.fillText(random(state.charset), i * state.size, v);
    p[i] = v &gt;= h || v &gt;= 10000 * Math.random() ? 0 : v + state.size;
  }
};

let interval = setInterval(draw, 1000 / state.fps);
fpsCtrl.onFinishChange((fps) =&gt; {
  if (interval) {
    clearInterval(interval);
  }
  interval = setInterval(draw, 1000 / fps);
});
if I run this script in an html page it should show an image ??
ChatGPT

The provided code is written in JavaScript and renders a dynamic canvas animation, but it doesn't generate an image. When you run this script in an HTML page, it will create an interactive animation on the canvas element.

The code sets up a GUI using dat.GUI to control parameters such as frames per second (fps), color, character set, and size. It then creates a canvas element dynamically and appends it to the &lt;body&gt; of the HTML page. The animation is drawn on the canvas using the draw() function, which is repeatedly called based on the specified frame rate.

When you open the HTML page that includes this script, you should see a canvas element on the page, and the animation will start playing based on the parameters controlled by the GUI.

It's important to note that this code doesn't generate a static image file. Instead, it generates an interactive animation that runs within the web page. If you need to generate a static image, you might consider using a different approach, such as capturing the canvas as an image using libraries like html2canvas or server-side rendering techniques.
User
I wand to run the script in a webpage 
ChatGPT

To run the provided JavaScript code in a webpage, you need to create an HTML file and include the JavaScript code within a &lt;script&gt; tag. Here's an example of how you can structure your HTML file:

html
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;Canvas Animation&lt;/title&gt;
  &lt;script src="https://cdn.skypack.dev/dat.gui@0.7.7"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;canvas id="canvas"&gt;&lt;/canvas&gt;

  &lt;script&gt;
    // Paste the JavaScript code here
    // ...

    // Ensure the DOM content is loaded before running the JavaScript code
    document.addEventListener("DOMContentLoaded", function() {
      // Your JavaScript code here
      // ...
    });
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;

In this HTML file, the &lt;script&gt; tag is placed at the end of the &lt;body&gt; element. The external dat.gui library is included as a script source using a &lt;script&gt; tag with the src attribute.

You should copy and paste the provided JavaScript code inside the &lt;script&gt; tag where indicated. The DOMContentLoaded event listener is added to ensure that the JavaScript code runs after the DOM content has loaded.

Save this HTML file with an appropriate name, such as index.html, and open it in a web browser. The canvas animation should now run within the webpage.
User
I want to just run a script in a page. I have only access to creare a script
ChatGPT

If you only have access to creating a script on a webpage and want to run the provided JavaScript code without modifying the HTML, you can follow these steps:

    Create an HTML file (e.g., index.html) with the following content:

html
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;Canvas Animation&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;canvas id="canvas"&gt;&lt;/canvas&gt;

  &lt;script&gt;
    // Paste the entire JavaScript code here
    // ...

    // Ensure the DOM content is loaded before running the JavaScript code
    document.addEventListener("DOMContentLoaded", function() {
      // Your JavaScript code here
      // ...
    });
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;

    Copy the entire JavaScript code (starting from import * as datGui and ending with the last line) and replace the // Paste the entire JavaScript code here comment inside the &lt;script&gt; tag.

    Save the HTML file.

    Open the HTML file (index.html) in a web browser, and the canvas animation should run on the webpage.

By embedding the JavaScript code within the &lt;script&gt; tag in the HTML file, you can run the script and see the canvas animation without modifying the existing HTML structure.
User
can you complete the html page 
ChatGPT

Certainly! Here's the completed HTML page with the provided JavaScript code included:

html
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;Canvas Animation&lt;/title&gt;
  &lt;script src="https://cdn.skypack.dev/dat.gui@0.7.7"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;canvas id="canvas"&gt;&lt;/canvas&gt;

  &lt;script&gt;
    import * as datGui from "https://cdn.skypack.dev/dat.gui@0.7.7";

    const state = {
      fps: 60,
      color: "#0f0",
      charset: "0123456789ABCDEF",
      size: 10
    };

    const gui = new datGui.GUI();
    const fpsCtrl = gui.add(state, "fps").min(1).max(120).step(1);
    gui.addColor(state, "color");
    gui.add(state, "charset");
    const sizeCtrl = gui.add(state, "size").min(1).max(120).step(1);

    const canvas = document.createElement("canvas");
    document.body.appendChild(canvas);
    const ctx = canvas.getContext("2d");

    let w, h, p;
    const resize = () =&gt; {
      w = canvas.width = innerWidth;
      h = canvas.height = innerHeight;

      p = Array(Math.ceil(w / state.size)).fill(0);
    };
    window.addEventListener("resize", resize);
    sizeCtrl.onFinishChange((s) =&gt; resize());
    resize();

    const random = (items) =&gt; items[Math.floor(Math.random() * items.length)];

    const draw = () =&gt; {
      ctx.fillStyle = "rgba(0,0,0,.05)";
      ctx.fillRect(0, 0, w, h);
      ctx.fillStyle = state.color;

      ctx.font = state.size + 'px sans-serif';
      for (let i = 0; i &lt; p.length; i++) {
        let v = p[i];
        ctx.fillText(random(state.charset), i * state.size, v);
        p[i] = v &gt;= h || v &gt;= 10000 * Math.random() ? 0 : v + state.size;
      }
    };

    let interval = setInterval(draw, 1000 / state.fps);
    fpsCtrl.onFinishChange((fps) =&gt; {
      if (interval) {
        clearInterval(interval);
      }
      interval = setInterval(draw, 1000 / fps);
    });

    document.addEventListener("DOMContentLoaded", function() {
      // Your JavaScript code here
      // ...
    });
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;

In this completed HTML page, the provided JavaScript code is included within the &lt;script&gt; tag. The required dat.gui library is imported as a script source using the &lt;script&gt; tag with the src attribute. The canvas element is created dynamically and appended to the &lt;body&gt; element.

Save this HTML page as an HTML file (e.g., index.html), and open it in a web browser. The canvas animation should now run on the webpage.
User
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;HTML Viewer&lt;/title&gt;
    &lt;script src="https://cdn.skypack.dev/dat.gui@0.7.7"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;canvas id="canvas"&gt;&lt;/canvas&gt;
    &lt;div id="output"&gt;
        {{ html_content | safe }}
    &lt;/div&gt;

    &lt;script&gt;
        var script = {{ script_content | tojson }};
        eval(script);
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
This does not work I saved the script above in script.js
ChatGPT

It seems like you're trying to load an external JavaScript file (script.js) and execute its content within the HTML page. To achieve that, you need to reference the script.js file using a &lt;script&gt; tag in your HTML file. Here's an updated version of your HTML file:

html
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;HTML Viewer&lt;/title&gt;
    &lt;script src="https://cdn.skypack.dev/dat.gui@0.7.7"&gt;&lt;/script&gt;
    &lt;script src="script.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;canvas id="canvas"&gt;&lt;/canvas&gt;
    &lt;div id="output"&gt;
        {{ html_content | safe }}
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;

Make sure that the script.js file is located in the same directory as your HTML file. The &lt;script src="script.js"&gt;&lt;/script&gt; tag is added to the &lt;head&gt; section, loading the external JavaScript file into the HTML page.

Save this updated HTML file, and when you open it in a web browser, it will load and execute the content of the script.js file. Any code within script.js will be able to access and manipulate the elements in the HTML document, such as the canvas element and the div with the ID "output".
User
@app.route('/preview', methods=['GET', 'POST'])
def preview():
    # Read the existing script content from the file
    with open('scripts/script.js', 'r') as file:
        script_content = file.read()
    # HTML content to be displayed
    html_content = "&lt;p&gt;This is a dynamic HTML content. It can include various elements, &lt;br /&gt;such as paragraphs, headings, lists, etc.&lt;/p&gt;"
    return render_template('preview.html', html_content=html_content, script_content=script_content)                    I have other *.js I want to load and run from scripts/ how do I load them
ChatGPT

To load and run multiple JavaScript files from the scripts/ directory, you can modify the preview() function in your Flask application. Here's an updated version of the code that loads and includes multiple JavaScript files:

python
import os
from flask import Flask, render_template

app = Flask(__name__)

@app.route('/preview', methods=['GET', 'POST'])
def preview():
    script_files = []  # List to store the names of the JavaScript files

    # Read all JavaScript files from the 'scripts/' directory
    script_dir = 'scripts/'
    for filename in os.listdir(script_dir):
        if filename.endswith('.js'):
            script_path = os.path.join(script_dir, filename)
            with open(script_path, 'r') as file:
                script_content = file.read()
                script_files.append(script_content)

    # HTML content to be displayed
    html_content = "&lt;p&gt;This is a dynamic HTML content. It can include various elements, &lt;br /&gt;such as paragraphs, headings, lists, etc.&lt;/p&gt;"

    return render_template('preview.html', html_content=html_content, script_files=script_files)

In this updated code, the preview() function reads all JavaScript files in the scripts/ directory. It uses os.listdir() to get the list of files in the directory and then filters for files with the .js extension. The contents of each JavaScript file are stored in the script_files list.

The render_template() function is modified to pass the script_files list to the preview.html template. This allows you to access and include multiple JavaScript files in your HTML template.

In your preview.html template, you can loop through the script_files list and include each JavaScript file using &lt;script&gt; tags. Here's an example of how you can include the JavaScript files in the template:

html
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;HTML Viewer&lt;/title&gt;
    &lt;script src="https://cdn.skypack.dev/dat.gui@0.7.7"&gt;&lt;/script&gt;
    {% for script_file in script_files %}
        &lt;script&gt;
            {{ script_file | safe }}
        &lt;/script&gt;
    {% endfor %}
&lt;/head&gt;
&lt;body&gt;
    &lt;canvas id="canvas"&gt;&lt;/canvas&gt;
    &lt;div id="output"&gt;
        {{ html_content | safe }}
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;

In this example, the {% for script_file in script_files %} loop iterates over each JavaScript file in the script_files list. Within the loop, each file's content is included within a &lt;script&gt; tag using {{ script_file | safe }}.

Make sure that your JavaScript files are stored in the scripts/ directory relative to your Flask application file. You can have multiple JavaScript files in the scripts/ directory, and all of them will be loaded and included in the rendered HTML page.
User
if __name__ == '__main__':
   app.run(debug=True, port=5000, host='0,0,0,0')
ChatGPT

If you want to run your Flask application with the app.run() statement including the debug=True, port=5000, and host='0.0.0.0' arguments, here's the updated code:

python
if __name__ == '__main__':
    app.run(debug=True, port=5000, host='0.0.0.0')

With this configuration, your Flask application will run in debug mode (debug=True) for better error reporting, it will be accessible on port 5000 (port=5000), and it will listen on all available network interfaces (host='0.0.0.0'). This allows your Flask application to be accessed from other devices on the same network.

Make sure you have Flask installed and any required dependencies before running the script. When you execute this code, your Flask application will run, and you can access it by navigating to the appropriate IP address and port (e.g., http://your-ip-address:5000/) in a web browser.
User
This does not let me choose a *.js file ??    @app.route('/edit_script', methods=['GET', 'POST'])
def edit_script():
    script_files = []  # List to store the names of the JavaScript files
    # Read all JavaScript files from the 'scripts/' directory
    script_dir = 'scripts/'
    for filename in os.listdir(script_dir):
        if filename.endswith('.js'):
            script_path = os.path.join(script_dir, filename)
            with open(script_path, 'r') as file:
                script_content = file.read()
                script_files.append(script_content)   
                # Path to the script file
                backup_file = f"scripts/script_backup_{datetime.datetime.now().strftime('%Y%m%d%H%M%S')}.js"
                shutil.copy(script_file, backup_file)
                # Read the existing script content from the file

                return render_template('edit_script.html', script_content=script_content)
                # Define the file path to store the script content
ChatGPT

If you want to allow users to choose a JavaScript file for editing in your Flask application, you can modify the edit_script() function to include file selection functionality. Here's an updated version of the code:

python
import os
from flask import Flask, render_template, request
import shutil
import datetime

app = Flask(__name__)

@app.route('/edit_script', methods=['GET', 'POST'])
def edit_script():
    if request.method == 'POST':
        selected_file = request.files['script_file']
        if selected_file and selected_file.filename.endswith('.js'):
            script_content = selected_file.read().decode('utf-8')

            # Path to the script file
            script_dir = 'scripts/'
            backup_file = f"scripts/script_backup_{datetime.datetime.now().strftime('%Y%m%d%H%M%S')}.js"
            script_path = os.path.join(script_dir, selected_file.filename)
            script_files = []
            for filename in os.listdir(script_dir):
                if filename.endswith('.js'):
                    with open(os.path.join(script_dir, filename), 'r') as file:
                        script_files.append(file.read())

            shutil.copy(script_path, backup_file)

            return render_template('edit_script.html', script_files=script_files, script_content=script_content)

    # Read all JavaScript files from the 'scripts/' directory
    script_dir = 'scripts/'
    script_files = []
    for filename in os.listdir(script_dir):
        if filename.endswith('.js'):
            with open(os.path.join(script_dir, filename), 'r') as file:
                script_files.append(file.read())

    return render_template('edit_script.html', script_files=script_files)

if __name__ == '__main__':
    app.run(debug=True, port=5000, host='0.0.0.0')

In this updated code, the edit_script() function handles both GET and POST requests. If the request method is POST, it checks if a file with the .js extension was selected, reads its content, and sets it as the script_content variable. It then creates a backup of the selected file and renders the edit_script.html template with the list of script files and the selected script content.

When the request method is GET, the function reads all JavaScript files from the scripts/ directory and passes them to the template as script_files.

You can modify your edit_script.html template to include a file input field (&lt;input type="file" name="script_file"&gt;) to allow users to select a JavaScript file for editing. Additionally, you can display the list of available script files and the content of the selected script.

Ensure that you have the edit_script.html template in your templates directory and the necessary CSS and JavaScript files to style and enhance the editing experience.

With these modifications, users can choose a JavaScript file for editing, and the selected file's content will be displayed in the edit_script.html template.
User
from flask import Flask, render_template, request
import datetime
import shutil
import os
app = Flask(__name__)
@app.route('/')
def index():
    return render_template('index.html')
@app.route('/NOTES')
def plain_html():
    return render_template('NOTES.html')
@app.route('/preview', methods=['GET', 'POST'])
def preview():
    # Read the existing script content from the file
    with open('scripts/script.js', 'r') as file:
        script_content = file.read()
    # HTML content to be displayed
    html_content = "&lt;p&gt;This is a dynamic HTML content. It can include various elements, &lt;br /&gt;such as paragraphs, headings, lists, etc.&lt;/p&gt;"
    return render_template('preview.html', html_content=html_content, script_content=script_content)
@app.route('/edit_script', methods=['GET', 'POST'])
def edit_script():
    if request.method == 'POST':
        selected_file = request.files['script_file']
        if selected_file and selected_file.filename.endswith('.js'):
            script_content = selected_file.read().decode('utf-8')

            # Path to the script file
            script_dir = 'scripts/'
            backup_file = f"scripts/script_backup_{datetime.datetime.now().strftime('%Y%m%d%H%M%S')}.js"
            script_path = os.path.join(script_dir, selected_file.filename)
            script_files = []
            for filename in os.listdir(script_dir):
                if filename.endswith('.js'):
                    with open(os.path.join(script_dir, filename), 'r') as file:
                        script_files.append(file.read())

            shutil.copy(script_path, backup_file)

            return render_template('edit_script.html', script_files=script_files, script_content=script_content)

    # Read all JavaScript files from the 'scripts/' directory
    script_dir = 'scripts/'
    script_files = []
    for filename in os.listdir(script_dir):
        if filename.endswith('.js'):
            with open(os.path.join(script_dir, filename), 'r') as file:
                script_files.append(file.read())

    return render_template('edit_script.html', script_files=script_files)

#script_file = os.path.join(os.getcwd(), 'scripts', 'script.js')
script_file = "scripts/script.js"
@app.route('/save_script', methods=['POST'])
def save_script():
    # Retrieve the updated script content from the form data
    updated_script = request.form.get('script_content')
    # Write the updated script content to the file
    with open(script_file, 'w') as file:
        file.write(updated_script)
    return 'Script updated successfully.'
if __name__ == '__main__':
   app.run(debug=True, port=5000, host='0.0.0.0')

ChatGPT

The provided Flask application code appears to have all the necessary routes and functionality for serving HTML templates, previewing content, editing scripts, and saving script updates. Here's the code with some formatting adjustments:

python
from flask import Flask, render_template, request
import datetime
import shutil
import os

app = Flask(__name__)

@app.route('/')
def index():
    return render_template('index.html')

@app.route('/NOTES')
def plain_html():
    return render_template('NOTES.html')

@app.route('/preview', methods=['GET', 'POST'])
def preview():
    # Read the existing script content from the file
    with open('scripts/script.js', 'r') as file:
        script_content = file.read()
    # HTML content to be displayed
    html_content = "&lt;p&gt;This is a dynamic HTML content. It can include various elements, &lt;br /&gt;such as paragraphs, headings, lists, etc.&lt;/p&gt;"
    return render_template('preview.html', html_content=html_content, script_content=script_content)

@app.route('/edit_script', methods=['GET', 'POST'])
def edit_script():
    if request.method == 'POST':
        selected_file = request.files['script_file']
        if selected_file and selected_file.filename.endswith('.js'):
            script_content = selected_file.read().decode('utf-8')

            # Path to the script file
            script_dir = 'scripts/'
            backup_file = f"scripts/script_backup_{datetime.datetime.now().strftime('%Y%m%d%H%M%S')}.js"
            script_path = os.path.join(script_dir, selected_file.filename)
            script_files = []
            for filename in os.listdir(script_dir):
                if filename.endswith('.js'):
                    with open(os.path.join(script_dir, filename), 'r') as file:
                        script_files.append(file.read())

            shutil.copy(script_path, backup_file)

            return render_template('edit_script.html', script_files=script_files, script_content=script_content)

    # Read all JavaScript files from the 'scripts/' directory
    script_dir = 'scripts/'
    script_files = []
    for filename in os.listdir(script_dir):
        if filename.endswith('.js'):
            with open(os.path.join(script_dir, filename), 'r') as file:
                script_files.append(file.read())

    return render_template('edit_script.html', script_files=script_files)

script_file = "scripts/script.js"

@app.route('/save_script', methods=['POST'])
def save_script():
    # Retrieve the updated script content from the form data
    updated_script = request.form.get('script_content')
    # Write the updated script content to the file
    with open(script_file, 'w') as file:
        file.write(updated_script)
    return 'Script updated successfully.'

if __name__ == '__main__':
    app.run(debug=True, port=5000, host='0.0.0.0')

This code sets up routes for different pages, such as the index page (/), a plain HTML page (/NOTES), preview page (/preview), and the script editor page (/edit_script). It also includes a route for saving the updated script content (/save_script).

Ensure that you have the necessary HTML templates (index.html, NOTES.html, preview.html, edit_script.html) in a templates/ directory and the required CSS and JavaScript files for styling and functionality.

When you run this Flask application, it will start a development server on http://localhost:5000/, allowing you to access and interact with the different pages and functionality provided by the routes.
User
I want it to open a scripts/*.js and save it as scripts/script.js  Then allow it to be viewed or edited . It gives me no list from scripts/
ChatGPT

To open and save a specific JavaScript file from the scripts/ directory as scripts/script.js, you need to modify the code accordingly. Here's an updated version of the Flask application that accomplishes this:

python
from flask import Flask, render_template, request
import datetime
import shutil
import os

app = Flask(__name__)

script_dir = 'scripts/'
script_file = os.path.join(script_dir, 'script.js')

@app.route('/')
def index():
    return render_template('index.html')

@app.route('/NOTES')
def plain_html():
    return render_template('NOTES.html')

@app.route('/preview')
def preview():
    # Read the existing script content from the file
    with open(script_file, 'r') as file:
        script_content = file.read()
    # HTML content to be displayed
    html_content = "&lt;p&gt;This is a dynamic HTML content. It can include various elements, &lt;br /&gt;such as paragraphs, headings, lists, etc.&lt;/p&gt;"
    return render_template('preview.html', html_content=html_content, script_content=script_content)

@app.route('/edit_script', methods=['GET', 'POST'])
def edit_script():
    if request.method == 'POST':
        selected_file = request.files['script_file']
        if selected_file and selected_file.filename.endswith('.js'):
            script_content = selected_file.read().decode('utf-8')

            # Write the updated script content to the file
            with open(script_file, 'w') as file:
                file.write(script_content)

    script_files = []
    for filename in os.listdir(script_dir):
        if filename.endswith('.js'):
            with open(os.path.join(script_dir, filename), 'r') as file:
                script_files.append(file.read())

    return render_template('edit_script.html', script_files=script_files)

@app.route('/save_script', methods=['POST'])
def save_script():
    # Retrieve the updated script content from the form data
    updated_script = request.form.get('script_content')
    # Write the updated script content to the file
    with open(script_file, 'w') as file:
        file.write(updated_script)
    return 'Script updated successfully.'

if __name__ == '__main__':
    app.run(debug=True, port=5000, host='0.0.0.0')

In this updated code, the script_dir variable is set to the 'scripts/' directory, and the script_file variable is set to 'scripts/script.js'.

When opening the script for preview (/preview route), it reads the content of script_file instead of a hardcoded path.

In the edit_script() function, after saving the uploaded file's content to script_file, it reloads the list of script files from the script_dir to update the available options.

Ensure that you have the necessary HTML templates (index.html, NOTES.html, preview.html, edit_script.html) in a templates/ directory and the required CSS and JavaScript files for styling and functionality.

Now, when you run the Flask application, it will open and save JavaScript files in the scripts/ directory as scripts/script.js. The /preview route will display the content of scripts/script.js, and the /edit_script route will allow you to select a JavaScript file from the scripts/ directory, save it as scripts/script.js, and display the list of available script files for editing.
User
Method Not Allowed
The method is not allowed for the requested URL.
ChatGPT

The "Method Not Allowed" error typically occurs when you're trying to access a URL using an HTTP method that is not allowed for that route. In your Flask application, this error may occur if you're trying to access a route using an incorrect HTTP method.

Here are a few steps to troubleshoot and resolve the "Method Not Allowed" error:

    Verify the HTTP method: Check the route and the HTTP method you're using to access it. Ensure that you're using the correct HTTP method (e.g., GET, POST) that is allowed for that specific route. Double-check the route definition in your Flask application and compare it with the method you're using to access it.

    Check the route decorators: Make sure that the route you're trying to access is properly decorated with the correct HTTP methods. For example, if you're trying to use the POST method to access a route, ensure that the route is decorated with @app.route('/your-route', methods=['POST']).

    Clear browser cache: Sometimes, caching issues can cause the browser to use incorrect or outdated information. Clear your browser cache and try accessing the URL again.

    Check for any middleware or firewalls: If you're using any middleware or firewalls in your Flask application, review their configurations to ensure they're not blocking the HTTP method you're trying to use.

By following these steps, you should be able to identify and resolve the "Method Not Allowed" error in your Flask application.
User
I have many files in scripts/     I backup all my files .  What I need is to access them. I want to choose one from a list then save it as scripts/script.js    That way I can view and edit the file
ChatGPT

Apologies for the confusion. To access and choose a JavaScript file from a list in the scripts/ directory, and then save it as scripts/script.js for viewing and editing, you can modify the edit_script() function as follows:

python
from flask import Flask, render_template, request, redirect, url_for
import os
import shutil

app = Flask(__name__)

script_dir = 'scripts/'
script_file = os.path.join(script_dir, 'script.js')

@app.route('/')
def index():
    return render_template('index.html')

@app.route('/NOTES')
def plain_html():
    return render_template('NOTES.html')

@app.route('/preview')
def preview():
    with open(script_file, 'r') as file:
        script_content = file.read()
    html_content = "&lt;p&gt;This is a dynamic HTML content. It can include various elements, such as paragraphs, headings, lists, etc.&lt;/p&gt;"
    return render_template('preview.html', html_content=html_content, script_content=script_content)

@app.route('/edit_script', methods=['GET', 'POST'])
def edit_script():
    if request.method == 'POST':
        selected_file = request.form['script_file']
        if selected_file.endswith('.js'):
            selected_file_path = os.path.join(script_dir, selected_file)
            shutil.copy(selected_file_path, script_file)
            return redirect(url_for('edit_script'))

    script_files = []
    for filename in os.listdir(script_dir):
        if filename.endswith('.js'):
            script_files.append(filename)

    return render_template('edit_script.html', script_files=script_files)

@app.route('/save_script', methods=['POST'])
def save_script():
    updated_script = request.form['script_content']
    with open(script_file, 'w') as file:
        file.write(updated_script)
    return 'Script updated successfully.'

if __name__ == '__main__':
    app.run(debug=True, port=5000, host='0.0.0.0')

In this updated code:

    The edit_script() function allows users to choose a JavaScript file from a list in the scripts/ directory. When a file is selected and the form is submitted, it copies the selected file to scripts/script.js using shutil.copy().

    The script_files list is populated with the names of JavaScript files present in the scripts/ directory.

    The &lt;option&gt; elements for the script files are dynamically generated in the edit_script.html template using a Jinja loop.

    After selecting a file and submitting the form, the function redirects back to the edit_script() route to update the list of available script files.

Now, you can access the /edit_script route to choose a JavaScript file from the list, and it will be saved as scripts/script.js. You can then view and edit the selected file by accessing the /preview route.
User
Method Not Allowed
The method is not allowed for the requested URL.
ChatGPT

I apologize for the inconvenience. The "Method Not Allowed" error typically occurs when the HTTP method used to access a URL is not allowed for that specific route.

In the code provided earlier, the "Method Not Allowed" error could occur if you're trying to access the /edit_script route using an HTTP method other than POST. The /edit_script route is intended to handle POST requests for selecting a JavaScript file.

To resolve the issue, make sure you're using the correct HTTP method when accessing the /edit_script route. You can modify your code to explicitly allow both GET and POST methods for the /edit_script route by updating the methods parameter in the route decorator. Here's an example:

python
@app.route('/edit_script', methods=['GET', 'POST'])
def edit_script():
    # Rest of the code

With this change, the /edit_script route will accept both GET and POST requests, allowing you to access the route for selecting a JavaScript file.

Ensure that you update any corresponding form or link in your HTML template to use the correct method when interacting with the /edit_script route.

If you're still encountering the "Method Not Allowed" error after making these adjustments, please provide the specific URL and method you're using, as well as the corresponding route definition and any relevant HTML code. This information will help further troubleshoot the issue.
User
Method Not Allowed
The method is not allowed for the requested URL   same thing 
ChatGPT

I apologize for the confusion. To further troubleshoot the "Method Not Allowed" error, please ensure the following:

    Check the HTTP method: Confirm that you're using the correct HTTP method (e.g., GET, POST) when accessing the URL. Make sure it matches the allowed methods specified in the route decorator.

    Verify the URL: Double-check that the URL you're accessing matches the route definition in your Flask application. Ensure that there are no typos or incorrect paths.

    Clear browser cache: Clear your browser cache to eliminate any potential caching issues. Sometimes, the browser may cache previous responses, leading to the "Method Not Allowed" error.

    Inspect route decorators: Review the route decorators for the relevant route. Ensure that the correct HTTP methods are specified in the methods parameter of the decorator. For example, if you need to handle both GET and POST methods, use methods=['GET', 'POST'] in the decorator.

    Verify the form action or link: If you're encountering the error while submitting a form or following a link, check that the form's action attribute or the link's href attribute points to the correct URL and uses the appropriate HTTP method.

If you've confirmed these aspects and are still experiencing the error, please provide the relevant route definition, the URL you're trying to access, and any corresponding HTML code. This additional information will help in identifying the cause of the "Method Not Allowed" error.
User
preview .html                             &lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;HTML Viewer&lt;/title&gt;
    &lt;script src="https://cdn.skypack.dev/dat.gui@0.7.7"&gt;&lt;/script&gt;
    {% for script_file in script_files %}
        &lt;script&gt;
            {{ script_file | safe }}
        &lt;/script&gt;
    {% endfor %}

    &lt;style type="text/css"&gt;
        html{
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        
        body {
            margin: 0;
            padding: 0;
            color: #fff;
            background-color: #000;
        }
        
        canvas {
            -webkit-tap-highlight-color: transparent;
            tap-highlight-color: transparent;
            -webkit-user-select: none;
            user-select: none;
            cursor: pointer;
        }
        &lt;/style&gt;   
&lt;/head&gt;
&lt;body&gt;
    &lt;canvas id="canvas"&gt;&lt;/canvas&gt;
    &lt;div id="output"&gt;
        {{ html_content | safe }}
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
ChatGPT

The preview.html template you provided seems to be missing a script block for the main JavaScript logic. Here's an updated version of the template that includes the necessary script block:

html
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;HTML Viewer&lt;/title&gt;
    &lt;script src="https://cdn.skypack.dev/dat.gui@0.7.7"&gt;&lt;/script&gt;
    {% for script_file in script_files %}
        &lt;script src="{{ script_file }}"&gt;&lt;/script&gt;
    {% endfor %}

    &lt;style type="text/css"&gt;
        html {
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        
        body {
            margin: 0;
            padding: 0;
            color: #fff;
            background-color: #000;
        }
        
        canvas {
            -webkit-tap-highlight-color: transparent;
            tap-highlight-color: transparent;
            -webkit-user-select: none;
            user-select: none;
            cursor: pointer;
        }
    &lt;/style&gt;
    
    &lt;script&gt;
        // Add your JavaScript logic here
        // This script block will contain the main code for rendering and interacting with the canvas
        // You can customize it based on your requirements
        window.onload = function() {
            // Your code here
        }
    &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;canvas id="canvas"&gt;&lt;/canvas&gt;
    &lt;div id="output"&gt;
        {{ html_content | safe }}
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;

In this updated template, the {% for script_file in script_files %} loop is used to dynamically generate &lt;script&gt; tags for each JavaScript file in the script_files list. The src attribute of the &lt;script&gt; tag points to the corresponding script file.

Additionally, the script block after the &lt;style&gt; block is where you can add your main JavaScript logic. This is where you can write the code for rendering and interacting with the canvas.

Make sure you pass the script_files variable from the Flask route to the template to populate the list of JavaScript files.

With this updated template, the JavaScript files specified in the script_files list will be included in the HTML page, allowing you to run and interact with them in the browser.
User
THis is preview.html it should load the script from scripts/script.js
ChatGPT

Apologies for the confusion. If you want the preview.html template to specifically load the script from scripts/script.js, you can modify the template as follows:

html
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;HTML Viewer&lt;/title&gt;
    &lt;script src="https://cdn.skypack.dev/dat.gui@0.7.7"&gt;&lt;/script&gt;
    &lt;script src="{{ url_for('static', filename='scripts/script.js') }}"&gt;&lt;/script&gt;

    &lt;style type="text/css"&gt;
        html {
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        
        body {
            margin: 0;
            padding: 0;
            color: #fff;
            background-color: #000;
        }
        
        canvas {
            -webkit-tap-highlight-color: transparent;
            tap-highlight-color: transparent;
            -webkit-user-select: none;
            user-select: none;
            cursor: pointer;
        }
    &lt;/style&gt;
    
    &lt;script&gt;
        // Add your JavaScript logic here
        // This script block will contain the main code for rendering and interacting with the canvas
        // You can customize it based on your requirements
        window.onload = function() {
            // Your code here
        }
    &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;canvas id="canvas"&gt;&lt;/canvas&gt;
    &lt;div id="output"&gt;
        {{ html_content | safe }}
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;

In this updated template, the script is loaded using the url_for() function, which generates the correct URL for the scripts/script.js file. The url_for() function retrieves the static file from the static folder, which is the default folder for static files in Flask.

Ensure that the scripts/script.js file exists in the static folder within your Flask application's directory structure. If the file is located elsewhere, adjust the url_for() function accordingly.

Now, when you render the preview.html template, it will load the scripts/script.js file, allowing you to execute and interact with the JavaScript code within the HTML page.
User
&lt;script&gt;
        // Add your JavaScript logic here
        // This script block will contain the main code for rendering and interacting with the canvas
        // You can customize it based on your requirements
        window.onload = function() {
            // Your code here
        }
    &lt;/script&gt;                    What is this ??? 
ChatGPT

The provided script block is a placeholder for your custom JavaScript code. It is where you can add your own logic, functions, and event handlers to interact with the HTML elements, manipulate the canvas, or perform any other desired operations.

Here's a breakdown of the script block:

javascript
// Add your JavaScript logic here
// This script block will contain the main code for rendering and interacting with the canvas
// You can customize it based on your requirements
window.onload = function() {
    // Your code here
}

    window.onload: This event handler function executes when the HTML document and its associated resources (stylesheets, images, etc.) have finished loading. It ensures that your JavaScript code runs only when the entire page has loaded.

    // Your code here: This is where you can insert your custom JavaScript code. You can define functions, create variables, manipulate the DOM, interact with the canvas, handle events, or perform any other operations you need.

For example, you can use the script block to create and render shapes on the canvas, handle mouse or keyboard events, fetch data from APIs, perform calculations, or implement any other desired functionality.

To customize the behavior of your web page, you can modify the script block by adding your specific JavaScript code within the window.onload function.

Please replace the comment // Your code here with your own JavaScript code that reflects the desired behavior you want to achieve in your application.
User
All I want to achieve is in scripts/script.js   ??
ChatGPT

If you want to load and execute the JavaScript code from the scripts/script.js file without adding additional custom code in the HTML template, you can modify the preview.html template as follows:

html
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;HTML Viewer&lt;/title&gt;
    &lt;script src="https://cdn.skypack.dev/dat.gui@0.7.7"&gt;&lt;/script&gt;
    &lt;script src="{{ url_for('static', filename='scripts/script.js') }}"&gt;&lt;/script&gt;

    &lt;style type="text/css"&gt;
        html {
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        
        body {
            margin: 0;
            padding: 0;
            color: #fff;
            background-color: #000;
        }
        
        canvas {
            -webkit-tap-highlight-color: transparent;
            tap-highlight-color: transparent;
            -webkit-user-select: none;
            user-select: none;
            cursor: pointer;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;canvas id="canvas"&gt;&lt;/canvas&gt;
    &lt;div id="output"&gt;
        {{ html_content | safe }}
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;

This updated template removes the empty script block and instead loads the JavaScript code directly from the scripts/script.js file using the script tag with the src attribute. The url_for() function is used to generate the correct URL for the static file.

Ensure that the scripts/script.js file exists in the static folder within your Flask application's directory structure. If the file is located elsewhere, adjust the url_for() function accordingly.

With this modification, the scripts/script.js file will be loaded and executed in the HTML page, allowing you to achieve your desired functionality without requiring additional code in the HTML template.
User
The whole purpose is to load and edit different javascripts ( scripts/*.js  for testing  
ChatGPT

Apologies for the confusion. If you want to dynamically load and edit different JavaScript files from the scripts/ directory, you can modify the edit_script() function and the edit_script.html template as follows:

python
import os

# ... existing code ...

@app.route('/edit_script', methods=['GET', 'POST'])
def edit_script():
    if request.method == 'POST':
        selected_file = request.form['script_file']
        if selected_file.endswith('.js'):
            selected_file_path = os.path.join(script_dir, selected_file)
            shutil.copy(selected_file_path, script_file)
            return redirect(url_for('edit_script'))

    script_files = []
    for filename in os.listdir(script_dir):
        if filename.endswith('.js'):
            script_files.append(filename)

    return render_template('edit_script.html', script_files=script_files)

# ... existing code ...

In the edit_script() function, we retrieve the selected JavaScript file from the form submission and copy it to script.js using shutil.copy(). Then, we redirect back to the edit_script route to update the list of available script files.

Here's an example edit_script.html template that allows you to select and edit different JavaScript files:

html
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Edit Script&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Edit Script&lt;/h1&gt;
    &lt;form method="POST" action="{{ url_for('edit_script') }}"&gt;
        &lt;label for="script_file"&gt;Select a JavaScript file:&lt;/label&gt;
        &lt;select name="script_file" id="script_file"&gt;
            {% for script_file in script_files %}
                &lt;option value="{{ script_file }}"&gt;{{ script_file }}&lt;/option&gt;
            {% endfor %}
        &lt;/select&gt;
        &lt;br&gt;
        &lt;input type="submit" value="Load Script"&gt;
    &lt;/form&gt;
    &lt;hr&gt;
    &lt;h2&gt;Edit the selected script:&lt;/h2&gt;
    &lt;form method="POST" action="{{ url_for('save_script') }}"&gt;
        &lt;textarea name="script_content" rows="10" cols="50"&gt;{{ script_content }}&lt;/textarea&gt;
        &lt;br&gt;
        &lt;input type="submit" value="Save Script"&gt;
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;

In this edit_script.html template, we generate a dropdown list (&lt;select&gt;) of the available JavaScript files using a loop. When a file is selected and the form is submitted, the route will handle the selection and redirect back to the edit_script route to update the list.

Below the file selection section, we provide a text area (&lt;textarea&gt;) where you can edit the content of the selected script. When the form is submitted, it will call the save_script() route to save the updated script content.

Make sure to adjust the file paths and URLs based on your directory structure and Flask setup.

With these modifications, you can select and edit different JavaScript files from the scripts/ directory, and the updated content will be saved to scripts/script.js for further viewing and editing.
User
This still does not let me choose a javascript file from scripts/*.js    Why cant you do that ?
ChatGPT

I apologize for the confusion. It seems I misunderstood your requirements earlier. To allow the selection of JavaScript files from the scripts/ directory, you can modify the edit_script() function and the edit_script.html template as follows:

python
import os

# ... existing code ...

@app.route('/edit_script', methods=['GET', 'POST'])
def edit_script():
    if request.method == 'POST':
        selected_file = request.form['script_file']
        if selected_file.endswith('.js'):
            selected_file_path = os.path.join(script_dir, selected_file)
            shutil.copy(selected_file_path, script_file)
            return redirect(url_for('edit_script'))

    script_files = []
    for filename in os.listdir(script_dir):
        if filename.endswith('.js'):
            script_files.append(filename)

    return render_template('edit_script.html', script_files=script_files)

# ... existing code ...

In the modified edit_script() function, we list all the JavaScript files in the scripts/ directory and add them to the script_files list. This allows us to populate the dropdown list in the edit_script.html template with the available JavaScript files.

Here's an example edit_script.html template that enables the selection of JavaScript files:

html
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Edit Script&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Edit Script&lt;/h1&gt;
    &lt;form method="POST" action="{{ url_for('edit_script') }}"&gt;
        &lt;label for="script_file"&gt;Select a JavaScript file:&lt;/label&gt;
        &lt;select name="script_file" id="script_file"&gt;
            {% for script_file in script_files %}
                &lt;option value="{{ script_file }}"&gt;{{ script_file }}&lt;/option&gt;
            {% endfor %}
        &lt;/select&gt;
        &lt;br&gt;
        &lt;input type="submit" value="Load Script"&gt;
    &lt;/form&gt;
    &lt;hr&gt;
    &lt;h2&gt;Edit the selected script:&lt;/h2&gt;
    &lt;form method="POST" action="{{ url_for('save_script') }}"&gt;
        &lt;textarea name="script_content" rows="10" cols="50"&gt;{{ script_content }}&lt;/textarea&gt;
        &lt;br&gt;
        &lt;input type="submit" value="Save Script"&gt;
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;

In this updated template, the &lt;select&gt; element is populated with the available JavaScript files (script_files) using a loop. When a file is selected and the form is submitted, the selected file is copied to scripts/script.js, and the page is redirected back to the edit_script route.

Please ensure that the file paths, directory structure, and Flask setup are adjusted according to your requirements.

With these modifications, you should be able to select different JavaScript files from the scripts/ directory and load them for editing in the edit_script route.
User
when you choose the javascript file it does not load in the textarea
ChatGPT

Apologies for the oversight. To ensure that the selected JavaScript file is loaded into the textarea for editing, you need to modify the edit_script() route to read the content of the selected file and pass it to the template. Here's an updated version of the code:

python
import os

# ... existing code ...

@app.route('/edit_script', methods=['GET', 'POST'])
def edit_script():
    if request.method == 'POST':
        selected_file = request.form['script_file']
        if selected_file.endswith('.js'):
            selected_file_path = os.path.join(script_dir, selected_file)
            shutil.copy(selected_file_path, script_file)
            with open(selected_file_path, 'r') as file:
                script_content = file.read()
            return render_template('edit_script.html', script_files=script_files, script_content=script_content)

    script_files = []
    for filename in os.listdir(script_dir):
        if filename.endswith('.js'):
            script_files.append(filename)

    return render_template('edit_script.html', script_files=script_files)

# ... existing code ...

In this updated code, after copying the selected JavaScript file to scripts/script.js, we also read the content of the selected file using open() and file.read(). Then we pass the script_content variable to the edit_script.html template along with the script_files list.

Ensure that the file paths, directory structure, and Flask setup are adjusted accordingly.

With this modification, when you select a JavaScript file from the dropdown list and submit the form, the content of the selected file will be loaded into the textarea for editing in the edit_script.html template.
User
local variable 'script_files' referenced before assignment
ChatGPT

Apologies for the error. The script_files variable needs to be defined outside the if statement to ensure it's accessible in both branches of the code. Here's the corrected code:

python
import os

# ... existing code ...

@app.route('/edit_script', methods=['GET', 'POST'])
def edit_script():
    script_files = []
    for filename in os.listdir(script_dir):
        if filename.endswith('.js'):
            script_files.append(filename)

    if request.method == 'POST':
        selected_file = request.form['script_file']
        if selected_file.endswith('.js'):
            selected_file_path = os.path.join(script_dir, selected_file)
            shutil.copy(selected_file_path, script_file)
            with open(selected_file_path, 'r') as file:
                script_content = file.read()
            return render_template('edit_script.html', script_files=script_files, script_content=script_content)

    return render_template('edit_script.html', script_files=script_files)

# ... existing code ...

Now the script_files variable is defined before the if statement and can be accessed in both the if and return branches of the code. This ensures that the variable is available when rendering the template.

Please note that the above code assumes that script_dir is a defined variable representing the directory path of the JavaScript files.

With this update, the script_files variable should be accessible and prevent the "local variable 'script_files' referenced before assignment" error.
User
from flask import Flask, render_template, request, redirect, url_for
import datetime
import shutil
import os
app = Flask(__name__)
@app.route('/')
def index():
    return render_template('index.html')
@app.route('/NOTES')
def plain_html():
    return render_template('NOTES.html')
@app.route('/preview', methods=['GET', 'POST'])
def preview():
    script_files = []  # List to store the names of the JavaScript files

    # Read all JavaScript files from the 'scripts/' directory
    script_dir = 'scripts/'
    for filename in os.listdir(script_dir):
        if filename.endswith('.js'):
            script_path = os.path.join(script_dir, filename)
            with open(script_path, 'r') as file:
                script_content = file.read()
                script_files.append(script_content)

    # HTML content to be displayed
    html_content = "&lt;p&gt;This is a dynamic HTML content. It can include various elements, &lt;br /&gt;such as paragraphs, headings, lists, etc.&lt;/p&gt;"

    return render_template('preview.html', html_content=html_content, script_files=script_files)

@app.route('/edit_script', methods=['GET', 'POST'])
def edit_script():
    script_dir = "scripts/"
    script_files = []
    for filename in os.listdir(script_dir):
        if filename.endswith('.js'):
            script_files.append(filename)

    if request.method == 'POST':
        selected_file = request.form['script_file']
        if selected_file.endswith('.js'):
            selected_file_path = os.path.join(script_dir, selected_file)
            shutil.copy(selected_file_path, script_file)
            with open(selected_file_path, 'r') as file:
                script_content = file.read()
            return render_template('edit_script.html', script_files=script_files, script_content=script_content)

    return render_template('edit_script.html', script_files=script_files)


# Define the file path to store the script content
script_file = os.path.join(os.getcwd(), 'scripts', 'script.js')
@app.route('/save_script', methods=['POST'])
def save_script():
    # Retrieve the updated script content from the form data
    updated_script = request.form.get('script_content')
    # Write the updated script content to the file
    with open(script_file, 'w') as file:
        file.write(updated_script)
    return render_template('index.html')
if __name__ == '__main__':
   app.run(debug=True, port=5000)

This does not show the  scripts/script.js  in preview.html ???
ChatGPT

Apologies for the confusion. To ensure that the scripts/script.js file is loaded and displayed in the preview.html template, you need to make a small modification in the preview() route. Here's the corrected code:

python
from flask import Flask, render_template, request, redirect, url_for
import os

app = Flask(__name__)

@app.route('/')
def index():
    return render_template('index.html')

@app.route('/NOTES')
def plain_html():
    return render_template('NOTES.html')

@app.route('/preview', methods=['GET', 'POST'])
def preview():
    script_files = []  # List to store the names of the JavaScript files

    # Read all JavaScript files from the 'scripts/' directory
    script_dir = 'scripts/'
    for filename in os.listdir(script_dir):
        if filename.endswith('.js'):
            script_files.append(filename)

    # HTML content to be displayed
    html_content = "&lt;p&gt;This is a dynamic HTML content. It can include various elements, &lt;br /&gt;such as paragraphs, headings, lists, etc.&lt;/p&gt;"

    return render_template('preview.html', html_content=html_content, script_files=script_files)

# ... existing code ...

if __name__ == '__main__':
   app.run(debug=True, port=5000)

In the preview() route, we retrieve the list of JavaScript files in the scripts/ directory and pass it as the script_files variable to the preview.html template.

Make sure that the scripts/ directory contains the necessary JavaScript files.

With this modification, when you visit the /preview route, the scripts/script.js file should be available as script_files in the preview.html template, allowing you to display and interact with it.
User
@app.route('/preview', methods=['GET', 'POST'])
def preview():
    script_files = []  # List to store the names of the JavaScript files

    # Read all JavaScript files from the 'scripts/' directory
    script_dir = 'scripts/'
    for filename in os.listdir(script_dir):
        if filename.endswith('.js'):
            script_files.append(filename)

    # HTML content to be displayed
    html_content = "&lt;p&gt;This is a dynamic HTML content. It can include various elements, &lt;br /&gt;such as paragraphs, headings, lists, etc.&lt;/p&gt;"

    return render_template('preview.html', html_content=html_content, script_files=script_files)
I do not understand the listdir when I just want to see scripts/script.js  ??
ChatGPT

Apologies for the confusion. If you only want to display the scripts/script.js file in the preview.html template, you can modify the code as follows:

python
@app.route('/preview', methods=['GET', 'POST'])
def preview():
    script_file = 'scripts/script.js'  # Path to the script file

    # Check if the script file exists
    if os.path.isfile(script_file):
        # Read the content of the script file
        with open(script_file, 'r') as file:
            script_content = file.read()
    else:
        script_content = 'No script file found'

    # HTML content to be displayed
    html_content = "&lt;p&gt;This is a dynamic HTML content. It can include various elements, &lt;br /&gt;such as paragraphs, headings, lists, etc.&lt;/p&gt;"

    return render_template('preview.html', html_content=html_content, script_content=script_content)

In this modified code, we directly specify the path to the scripts/script.js file using the script_file variable. We then check if the file exists using os.path.isfile(). If the file exists, we read its content using open() and store it in the script_content variable. If the file doesn't exist, we set script_content to indicate that no script file was found.

Ensure that the scripts/script.js file exists in the specified location.

With this modification, when you visit the /preview route, the content of the scripts/script.js file will be displayed in the preview.html template.
User
I want to start a log file to find problems ?? 
ChatGPT

To start a log file in your Flask application, you can use the built-in logging module in Python. Here's an example of how you can configure logging in your Flask app:

python
import logging
from logging.handlers import RotatingFileHandler
from flask import Flask

app = Flask(__name__)

# Configure logging
log_file = 'app.log'  # Path to the log file

# Create a rotating file handler to manage log files
handler = RotatingFileHandler(log_file, maxBytes=1024 * 1024, backupCount=10)
handler.setLevel(logging.INFO)

# Create a log formatter
formatter = logging.Formatter('%(asctime)s - %(levelname)s - %(message)s')
handler.setFormatter(formatter)

# Add the log handler to the Flask app
app.logger.addHandler(handler)

# ... existing routes and code ...

if __name__ == '__main__':
    app.run(debug=True, port=5000)

In this example, we configure a rotating file handler (RotatingFileHandler) that will create a log file named app.log. The maxBytes argument specifies the maximum file size in bytes before it rotates to a new file, and backupCount defines the number of backup log files to keep.

We set the log level to logging.INFO to log messages at the INFO level and above. You can adjust the log level according to your needs.

Next, we create a log formatter using the logging.Formatter class. The formatter specifies the format of each log message, including the timestamp, log level, and message content.

Finally, we add the log handler (handler) to the Flask app's logger using app.logger.addHandler(handler). This ensures that any log messages generated by Flask or your application will be written to the log file.

You can use logging statements throughout your application to record important information, warnings, and errors. For example:

python
@app.route('/example')
def example():
    app.logger.info('Processing example route')
    # ... your code ...
    return 'Example route'

In the above example, the log statement app.logger.info('Processing example route') logs an INFO level message indicating that the example route is being processed.

Remember to adjust the log file path (log_file) and customize the logging levels and messages to fit your application's needs.

With this setup, you can start logging messages to the specified log file (app.log) and use it to track and troubleshoot any issues in your Flask application.
User
format with date and time 
ChatGPT

To format the log messages with date and time, you can modify the log formatter by adding a date and time format specifier. Here's an updated example:

python
import logging
from logging.handlers import RotatingFileHandler
from flask import Flask

app = Flask(__name__)

# Configure logging
log_file = 'app.log'  # Path to the log file

# Create a rotating file handler to manage log files
handler = RotatingFileHandler(log_file, maxBytes=1024 * 1024, backupCount=10)
handler.setLevel(logging.INFO)

# Create a log formatter with date and time
formatter = logging.Formatter('%(asctime)s - %(levelname)s - %(message)s', '%Y-%m-%d %H:%M:%S')
handler.setFormatter(formatter)

# Add the log handler to the Flask app
app.logger.addHandler(handler)

# ... existing routes and code ...

if __name__ == '__main__':
    app.run(debug=True, port=5000)

In the updated code, we modified the log formatter creation to include a date and time format specifier in the logging.Formatter constructor. The second argument '%Y-%m-%d %H:%M:%S' specifies the format for the date and time. You can adjust this format according to your preference.

With this change, the log messages will now include the date and time information in the specified format.

For example, a log message would appear like this:
2022-01-01 12:34:56 - INFO - This is an example log message.

Feel free to customize the log message format and adjust the log file path (log_file) to suit your requirements.
User
how should this read ?                       from flask import Flask
# Configure logging
log_file = 'app.log'  # Path to the log file

# Create a rotating file handler to manage log files
handler = RotatingFileHandler(log_file, maxBytes=1024 * 1024, backupCount=10)
handler.setLevel(logging.INFO)

# Create a log formatter with date and time
formatter = logging.Formatter('%(asctime)s - %(levelname)s - %(message)s', '%Y-%m-%d %H:%M:%S')
handler.setFormatter(formatter)


app = Flask(__name__)
# Add the log handler to the Flask app
app.logger.addHandler(handler)
# Configure logging

# Create a rotating file handler to manage log files
handler = RotatingFileHandler(log_file, maxBytes=1024 * 1024, backupCount=10)
handler.setLevel(logging.INFO)

# Create a log formatter
formatter = logging.Formatter('%(asctime)s - %(levelname)s - %(message)s')
handler.setFormatter(formatter)

# Add the log handler to the Flask app
app.logger.addHandler(handler)
ChatGPT

Here's the corrected version of the code where the logging configuration is properly placed:

python
import logging
from logging.handlers import RotatingFileHandler
from flask import Flask

app = Flask(__name__)

# Configure logging
log_file = 'app.log'  # Path to the log file

# Create a rotating file handler to manage log files
handler = RotatingFileHandler(log_file, maxBytes=1024 * 1024, backupCount=10)
handler.setLevel(logging.INFO)

# Create a log formatter with date and time
formatter = logging.Formatter('%(asctime)s - %(levelname)s - %(message)s', '%Y-%m-%d %H:%M:%S')
handler.setFormatter(formatter)

# Add the log handler to the Flask app
app.logger.addHandler(handler)

# ... existing routes and code ...

if __name__ == '__main__':
    app.run(debug=True, port=5000)

In this corrected code, the logging configuration is placed before creating the Flask app instance. The log handler, formatter, and log file path are defined first.

Then, the log handler is added to the Flask app's logger (app.logger.addHandler(handler)), ensuring that log messages generated by Flask or your application will be written to the log file.

Make sure to adjust the log file path (log_file) according to your desired location.

With this modification, the logging configuration will be set up correctly in your Flask application.
User
Explain every step in detail , I also do not understand log levels
ChatGPT
2 / 2

Certainly! Here's a step-by-step explanation of the code and its components:

    Import necessary modules:

python
import logging
from logging.handlers import RotatingFileHandler
from flask import Flask

The code imports the logging module to handle logging, RotatingFileHandler from logging.handlers to manage log files, and the Flask class from the flask module.

    Set up log file path:

python
log_file = 'app.log'  # Path to the log file

The log_file variable specifies the path to the log file. You can modify this to define the desired location and filename for your log file.

    Create a rotating file handler:

python
handler = RotatingFileHandler(log_file, maxBytes=1024 * 1024, backupCount=10)
handler.setLevel(logging.INFO)

The RotatingFileHandler is used to manage log files. It rotates the log file when it reaches a certain size (maxBytes) and keeps a specified number of backup files (backupCount). In this example, the log file rotates when it reaches 1 MB, and a maximum of 10 backup files is maintained. The setLevel() method sets the log level for the handler. In this case, it's set to logging.INFO, which captures log messages at the INFO level and above.

    Create a log formatter with date and time:

python
formatter = logging.Formatter('%(asctime)s - %(levelname)s - %(message)s', '%Y-%m-%d %H:%M:%S')
handler.setFormatter(formatter)

The logging.Formatter is used to define the format of the log messages. The first argument is the format string, which specifies how the log message should appear. In this example, '%(asctime)s - %(levelname)s - %(message)s' formats the log message to include the date, time, log level, and message. The second argument specifies the date and time format. %Y-%m-%d %H:%M:%S represents the format as year-month-day hour:minute:second.

    Add the log handler to the Flask app:

python
app.logger.addHandler(handler)

The addHandler() method adds the log handler (handler) to the Flask app's logger (app.logger). This ensures that any log messages generated by Flask or your application will be written to the log file.

    Create the Flask app instance:

python
app = Flask(__name__)

The Flask class is used to create the Flask application instance.

    Define routes and other application code:

python
# ... existing routes and code ...

This is where you define your Flask routes and other application code.

    Run the Flask application:

python
if __name__ == '__main__':
    app.run(debug=True, port=5000)

This code block ensures that the Flask application runs only when the script is executed directly, not when imported as a module. It starts the Flask development server, enabling you to run the application locally. The debug=True parameter enables debug mode, which provides more detailed error messages during development. The port=5000 parameter sets the port number on which the server runs.

Regarding log levels:
Log levels determine the severity or importance of log messages. The commonly used log levels, in increasing order of severity, are:

    DEBUG: Detailed information for debugging purposes.
    INFO: General information messages to track the progress of the application.
    WARNING: Indication of potential issues or anomalies that don't necessarily disrupt the application's functionality.
    ERROR: Indication of errors or exceptional situations that may impact the application's functionality.
    CRITICAL: Indicates critical errors or severe problems that may cause the application to terminate.

By setting the log level, you control which messages are recorded based on their severity. In the code example, the log level for the handler is set to logging.INFO, which captures messages at the INFO level and above. This means that log messages with levels of INFO, WARNING, ERROR, and CRITICAL will be recorded in the log file. Messages with a lower level, such as DEBUG, won't be recorded.

You can adjust the log level based on your application's needs and the level of detail you want to capture in the log file.
User
What is the best way to show if you have a warning on a line of code ?
ChatGPT

When you encounter a warning in your code, the best way to display it depends on the context and purpose of your application. Here are a few commonly used approaches:

    Logging: You can use the logging module to record warnings. In Python, warnings can be captured using the warnings module and logged using the logging module. This allows you to control the level and format of warning messages. For example:

python
import logging
import warnings

# Set up logging
logging.basicConfig(filename='app.log', level=logging.WARNING)

# Capture and log warnings
warnings.warn('This is a warning message')
logging.warning('This is a warning message')

In this example, the warnings module is used to generate a warning message, and the logging module is used to log it. The basicConfig() function sets up the logging configuration, including the log file and log level. The warn() function generates a warning, and the warning() function logs the warning message.

    Console Output: If you want to display warnings directly to the console or terminal, you can use the print() function or the logging module with a suitable log level (e.g., logging.warning()). This approach is useful for debugging or providing real-time feedback during development.

    User Interface: If your application has a graphical user interface (GUI), you can display warnings in an appropriate manner. This could involve using pop-up dialog boxes, notifications, or dedicated warning panels. The specific approach will depend on the GUI framework or library you are using.

Choose the method that aligns with your application's design and the intended audience. It's important to provide clear and informative warning messages to help users understand and address potential issues in your application.
    </pre>
-----index-----
<!--enter_data.html Template:-->
<!DOCTYPE html>
<html>
<head>
    <title>Enter Code Snippets</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
</head>
<body>
    <h2>Data Entry</h2>
<pre>
    #!/home/jack/Desktop/StoryMaker/env/bin/python
from moviepy.editor import *
from flask import Flask, render_template, request, redirect, url_for, send_from_directory, Response, flash
from flask import send_file, g
import os
import pygame
from gtts import gTTS
import cv2
import dlib
import numpy as np
from random import randint
from moviepy.editor import VideoFileClip, ImageClip, CompositeVideoClip
from moviepy.editor import concatenate_videoclips, AudioFileClip
import moviepy.editor as mp
import moviepy.editor
import subprocess
from pathlib import Path as change_ext
import re
from io import BytesIO
import matplotlib.pyplot as plt
import sqlite3
import random
import glob
import base64
import tempfile
import datetime
import imageio
import time
from werkzeug.utils import secure_filename
import shutil
from search import search
import clean_images
from time import sleep
from pydub import AudioSegment
from PIL import Image, ImageDraw, ImageFont
import uuid
import logging
from logging.handlers import RotatingFileHandler
# Initialize Flask app
app = Flask(__name__)
app.secret_key = os.urandom(24)
# Create a logger object
logger = logging.getLogger(__name__)
logger.setLevel(logging.DEBUG)

# Create a formatter for the log messages
formatter = logging.Formatter(
    '%(asctime)s %(levelname)s: %(message)s [in %(pathname)s:%(lineno)d]')

# Create a file handler to write log messages to a file
file_handler = RotatingFileHandler(
    'Logs/app.log', maxBytes=10000, backupCount=1)
file_handler.setLevel(logging.DEBUG)
file_handler.setFormatter(formatter)

# Add the file handler to the logger
logger.addHandler(file_handler)

# Set up logging for the Flask app
app.logger.addHandler(file_handler)
# Define a route for your Flask app


@app.route('/hello_world')
def hello_world():
    TExt = "TEXT TEST 6789"
    logger.debug('This is a debug message: %s', TExt)

    TEXT = "TEXT TEST abcd"
    logger.debug('This is a debug message: %s', TEXT)

    return "Hello, World!"


directory_path = "static/current_project"
if not os.path.exists(directory_path):
    os.makedirs(directory_path)
app.config['UPLOAD_FOLDER'] = 'static/images/uploads'
app.config['RESULTS_FOLDER'] = 'static/videos/results'
app.config['THUMBNAILS_FOLDER'] = 'static/images/thumbnails'
app.config['CHECKPOINT_PATH'] = 'checkpoints/wav2lip_gan.pth'
app.config['AUDIO_PATH'] = 'sample_data/input_audio.wav'
app.config['video_PATH'] = 'sample_data/input_videio.mp4'
app.config['DATABASE'] = 'code.db'  # SQLite database file


@app.route('/favicon.ico')
def favicon():
    return send_from_directory(os.path.join(app.root_path, 'static'), 'favicon.ico', mimetype='image/vnd.microsoft.icon')


# use the search function as a route
app.add_url_rule('/search', 'search', search)


def zip_lists(list1, list2):
    return zip(list1, list2)


app.jinja_env.filters['zip'] = zip_lists

directory_path = 'temp'  # Replace with the desired directory path
# Create the directory if it doesn't exist
os.makedirs(directory_path, exist_ok=True)


@app.route('/')
def index():
    image_dir = 'static/images'
    image_files = [f for f in os.listdir(image_dir) if f.endswith('.jpg')]
    random_image_file = random.choice(image_files)
    return render_template('index.html', random_image_file="images/" + random_image_file)


def generate_output():
    # Specify the path to your Bash script
    bash_script_path = '/home/jack/Desktop/StoryMaker/MakeVideo'

    # Execute the Bash script
    subprocess.run(['bash', bash_script_path])
    # Backup the result_videoxx.mp4 file
    current_datetime = str(int(time.time()))
    backup_filename = f"static/{current_datetime}.mp4"
    original_filename = "results/result_voice.mp4"
    shutil.copyfile(original_filename, backup_filename)
    return redirect('/final_lipsync')


@app.route('/create_avatar', methods=['GET', 'POST'])
def create_avatar():
    if request.method == 'POST':
        # check_point = os.path.join(app.config['CHECKPOINT_PATH'], 'checkpoints/wav2lip_gan.pth')

        return Response(generate_output(), mimetype='text/plain')
    else:
        return render_template('create_avatar.html')


@app.route('/run_command', methods=['GET'])
def run_command():
    # Specify the path to your Bash script
    bash_script_path = 'MakeVideo'

    # Execute the Bash script
    subprocess.run(['bash', bash_script_path])
    # Backup the result_videoxx.mp4 file
    current_datetime = str(int(time.time()))
    backup_filename = f"static/{current_datetime}.mp4"
    shutil.copyfile("results/result_voice.mp4", backup_filename)
    redirect('/final_lipsync')


@app.route('/result/<filename>')
def result(filename):
    return render_template('result.html', filename=filename)


@app.route('/convert_mp3_to_wav', methods=['GET', 'POST'])
def convert_mp3_to_wav():
    if request.method == 'POST':
        mp3_file = request.files['mp3_file']
        mp3_filename = mp3_file.filename
        mp3_path = os.path.join(app.static_folder, 'audio_mp3', mp3_filename)
        mp3_file.save(mp3_path)

        wav_filename = 'input_audio.wav'
        wav_path = os.path.join('sample_data', wav_filename)

        sound = AudioSegment.from_mp3(mp3_path)
        sound.export(wav_path, format='wav')

        return 'MP3 file converted to WAV successfully'
    else:
        return render_template('convert_mp3_to_wav.html')


@app.route('/final_lipsync')
def final_lipsync():
    VIDEO = 'result/result_voice.mp4'
    return render_template('final_lipsync.html', video=VIDEO)


@app.route('/text_mp3', methods=['GET', 'POST'])
def text_mp3():
    if request.method == 'POST':
        # Get the text from the textarea
        text = request.form['text']
        text0 = text
        # Remove whitespace from the text
        text = text.replace(" ", "")
        # Create a filename based on the first 25 characters of the text
        filename = "static/audio_mp3/" + text[:25] + ".mp3"
        textname = text[:25] + ".txt"
        # Save the text to a text file
        textname = textname.strip()
        with open("static/text/" + textname, 'w') as f:
            f.write(text0)
        filename = filename.strip()  # remove the newline character
        # Create a gTTS object and save the audio file
        tts = gTTS(text)
        filename = filename.strip()
        tts.save(filename)
        shutil.copy(filename, 'static/TEMP.mp3')
        # Play the mp3 file
        pygame.mixer.init()
        pygame.mixer.music.load(filename)
        pygame.mixer.music.play()
        # Wait for the audio to finish playing
        while pygame.mixer.music.get_busy():
            pygame.time.Clock().tick(10)
        # Stop pygame and exit the program
        pygame.mixer.quit()
        pygame.quit()
        # Return the text and filename to the template
        return render_template('text_mp3.html', text=text, filename=filename)
    else:
        # Render the home page template
        return render_template('text_mp3.html')


@app.route('/mp3_upload', methods=['POST'])
def mp3_upload():
    if 'file' not in request.files:
        return 'No file uploaded', 400

    file = request.files['file']
    if file.filename == '':
        return 'No file selected', 400

    if file:
        audio_file = 'static/TEMP.mp3'
        file.save(audio_file)
        return render_template('player.html', audio_file=audio_file)


@app.route('/generate_video', methods=['GET', 'POST'])
def generate_video():
    if request.method == 'POST':
        # Set the input and output filenames
        eyes_filename = 'static/TEMP.png'
        input_filename = 'static/TEMP2.mp4'
        output_filename = 'static/TEMP2.mp4'

        # Set the paths for the video and audio files
        audio_file = 'static/TEMP.mp3'
        output_filenames = 'static/TEMP.mp4'

        # Extract eyes from the uploaded image and save as eyes_test.png
        image_path = "static/TEMP.jpg"
        shape_predictor_path = "/home/jack/hidden/shape_predictor_68_face_landmarks.dat"
        extract_eyes(image_path, eyes_filename, shape_predictor_path)

        # Load the image clip
        image_clip = ImageClip(image_path, duration=30)

        # Set the final clip properties
        final_clip = image_clip.set_audio(None)
        final_clip = final_clip.set_position('center')

        # Write the final video
        final_clip.write_videofile(
            output_filename, codec='libx264', fps=30, audio=False)

        # Load the input video without audio
        input_clip = VideoFileClip(input_filename, audio=False)

        # Load the eye image clip
        eyes_clip = ImageClip(eyes_filename)

        # Create multiple looping clips
        clips = []
        for i in range(8):
            loop_clip = mkloop(input_clip, eyes_clip)
            clips.append(loop_clip)

        # Concatenate all the clips
        final_clips = concatenate_videoclips(clips)

        # Write the final video
        final_clips.write_videofile(
            output_filenames, codec='libx264', fps=input_clip.fps, audio=False)

        # Load the video and audio files
        video_clip = VideoFileClip(output_filenames)
        audio_clip = AudioFileClip(audio_file)

        # Set the duration of the final video to match the audio clip's duration
        final_duration = audio_clip.duration + .5

        # Set the video clip's duration to match the final duration
        video_clip = video_clip.set_duration(final_duration)

        # Set the audio of the video clip to be the same as the loaded audio clip
        video_clip = video_clip.set_audio(audio_clip)

        # Write the final video file
        output_path = "static/final_video_blinking.mp4"
        video_clip.write_videofile(
            output_path, codec='libx264', audio_codec='aac', fps=24)
        shutil.copy(output_path, 'results/final_video_blinking.mp4')
        return render_template('generate_video.html', video_path=output_path)

    return render_template('generate_video.html')
# Function to extract eyes from an image using dlib


def extract_eyes(image_path, eyes_filename, shape_predictor_path):
    # Load the image and shape predictor model
    image = cv2.imread(image_path)
    detector = dlib.get_frontal_face_detector()
    predictor = dlib.shape_predictor(shape_predictor_path)

    # Convert the image to grayscale
    gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)

    # Detect faces in the image
    faces = detector(gray)

    # Iterate over the detected faces and extract the eye regions
    for face in faces:
        landmarks = predictor(gray, face)

        # Extract the coordinates of the left eye
        left_eye_pts = [(landmarks.part(i).x, landmarks.part(i).y)
                        for i in range(36, 42)]

        # Extract the coordinates of the right eye
        right_eye_pts = [(landmarks.part(i).x, landmarks.part(i).y)
                         for i in range(42, 48)]

        # Create a transparent image with an alpha channel
        transparent_image = np.zeros(
            (image.shape[0], image.shape[1], 4), dtype=np.uint8)

        # Define the skin color (e.g., light brown or tan) in BGR format
        # skin_color_bgr = (210, 180, 140)
        skin_color_bgr = (80, 80, 40)

        # Convert BGR to RGB
        skin_color_rgb = (skin_color_bgr[2],
                          skin_color_bgr[1], skin_color_bgr[0])

        # Draw the eye regions on the transparent image with the skin color and alpha channel
        cv2.fillPoly(transparent_image, [np.array(
            left_eye_pts)], skin_color_rgb + (200,))
        cv2.fillPoly(transparent_image, [np.array(
            right_eye_pts)], skin_color_rgb + (200,))
        blurred_image = cv2.GaussianBlur(transparent_image, (5, 5), 0)
        # Save the transparent image with only the eyes as a PNG file
        cv2.imwrite(eyes_filename, blurred_image)
# Function to create a looping clip with blinking eyes


def mkloop(input_clip, eyes_clip):
    # Set the duration of the eye image clip
    eyes_duration = 0.1  # seconds

    # Set the position of the eye image clip
    eyes_position = 'center'

    # Set the start time of the eye image clip
    blink_start_time = randint(2, 4)

    # Create a CompositeVideoClip with the input video and the eye image clip
    final_clip = CompositeVideoClip([input_clip, eyes_clip.set_duration(eyes_duration)
                                     .set_position(eyes_position)
                                     .set_start(blink_start_time)])

    # Calculate the duration of the final clip
    final_duration = blink_start_time + eyes_duration + \
        randint(2, 4)  # 5 to 8 seconds after the blink

    # Set the duration of the final clip
    final_clip = final_clip.set_duration(final_duration)
    return final_clip


def apply_text(mp4_path, text, x, y):
    video = moviepy.editor.VideoFileClip(mp4_path)
    font = "/home/jack/fonts/OpenSansBold.ttf"
    text_clip = moviepy.editor.TextClip(
        text, font=font, fontsize=24, color="white")

    try:
        x = int(x)
        y = int(y)
    except ValueError:
        raise ValueError(
            "Invalid position values. Please provide integer values for x and y.")

    if not (0 <= x <= video.w):
        raise ValueError(
            "Invalid x position. Must be within the width of the video.")

    if not (0 <= y <= video.h):
        raise ValueError(
            "Invalid y position. Must be within the height of the video.")

    text_clip = text_clip.set_position((x, y))

    # Check if duration is None and set a default value if necessary
    video_duration = video.duration if video.duration is not None else 0
    text_clip_duration = text_clip.duration if text_clip.duration is not None else 0

    # Set the duration of the video and text clips
    duration = max(video_duration, text_clip_duration)
    video = video.set_duration(duration)
    text_clip = text_clip.set_duration(duration)

    # Create the composite video by overlaying the text clip onto the video clip
    new_video = moviepy.editor.CompositeVideoClip([video, text_clip])

    # Save the new video with the applied text
    new_mp4_path = 'static/TTMP.mp4'
    new_video.write_videofile(
        new_mp4_path, codec='libx264', audio_codec='aac', remove_temp=False)

    return new_mp4_path


@app.route("/apply_text_to_video", methods=["POST", "GET"])
def apply_text_to_video():
    if request.method == "POST":
        file = request.files["mp4_file"]
        if file.filename == '':
            return redirect(request.url)
        file.save('static/TTMP.mp4')

        mp4_path = 'static/TTMP.mp4'
        text = request.form["text"]
        x = request.form["x"]
        y = request.form["y"]
        new_mp4_path = apply_text(mp4_path, text, x, y)
        return render_template("apply_text_to_video.html", new_mp4_path=new_mp4_path)
    else:
        return render_template("apply_text_to_video.html")


# Get a list of existing subdirectories in the video resources directory
existing_subdirectories = [subdir for subdir in os.listdir(
    "static/current_project") if os.path.isdir(os.path.join("static/current_project", subdir))]


@app.route('/uploads', methods=['GET', 'POST'])
def upload_files():
    video_resources_dir = "static/current_project"
    if request.method == 'POST':
        # Get the selected subdirectory from the form
        selected_subdirectory = request.form.get('subdirectory')

        # Check if the selected subdirectory exists
        if selected_subdirectory in existing_subdirectories:
            # Handle the uploaded file
            file = request.files['file']
            if file:
                # Save the file to the selected subdirectory
                file.save(os.path.join(video_resources_dir,
                          selected_subdirectory, file.filename))
                # Get the URL for the uploaded image
                image_path = url_for('static', filename=os.path.join(
                    'current_project', selected_subdirectory, file.filename))
                return render_template('upload_files.html', image_path=image_path)
            else:
                return 'No file selected.'
        else:
            return 'Invalid subdirectory selected.'
    # Render the upload form with the list of existing subdirectories
    return render_template('upload_files.html', subdirectories=existing_subdirectories)


@app.route('/get_files', methods=['POST'])
def get_files():
    subdirectory = request.form.get('subdirectory')
    file_options = []
    if subdirectory and subdirectory in existing_subdirectories:
        subdirectory_path = os.path.join(
            "static/current_project", subdirectory)
        files = os.listdir(subdirectory_path)
        file_options = [
            f'<option value="{file}">{file}</option>'
            for file in files
            if os.path.isfile(os.path.join(subdirectory_path, file))
        ]
    return ''.join(file_options)


@app.route('/image_list')
def image_list():
    image_directory = 'static/current_project/Narrators'
    image_list = [
        filename
        for filename in os.listdir(image_directory)
        if filename.endswith('.jpg')
    ]
    return render_template('image_list.html', image_list=image_list)


@app.route('/upload', methods=['POST', 'GET'])
def upload():
    filename = request.form['filename']
    if filename:
        src_path = 'static/current_project/Narrators/' + filename
        dest_path = 'static/TEMP.jpg'
        shutil.copyfile(src_path, dest_path)
        return redirect('/')
    else:
        return 'No file selected.'


# List of image directories (you can add more as needed)
image_directories = glob.glob('static/images/*')

@app.route("/mkblend_video", methods=['GET', 'POST'])
def mkblend_video():
    if request.method == 'POST':
        selected_directory = request.form.get('selected_directory')

        if selected_directory:
            # Create a temporary directory to save the images
            temp_dir = tempfile.mkdtemp()

            # Loop through the files in the selected directory and move them to the temporary directory
            chosen_directory = os.path.join('static/images', selected_directory)
            for filename in os.listdir(chosen_directory):
                if filename.endswith('.jpg') or filename.endswith('.png'):
                    source_path = os.path.join(chosen_directory, filename)
                    target_path = os.path.join(temp_dir, filename)
                    os.rename(source_path, target_path)
                    logger.debug('Moved file: %s', filename)
    
        image_list = glob.glob(temp_dir + "*.jpg")
        logger.debug('IMAGE_LIST: %s', image_list)
        # Shuffle and select a subset of images
        # random.shuffle(image_list)
        image_list = sorted(image_list)
        logger.debug('Selected image filenames: %s', image_list)
        # Print the number of selected images
        print(len(image_list))
        logger.debug('Number of files: %s', len(image_list))

        def changeImageSize(maxWidth, maxHeight, image):
            widthRatio = maxWidth / image.size[0]
            heightRatio = maxHeight / image.size[1]
            newWidth = int(widthRatio * image.size[0])
            newHeight = int(heightRatio * image.size[1])
            newImage = image.resize((newWidth, newHeight))
            return newImage

        # Get the size of the first image
        if image_list:
            imagesize = Image.open(image_list[0]).size

            for i in range(len(image_list) - 1):
                imag1 = image_list[i]
                imag2 = image_list[i + 1]
                image1 = Image.open(imag1)
                image2 = Image.open(imag2)

                image3 = changeImageSize(imagesize[0], imagesize[1], image1)
                image4 = changeImageSize(imagesize[0], imagesize[1], image2)

                image5 = image3.convert("RGBA")
                image6 = image4.convert("RGBA")

                text = "animate/"
                for ic in range(0, 100):
                    inc = ic * 0.01
                    # inc = ic * 0.08
                    sleep(0.1)
                    # Gradually increase opacity
                    alphaBlended = Image.blend(image5, image6, alpha=inc)
                    alphaBlended = alphaBlended.convert("RGB")
                    current_time = datetime.datetime.now()
                    filename = current_time.strftime(
                        '%Y%m%d_%H%M%S%f')[:-3] + '.jpg'
                    alphaBlended.save(f'{text}{filename}')
                    # shutil.copy(f'{text}{filename}', {temp_dir}+'TEMP.jpg')
                    shutil.copy(f'{text}{filename}', os.path.join(temp_dir, 'TEMP.jpg'))

                    if ic % 25 == 0:
                        print(i, ":", ic, end=" . ")
                    if ic % 100 == 0:
                        logger.debug('Image Number: %.2f %d', inc, ic)

            from moviepy.video.io.ImageSequenceClip import ImageSequenceClip
            # Get the list of files sorted by creation time
            imagelist = sorted(glob.glob('animate/*.jpg'),
                               key=os.path.getmtime)

            # Create a clip from the images
            clip = ImageSequenceClip(imagelist, fps=30)

            # Write the clip to a video file using ffmpeg
            current_time = datetime.datetime.now()
            filename = "static/animate/TEMP3a.mp4"
            clip.write_videofile(
                filename, fps=24, codec='libx265', preset='medium')
            store = "static/videos/" + \
                current_time.strftime('%Y%m%d_%H%M%S%f')[:-3] + 'jul27.mp4'
            # Replace with the desired path for the converted video file
            output_file = "static/animate/TEMP5.mp4"
            # Replace with the desired path for the converted video file
            webm_file = "static/animate/TEMP5.webm"
            ffmpeg_cmd = [
                'ffmpeg', '-i', filename, '-c:v', 'libx264', '-crf', '23', '-preset', 'medium', '-c:a', 'aac',
                '-b:a', '128k', '-movflags', '+faststart', '-y', output_file
            ]
            subprocess.run(ffmpeg_cmd)
            ffmpeg_cmd2 = [
                'ffmpeg', '-i', filename, '-c:v', 'libx264', '-crf', '23', '-preset', 'medium', '-c:a', 'aac',
                '-b:a', '128k', '-movflags', '+faststart', '-y', webm_file
            ]
            subprocess.run(ffmpeg_cmd2)
            shutil.copy(filename, store)
            return render_template('mkblend_video.html', video=filename)

    return render_template('choose_directory.html')


def changeImageSize(maxWidth, maxHeight, image):
    widthRatio = maxWidth / image.size[0]
    heightRatio = maxHeight / image.size[1]
    newWidth = int(widthRatio * image.size[0])
    newHeight = int(heightRatio * image.size[1])
    newImage = image.resize((newWidth, newHeight))
    return newImage


directories = [
    "static/images/512x1536-woman",
    "static/images/abstract_beauty",
    "static/images/beautiful_girl",
    "static/images/Beautiful_Warrior"
]


@app.route("/mkblend_videos", methods=['POST', 'GET'])
def mkblend_videos():
    # Get the selected directory from the form data
    selected_directory = request.form.get('selected_directory')
    logger.debug('Selected Directory: %s', selected_directory)
    # Check if the selected directory is valid
    if selected_directory and selected_directory in directories:
        # Use glob to get the list of files within the selected directory
        filelist = glob.glob(os.path.join(selected_directory, '*.jpg'))
        logger.debug('Selected directory: %s', selected_directory)
        image_list = filelist
        # Shuffle and select a subset of images
        image_list = filelist
        random.shuffle(image_list)
        image_list = random.sample(image_list, 29)
        # Get the size of the first image
        imagesize = Image.open(image_list[0]).size

        # Print the number of selected images
        print("IMAGE_LIST_length:", len(image_list))

        for i in range(len(image_list) - 1):
            imag1 = image_list[i]
            imag2 = image_list[i + 1]
            image1 = Image.open(imag1)
            image2 = Image.open(imag2)

            image3 = changeImageSize(imagesize[0], imagesize[1], image1)
            image4 = changeImageSize(imagesize[0], imagesize[1], image2)

            image5 = image3.convert("RGBA")
            image6 = image4.convert("RGBA")

            text = "animate/"
            # for ic in range(0,125):
            for ic in range(0, 100):
                inc = ic * .01
                sleep(.1)
                # gradually increase opacity
                alphaBlended = Image.blend(image5, image6, alpha=inc)
                alphaBlended = alphaBlended.convert("RGB")
                current_datetime = str(int(time.time()))
                filename = current_datetime[:-3] + '.jpg'
                alphaBlended.save(f'{text}{filename}')
                if ic % 25 == 0:
                    print(ic, ":", inc, end=" . ")

    from moviepy.video.io.ImageSequenceClip import ImageSequenceClip
    # Get the list of files sorted by creation time
    imagelist2 = sorted(glob.glob('animate/*.jpg'), key=os.path.getmtime)

    # Create a clip from the images
    clip = ImageSequenceClip(imagelist2, fps=30)

    # Write the clip to a video file using ffmpeg
    current_datetime = str(int(time.time()))
    filename = "static/animate/TEMP3a.mp4"
    clip.write_videofile(filename, fps=24, codec='libx265', preset='medium')
    store = "static/videos/" + current_datetime[:-3] + 'july27.mp4'
    # Replace with the desired path for the converted video file
    output_file = "static/animate/TEMP5.mp4"
    # webm_file = "static/animate/TEMP5.webm"  #Replace with the desired path for the converted video file
    ffmpeg_cmd = ['ffmpeg', '-i', filename, '-c:v', 'libx264', '-crf', '23', '-preset',
                  'medium', '-c:a', 'aac', '-b:a', '128k', '-movflags', '+faststart', '-y', output_file]
    subprocess.run(ffmpeg_cmd)
    # ffmpeg_cmd2 = ['ffmpeg', '-i', filename, '-c:v', 'libx264', '-crf', '23', '-preset', 'medium', '-c:a', 'aac', #'-b:a', '128k', '-movflags', '+faststart', '-y', webm_file]
    # subprocess.run(ffmpeg_cmd2)
    shutil.copy(filename, store)
    return render_template('mkblend_videos.html', video=filename)


@app.route('/generate_vid', methods=['GET', 'POST'])
def generate_vid():
    current_datetime = str(int(time.time()))
    str_current_datetime = str(current_datetime)
    logger.debug('Generating video', str_current_datetime)
    if request.method == 'POST':
        # Load the audio file
        audio_file = request.files['audio']
        # , 'input_audio.mp3')
        filename = os.path.join(app.config['AUDIO_PATH'])
        logger.info(f'Audio path: {filename}')
        audio_file.save(filename)
        print("FILENAME:", filename)

        # Get the duration of the audio using ffprobe
        command = f"ffprobe -v error -show_entries format=duration -of default=noprint_wrappers=1:nokey=1 {filename}"
        duration = subprocess.check_output(command.split())
        duration = float(duration.strip().decode())
        logger.info(f'Duration: {duration}')
        # Load the image file
        image_file = request.files['image']
        image_path = os.path.join(
            app.config['UPLOAD_FOLDER'], secure_filename(image_file.filename))
        logger.info(f'Image path: {image_path}')
        image_file.save(image_path)

        # Create the video
        # video_path = os.path.join(app.config['VIDEO_PATH'])#, 'sample_data/input_video.mp4')
        video_path = 'sample_data/input_video.mp4'
        logger.info(f'Video path: {video_path}')
        ffmpeg_command = f"ffmpeg -loop 1 -i {image_path} -c:v libx264 -t {duration+ 0.5} -pix_fmt yuv420p -y {video_path}"
        subprocess.run(ffmpeg_command, shell=True)

        return f'Video created: {video_path}'

    return render_template('generate_vid.html')
# Define route to display upload form


@app.route('/upload_file', methods=['POST', 'GET'])
def upload_file():
    if request.method == 'POST':
        # Check if file was uploaded
        if 'file' not in request.files:
            app.logger.error('No file was uploaded')
            flash('Error: No file was uploaded')
            return redirect(request.url)

        app.logger.error('request.files[\'file\']')
        file = request.files['file']

        # Check if file was selected
        if file.filename == '':
            app.logger.error('No file was selected')
            flash('Error: No file was selected')
            return redirect(request.url)

        # Define allowed file extensions
        ALLOWED_EXTENSIONS = {'png', 'jpg', 'jpeg', 'gif'}

        # Define function to check file extension
        def allowed_file(filename):
            return '.' in filename and filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS

        # Check if file is allowed
        if not allowed_file(file.filename):
            # app.logger.error(f"File '{file.filename}' is not allowed")
            app.logger.error("File '" + file.filename + "' is not allowed")
            flash("Error: File '" + file.filename + "'close is not allowed")
            return redirect(request.url)

        # Save the file
        try:
            filename = secure_filename(file.filename)
            file.save(os.path.join(app.config['UPLOAD_FOLDER'], filename))
            app.logger.info(f'File {filename} saved')
            app.logger.info('FILENAME:', os.path.join(
                app.config['UPLOAD_FOLDER'], filename))
        except Exception as e:
            app.logger.error(f'Error saving file: {e}')
            flash('Error: Unable to save file')
            return redirect(request.url)

        # Redirect to the result page
        app.logger.info(f'File-Result {filename} SAVED')
        return redirect(url_for('result', filename=filename))

    # Return the upload form for GET requests
    return render_template('upload_file.html')


@app.route('/uploads/<filename>')
def uploaded_file(filename):
    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)


@app.route('/make_text', methods=['GET', 'POST'])
def make_text():
    DIR = 'static/text/'
    if request.method == 'POST':
        # Get the text entered in the textarea
        text = request.form.get('text')

        # Generate a filename using the first 25 letters of the text
        text = text.replace(' ', '_')
        filename = text[:25]

        # Save the text to a file
        with open(f'{DIR}{filename}.txt', 'w') as file:
            file.write(text)

        return 'Text saved successfully!'
    else:
        return render_template('make_text.html')


# directories = ['static/images', 'static/images/squares', 'static/final_videos', 'static/Dreamlike_art',
#              'static/squares', 'static/images/uploads', 'static/Final_Fantasy', 'static/final_images', 'static/thumbnails']
directories = glob.glob('static/images/*')

# Route for the home page


@app.route('/home')
def home():
    return render_template('choose_dir.html', directories=directories)
# Route for choosing a directory


@app.route('/choose_dir', methods=['GET', 'POST'])
def choose_dir():
    if request.method == 'POST':
        selected_directory = request.form.get('directory', directories)
        TExt = "TEXT TEST"
        logger.error('No file was selected: %s', TExt)
        logger.debug('Debug was selected: %s', TExt)
        if selected_directory is None:
            # Handle the case where no directory is selected
            logger.error('No directory selected')
            return 'No directory selected!'
        # Rest of the code...
        # Use the selected_directory variable in your logic to generate the video
        # Make sure to update the paths according to the selected directory
        logger.debug('Selected directory: %s', selected_directory)
        # Get the list of image files in the selected directory
        image_filenames = random.sample(
            glob.glob(selected_directory + '/*.jpg'), 30)
        logger.debug('Selected image filenames: %s', image_filenames)

        image_clips = []
        for filename in image_filenames:
            # Open the image file and resize it to 512x768
            logger.debug('Processing image: %s', filename)
            image = Image.open(filename)
            # image = image.resize((512, 768), Image.ANTIALIAS)
            # Convert the PIL Image object to a NumPy array
            image_array = np.array(image)
            # Create an ImageClip object from the resized image and set its duration to 1 second
            image_clip = ImageClip(image_array).set_duration(1)
            # Append the image clip to the list
            image_clips.append(image_clip)

        logger.debug('Number of image clips: %d', len(image_clips))

        # Concatenate all the image clips into a single video clip
        video_clip = concatenate_videoclips(image_clips, method='compose')
        timestr = time.strftime("%Y%m%d-%H%M%S")
        # Set the fps value for the video clip
        video_clip.fps = 24
        # Write the video clip to a file
        video_file = f'static/videos/random_images_{timestr}_video.mp4'
        output_p = 'static/videos/random_images_video.mp4'
        logger.debug('Output video file path: %s', video_file)
        logger.debug('Final video file path: %s', output_p)

        video_clip.write_videofile(video_file, fps=24)

        try:
            shutil.copy(video_file, output_p)
        except Exception as e:
            logger.error('Error occurred while copying file: %s', str(e))
            return f"Error occurred while copying file: {str(e)}"

        # Return the rendered template with the list of directories and output path
        return render_template('choose_dir.html', directories=directories, output_path=output_p)

    # If the request method is GET, render the form template with the list of directories
    output_p = 'static/videos/random_images_video.mp4'
    return render_template('choose_dir.html', directories=directories, output_path=output_p)


@app.route('/convert', methods=['GET', 'POST'])
def convert():
    if request.method == 'POST':
        try:
            audio_file = request.files['audio_file']
            # Path for audio file
            audio_file_path = f'static/audio_mp3/{audio_file.filename}'
            # Save the audio file to the specified location
            audio_file.save(audio_file_path)

            formatted_text_file = request.files['formatted_text_file']
            # Path for formatted text file
            formatted_text_file_path = f'static/formatted_text/{formatted_text_file.filename}'
            # Save the formatted text file to the specified location
            formatted_text_file.save(formatted_text_file_path)

            output_filename = datetime.datetime.now().strftime('%Y-%m-%d') + '.mp4'
            output_path = 'static/videos/' + output_filename
            # Define the ffmpeg command
            # Create the blank video
            # ffmpeg -f lavfi -i color='#470000'@0x0:s=1280x720:rate=60,format=rgba -t 280 -y blank.mp4
            command = [
                'ffmpeg',
                '-i', audio_file_path,
                '-f', 'lavfi',
                '-i', f"color='#470000'@0.0:s=1280x720:rate=60,format=rgba",
                '-vf', f"drawtext=textfile='{os.path.abspath(formatted_text_file_path)}':y=(h-220)-12*t:x=580:fontcolor=orange:fontfile=/home/jack/Arimo-Regular.ttf:fontsize=26",
                '-t', '280',
                '-y', output_path
            ]

            logger.debug(f"Command: {' '.join(command)}")

            subprocess.run([str(arg) for arg in command], check=True)
            video = f'{output_filename}'
            return render_template('convert.html', video=output_path)
        except Exception as _:
            logger.exception("An error occurred during video conversion:")
            return render_template('error.html', message="An error occurred during video conversion.")
    else:
        return render_template('convert_form.html')


@app.route('/convert512', methods=['GET', 'POST'])
def convert512():
    if request.method == 'POST':
        try:
            audio_file = request.files['audio_file']
            # Path for audio file
            audio_file_path = f'static/audio_mp3/{audio_file.filename}'
            # Save the audio file to the specified location
            audio_file.save(audio_file_path)
            # Get the duration of the audio using ffprobe
            command = f"ffprobe -v error -show_entries format=duration -of default=noprint_wrappers=1:nokey=1 {audio_file_path}"
            duration = subprocess.check_output(command.split())
            duration = float(duration.strip().decode())
            length = int(duration + 5)
            logger.info(f'Duration-512: {length}')
            formatted_text_file = request.files['formatted_text_file']
            # Path for formatted text file
            formatted_text_file_path = f'static/formatted_text/{formatted_text_file.filename}'
            # Save the formatted text file to the specified location
            formatted_text_file.save(formatted_text_file_path)

            output_filename = datetime.datetime.now().strftime('%Y-%m-%d') + '.mp4'
            output_path = 'static/videos/' + output_filename
            # Define the ffmpeg command
            # Create the blank video
            # ffmpeg -f lavfi -i color='#470000'@0x0:s=1280x720:rate=60,format=rgba -t 280 -y blank.mp4
            # y=(h-120)-12*t:x=24:
            command = [
                'ffmpeg',
                '-i', audio_file_path,
                '-f', 'lavfi',
                '-i', f"color='#470000'@0.0:s=512x1024:rate=60,format=rgba",
                '-vf', f"drawtext=textfile='{os.path.abspath(formatted_text_file_path)}':y=(h-120)-10*t:x=24:fontcolor=orange:fontfile=/home/jack/Arimo-Regular.ttf:fontsize=20",
                '-t', f'{length}', '-y', output_path
            ]

            logger.debug(f"Command: {' '.join(command)}")

            subprocess.run([str(arg) for arg in command], check=True)
            video = f'{output_filename}'
            return render_template('convert512.html', video=output_path)
        except Exception as e:
            logger.exception("An error occurred during video conversion:")
            return render_template('error.html', message="An error occurred during video conversion.")
    else:
        return render_template('convert_form512.html')


@app.route('/mk_text', methods=['GET', 'POST'])
def mk_text():
    DIR = "static/text/"
    if request.method == 'POST':
        text = request.form.get('text')
        tex = text.replace(" ", "_")
        filename = tex[:25]
        with open(f'{DIR}{filename}.txt', 'w') as file:
            file.write(text)
        return render_template('mk_text.html', text=text, filename=f'{filename}.txt')
    else:
        return render_template('mk_text.html')


@app.route('/list_files')
def list_files():
    static_text_dir = 'static/text/'
    files = os.listdir(static_text_dir)
    files = [file for file in files if os.path.isfile(
        os.path.join(static_text_dir, file))]
    return str(files)


@app.route('/format_file', methods=['POST', 'GET'])
def format_file():
    static_text_dir = 'static/text/'
    static_format_dir = 'static/formatted_text/'
    if request.method == 'POST':
        filename = request.form.get('filename')
        file_path = os.path.join(static_text_dir, filename)
        if not os.path.isfile(file_path):
            return render_template('error.html', message=f'File "{filename}" does not exist')
        with open(file_path, 'r') as file:
            content = file.read()
        words = content.split()
        formatted_content = '\n'.join(
            [' '.join(words[i:i + 5]) for i in range(0, len(words), 5)])
        modified_filename = filename.replace('.txt', '') + 'FORMATTED.txt'
        modified_file_path = os.path.join(static_format_dir, modified_filename)
        with open(modified_file_path, 'w') as modified_file:
            modified_file.write(formatted_content)
            logger.debug('This is Formated Content: %s', formatted_content)
            logger.debug('This is Formated file: %s', modified_file_path)
        return render_template('success.html', original_file=filename, modified_file=modified_filename)

    file_options = []
    for file_name in os.listdir(static_text_dir):
        if file_name.endswith('.txt'):
            file_options.append(file_name)

    return render_template('form.html', file_options=file_options)


@app.route('/view_text')
def view_text():
    text_files_dir = 'static/text/'
    text_files = []
    for filename in os.listdir(text_files_dir):
        if filename.endswith('.txt'):
            text_files.append(filename)
    return render_template('select_file.html', text_files=text_files)


@app.route('/view_text/<filename>')
def display_text(filename):
    text_file_path = f'static/text/{filename}'
    try:
        with open(text_file_path, 'r') as file:
            file_contents = file.read()
        return render_template('view_text.html', file_contents=file_contents, filename=filename)
    except FileNotFoundError:
        return f'Text file {filename} not found.'


@app.route('/edit_file', methods=['GET', 'POST'])
def edit_file():
    if request.method == 'POST':
        filename = request.form.get('filename')
        text = request.form.get('text')
        with open(f'static/text/{filename}', 'w') as file:
            file.write(text)
    text_files_dir = 'static/text/'
    text_files = []
    for filename in os.listdir(text_files_dir):
        if filename.endswith('.txt'):
            text_files.append(filename)
    return render_template('edit_file.html', text_files=text_files)


@app.route('/edit_formatted', methods=['GET', 'POST'])
def edit_formatted():
    if request.method == 'POST':
        filename = request.form.get('filename')
        text = request.form.get('text')
        with open(f'static/formatted_text/{filename}', 'w') as file:
            file.write(text)
    text_files_dir = 'static/formatted_text/'
    text_files = []
    for filename in os.listdir(text_files_dir):
        if filename.endswith('.txt'):
            text_files.append(filename)
    return render_template('edit_formatted.html', text_files=text_files)


@app.route('/get_formatted_content/<filename>')
def get_formatted_content(filename):
    file_path = os.path.join('static/formatted_text', filename)
    with open(file_path, 'r') as file:
        content = file.read()
    return content


@app.route('/get_file_content/<filename>')
def get_file_content(filename):
    file_path = os.path.join('static/text', filename)
    with open(file_path, 'r') as file:
        content = file.read()
    return content


@app.route('/indeX')
def indeX():
    return render_template('indeX.html')


@app.route('/resize_and_overlay_videos')
def resize_and_overlay_videos():
    # Path to the videos
    static_video_path = 'static/videos/2023-07-07.mp4'
    input_video_path = 'static/animate/topvideo.mp4'
    output_video_path = 'static/output/resulta.mp4'

    # Resize the input video using FFmpeg
    resize_command = f'ffmpeg -i {input_video_path} -vf "scale=410:820" -y resized.mp4'
    subprocess.call(resize_command, shell=True)

    # Overlay the resized video on the background video using FFmpeg
    overlay_command = f'ffmpeg -i {static_video_path} -i resized.mp4 -filter_complex "overlay=25:25" -y {output_video_path}'
    subprocess.call(overlay_command, shell=True)

    # Remove the temporary resized video
    subprocess.call('rm resized.mp4', shell=True)

    # Return the final video as a response
    return send_file(output_video_path, mimetype='video/mp4')


@app.route('/resize_and_overlay_videos_page')
def resize_and_overlay_videos_page():
    output_video_path = 'static/output/resulta.mp4'
    return render_template('resize_and_overlay_videos.html', video=output_video_path)


@app.route('/build_stackedvids')
def build_stackedvids():
    # Get a random video and image from the static folder
    video_filename = random.choice(glob.glob('static/square_vids/*.mp4'))
    image_filename = random.choice(glob.glob('static/squares/*.jpg'))

    # Load the video and image files as clips
    video_clip = VideoFileClip(video_filename)
    image_clip = ImageClip(image_filename)

    # Set the duration of the image clip to match the duration of the video clip
    image_clip = image_clip.set_duration(video_clip.duration)

    # Resize the clips to 640x640 and 640x640 respectively
    video_clip = video_clip.resize((640, 640))
    image_clip = image_clip.resize((640, 640))

    # Create a black clip to fill the remaining space below the image
    black_clip = ColorClip(size=(640, 640), color=(
        0, 0, 0)).set_duration(video_clip.duration)

    # Combine the clips vertically using CompositeVideoClip
    final_clip = CompositeVideoClip([
        video_clip.set_position(('center', 'top')),
        image_clip.set_position(('center', 640)),
        black_clip.set_position(('center', 640 + 640))
    ], size=(640, 1280))

    # Export the final clip as a video file
    timestr = time.strftime("%Y%m%d-%H%M%S")
    video_filename = 'static/stacked_vids/stacked_vids' + timestr + 'video.mp4'
    final_clip_path = 'static/stacked_vids/stacked_videos.mp4'
    final_clip.write_videofile(final_clip_path)
    final_clip.write_videofile(video_filename)

    return render_template('/build_stackedvids.html', stackedvid_url=final_clip_path)


@app.route('/build_stackedvid')
def build_stackedvid():
    # Get a random video and image from the static folder
    video_filename = random.choice(glob.glob('static/square_vids/*.mp4'))
    videofilename = random.choice(glob.glob('static/square_vids/*.mp4'))

    # Load the video and image files as clips
    video_clip = VideoFileClip(video_filename)
    videoclip = VideoFileClip(videofilename)

    # Set the duration of the image clip to match the duration of the video clip
    videoclip = videoclip.set_duration(video_clip.duration)

    # Resize the clips to 640x640 and 640x640 respectively
    video_clip = video_clip.resize((640, 640))
    videoclip = videoclip.resize((640, 640))

    # Create a black clip to fill the remaining space below the image
    black_clip = ColorClip(size=(640, 640), color=(
        0, 0, 0)).set_duration(video_clip.duration)

    # Combine the clips vertically using CompositeVideoClip
    final_clip = CompositeVideoClip([
        video_clip.set_position(('center', 'top')),
        videoclip.set_position(('center', 640)),
        black_clip.set_position(('center', 640 + 640))
    ], size=(640, 1280))

    # Export the final clip as a video file
    timestr = time.strftime("%Y%m%d-%H%M%S")
    video_filename = 'static/stacked_vids/stacked_vids' + timestr + 'video.mp4'
    final_clip_path = 'static/stacked_vids/stacked_videos.mp4'
    final_clip.write_videofile(final_clip_path)
    final_clip.write_videofile(video_filename)

    return render_template('/build_stackedvid.html', stackedvid_url=final_clip_path)


@app.route('/clean_images', methods=['POST'])
def clean_images_route():
    clean_images()
    app.logger.error('line 210 clean_images_route')
    return redirect(url_for('index'))


@app.route('/get_gallery')
def get_gallery():
    image_dir = '/mnt/HDD500/flask/FLASK/static/images/uploads'
    image_names = os.listdir(image_dir)
    return render_template('get_gallery.html', image_names=image_names)


@app.route('/uploads/<filename>')
def send_image(filename):
    return send_from_directory('static/images/uploads', filename)


@app.route('/uploads/thumbnails/<filename>')
def send_image_thumb(filename):
    return send_from_directory('static/images/uploads/thumbnails', filename)


@app.route('/flask_info')
def flask_info():
    return render_template('flask_info.html')


@app.route('/add_effects')
def add_effects():
    return '''
        <form method="post" action="/video" enctype="multipart/form-data">
            <label for="input_video">Select input video file:</label><br>
            <input type="file" id="input_video" name="input_video"><br><br>
            <input type="submit" value="Submit">
        </form>
    '''


@app.route('/video', methods=['GET', 'POST'])
def process_video():
    DIR = "static/"
    input_video = request.files['input_video']

    # Save the uploaded video to a file
    input_video.save(f"{DIR}input_video.mp4")

    # Run FFmpeg commands
    command1 = f"ffmpeg -nostdin -i {DIR}input_video.mp4 -filter:v \"minterpolate='mi_mode=mci:mc_mode=aobmc:vsbmc=1:fps=10'\" -c:v libx264 -r 20 -pix_fmt yuv420p -c:a copy -y {DIR}output.mp4"

    subprocess.run(command1, shell=True, stderr=subprocess.PIPE,
                   universal_newlines=True)

    command2 = f"ffmpeg -nostdin -i {DIR}output.mp4 -vf mpdecimate,setpts=N/FRAME_RATE/TB -c:v libx264 -r 30 -pix_fmt yuv420p -c:a copy -y {DIR}mpdecimate.mp4"

    subprocess.run(command2, shell=True, stderr=subprocess.PIPE,
                   universal_newlines=True)

    # DIR = "/home/jack/Desktop/ffmpeg_flask/"
    command3 = f"ffmpeg -i static/mpdecimate.mp4 -filter_complex \"[0:v]trim=duration=14,loop=500:1:0[v];[1:a]afade=t=in:st=0:d=1,afade=t=out:st=0.9:d=2[a1];[v][0:a][a1]concat=n=1:v=1:a=1\" -c:v libx264 -r 30 -pix_fmt yuv420p -c:a aac -b:a 192k -shortest -y static/output.mp4"
    subprocess.run(command3, shell=True, stderr=subprocess.PIPE,
                   universal_newlines=True)

    now = datetime.datetime.now().strftime("%Y-%m-%d_%H-%M-%S")
    shutil.copy(f"{DIR}output.mp4", f"{DIR}{now}_output.mp4")
    logger.info(f'my_video: f"{DIR}mpdecimate.mp4"')
    video_file = "static/outputALL.mp4"
    command4 = f'ffmpeg -i "{DIR}mpdecimate.mp4" -i "{DIR}mpdecimate.mp4" -i "{DIR}mpdecimate.mp4" -i "{DIR}mpdecimate.mp4" -i "{DIR}mpdecimate.mp4" -filter_complex "[0:v]trim=duration=15[v0];[1:v]trim=duration=15[v1];[2:v]trim=duration=15[v2];[3:v]trim=duration=15[v3];[4:v]trim=duration=15[v4];[v0][v1][v2][v3][v4]concat=n=5:v=1:a=0" -c:v libx264 -pix_fmt yuv420p -shortest -y {video_file}'
    subprocess.run(command4, shell=True, stderr=subprocess.PIPE,
                   universal_newlines=True)
    now = datetime.datetime.now().strftime("%Y-%m-%d_%H-%M-%S")
    diR = f"{DIR}/square_videos/"
    logger.info(f'diR: f"{diR}mpdecimate.mp4"')
    shutil.copy(f"{video_file}", f"{diR}{now}_outputALL.mp4")
    logger.info(f'diR: {diR}mpdecimate.mp4')
    return render_template('final.html', video_file=video_file)


def get_all_mp4_videos():
    mp4_videos = []
    for root, dirs, files in os.walk('static'):
        for file in files:
            if file.endswith('.mp4'):
                mp4_videos.append(os.path.join(root, file))
    return mp4_videos


@app.route('/play/<path:video_path>')
def play(video_path):
    return send_file(video_path)


@app.route('/select_order', methods=['GET', 'POST'])
def select_order():
    # Set a default value for output_path
    output_path = 'static/videos/concatenated_video.mp4'
    if request.method == 'POST':
        # Get the order of the videos from the form data
        order = request.form.getlist('order')
        # Join the videos in the specified order
        join_videos(order, output_path)
        # Set the timestamped output path
        timestamp = datetime.datetime.now().strftime('%Y%m%d_%H%M%S')
        new_output_path = f'static/videos/concatenated_{timestamp}XX.mp4'
        shutil.copy(output_path, new_output_path)
        # Redirect to the download page
        return redirect(url_for('download'))
    else:
        # Get the paths to the video files in the directory
        video_dir = 'static/videos'
        video_files = [os.path.join(video_dir, filename) for filename in os.listdir(
            video_dir) if filename.endswith('.mp4')]
        # Render the template with the list of video files and the output path
        return render_template('select_order.html', video_files=video_files, output_path=output_path)


def join_videos(video_paths, output_path):
    # Generate a list of input arguments for FFmpeg
    input_args = []
    for path in video_paths:
        input_args.extend(['-i', path])
    # Join the videos using FFmpeg
    subprocess.run(['ffmpeg', *input_args, '-filter_complex', 'concat=n={}:v=1:a=0'.format(
        len(video_paths)), '-c:v', 'libx264', '-crf', '23', '-preset', 'veryfast', '-y', output_path])
    # output_path = 'static/videos/concatenated_video.mp4'
    timestamp = datetime.datetime.now().strftime('%Y%m%d_%H%M%S')
    new_output_path = f'static/videos/concatenated_{timestamp}XX.mp4'
    shutil.copy(output_path, new_output_path)


@app.route('/videos', methods=['POST'])
def process_videos():
    DIR = "static/"
    input_video = request.files['input_video']
    ""
    # Save the uploaded video to a file
    input_video.save(f"{DIR}input_video2.mp4")

    command1 = f"ffmpeg -nostdin -i {DIR}input_video2.mp4 -filter:v \"minterpolate='mi_mode=mci:mc_mode=aobmc:vsbmc=1:fps=10'\" -c:v libx264 -r 20 -pix_fmt yuv420p -c:a copy -y {DIR}alice/output2.mp4"
    subprocess.run(command1, shell=True, stderr=subprocess.PIPE,
                   universal_newlines=True)

    command2 = f"ffmpeg -hide_banner -i {DIR}alice/output2.mp4 -filter:v \"setpts=5*PTS,minterpolate='fps=25:scd=none:me_mode=bidir:vsbmc=1:search_param=200'\" -t 58 -y {DIR}alice/final2.mp4"
    subprocess.run(command2, shell=True, stderr=subprocess.PIPE,
                   universal_newlines=True)

    command3 = f"ffmpeg -hide_banner -i {DIR}alice/final2.mp4 -filter:v \"setpts=5*PTS,minterpolate='fps=25:scd=none:me_mode=bidir:vsbmc=1:search_param=200'\" -t 58 -y {DIR}alice/final5.mp4"
    subprocess.run(command3, shell=True, stderr=subprocess.PIPE,
                   universal_newlines=True)

    # Add music to the video
    init = randint(10, 50)
    MUSIC = ["static/music/Born_a_Rockstar-Instrumental-NEFFEX.mp3", "static/music/Cattle-Telecasted.mp3", "static/music/Bite_Me-Clean-NEFFEX.mp3", "static/music/El_Secreto-Yung_Logos.mp3", "static/music/Blue_Mood-Robert_Munzinger.mp3", "static/music/Escapism-Yung_Logos.mp3", "static/music/Enough-NEFFEX.mp3", "static/music/As_You_Fade_Away-NEFFEX.mp3", "static/music/Culture-Anno_Domini_Beats.mp3", "static/music/Contrast-Anno_Domini_Beats.mp3", "static/music/Diving_in_Backwards-Nathan_Moore.mp3",
             "static/music/Aztec_Empire-Jimena_Contreras.mp3", "static/music/Devil_s_Organ-Jimena_Contreras.mp3", "static/music/Alpha_Mission-Jimena_Contreras.mp3", "static/music/Changing-NEFFEX.mp3", "static/music/Anxiety-NEFFEX.mp3", "static/music/6-Shots-NEFFEX.mp3", "static/music/DimishedReturns.mp3", "static/music/Drum_Meditation.mp3", "static/music/ChrisHaugen.mp3", "static/music/DoveLove-Moreira.mp3", "static/music/DesertPlanet.mp3", "static/music/David_Fesliyan.mp3"]

    music = random.choice(MUSIC)
    command3 = f"ffmpeg -i {DIR}alice/final5.mp4 -ss {init} -i {music} -af 'afade=in:st=0:d=4,afade=out:st=55:d=3' -map 0:0 -map 1:0 -shortest -y {DIR}alice/Final_End.mp4"
    subprocess.run(command3, shell=True)

    # Save the output video to a file
    now = datetime.datetime.now().strftime("%Y-%m-%d_%H-%M-%S")
    shutil.copy(f"{DIR}alice/output2.mp4", f"{DIR}alice/{now}_output.mp4")
    shutil.copy(f"{DIR}alice/Final_End.mp4", f"{DIR}alice/{now}_Final.mp4")
    shutil.copy(f"{DIR}alice/Final_End.mp4", f"{DIR}alice/Final_End_mix.mp4")
    return render_template('final.html', video_file="alice/Final_End.mp4")


@app.route('/large_video')
def large_video():
    return render_template('large_video.html')


@app.route('/add_border')
def add_border():
    images = [f for f in os.listdir(
        'static/images/uploads/') if os.path.isfile(os.path.join('static/images/uploads/', f))]
    thumbnails = []
    for image in images:
        with Image.open('static/images/uploads/' + image) as img:
            img.thumbnail((200, 200))
            thumbnail_name = 'thumbnail_' + image
            img.save('static/thumbnails/' + thumbnail_name)
            thumbnails.append(thumbnail_name)
    return render_template('add_border.html', images=images, thumbnails=thumbnails)


@app.route('/select_border')
def select_border():
    borders = os.listdir('static/transparent_borders/')
    return render_template('select_border.html', borders=borders)


@app.route('/apply_border', methods=['POST', 'GET'])
def apply_border():
    selected_image = request.form['image']
    selected_border = request.form['border']
    try:
        with Image.open('static/images/uploads/' + selected_image) as img:
            with Image.open('static/transparent_borders/' + selected_border) as border:
                img = img.resize(border.size)
                img.paste(border, (0, 0), border)
                final_image_name = 'final_' + selected_image
                img.save('static/final_images/' + final_image_name)
        return render_template('final_image.html', final_image=final_image_name, message='Border applied successfully.')
    except Exception as e:
        error_message = f'An error occurred: {str(e)}. Please try again.'
        return render_template('apply_border.html', image=selected_image, border=selected_border, error_message=error_message)


@app.route('/select_border_image', methods=['GET'])
def select_border_image():
    try:
        image = request.args.get('image')
        if not image:
            raise ValueError('No image selected.')
        return render_template('select_border.html', image=image, borders=os.listdir('static/transparent_borders/'))
    except Exception as e:
        error_message = f'An error occurred: {str(e)}. Please try again.'
        return render_template('add_border.html', error_message=error_message)


@app.route('/overlay_text', methods=['GET'])
def overlay_text():
    # Load the blank image
    blank_image_path = 'static/new_video/Border-plain.png'
    blank_image = Image.open(blank_image_path)

    # Load the text file and format its contents
    text_file_path = 'static/new_video/text_file.txt'
    with open(text_file_path, 'r') as file:
        text_contents = file.read()

    formatted_text = f"{text_contents}"  # Format the contents as desired

    # Set the font properties
    font_size = 21
    font_color = (255, 255, 255)  # White color
    font_path = '/home/jack/fonts/source-sans-pro-semibold.ttf'

    font = ImageFont.truetype(font_path, font_size)

    # Create a new image with the same size as the blank image and transparent background
    text_overlay = Image.new('RGBA', blank_image.size, (0, 0, 0, 0))

    # Draw the formatted text onto the overlay image
    draw = ImageDraw.Draw(text_overlay)
    text_position = (50, 600)  # Adjust the position as needed
    draw.text(text_position, formatted_text, font=font, fill=font_color)

    # Merge the overlay image with the blank image
    final_image = Image.alpha_composite(
        blank_image.convert('RGBA'), text_overlay)

    # Save the final image
    output_image_path = 'static/new_video/output_image.png'
    final_image.save(output_image_path)

    return render_template('overlay_text.html', output_image_path=output_image_path)


@app.route('/create_text_file', methods=['GET', 'POST'])
def create_text_file():
    if request.method == 'POST':
        # Get the text content from the textarea
        text_content = request.form.get('textarea_content')

        # Create the file path
        text_file_path = os.path.join('static/new_video', 'text_file.txt')

        # Write the text content to the file
        with open(text_file_path, 'w') as file:
            file.write(text_content)

        return render_template('text_file_created.html', text_file_path=text_file_path)

    return render_template('create_text_file.html')


def allowed_file(filename):
    return '.' in filename and filename.rsplit('.', 1)[1].lower() == 'jpg'


@app.route('/generate_video3', methods=['GET', 'POST'])
def generate_video3():
    if request.method == 'POST':
        # Check if any files were uploaded
        if 'file' not in request.files:
            error_message = "No files uploaded."
            logger.error(error_message)
            return render_template('generate_video3.html', error_message=error_message)

        files = request.files.getlist('file')

        # Check if files were selected
        if len(files) == 0:
            error_message = "No files selected."
            logger.error(error_message)
            return render_template('generate_video3.html', error_message=error_message)

        # Check if the files have supported extensions
        for file in files:
            if not allowed_file(file.filename):
                error_message = f"Invalid file extension for {file.filename}. Only JPG files are allowed."
                logger.error(error_message)
                return render_template('generate_video3.html', error_message=error_message)

        # Create a temporary directory to save the uploaded files
        temp_dir = os.path.join('static', 'temp')
        os.makedirs(temp_dir, exist_ok=True)

        # Save the uploaded files to the temporary directory
        saved_files = []
        for file in files:
            filename = secure_filename(file.filename)
            file_path = os.path.join(temp_dir, filename)
            file.save(file_path)
            saved_files.append(file_path)

        # Randomly select 30 image files
        selected_images = random.sample(saved_files, min(30, len(saved_files)))

        # Create a list of image clips from the selected images
        image_clips = []
        for image_file in selected_images:
            image_clip = mp.ImageClip(image_file, duration=1)
            image_clips.append(image_clip)

        # Concatenate the image clips into a video clip
        video_clip = mp.concatenate_videoclips(image_clips)

        # Set the output video path
        output_path = os.path.join('static', 'videos', 'generated_video.mp4')

        # Write the video clip to the output file
        video_clip.write_videofile(output_path, fps=24)

        # Delete the uploaded files after processing
        for file_path in saved_files:
            os.remove(file_path)

        # Return the generated video URL to the client
        video_url = url_for('static', filename='videos/generated_video.mp4')
        return render_template('generate_video3.html', video_url=video_url)

    # Render the initial form
    return render_template('generate_video3.html')


@app.route('/generate_video2')
def generate_video2():
    # Get the pythonlist of image files in the static/final_images/ directory
    # image_filenames = random.sample(glob.glob('static/final_images/*.jpg'),25)
    # image_filenames = random.sample(glob.glob('static/images/uploads/*.jpg'),30)
    # image_filenames = random.sample(glob.glob('static/alien_files/*.jpg'),30)
    image_filenames = random.sample(
        glob.glob('/mnt/HDD500/collections/absrtact/*.jpg'), 30)
    print(image_filenames, end="-")

    image_clips = []
    for filename in image_filenames:
        # Open the image file and resize it to 512x768
        image = Image.open(filename)
        image = image.resize((512, 768), Image.ANTIALIAS)
        print(image)
        # Convert the PIL Image object to a NumPy array
        image_array = np.array(image)
        # Create an ImageClip object from the resized image and set its duration to 1 second
        image_clip = ImageClip(image_array).set_duration(1)

        # Append the image clip to the list
        image_clips.append(image_clip)

    # Concatenate all the image clips into a single video clip
    video_clip = concatenate_videoclips(image_clips, method='compose')
    timestr = time.strftime("%Y%m%d-%H%M%S")
    # Set the fps value for the video clip
    video_clip.fps = 24
    # Write the video clip to a file
    video_path = 'static/videos/random_images' + timestr + 'video.mp4'
    video_clip.write_videofile(video_path, fps=24)
    video_clip.write_videofile('static/videos/TEMPvideo.mp4', fps=24)

    # Return a message to the client
    return render_template('generate_video2.html', video_url='static/videos/TEMPvideo.mp4')
    # return render_template('generate_video2.html' ,video_url='/static/videos/TEMPvideo.mp4', video_path=video_path)


@app.route('/ffmpeg_ctl', methods=['GET', 'POST'])
def ffmpeg_ctl():
    if request.method == 'POST':
        # Access the numeric input value from the form data
        number = request.form.get('number')
        # Process the value as needed
        # ...

    return render_template('ffmpeg_ctl.html')


@app.route('/mkmoz', methods=['GET', 'POST'])
def mkmoz():
    im = Image.new("RGB", (2048, 2048), (250, 250, 250))
    for i in range(0, 2500):
        if i < 500:
            DIR = "/home/jack/.cache/thumbnails/large/*.png"
        if i > 500:
            DIR = "/home/jack/.cache/thumbnails/normal/*.png"
        # if i> 2495:DIR = "/home/jack/.cache/thumbnails/large/*.png"
        thumb = random.choice(glob.glob(DIR))
        print("THUMB:", thumb)
        Thum = Image.open(thumb)
        im.paste(Thum, ((randint(0, im.size[0])), randint(0, im.size[1]) - 50))
        filename = "static/images/ThumbNails.png"
        im.save(filename)
        Filename = "images/ThumbNails.png"
    return render_template("mkmoz.html", filename=Filename)


@app.route('/mk_background', methods=['GET', 'POST'])
def mk_background():
    im = Image.new("RGB", (8000, 512), (127, 255, 127))
    for i in range(0, 1000):
        if i < 250:
            DIR = "/home/jack/.cache/thumbnails/large/*.png"
        else:
            DIR = "/home/jack/.cache/thumbnails/normal/*.png"
        thumb = random.choice(glob.glob(DIR))
        print("THUMB:", thumb)
        Thum = Image.open(thumb)
        im.paste(Thum, ((randint(0, im.size[0])), randint(0, im.size[1]) - 50))
        filename = "static/images/ThumbNails_Background.png"
        im.save(filename)
    return redirect('/mkvid')


@app.route('/mkvid')
def mkvid():
    Filename = "static/images/ThumbNails_Background.png"
    Video_file = "static/images/ThumbNails_Background_FFmpeg.mp4"
    command = [
        'FFmpeg', '-hide_banner',
        '-loop', '1', '-i', 'static/images/ThumbNails_Background.png',
        '-vf', 'scale=8000:512,scroll=horizontal=0.0001,crop=768:512:0:0,format=yuv420p',
        '-t', '240', '-y', 'static/images/ThumbNails_Background_FFmpeg.mp4'
    ]
    subprocess.run(command)
    return redirect('/mkvid2')


@app.route('/mkvid2')
def mkvid2():
    command2 = [
        'ffmpeg', '-hide_banner',
        '-i', 'static/images/ThumbNails_Background_FFmpeg.mp4',
        '-vf', 'scale=512:768,setsar=1/1',
        '-c:a', 'copy', '-y', 'static/images/long_512-768.mp4'
    ]
    subprocess.run(command2)
    Filenamez = "images/ThumbNails_Background.png"
    Video_filez = "images/long_512-768.mp4"
    return render_template("mkvid2.html", filename=Filenamez, video=Video_filez)


def get_db():
    db = getattr(g, '_database', None)
    if db is None:
        db = g._database = sqlite3.connect(app.config['DATABASE'])
    return db


@app.teardown_appcontext
def close_connection(exception):
    db = getattr(g, '_database', None)
    if db is not None:
        db.close()


@app.route('/view_thumbs')
def view_thumbs():
    # Define the directory where the images are located
    image_directory = 'static/images/uploads'
    # Get a list of all the image files in the directory
    image_files = [f for f in os.listdir(
        image_directory) if f.endswith('.jpg') or f.endswith('.png')]
    # Create a list of dictionaries containing the image file name and URL
    image_list = [{'name': f, 'url': f'/images/uploads/{f}'}
                  for f in image_files]
    # Render the template with the list of images
    return render_template('view_thumbs.html', image_list=image_list)


@app.route('/add_text', methods=['GET', 'POST'])
def add_text():
    if request.method == 'POST':
        text = request.form['text']
        now = datetime.datetime.now()
        timestamp = now.strftime("%Y-%m-%d %H:%M:%S")
        text = f'Text Entry: {timestamp} {text}'
        with open('chat.txt', 'a') as file:
            file.write(f'\n{text}')
        return render_template('add_text.html', message='Text added successfully')
    else:
        return render_template('add_text.html')


@app.route('/search_txt', methods=['GET', 'POST'])
def search_txt():
    if request.method == 'POST' and 'phrase' in request.form:
        phrase = request.form['phrase']
        with open('chat.txt', 'r') as file:
            lines = file.readlines()
        results = []
        for i, line in enumerate(lines):
            if phrase in line:
                start = max(0, i - 5)
                end = min(len(lines), i + 6)
                context = lines[start:end]
                for j, context_line in enumerate(context):
                    if phrase in context_line:
                        results.append(f'Line {start+j}: {context_line}')
                    else:
                        results.append(f'Line {start+j}: {context_line}')
        return render_template('results.html', results=results)
    return render_template('search_txt.html')


@app.route('/blend_pil', methods=['POST', 'GET'])
def blend_pil():
    if request.method == 'POST':
        # Get the uploaded images
        img1 = request.files['img1']
        img2 = request.files['img2']
        img3 = request.files['img3']

        # Open the images using PIL
        img1_pil = Image.open(img1)
        img2_pil = Image.open(img2)
        img3_pil = Image.open(img3)

        # Blend the images
        blended_pil = Image.blend(img1_pil, img2_pil, 1 / 3)
        blended_pil = Image.blend(blended_pil, img3_pil, 1 / 3)

        # Return the blended image as a response
        # Since we are not saving it to the server, we can use a BytesIO object to avoid creating a temporary file
        img_io = BytesIO()
        blended_pil.save(img_io, 'JPEG', quality=70)
        current_datetime = datetime.now()
        str_current_datetime = str(current_datetime)
        file_name = "static/images/uploads/blended_pil" + \
            str_current_datetime + "XXXX.jpg"
        blended_pil.save(file_name, format='JPEG')
        img_io.seek(0)

        # Generate the HTML for displaying the blended image in the template
        blended_image_data = base64.b64encode(
            img_io.getvalue()).decode('utf-8')
        blended_image_url = f"data:image/jpeg;base64,{blended_image_data}"
        # blended_image_url = blended_image_url.resize(( blended_image_url.size[0]//2, blended_image_url.size[1]//2), Image.ANTIALIAS)
        # Pass the URL of the blended image to the template
        return render_template('show_blend_pil.html', blended_image_url=blended_image_url)
    return render_template('blend_pil.html')


@app.route('/process_images', methods=['POST', 'GET'])
def process_images():
    if request.method == 'POST':
        # read the images from the request
        img1 = Image.open(request.files['image1'].stream).convert('RGB')
        img2 = Image.open(request.files['image2'].stream).convert('L')
        img3 = Image.open(request.files['image3'].stream).convert('RGB')

        # resize the images to have the same shape
        img1 = img1.resize((img2.width, img2.height))
        img3 = img3.resize((img2.width, img2.height))

        # convert the mask to binary
        threshold = 127
        mask = Image.eval(img2, lambda px: 255 if px > threshold else 0)

        # apply the mask
        img = Image.composite(img1, img3, mask)

        # save the image to a file
        output = BytesIO()
        current_datetime = datetime.now()
        str_current_datetime = str(current_datetime)
        file_name = "static/images/" + str_current_datetime + "XXXX.jpg"
        img.save(file_name, format='JPEG')
        img.save(output, format='JPEG')
        output.seek(0)

        # encode the image to bytes
        img_bytes = output.getvalue()

        # return the image as a response
        return Response(img_bytes, mimetype='image/jpeg')
    return render_template('process_images.html')


@app.route('/image_directories', methods=['GET', 'POST'])
def image_directories():
    image_directories = ['static/Prodia_640x640', 'static/LineArt',
                         'static/Quantized', 'static/squares', 'static/BrightColors']
    if request.method == 'POST':
        # Rest of the code

        directory = request.form['directory']
        # Check that the directory parameter is not empty
        if directory:
            app.logger.info(
                'Redirecting endpoint with directory: %s', directory)
            # Check that the directory is a valid directory path
            if os.path.isdir(directory):
                # Pass the directory value to the square_video endpoint
                app.logger.info(
                    'Redirecting to square_video endpoint with directory: %s', directory)
                return redirect(url_for('square_video', directory=directory))
            else:
                # Render an error template if the directory parameter is not a valid directory path
                app.logger.error('Invalid directory parameter: %s', directory)
                return render_template('error.html', message='Please enter a valid directory path.')
        else:
            # Render an error template if the directory parameter is empty
            app.logger.error('Directory parameter is empty')
            return render_template('error.html', message='Please enter a directory path.')
    else:
        # Pass the list of image directories to the template
        return render_template('image_directories.html', image_directories=image_directories)


@app.route('/select_playmp3', methods=['GET', 'POST'])
def select_playmp3():
    # Get the list of mp3 files in the static/audio_mp3/ directory
    mp3_files = [f for f in os.listdir(
        'static/audio_mp3/') if f.endswith('.mp3')]
    if request.method == 'POST':
        # Get the selected MP3 file from the dropdown list
        mp3_file = request.form['mp3_file']
        # Play the selected mp3 file
        pygame.mixer.init()
        pygame.mixer.music.load('static/audio_mp3/' + mp3_file)
        pygame.mixer.music.play()
        # Wait for the audio to finish playing
        while pygame.mixer.music.get_busy():
            pygame.time.Clock().tick(10)
        # Stop pygame and exit the program
        pygame.mixer.quit()
        pygame.quit()
    # Render the template with the list of mp3 files
    return render_template('select_playmp3.html', mp3_files=mp3_files)


@app.route("/make_animation")
def make_animation():
    # Get a list of all files in the final_images directory
    # image_files = os.listdir("static/final_images/")
    # DIR = "/home/jack/Desktop/HDD500/collections/gypsy_files/"
    # DIR = "/home/jack/Desktop/HDD500/collections/hippy_files/"
    #DIR = "/mnt/HDD500/collections/jungle/exotic_lithograph_prints-Playground_AI_files/512x768/"
    DIR = "static/images/clip_drop/"
    selected_files = random.sample(glob.glob(DIR + '*.jpg'), 30)
    print(selected_files)
    #image_files = os.listdir(DIR)
    # image_files = os.listdir("/mnt/HDD500/collections/640x640-alien/")
    # Select 20 random files from the list
    #selected_files = random.sample(image_files, 30)

    # Load each selected file, resize it to 400x600, and save it to a temporary directory
    resized_images = []
    for filename in selected_files:
        print(filename)
        with Image.open(filename) as img:

            img = img.resize((400, 600))
            temp_filename = "static/tmp/" + filename
            img.save(temp_filename)
            resized_images.append(temp_filename)

    # Create an animated GIF from the resized images

    gif_filename = "static/animated_gifs/animated.gif"
    with imageio.get_writer(gif_filename, mode='I', duration=1) as writer:
        for filename in resized_images:
            image = imageio.imread(filename)
            writer.append_data(image)
    import shutil

    timestr = time.strftime("%Y%m%d-%H%M%S")

    src = 'static/animated_gifs/animated.gif'
    dst = 'static/animated_gifs/animated' + timestr + '.gif'
    # 2nd option
    shutil.copy(src, dst)
    # Return a template that displays the GIF
    return render_template("make_animation.html", gif_filename=gif_filename)


@app.route('/title_page', methods=['GET', 'POST'])
def title_page():
    if request.method == 'POST':
        # Get the text input and image file from the form data
        text = request.form['text']
        image = request.files['image']

        # Save the image to a temporary location
        image_path = os.path.join(
            app.config['UPLOAD_FOLDER'], secure_filename(image.filename))
        image.save(image_path)

        # Open the image file
        image = Image.open(image_path)

        # Create a drawing context on the image
        draw = ImageDraw.Draw(image)

        # Define the font and font size for the text
        font = ImageFont.truetype('static/fonts/OpenSansBold.ttf', 50)
        # Split the text by newline characters
        lines = text.split("  ")

        # Calculate the size of each line and get the maximum width
        line_sizes = [draw.textsize(line, font) for line in lines]
        max_line_width = max([size[0] for size in line_sizes])

        # Calculate the total size of the text
        text_width = max_line_width
        text_height = sum([size[1] for size in line_sizes])

        # Calculate the position of the text in the center of the image
        x = (640 - text_width) / 2
        y = (640 - text_height) / 2

        # Calculate the size of the text
        text_width, text_height = draw.textsize(text, font)

        # Calculate the position of the text in the center of the image
        x = (640 - text_width) / 2
        y = (640 - text_height) / 2

        # Add the text to the image
        draw.text((x, y), text, font=font, fill=(0, 0, 0, 255))

        # Save the image to the static folder with a unique filename
        inc = text.replace(" ", "")
        filenamex = os.path.join(
            app.static_folder, 'title_pages', f'{inc}_{hash(text)}.png')
        image.save(filenamex)
        filename = 'static/title_pages/title_page.png'
        shutil.copy(filenamex, filename)
        logger.error('filename: %s', filename)

        # print(inc[:5])
        # Remove the temporary image file
        # os.remove(image_path)
        filenamev = 'title_pages/title_page.png'
        # Return the rendered template with the image filename
        return render_template('title_page.html', filename=filenamev)
    filenamev = 'title_pages/title_page.png'
    return render_template('title_page.html', filename=filenamev)


@app.route('/add_title', methods=['GET', 'POST'])
def add_title():
    # Create the final_videos directory if it does not exist
    final_videos_dir = os.path.join(app.static_folder, 'final_videos')
    if not os.path.exists(final_videos_dir):
        os.makedirs(final_videos_dir)

    if request.method == 'POST':
        app.logger.debug('Entering POST request handler for /add_title')
        # Get the paths of the selected video and title page
        video_path = os.path.join(
            app.static_folder, 'videos', request.form['video'])
        title_page_path = os.path.join(
            app.static_folder, 'title_pages', request.form['title_page'])
        app.logger.debug(f'video_path: {video_path}')
        app.logger.debug(f'title_page_path: {title_page_path}')

        # Load the video and title page as clips
        video_clip = VideoFileClip(video_path)
        title_page_clip = ImageClip(title_page_path).set_duration(2)

        # Add the title page to the video for the first 2 seconds
        final_clip = concatenate_videoclips(
            [title_page_clip, video_clip.subclip(2)])

        # Save the final video to the final_videos directory
        final_filename = f"{os.path.splitext(request.form['video'])[0]}_{os.path.splitext(request.form['title_page'])[0]}.mp4"
        final_path = os.path.join(final_videos_dir, final_filename)
        app.logger.debug(f'final_path: {final_path}')
        final_clip.write_videofile(final_path)

        # Return a response to the user indicating that the video with title page was created
        message = f"The video with title page was created and saved to {final_path}"
        return render_template('add_title.html', message=message)

    # If the request method is GET, render the add_title.html template
    app.logger.debug('Entering GET request handler for /add_title')
    videos = os.listdir(os.path.join(app.static_folder, 'square_vids'))
    title_pages = os.listdir(os.path.join(app.static_folder, 'title_pages'))
    app.logger.debug(f'videos: {videos}')
    app.logger.debug(f'title_pages: {title_pages}')
    return render_template('add_title.html', videos=videos, title_pages=title_pages)


def get_rowid():
    # Connect to the database
    db = sqlite3.connect('code.db')
    cursor = db.cursor()
    row_id = request.form['row_id']
    # Execute a query to retrieve the rowid
    cursor.execute("SELECT rowid FROM snippets WHERE rowid = ?", (rowid,))

    # Fetch the result
    result = cursor.fetchone()

    # Close the database connection
    db.close()

    # Check if a rowid was found
    if result:
        rowid = result[0]
    else:
        # Handle the case when no rowid is found
        rowid = None

    return rowid


@app.route('/indexA')
def indexA():
    image_dir = 'static/images'
    image_files = [f for f in os.listdir(image_dir) if f.endswith('.jpg')]
    random_image_file = random.choice(image_files)
    app.logger.info(f"Random image file selected: {random_image_file}")
    return render_template('indexA.html', random_image_file=random_image_file)


@app.route('/index_FLASK')
def index_FLASK():
    image_dir = 'static/images'
    image_files = [f for f in os.listdir(image_dir) if f.endswith('.jpg')]
    random_image_file = random.choice(image_files)
    app.logger.info(f"Random image file selected: {random_image_file}")

    return render_template('index_FLASK.html')


# Configuration
app.config['DATABASE'] = 'code.db'


def get_db():
    db = getattr(g, '_database', None)
    if db is None:
        db = g._database = sqlite3.connect("code.db")
    return db


@app.teardown_appcontext
def close_connection(exception):
    db = getattr(g, '_database', None)
    if db is not None:
        db.close()


@app.before_first_request
def create_table():
    db = get_db()
    cursor = db.cursor()

    cursor.execute('''
        CREATE TABLE IF NOT EXISTS products (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            name TEXT NOT NULL,
            description TEXT,
            price REAL
        )
    ''')

    db.commit()


@app.teardown_appcontext
def close_connection(exception):
    db = getattr(app, '_database', None)
    if db is not None:
        db.close()


@app.route('/indexD')
def indexD():
    return redirect('/products')


@app.route('/products', methods=['GET', 'POST'])
def products():
    if request.method == 'POST':
        name = request.form['name']
        description = request.form['description']
        price = request.form['price']

        db = get_db()
        cursor = db.cursor()
        cursor.execute("INSERT INTO products (name, description, price) VALUES (?, ?, ?)",
                       (name, description, price))
        db.commit()

    db = get_db()
    cursor = db.cursor()
    cursor.execute("SELECT * FROM products")
    products = cursor.fetchall()

    return render_template('products.html', products=products)


@app.route('/edit/<int:product_id>', methods=['GET', 'POST'])
def edit_product(product_id):
    if request.method == 'POST':
        name = request.form['name']
        description = request.form['description']
        price = request.form['price']

        db = get_db()
        cursor = db.cursor()
        cursor.execute("UPDATE products SET name=?, description=?, price=? WHERE id=?",
                       (name, description, price, product_id))
        db.commit()

        return redirect('/products')

    db = get_db()
    cursor = db.cursor()
    cursor.execute("SELECT * FROM products WHERE id=?", (product_id,))
    product = cursor.fetchone()

    return render_template('edit_product.html', product=product)


@app.route('/delete/<int:product_id>', methods=['POST'])
def delete_product(product_id):
    db = get_db()
    cursor = db.cursor()
    cursor.execute("DELETE FROM products WHERE id=?", (product_id,))
    db.commit()

    return redirect('/products')
# Function to create the database and table
    
@app.route('/access_database')
def access_database():
    db_path = os.path.join(os.path.dirname(__file__), 'code.db')
    conn = sqlite3.connect(db_path)
    cursor = conn.cursor()
    cursor.execute('SELECT * FROM snippets')
    code = cursor.fetchall()
    conn.close()
    return render_template('database.html', code=code)
# Function to create the database and table


def create_databaseD():
    conn = sqlite3.connect('code.db')
    cursor = conn.cursor()
    # cursor.execute("CREATE TABLE snippets (description TEXT, code TEXT, keywords TEXT)")
    cursor.execute('''
        CREATE TABLE IF NOT EXISTS snippets (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            description TEXT NOT NULL,
            code TEXT,
            keywords TEXT
        )
    ''')
    conn.commit()
    conn.close()
# Route to display all code


@app.route('/code', methods=['GET'])
def display_code():
    conn = sqlite3.connect('code.db')
    cursor = conn.cursor()
    cursor.execute('SELECT * FROM snippets')
    code = cursor.fetchall()
    conn.close()

    # Define the HTML code for the form
    form_code = """
    <h1>Add New code</h1>
    <form action="/code" method="post">
        <label for="description">Description:</label>
        <textarea type="description" name="description" rows="8" cols="90%"></textarea><br />
        <label for="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Code:</label>
        <textarea type="text" name="code" rows="8" cols="90%"></textarea><br>
        <label for="keywords">Keywords:</label>
        <input style="width:53%;height: 25px;" type="keywords" name="keywords"><br>
        <input type="submit" value="Add code">
    </form>
    """

    return render_template('code.html', code=code, form_code=form_code)
# Route to add a new code


@app.route('/code', methods=['POST'])
def add_code():
    description = request.form['description']
    code = request.form['code']
    keywords = request.form['keywords']

    conn = sqlite3.connect('code.db')
    cursor = conn.cursor()
    cursor.execute('INSERT INTO snippets (description, code, keywords) VALUES (?, ?, ?)',
                   (description, code, keywords))
    conn.commit()
    conn.close()
    return redirect(url_for('display_code'))
# Route to edit a code


@app.route('/edit_code/<int:code_id>', methods=['GET', 'POST'])
def edit_code(code_id):
    conn = sqlite3.connect('code.db')
    cursor = conn.cursor()

    if request.method == 'POST':
        description = request.form['description']
        code = request.form['code']
        keywords = request.form['keywords']

        cursor.execute('UPDATE snippets SET description=?, code=?, keywords=? WHERE id=?',
                       (description, code, keywords, code_id))
        conn.commit()
        conn.close()
        return redirect(url_for('display_code'))

    cursor.execute('SELECT * FROM snippets WHERE id = ?', (code_id,))
    code = cursor.fetchone()
    conn.close()
    return render_template('edit_code.html', code=code)
# Route to delete a code


@app.route('/delete_code/<int:code_id>', methods=['POST'])
def delete_code(code_id):
    conn = sqlite3.connect('code.db')
    cursor = conn.cursor()
    cursor.execute('DELETE FROM snippets WHERE id = ?', (code_id,))
    conn.commit()
    conn.close()
    return redirect(url_for('display_code'))


@app.route('/indexE')
def indexE():
    # Get a list of directories within static/images
    image_directories = os.listdir(os.path.join(app.static_folder, 'images'))

    # Create a dropdown menu with the list of directories
    dropdown_menu = ""
    for directory in image_directories:
        dropdown_menu += f'<option value="{directory}">{directory}</option>'

    return f"""
    <!DOCTYPE html>
    <html>
    <body>
        <h2>Upload a file</h2>
        <form action="/uploadN" method="post" enctype="multipart/form-data">
            <select name="directory">
                {dropdown_menu}
            </select>
            <input type="file" name="file">
            <input type="submit" value="Upload">
        </form>
    </body>
    </html>
    """


@app.route('/uploadN', methods=['POST'])
def upload_fileN():
    # Check if a file was submitted in the request
    if 'file' not in request.files:
        return redirect(url_for('indexD'))

    file = request.files['file']

    # Check if the file is not empty
    if file.filename == '':
        return redirect(url_for('indexE'))

    # Save the file to the desired directory
    save_path = os.path.join('static', 'temp_images', file.filename)
    file.save(save_path)

    return f'The file {file.filename} has been uploaded successfully!'


def FilenameByTime(directory):
    timestr = time.strftime("%Y%m%d-%H%M%S")
    filename = directory + "/" + timestr + "_.png"
    return filename


def change_extension(orig_file, new_extension):
    p = change_ext(orig_file)
    new_name = p.rename(p.with_suffix(new_extension))
    return new_name


def auto_canny(image, sigma=0.33):
    # compute the median of the single channel pixel intensities
    v = np.median(image)
    # apply automatic Canny edge detection using the computed median
    lower = int(max(0, (1.0 - sigma) * v))
    upper = int(min(255, (1.0 + sigma) * v))
    edged = cv2.Canny(image, lower, upper)
    # return the edged image
    return edged
# image = cv2.imread('mahotastest/orig-color.png')


def change_extension(orig_file, new_extension):
    p = change_ext(orig_file)
    new_name = p.rename(p.with_suffix(new_extension))
    return new_name


def outlineJ(filename1, outfile_jpg, sigma=0.33):
    """
    USE:
    filename1 = '/home/jack/Desktop/Imagedata/0-original-images/07082orig.jpg' 
    outfile_jpg = '/home/jack/Desktop/dockercommands/images/useresult.png'
    outlineJ(filename1,outfile_jpg)
    """
    image = cv2.imread(filename1)
    edged = auto_canny(image, sigma=0.33)
    inverted = cv2.bitwise_not(edged)
    cv2.imwrite("static/outlines/temp2.png", inverted)
    cv2.imwrite(FilenameByTime("static/outlines/"), inverted)
    # Open Front Image
    # frontimage = Image.open('mahotastest/inverted-bitwise-note3_6.png').convert("1")
    frontimage = Image.open('static/outlines/temp2.png').convert("1")
    frontImage = frontimage.convert("RGBA")
    datas = frontImage.getdata()
    newData = []
    for item in datas:
        if item[0] == 255 and item[1] == 255 and item[2] == 255:
            newData.append((255, 255, 255, 0))
        else:
            newData.append(item)

    frontImage.putdata(newData)
    # Open Background Image
    background = Image.open(filename1)
    # Calculate width to be at the center
    width = (frontimage.width - frontimage.width) // 2
    # Calculate height to be at the center
    height = (frontimage.height - frontimage.height) // 2
    # Paste the frontImage at (width, height)
    background.paste(frontImage, (width, height), frontImage)
    # Save this image
    background.save(outfile_jpg)
    savefile = FilenameByTime("static/outlines/")
    background.save(savefile)
    # background = background.convert("RGB")
    return background


def outlineP(filename1, outfile_png):
    """
    USE:
    filename1 = '/home/jack/Desktop/Imagedata/0-original-images/07082orig.jpg'
    outfile_jpg = '/home/jack/Desktop/dockercommands/images/useresult.png'
    outlineP(filename1,outfile_png)
    """
    image = cv2.imread(filename1)
    edged = auto_canny(image, sigma=0.33)
    inverted = cv2.bitwise_not(edged)
    cv2.imwrite("static/outlines/temp2.png", inverted)
    cv2.imwrite(FilenameByTime("static/outlines/"), inverted)
    # Open Front Image
    # frontimage = Image.open('mahotastest/inverted-bitwise-note3_6.png').convert("1")
    frontimage = Image.open('static/outlines/temp2.png').convert("1")
    frontImage = frontimage.convert("RGBA")
    datas = frontImage.getdata()
    newData = []
    for item in datas:
        if item[0] == 255 and item[1] == 255 and item[2] == 255:
            newData.append((255, 255, 255, 0))
        else:
            newData.append(item)

    frontImage.putdata(newData)
    # Open Background Image
    background = Image.open(filename1)
    # Calculate width to be at the center
    width = (frontimage.width - frontimage.width) // 2
    # Calculate height to be at the center
    height = (frontimage.height - frontimage.height) // 2
    # Paste the frontImage at (width, height)
    background.paste(frontImage, (width, height), frontImage)
    # Save this image
    background.save(outfile_png, format="png")
    savefile = FilenameByTime("static/outlines/")
    background.save(savefile, format="png")
    # background = background.convert("RGB")
    return background


@app.route('/outline_j', methods=['POST'])
def outline_j():
    if request.method == 'POST':
        # Get the uploaded image file from the form data
        file = request.files['file']

        # Save the uploaded file to a temporary location

        temp_path = 'static/outlines/temp_image.jpg'
        file.save(temp_path)

        # Process the image using outlineJ function
        output_path = 'static/outlines/outlined_image_j.jpg'
        outlineJ(temp_path, output_path)
        output_path2 = "static/outlines/temp2.png"
        # Return the path to the processed image to display it on a page
        return render_template('outlined_image.html', image_orig=temp_path, image_path=output_path, image_path2=output_path2)


@app.route('/outline_p', methods=['POST'])
def outline_p():
    if request.method == 'POST':
        # Get the uploaded image file from the form data
        file = request.files['file']

        # Save the uploaded file to a temporary location
        temp_path = 'static/temp_image.jpg'
        image_orig = temp_path
        file.save(temp_path)

        # Process the image using outlineP function
        output_path = 'static/outlines/outlined_image_p.png'
        outlineP(temp_path, output_path)
        output_path2 = "static/outlines/temp2.png"
        # Return the path to the processed image to display it on a page
        return render_template('outlined_image.html', image_orig=temp_path, image_path=output_path, image_path2=output_path2)


def zoom_effect(bg_file, fg_file):
    bg = Image.open(bg_file).convert('RGBA')
    SIZE = bg.size
    bg = bg.resize((SIZE), Image.BICUBIC)
    fg = Image.open(fg_file).convert('RGBA')
    fg = fg.resize((SIZE), Image.BICUBIC)
    fg_copy = fg.copy()
    fg_copy = fg_copy.resize((int(fg_copy.width), int(fg_copy.height)))
    result_images = []
    for i in range(200):
        size = (int(fg_copy.width * (i + 1) / 200),
                int(fg_copy.height * (i + 1) / 200))
        fg_copy_resized = fg_copy.resize(size)
        fg_copy_resized.putalpha(int((i + 1) * 255 / 200))
        fg_copy_resized = fg_copy_resized.convert('RGBA')
        fg_copy_resized.putalpha(int((i + 1) * 255 / 200))
        result = bg.copy()
        x = int((bg.width - fg_copy_resized.width) / 2)
        y = int((bg.height - fg_copy_resized.height) / 2)
        result.alpha_composite(fg_copy_resized, (x, y))
        # result.save("gifs/_"+str(i)+".png")
        result_images.append(result)

    return result_images  # Move the return statement outside the for loop


def create_mp4_from_images(images_list, output_file, fps):
    # Convert PIL Image objects to NumPy arrays
    image_arrays = [np.array(image) for image in images_list]

    # Create the video clip from the NumPy arrays
    clip = ImageSequenceClip(image_arrays, fps=fps)

    # Write the video to the output file
    clip.write_videofile(output_file, codec="libx264", fps=fps)


@app.route('/upload_form')
def upload_form():
    return render_template('upload_form.html')


@app.route('/process_imagez', methods=['POST', 'GET'])
def process_imagez():
    if 'bg_image' not in request.files or 'fg_image' not in request.files:
        return redirect(url_for('upload_form'))

    bg_image = request.files['bg_image']
    fg_image = request.files['fg_image']

    if bg_image.filename == '' or fg_image.filename == '':
        return redirect(url_for('upload_form'))

    bg_filename = 'background.png'
    fg_filename = 'foreground.png'

    bg_image.save(bg_filename)
    fg_image.save(fg_filename)

    bg_file_path = os.path.abspath(bg_filename)
    fg_file_path = os.path.abspath(fg_filename)

    images_list = zoom_effect(bg_file_path, fg_file_path)

    output_mp4_file = 'static/overlay_zooms/imagez_video.mp4'
    frames_per_second = 30
    create_mp4_from_images(images_list, output_mp4_file, frames_per_second)

    # Clean up temporary files
    # os.remove(bg_filename)
    # os.remove(fg_filename)
    file_bytime = time.strftime("%Y%m%d-%H%M%S") + ".mp4"

    shutil.copy('static/overlay_zooms/imagez_video.mp4',
                'static/overlay_zooms/' + file_bytime)
    video_url = url_for('static', filename=output_mp4_file)
    return render_template('upload.html', video_url=video_url)


app.config['DATABASE'] = 'code.db'

# Set up logger
# logger.basicConfig(level=logger.DEBUG)
# logger = logger.getLogger(__name__)


def get_db():
    db = getattr(g, '_database', None)
    if db is None:
        db = g._database = sqlite3.connect(app.config['DATABASE'])
    return db


@app.route('/indexdb')
def indexdb():
    logger.debug("Accessing indexdb route")
    return render_template('indexdb.html')


@app.route('/select_by_id_form', methods=['POST', 'GET'])
def select_by_id_form():
    logger.debug("Accessing select_by_id_form route")
    return render_template('select_by_id_form.html')


@app.route('/search_by_rowid', methods=['GET', 'POST'])
def search_by_rowid():
    logger.debug("Accessing search_by_rowid route")
    return render_template('search_by_rowid.html')

# ...
# ...
# ...
# Function to get a list of image files from the selected directory


def get_image_list(selected_directory):
    image_extensions = ['.jpg', '.jpeg', '.png', '.gif']
    image_list = [f for f in os.listdir(selected_directory) if os.path.isfile(
        os.path.join(selected_directory, f)) and f.lower().endswith(tuple(image_extensions))]
    print(image_list)
    return image_list


@app.route('/Index', methods=['GET', 'POST'])
def Index():
    if request.method == 'POST':
        selected_directory = request.form['selected_directory']
        image_list = get_image_list(selected_directory)
        images = [os.path.join(selected_directory, image)
                  for image in image_list]

        clips = [ImageClip(m).set_duration(0.5) for m in images]
        concat_clip = concatenate_videoclips(clips, method="compose")
        uid = str(uuid.uuid4())  # Generate a unique ID using uuid
        mp4_file = os.path.join("static", "videos", f"{uid}.mp4")
        concat_clip.write_videofile(mp4_file, fps=24)
        return render_template('Index.html', video=mp4_file)
    else:
        directory_list = glob.glob("static/images/*/", recursive=True)
        return render_template('Index.html', directory_list=directory_list)
# ...
# ...

# ...


@app.route('/edit_data_page', methods=['GET', 'POST'])
@app.route('/edit_data_page/<int:rowid>', methods=['GET', 'POST'])
def edit_data_page(rowid=None):
    db = get_db()
    cursor = db.cursor()

    if request.method == 'POST':
        description = request.form['description']
        code = request.form['code']
        keywords = request.form['keywords']

        if rowid is not None:
            # Update the data in the database for the given rowid
            cursor.execute("UPDATE snippets SET description = ?, code = ?, keywords = ? WHERE rowid = ?",
                           (description, code, keywords, rowid))
        else:
            # Insert the data into the database as a new row
            cursor.execute("INSERT INTO snippets (description, code, keywords) VALUES (?, ?, ?)",
                           (description, code, keywords))

        db.commit()

        # Close the database connection
        cursor.close()
        db.close()

        return redirect(url_for('indexdb'))

    if rowid is not None:
        # If a rowid is provided, retrieve the data from the database
        # based on the provided rowid and render the edit_data.html template
        cursor.execute("SELECT * FROM snippets WHERE rowid = ?", (rowid,))
        data = cursor.fetchone()

        if data is None:
            # If no data is found for the given rowid, return an error message
            return "Error: Data not found for the provided Row ID."

        # Convert the fetched data to a dictionary for easier access in the template
        data = {
            'rowid': data[0],
            'description': data[1],
            'code': data[2],
            'keywords': data[3]
        }

    else:
        # If no rowid is provided, create an empty data dictionary
        data = {}

    # Close the database connection
    cursor.close()
    db.close()

    return render_template('edit_data.html', data=data)
# ...


@app.route('/get_rowid_form', methods=['GET', 'POST'])
def get_rowid_form():
    if request.method == 'POST':
        rowid = request.form['rowid']
        return redirect(url_for('edit_data_page', rowid=rowid))
    return render_template('get_rowid_form.html')

# ...


@app.route('/search_database', methods=['POST', 'GET'])
def search_database():
    logger.debug("Accessing search_database route")
    if request.method == 'POST':
        search_term = request.form['search_term']
        search_area = request.form['search_area']
    else:
        # For GET requests, get the search_term and search_area from the query string
        search_term = request.args.get('search_term')
        search_area = request.args.get('search_area')

    if not search_term or not search_area:
        logger.debug(
            "Redirecting to indexdb due to missing search_term or search_area")
        # Redirect to the main index page if search_term or search_area is missing
        return redirect('/indexdb')

    db = get_db()
    cursor = db.cursor()

    if search_area == 'rowid':
        cursor.execute(
            "SELECT rowid, * FROM snippets WHERE rowid = ?", (search_term,))
    elif search_area == 'description':
        cursor.execute(
            "SELECT rowid, * FROM snippets WHERE description LIKE ?", ('%' + search_term + '%',))
    elif search_area == 'code':
        cursor.execute(
            "SELECT rowid, * FROM snippets WHERE code LIKE ?", ('%' + search_term + '%',))
    elif search_area == 'keywords':
        cursor.execute(
            "SELECT rowid, * FROM snippets WHERE keywords LIKE ?", ('%' + search_term + '%',))
    else:
        logger.debug("Redirecting to indexdb due to invalid search area")
        # Redirect to the main index page if an invalid search area is provided
        return redirect('/indexdb')

    results = cursor.fetchall()
    logger.debug("Rendering db_results.html template with search results")
    return render_template('db_results.html', results=results)


@app.route('/insert_data', methods=['POST', 'GET'])
def insert_data():
    logger.debug("Accessing insert_data route")
    if request.method == 'POST':
        description = request.form['description']
        code = request.form['code']
        keywords = request.form['keywords']

        # Assuming you have the database connection and cursor defined
        db = get_db()
        cursor = db.cursor()

        cursor.execute("INSERT INTO snippets (description, code, keywords) VALUES (?, ?, ?)",
                       (description, code, keywords))
        db.commit()

        # Close the database connection
        cursor.close()
        db.close()

        logger.debug("Redirecting to indexdb after inserting data")
        return redirect(url_for('indexdb'))

    # If the request method is not POST (e.g., GET), render the insert_data.html template
    logger.debug("Rendering insert_data.html template")
    return render_template('insert_data.html')


@app.route('/select_by_id', methods=['POST', 'GET'])
def handle_select_by_id():
    logger.debug("Accessing select_by_id route")
    if request.method == 'POST':
        row_id = request.form['search_term']
    else:
        row_id = request.args.get('search_term')

    db = get_db()
    cursor = db.cursor()

    cursor.execute("SELECT * FROM snippets WHERE rowid = ?", (row_id,))
    data = cursor.fetchone()

    cursor.close()
    db.close()

    if data is not None:
        id_value = data[0]
        description = data[1]
        code = data[2]
        keywords = data[3]

        logger.debug("Rendering display_data.html template with selected data")
        return render_template('display_data.html', id_value=id_value, description=description, code=code, keywords=keywords)
    else:
        logger.debug("Rendering display_data.html template with no data found")
        return render_template('display_data.html', id_value=row_id, description="", code="", keywords="")
def extract_code_blocks(file_path):
    with open(file_path) as file:
        content = file.read()
    return content.split("--Code Start:")[1:]

def format_datetime(datetime_str):
    return datetime_str.replace("_", " ")

@app.route('/enter_code', methods=['GET', 'POST'])
def enter_code():
    formatted_datetime = ""  # Initialize the variable
    if request.method == 'POST':
        code_block = request.form['code_block']
        formatted_datetime = datetime.datetime.now().strftime("%a_%d_%b_%Y %H:%M:%S")
        with open('codeshints.txt', 'a') as file:
            file.write(f"--Code Start:\n{formatted_datetime}\n{code_block}\n--Code End:\n\n")
        # Log code entry
        logger.debug('New code entered: %s', code_block)
    return render_template('enter_data.html', formatted_datetime=formatted_datetime)

@app.route('/search_code', methods=['GET', 'POST'])
def search_code():
    if request.method == 'POST':
        keyword = request.form['keyword']
        code_blocks = extract_code_blocks('codeshints.txt')
        filtered_blocks = [block for block in code_blocks if keyword in block]
        formatted_datetime_blocks = []
        
        for block in filtered_blocks:
            match = re.search(r"\w+_\d+_\w+_\d+_\d+:\d+:\d+", block)
            if match:
                formatted_datetime = format_datetime(match.group(0))
            else:
                formatted_datetime = "Unknown datetime format"
            
            formatted_datetime_blocks.append(
                {"datetime": formatted_datetime, "code_block": block}
            )
            
        # Log search activity
        logger.debug('Keyword searched: %s', keyword)
        return render_template('search_results.html', keyword=keyword, code_blocks=formatted_datetime_blocks)
    
    return render_template('search_data.html')



@app.route('/tube_index')
def tube_index():
    return render_template('tube_index.html')

@app.route('/data_page')
def data_page():
    return render_template('data_page.html')    


@app.route('/capture_overlay_verify')
def capture_overlay_verify():
    logger.info('Capture process started')
    logger.info('POST request received')

    datename = subprocess.run(
        ["date", "+%Y-%m-%d_%H-%M-%S"], capture_output=True, text=True).stdout.strip()
    capture_filename = f"{datename}.mp4"
    # Create the file path using os.path.join()
    base_folder = "static"
    subfolder = "assets"
    original_filename = os.path.join(
        app.root_path, base_folder, subfolder, f"overlaid_{capture_filename}")
    overlayed_filename = os.path.join(
        app.root_path, base_folder, subfolder, f"overlaid_{capture_filename}")
    verification_filename = os.path.join(
        app.root_path, base_folder, subfolder, f"verification_{capture_filename}")
    logger.info(f'File path original_filename created: {original_filename}')
    logger.info(f'File path overlayed_filename created: {overlayed_filename}')
    logger.info(f' verification_filename created: {verification_filename}')
    sleep(5)
    # Capture screen
    capture_command = [
        "ffmpeg", "-ss", "2", "-f", "x11grab", "-framerate", "24",
        "-video_size", "690x445", "-i", ":0.0+130,250", "-f", "alsa",
        "-i", "plughw:0,0", "-f", "pulse", "-i", "default",
        "-filter_complex", "[1:a]volume=0.1,apad[headset_audio];[2:a]volume=2.0,apad[system_audio];[headset_audio][system_audio]amix=inputs=2[a]",
        "-map", "0:v", "-map", "[a]", "-c:v", "libx264", "-r", "24",
                "-g", "48", "-c:a", "aac", "-b:a", "128k", "-t", "58", "-y", original_filename
    ]
    subprocess.run(capture_command)
    logger.info('Screen captured', capture_command)
    # Overlay videos
    overlay_command = [
        "ffmpeg", "-i", "background.mp4", "-i", original_filename, "-filter_complex",
        f"[1:v]scale=460:300[ovrl];[0:v][ovrl]overlay=W-w-25:H-h-400[out]",
        "-map", "[out]", "-map", "1:a", "-c:v", "libx264", "-crf", "18", "-c:a", "aac",
                "-strict", "-2", "-y", "-t", "58", overlayed_filename
    ]
    subprocess.run(overlay_command)
    logger.info('Videos overlaid', overlay_command)

    # Verify sound
    verification_command = [
        "ffmpeg", "-i", "background.mp4", "-i", overlayed_filename, "-filter_complex",
        f"[1:v]scale=460:300[ovrl];[0:v][ovrl]overlay=W-w-25:H-h-400[out]",
        "-map", "[out]", "-map", "1:a", "-c:v", "libx264", "-crf", "18", "-c:a", "aac",
                "-strict", "-2", "-y", "-t", "58", verification_filename
    ]
    subprocess.run(verification_command)
    logger.info('Sound verified', verification_command)

    logger.info('Capture process completed', verification_filename)
    return render_template('view_capture.html', video_filename=verification_filename)

# ...


@app.route('/create_text', methods=['GET', 'POST'])
def create_text():
    if request.method == 'POST':
        text = request.form['text']
        image = Image.new('RGB', (512, 512), color='beige')
        draw = ImageDraw.Draw(image)

        # Load the custom font and set the size
        font_path = '/home/jack/fonts/OpenSans-Bold.ttf'
        font_size = 50
        font = ImageFont.truetype(font_path, font_size)

        lines = text.split('\n')[:5]

        y = 10
        for line in lines:
            line = line.rstrip()  # Strip the newline character
            # Calculate the width and height of the text
            text_width, text_height = draw.textsize(line, font=font)

            # Draw the text
            draw.text(((512 - text_width) // 2, y),
                      line, fill='black', font=font)
            y += text_height + 5  # Move down for the next line

        output_path = os.path.join(
            app.root_path, 'static', 'assets', '512x512_text.jpg')
        image.save(output_path)
        # return send_from_directory('static/assets', '512x512_text.jpg', as_attachment=True)
        return render_template('view_textimage.html', image_filename='assets/512x512_text.jpg')
    return render_template('create_text.html')


@app.route('/view_log')
def view_log():
    with open('Logs/app.log', 'r') as log_file:
        log_content = log_file.read()
    return render_template('log_viewer.html', log_content=log_content)


@app.route('/self_check')
def self_check():
    try:
        if os.path.exists('Logs/flake.info'):
            timestamp = datetime.datetime.now().strftime("%Y%m%d%H%M%S")
            new_filename = f'Logs/{timestamp}.info'
            shutil.move('Logs/flake.info', new_filename)
            
        result = subprocess.run(['flake8', '-v', 'MemMakerWdb'],
                                stdout=subprocess.PIPE, stderr=subprocess.PIPE, text=True)
        
        with open('Logs/flake.info', 'w') as flake_file:
            flake_file.write(result.stdout)
        
        return redirect(url_for('view_flake8'))
    except Exception as e:
        return f"Self-check failed. Error: {e}"

@app.route('/view_flake8')
def view_flake8():
    with open('Logs/flake.info', 'r') as flake_file:
        flake_content = flake_file.read()
    return render_template('flake8_viewer.html', flake_content=flake_content)
def get_image_directories():
    dirs = os.listdir(os.path.join('static', 'images'))
    DIR = sorted(dirs)
    return DIR

def feather_image(input_path):
    try:
        logger.info("Feathering image: %s", input_path)
        
        # Load the image
        giger = cv2.imread(input_path)
        l_row, l_col, nb_channel = giger.shape
        rows, cols = np.mgrid[:l_row, :l_col]
        radius = np.sqrt((rows - l_row/2)**2 + (cols - l_col/2)**2)
        alpha_channel = np.zeros((l_row, l_col))
        
        # Calculate alpha channel values
        r_min, r_max = 1./3 * radius.max(), 0.6 * radius.max()
        alpha_channel[radius < r_min] = 1
        alpha_channel[radius > r_max] = 0
        gradient_zone = np.logical_and(radius >= r_min, radius <= r_max)
        alpha_channel[gradient_zone] = (r_max - radius[gradient_zone]) / (r_max - r_min)
        alpha_channel *= 255
        
        # Create feathered image
        feathered = np.empty((l_row, l_col, nb_channel + 1), dtype=np.uint8)
        feathered[..., :3] = giger[:]
        feathered[..., -1] = alpha_channel[:]
        
        # Save the feathered image
        timestamp = datetime.datetime.now().strftime('%Y%m%d%H%M%S')
        output_path = os.path.join('static', 'images', 'feathers', f'{timestamp}.png')
        plt.imsave(output_path, feathered, format="png")
        logger.info("Feathered image saved at: %s", output_path)

        return output_path
    except Exception as e:
        logger.error("An error occurred during feathering: %s", str(e))
        return None
@app.route('/feather_files', methods=['GET', 'POST'])
def feather_files():
    if request.method == 'POST':
        selected_directories = request.form.getlist('directories')  # Use 'directories' instead of 'directory'
        selected_directories = sorted(selected_directories)
        if selected_directories:
            images = os.listdir(os.path.join('static', 'images', selected_directories[0]))
            return render_template('feather_files.html', directories=get_image_directories(), selected_directory=selected_directories[0], images=images)
        
        selected_image = request.form.get('image')
        if selected_image:
            selected_directory = request.form.get('selected_directory')  # Add this line to retrieve selected_directory
            image_path = os.path.join('static', 'images', selected_directory, selected_image)
            feathered_image_path = feather_image(image_path)
            return render_template('feather_files.html', directories=get_image_directories(), selected_directory=selected_directory, images=os.listdir(os.path.join('static', 'images', selected_directory)), feathered_image_path=feathered_image_path)
    
    return render_template('feather_files.html', directories=get_image_directories())
@app.route('/word_cloud')
def word_cloud():
    code_blocks = extract_code_blocks('codeshints.txt')
    extracted_lines = []

    for block in code_blocks:
        lines = block.split("\n")[:3]  # Extract the first three lines
        extracted_lines.append("\n".join(lines))

    return render_template('word_cloud.html', extracted_lines=extracted_lines)
# ------------
static_dir = 'static'
text_dir = os.path.join(static_dir, 'text')
original_text_dir = os.path.join(text_dir, 'original')
os.makedirs(original_text_dir, exist_ok=True)

def load_original_text_file(filename):
    original_file_path = os.path.join(text_dir, filename)
    with open(original_file_path, 'r') as file:
        return file.read()

def save_original_text_file(filename, content):
    now = datetime.datetime.now().strftime("%Y%m%d_%H%M%S")
    new_filename = f"{filename}_{now}.txt"
    new_file_path = os.path.join(original_text_dir, new_filename)
    with open(new_file_path, 'w') as file:
        file.write(content)

def edit_and_save_text_file(filename, content):
    save_original_text_file(filename, content)
    edited_file_path = os.path.join(text_dir, filename)
    with open(edited_file_path, 'w') as file:
        file.write(content)

@app.route('/edit_text')
def edit_text():
    filenames = [f for f in os.listdir(text_dir) if f.endswith('.txt')]
    return render_template('edit_text.html', filenames=filenames)

@app.route('/edit_text_page')
def edit_text_page():
    selected_filename = request.args.get('filename')
    original_content = load_original_text_file(selected_filename)
    return render_template('edit_text_page.html', selected_filename=selected_filename, original_content=original_content)

@app.route('/edit_text_save', methods=['POST'])
def edit_text_save():
    edited_content = request.form['edited_content']
    selected_filename = request.form['filename']
    edit_and_save_text_file(selected_filename, edited_content)
    return redirect(url_for('edit_text'))

if __name__ == '__main__':
    create_databaseD()  # Create the database and table before starting the app
    app.run(debug=True, host='0.0.0.0', port=5200)
</pre>
-----index-----
<!-- index.html-->
<!DOCTYPE html>
<html>

<head>
    <title>Home Flask App Builder</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }
        video {
            margin: 10px, auto;
            width: 250px;
            height: auto;
        }

          .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;

        }

        .header {
            width: 100%;
            padding: 20px;
            text-align: center;
        }

        .columns {
            display: flex;
            width: 80%;
            margin-top: 20px;
        }

        .column {
            padding: 20px;
            box-sizing: border-box;
        }

        .column.left {
            width: 70%;
            border:    1px solid #000;
        }

        .column.right {
        margin: 0 auto; /* Center horizontally */
        width: 30%;
        border: 1px solid #000;
        text-align: center; /* Center video vertically */
    }

    .column.right video {
        max-width: 100%;
        height: auto;
    }
    .note{
       color:red;
       font-size:24px;
    }
   
        /* Define a class for styling the pre element */
        .styled-pre {
            white-space: pre-wrap; /* Allows text to wrap within the pre element */
            font-family: monospace; /* Choose a monospace font for consistent spacing */
            background-color: #f5f5f5; /* Set a background color for the pre element */
            padding: 10px; /* Add some padding for spacing */
            border: 1px solid #ccc; /* Add a border for separation */
        }
    </style>

</head>
<body>
    <div class="wrapper">
        <div class="header">
            <h1>HOME index.html</h1>
        </div>
        <div class="columns">
            <div class="column left">
                <h3>Create Text</h3><br />
                <a href="{{ url_for('hello') }}">HOME</a><br />
                <a href="{{ url_for('html_base') }}">Html_Base</a><br />
                <a href="{{ url_for('home') }}">home</a><br />

 <pre class="styled-pre">
    This code is a Flask application with the FlaskWebGui extension. Here's a breakdown of the code:

    You import the necessary modules and set up your Flask app:
        flask is imported for creating the web application.
        FlaskUI is imported from flaskwebgui to integrate Flask with a GUI.
        You set a secret key for your Flask app to enable session management.

    You define three routes for your web application:
        The root route ("/") maps to the hello function, which finds videos and renders an "about.html" template.
        The "/home" route maps to the home function, which renders an "HTML5_Canvas_Cheat_Sheet.html" template.
        The "/about" route maps to the about function, which also finds videos and renders an "about.html" template.
        The "/html_base" route maps to the html_base function, which renders an "html_base.html" template.

    The findvideos function searches for video files with the ".mp4" extension in the "static" directory and returns a randomly selected video that is not the same as the last one. It uses the Flask session to store the last selected video.

    Finally, you check if the script is being run as the main program and, if so, create and run the FlaskWebGui instance, which integrates your Flask app with a GUI.

Regarding your question about enabling debug mode in FlaskWebGui, yes, Flask has a built-in debug mode that automatically reloads the server when code changes occur. To enable debug mode, you can modify your if __name__ == "__main__": block like this:

python

if __name__ == "__main__":
    app.debug = True  # Enable debug mode
    # If you are debugging, you can do that in the browser:
    # If you want to view the flaskwebgui window:
    FlaskUI(app=app, server="flask").run()

Now, when you make changes to your code, Flask will automatically reload the server, making debugging more convenient. Just be cautious not to use debug mode in production as it can expose sensitive information.
=================================================================================
it appears flaskwebgui can not deal with javascript is that true ?
ChatGPT

FlaskWebGui is primarily designed to integrate Flask applications with graphical user interfaces (GUIs) for desktop applications. It provides a way to run a Flask app as a desktop application using a graphical window. However, FlaskWebGui may have limitations when it comes to running JavaScript directly within the GUI window.

Here are some points to consider:

    Limited JavaScript Support: FlaskWebGui focuses on rendering Flask web pages within a desktop GUI window. While you can include JavaScript code in your HTML templates, it may not fully support complex JavaScript interactions or libraries that rely heavily on the browser environment.

    Desktop vs. Web Environment: FlaskWebGui is meant to provide a desktop-like experience for Flask applications. JavaScript in web applications typically interacts with the browser's Document Object Model (DOM) and may not behave the same way within a desktop GUI.

    Compatibility: Certain JavaScript features or libraries that depend on specific browser features or APIs may not work seamlessly within FlaskWebGui. This can limit the functionality of web-based JavaScript components.

    Debugging: Debugging JavaScript within FlaskWebGui may be more challenging compared to traditional web browsers, as debugging tools commonly used in web development may not be readily available.

If your Flask application relies heavily on complex JavaScript interactions, you may encounter limitations when using FlaskWebGui. In such cases, you might consider using Flask primarily for server-side functionality and building a separate web-based front end for your application using a more traditional approach, like a web browser.

However, for simpler Flask applications that require a desktop-like interface, FlaskWebGui can be a convenient solution. It's essential to assess your specific project's requirements and whether FlaskWebGui aligns with your goals for running a Flask app as a desktop application.
------------------------ Example Complete GUI app ----  GUI.py --------------------
#!/home/jack/Desktop/FlaskAppArchitect_Flask_App_Creator/env/bin/python
# -*- coding: utf-8 -*-
from flask import render_template, session, Flask, request, redirect, url_for
from flaskwebgui import FlaskUI # import FlaskUI
import os 
import random
import datetime
app = Flask(__name__)
app.secret_key = os.urandom(24)

@app.route("/")
def hello():  
    video=findvideos()
    return render_template('about.html', video=video)

@app.route("/home", methods=['GET'])
def home(): 
    return render_template('HTML5_Canvas_Cheat_Sheet.html')

@app.route("/about", methods=['GET'])
def about():     
    video=findvideos()
    return render_template('about.html', video=video)
@app.route("/html_base", methods=['GET'])
def html_base(): 
    with open('static/code.txt', 'r') as file:
        code_content = file.read()

    return render_template('your_template.html', code_content=code_content)


def findvideos():
    videoroot_directory = "static"
    MP4 = []
    for dirpath, dirnames, filenames in os.walk(videoroot_directory):
        for filename in filenames:
            if filename.endswith(".mp4") and "Final" in filename:
                MP4.append(os.path.join(dirpath, filename))
    if MP4:
        last_video = session.get("last_video")
        new_video = random.choice([video for video in MP4 if video != last_video])
        session["last_video"] = new_video
        return new_video
    else:
        return None
template_dir = 'templates'
original_template_dir = os.path.join(template_dir, 'original')
os.makedirs(original_template_dir, exist_ok=True)


def load_original_template_file(filename):
    original_file_path = os.path.join(template_dir, filename)
    with open(original_file_path, 'r') as file:
        return file.read()


def save_original_template_file(filename, content):
    now = datetime.datetime.now().strftime("%Y%m%d_%H%M%S")
    new_filename = f"{filename}_{now}.txt"
    new_file_path = os.path.join(original_template_dir, new_filename)
    with open(new_file_path, 'w') as file:
        file.write(content)


def edit_and_save_template_file(filename, content):
    save_original_template_file(filename, content)
    edited_file_path = os.path.join(template_dir, filename)
    with open(edited_file_path, 'w') as file:
        file.write(content)


@app.route('/edit_template')
def edit_template():
    filenames = [f for f in os.listdir(template_dir) if f.endswith('.html')]
    filenames = sorted(filenames)
    fvideo ="static/assets/voice-for_avatar_Edit_Files.mp4"
    return render_template('edit_template.html', filenames=filenames, video=fvideo)


@app.route('/edit_template_page')
def edit_template_page():
    selected_filename = request.args.get('filename')
    original_content = load_original_template_file(selected_filename)
    return render_template('edit_template_page.html', selected_filename=selected_filename, original_content=original_content)


@app.route('/edit_template_save', methods=['POST'])
def edit_template_save():
    edited_content = request.form['edited_content']
    selected_filename = request.form['filename']
    edit_and_save_template_file(selected_filename, edited_content)
    return redirect(url_for('edit_template'))



    
if __name__ == "__main__":
    app.debug = True  # Enable debug mode
    # If you are debugging, you can do that in the browser:
    # If you want to view the flaskwebgui window:
    FlaskUI(app=app, server="flask").run()

 </pre>            
            </div>
            <div class="column right">
                <h2>Random Video</h2>
                <video controls>
                    <source src="{{ video }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
        </div>
    </div>
</body>
</html>


-----index-----
<!-- index.html-->
<!DOCTYPE html>
<html>

<head>
    <title>Home Flask App Builder</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }
        video {
            margin: 10px, auto;
            width: 250px;
            height: auto;
        }

          .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;

        }

        .header {
            width: 100%;
            padding: 20px;
            text-align: center;
        }

        .columns {
            display: flex;
            width: 80%;
            margin-top: 20px;
        }

        .column {
            padding: 20px;
            box-sizing: border-box;
        }

        .column.left {
            width: 30%;
            border:    1px solid #000;
        }

        .column.right {
        margin: 0 auto; /* Center horizontally */
        width: 60%;
        border: 1px solid #000;
        text-align: center; /* Center video vertically */
    }

    .column.right video {
        max-width: 100%;
        height: auto;
    }
    .note{
       color:red;
       font-size:24px;
    }
    </style>
</head>
<body>
    <div class="wrapper">
        <div class="header">
            <h1>HOME index.html</h1>
        </div>
        <div class="columns">
            <div class="column left">
                <h3>Create Text</h3><br />
                <a class="note" href="{{ url_for('edit_template_page', filename='about.html') }}">Edit This Page</a></li><br />
                <a href="{{ url_for('app_utilities') }}">Application Utilities</a><br />
                <a href="{{ url_for('image_video') }}">Image and Video Processing Links</a><br />
                <a href="{{ url_for('index_canvas') }}">Project Canvas</a><br /><br />
                <a href="{{ url_for('edit_javascript') }}">Project JavaScript</a><br /><br />
                <a href="{{ url_for('edit_template') }}">Edit Links Listed Below</a><p>Edit Index - Edit CSS Files - Edit Canvas
 JS - Edit Formatted Text  - Edit FlaskAppArchitect Description - Edit Formatted Text</p>
                </p>
                <a href="{{ url_for('data_page') }}">Data Page - Snippets,Search ChatGPT,Sqlite3</a><br /><br />
                <a href="{{ url_for('edit_file') }}">Edit File</a><br />
                <a href="{{ url_for('edit_formatted') }}">Edit Formatted Text</a><br />
                <a href="{{ url_for('edit_description') }}">Edit Description</a><br />
                <a href="{{ url_for('misc_links') }}">This page contains all active links(I hope)</a><br />
            </div>
            <div class="column right">
                <h2>Random Video</h2>
                <video controls>
                    <source src="{{ video }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
        </div>
    </div>
</body>
</html>


-----index-----
<!DOCTYPE html>
<html>
  <head>
    <title>Add Border</title>
  </head>
  <body>
    <h1>Add Border</h1>
    {% for thumbnail in thumbnails %}
      <a href="{{ url_for('select_border', image=thumbnail.replace('thumbnail_', '')) }}">
        <img src="{{ url_for('static', filename='thumbnails/'+thumbnail) }}" alt="{{ thumbnail }}" style="border: 10px solid transparent; box-shadow: 0 0 0 10px #fff, 0 0 0 15px #faf8f8;">
      </a>
    {% endfor %}
  </body>
</html>


-----index-----
<!DOCTYPE html>
<html>
  <head>
    <title>Add Border</title>
  </head>
  <body>
    <h1>Add Border</h1>
    {% for thumbnail in thumbnails %}
      <a href="{{ url_for('select_border', image=thumbnail.replace('thumbnail_', '')) }}">
        <img src="{{ url_for('static', filename='thumbnails/'+thumbnail) }}" alt="{{ thumbnail }}" style="border: 10px solid transparent; box-shadow: 0 0 0 10px #fff, 0 0 0 15px #faf8f8;">
      </a>
    {% endfor %}
  </body>
</html>


-----index-----
<!DOCTYPE html>
<html>
<head>
	<title>Final video</title>
</head>
<body>
	<video width="640" height="480" controls>
  		<source src="{{ video_file }}" type="video/mp4">
  		Your browser does not support the video tag.
	</video>
</body>
</html>


-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Add MP4 Files</title>
</head>
<body>
    <h1>Add MP4 Files</h1>
    <form method="POST" enctype="multipart/form-data">
        <label for="mp4_file">Select an MP4 file:</label>
        <input type="file" name="mp4_file" id="mp4_file" accept=".mp4" required>
        <br>
        <input type="submit" value="Upload">
    </form>
    <a href="{{ url_for('delete_files') }}">clean the static/images/mp4_images/ directory</a><br />
</body>
</html>


-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Add Text</title>
</head>
<body>
    <h1>Add Text</h1>
    {% if message %}
        <p>{{ message }}</p>
    {% endif %}
    <form method="POST">
        <label for="text">Text:</label>
        <textarea name="text" id="text"></textarea>
        <br>
        <input type="submit" value="Add Text">
    </form>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Add Title to Video</title>
</head>
<body>
    <h1>Add Title to Video</h1>
    <form method="POST">
        <label for="video">Select a video:</label>
        <select name="video" id="video">
            {% for video in videos %}
            <option value="{{ video }}">{{ video }}</option>
            {% endfor %}
        </select>
        <br>
        <label for="title_page">Select a title page:</label>
        <select name="title_page" id="title_page">
            {% for title_page in title_pages %}
            <option value="{{ title_page }}">{{ title_page }}</option>
            {% endfor %}
        </select>
        <br>
        <input type="submit" value="Add Title">
    </form>
    {% if final %}
    <h2>Final Video:</h2>
    <video src="{{ url_for('static', filename=final) }}" controls></video>
    {% endif %}
</body>
</html>
-----index-----
<!-- aigeneration_links.html-->
<!DOCTYPE html>
<html>

<head>
    <title>AI Info and Generation Links</title>
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
</head>

<body>
    <div class="wrapper">
        <div class="header">
            <h1>AI Info and Generation Links</h1>
        </div>
        <div class="columns">
            <div class="column left">
                <h3>Links</h3><br />
                <li> <a href="/home/jack/Desktop/misc/UsingConvert.html" target="_blank">UsingConvert</a></li>
                <li> <a href="https://dreamlike.art/create" target="_blank">GOOD-dreamlike.art/create</a></li>
                <li> <a href="/home/jack/Desktop/misc/color.html" target="_blank">ColorPicker</a></li>
                <li> <a href=" https://www.reddit.com/" target="_blank">Reddit.com/ </a></li>
                <li><a href="https://bhaasha.iiit.ac.in/lipsync/" target="_blank">lipsync/</a></li>
                <li><a href="https://www.google.com" target="_blank">Google</a></li>
                <li><a href="https://www.facebook.com" target="_blank">Facebook</a></li>
                <li><a href="https://www.youtube.com" target="_blank">Youtube</a></li>
                <li><a href="https://app.blasteronline.com/speechelo" target="_blank">Speechelo</a></li>
                <li><a href="https://lexica.art/" target="_blank">https://lexica.art/</a></li>
                <li><a href="https://www.mage.space/explore" target="_blank">https://www.mage.space/explore</a></li>
                <li><a href="https://www.tiktok.com/foryou?is_copy_url=1&is_from_webapp=v1"
                        target="_blank">tiktok.com</a></li>
                <li><a href="https://www.tiktok.com/@insectsmatters" target="_blank">@insectsmatters</a></li>
                <li><a href="https://www.tiger-algebra.com/drill/5x~5-1080x~2/" target="_blank">tiger-algebra.com</a>
                </li>
                <li><a href="http://217.21.78.160/" target="_blank">http://217.21.78.160/</a></li>
                <li><a href="https://openclipart.org/" target="_blank">penclipart.org</a></li>
                <li><a href="https://www.edureka.co/community/" target="_blank">edureka.co/community</a></li>
                <li><a href="https://cdnlogo.com/svg-editor/" target="_blank">https://cdnlogo.com/svg-editor/</a></li>
                <li><a href="https://pollinations.ai/" target="_blank">https://pollinations.ai/</a></li>
                <li><a href="http://www.frontiernet.net/~eugene.ressler/" target="_blank">frontiernet.net</a></li>
                <li><a href="https://www.pinterest.ph/grahamwallwork/julian-jordanov/"
                        target="_blank">julian-jordanov</a></li>
                <li><a href="https://miktex.org/" target="_blank">miktex.org/</a></li>
                <li><a href="https://huggingface.co/spaces/stabilityai/stable-diffusion"
                        target="_blank">stabilityai/stable-diffusion</a></li>
                <li><a href="https://dreamlike.art/" target="_blank">GOOD - currently down for maint</a></li>
                <li><a href="https://trinket.io/python/f7ad7f9864" target="_blank">trinket.io/python</a></li>
                <li><a href="https://www.pythonsandbox.com/turtle" target="_blank">pythonsandbox.com/turtle</a></li>
                <li><a
                        href="https://sites.google.com/view/liviatheodoramidjourney/home?pli=1">liviatheodoramidjourney</a>
                </li>
                <li><a href="https://replicate.com/methexis-inc/img2prompt">img2prompt</a></li>
                <li><a href="https://imageeditor.app/?new" target="_blank"> Imageeditor</a></li>
                <li><a href="https://huggingface.co/prompthero/poolsuite-diffusion"
                        target="_blank">poolsuite-diffusion</a></li>
                <li><a href="https://huggingface.co/prompthero/openjourney" target="_blank">prompthero/openjourney</a>
                </li>
                <li><a href="https://hotpot.ai/" target="_blank"> https://hotpot.ai/</a></li>
                <li><a href="https://hotpot.ai/art-generator" target="_blank"> https://hotpot.ai/art-generator</a></li>
                <li><a href="https://drive.internxt.com/app" target="_blank"> https://drive.internxt.com/app</a></li>
                <li><a href="https://openlibrary.org/" target="_blank">openlibrary.org/</a></li>
                <li><a href="https://civitai.com/" target="_blank">civitai.com/ </a></li>
                <li><a href="https://rentry.org/sdhassan#merged-models" target="_blank">rentry.org/sdhassan</a></li>
                <li><a href="https://civitai.com/models/2661/uber-realistic-porn-merge-urpm"
                        target="_blank">realistic-porn-merge-urpm</a></li>
            </div>
            <div class="column">
                <h3>Links</h3><br />
                <li><a href="https://huggingface.co/prompthero/openjourney"
                        target="_blank">huggingface-prompthero/openjourney</a></li>
                <li><a href="https://playgroundai.com/search?q=princess" target="_blank">playgroundai.com</a></li>
                <li><a href="https://openart.ai/" target="_blank">openart.ai/</a></li>
                <li><a href="https://lexica.art/?q=004602d4-b0ed-4697-8cb3-526b3e918217" target="_blank">lexica.art</a>
                </li>
                <li><a href="https://ideogram.ai/" target="_blank">ideogram.ai</a></li><br />
                <li><a href="https://app.prodia.com/#/" target="_blank">FREE app.prodia.com/#/</a></li>
                <li><a href="https://huggingface.co/ProGamerGov/Min-Illust-Background-Diffusion?target="
                        _blank">huggingface Background</a></li>
                <li><a href="https://huggingface.co/spaces/microsoft/Promptist" target="_blank">microsoft/Promptist</a>
                </li>
                <li><a href="https://huggingface.co/wavymulder/portraitplus"
                        target="_blank">huggingface.co/wavymulder/portraitplus</a></li>
                <li><a href="https://huggingface.co/johnslegers/epic-diffusion"
                        target="_blank">johnslegers/epic-diffusion</a> </li>
                <li><a href="https://huggingface.co/darkstorm2150/Protogen_Infinity_Official_Release"
                        target="_blank">huggingface Protogen_Infinity</a></li>
                <li><a href="https://www.upscale.media/upload" target="_blank">Free - upscaler</a></li>
                <li><a href="https://www.coingecko.com/en/coins/lbry-credits" target="_blank">lbry-credits</a></li>
                <li><a href="https://odysee.com/" target="_blank">odysee.com</a></li>
                <li><a href="https://dreamlike.art/create" target="_blank">https://dreamlike.art/create</a></li>
                <li><a href="https://huggingface.co/spaces/microsoft/Promptist" target="_blank">microsoft/Promptist</a>
                </li>
                <li><a href="https://huggingface.co/prompthero/openjourney" target="_blank">VERY
                        GOODprompthero/openjourney</a></li>
                <li><a href="https://developers.google.com/youtube/v3/quickstart/python"
                        target="_blank">google/youtube/v3/developers</a></li>
                <li><a href="https://huggingface.co/CompVis/stable-diffusion-v1-4?text=mdjrny-v4+style+scary%2C+dirty%2C+paint+peeling%2C+muddy%2C+oily%2C+dystopian++gypsy+princess+centered+face%2C+portrait%2C+style+of+H.+G.+Giger"
                        target="_blank">stable-diffusion-v1-4 Giger</a></li>
                <li><a href="https://beta.elevenlabs.io/voice-lab" target="_blank">elevenlabs.io/voice-lab</a></li>
                <li><a href="https://studio.d-id.com/" target="_blank">https://studio.d-id.com/</a></li>
                <li><a href="https://linktr.ee/ai_studio" target="_blank">ai_studio</a></li>
                <li><a href="https://paraphrasingtool.ai/" target="_blank">paraphrasingtool.ai</a></li>
                <li><a href="https://huggingface.co/coreco/seek.art_MEGA"
                        target="_blank">https://huggingface.co/coreco/seek.art_MEGA</a></li>
                <li><a href="https://bhaasha.iiit.ac.in/lipsync/" target="_blank">lipsync/</a></li>
                <li><a href="https://y2mate.guru/y2mate2" target="_blank">Download Unlisted videos</a></li>
                <li><a href="https://app.leonardo.ai/ai-generations" target="_blank">leonardo.ai/ai-generations</a></li>
                <li><a href="https://huggingface.co/prompthero/openjourney?text=%27mdjrny-v4+style%27++A+wide+angle+colored+line+art+drawing+of+a+beautiful+female+half+human+cyborg+in+a+futuristic+25th+century+city+street%2C++highly+detailed%2C+psytrance+art+style%2C+golden+bikini%2C+back+alley+shot%2C+wide+shot%2C+diagonal+view+of+subject%2C+highly+detailed%2C+monochromatic%2C+graphic+novel%2C+steampunk"
                        target="_blank">graphic+novel%2C+steampunk</a></li>
                <li><a href="https://huggingface.co/spaces/phenomenon1981/Dreamlikeart-Anime-1.0"
                        target="_blank">Dreamlikeart-Anime</a></li>
                <li><a href="https://podcast.adobe.com/enhance" target="_blank">https://podcast.adobe.com/enhance</a>
                </li>
                <li><a href="https://huggingface.co/spaces/Daniton/MidJourney"
                        target="_blank">huggingface/Daniton/MidJourney</a></li>
                <li><a href="https://app.runwayml.com/video-tools/teams/madhatterstamps/ai-tools/gen-1"
                        target="_blank">https://app.runwayml.com/video-tools/teams/madhatterstamps/ai-tools/gen-1</a>
                </li>
                </li>
                <li><a href="https://stackoverflow.com/questions/52811041/how-can-i-use-the-same-route-for-multiple-functions-in-flask"
                        target="_blank">@app.route('/chopsticks/') @app.route('/chopsticks/</a></li>
                <li><a href="https://clipdrop.co/stable-diffusion"
                        target="_blank">https://clipdrop.co/stable-diffusion</a></li>
                <li><a href="https://www.turing.com/kb/build-flask-routes-in-python"
                        target="_blank">build-flask-routes-in-python</a></li>
                <li><a href="https://www.turing.com/kb/build-flask-routes-in-python" target="_blank"></a></li>
                <li><a href="file:///mnt/HDD500/0WORKSHOP-with-NOTEBOOKS/chat/chat/chat.html"
                        target="_blank">chat.html</a></li>
                <li><a href="https://www.digitalocean.com/community/tutorials/how-to-structure-a-large-flask-application-with-flask-blueprints-and-flask-sqlalchemy"
                        target="_blank">blueprints-and-flask-sqlalchemy</a></li>
                <li><a href="https://ask.replit.com/t/using-a-function-to-route-several-pages-in-flask/15563"
                        target="_blank"></a></li>
                <li><a href="https://huggingface.co/prompthero/openjourney?text=%27mdjrny-v4+style%27+A+beautiful+++space+creature%2C+half+alien%2Chalf+robot%2C+cyborg+%2C+facing+forward+towards+camera%2Cwith+a+vibrant+Native+American+carnival+costume%2C+her+face+painted+with+intricate+tribal+designs."
                        target="_blank">half+robot%2C+cyborg</a></li>
                <li><a href="https://tedboy.github.io/flask/interface_api.useful_funcs.html"
                        target="_blank">api.useful_funcs.html</a></li>
                <li><a href="https://xkcd.com/50/" target="_blank">https://xkcd.com/50/</a></li>
                <li><a href="https://openart.ai/create?username=neanderthal_darling_28&prompt=Monster%2520has%2520a%2520lot%2520of%2520red%2520shades%2520and%2520black%2520colors%2C%2520there%2520is%2520a%2520green%2520leafy%2520forest%2520background%2520terrifying%2520mutant%2520goblin%2520combined%2520with%2520large%2520fat%2520hissing%2520cockroach%2C%2520gothic%2520art%2C%2520popping%2520color%2C%2520detailed%2C%2520eerie%2C%2520emotional%2C%2520gothic%2C%2520highly%2520detailed%2C%2520incredibly%2520sharp%2520focus%2C%2520Artstation%2C%2520deviantart%2C%2520artgem%2C%2520insane%2520detail%2C%2520intense%2520color%2C%2520vibrant%2520cartoon%2520art%2C%2520award-winning%2520art%2C%2520French%2520comic%2520art%2C%25208k%2C%2520super%2520precise%2520detail%2C%2520golden%2520ratio%2C%2520in%2520the%2520style%2520of%2520Heavy%2520Metal%2520Comics&ai_model=runwayml%2Fstable-diffusion-v1-5&cfg_scale=7&steps=25&width=512&height=512&sampler=dpmsolver%2B%2B&negative_prompt=&seed=170386247"
                        target="_blank">openart.ai/</a></li>
            </div>


        </div>
    </div>
</body>

</html>
-----index-----
<!-- index.html-->
<!DOCTYPE html>
<html>

<head>
    <title>Home Flask App Builder</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }
        video {
            margin: 10px, auto;
            width: 250px;
            height: auto;
        }

          .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;

        }

        .header {
            width: 100%;
            padding: 20px;
            text-align: center;
        }

        .columns {
            display: flex;
            width: 80%;
            margin-top: 20px;
        }

        .column {
            padding: 20px;
            box-sizing: border-box;
        }

        .column.left {
            width: 70%;
            border:    1px solid #000;
        }

        .column.right {
        margin: 0 auto; /* Center horizontally */
        width: 30%;
        border: 1px solid #000;
        text-align: center; /* Center video vertically */
    }

    .column.right video {
        max-width: 100%;
        height: auto;
    }
    .note{
       color:red;
       font-size:24px;
    }
   
        /* Define a class for styling the pre element */
        .styled-pre {
            white-space: pre-wrap; /* Allows text to wrap within the pre element */
            font-family: monospace; /* Choose a monospace font for consistent spacing */
            background-color: #f5f5f5; /* Set a background color for the pre element */
            padding: 10px; /* Add some padding for spacing */
            border: 1px solid #ccc; /* Add a border for separation */
        }
    </style>

</head>
<body>
    <div class="wrapper">
        <div class="header">
            <h1>HOME index.html</h1>
        </div>
        <div class="columns">
            <div class="column left">
                <h3>Create Text</h3><br />
                <a href="{{ url_for('hello') }}">HOME</a><br />
                <a href="{{ url_for('html_base') }}">Html_Base</a><br />
                <a href="{{ url_for('home') }}">home</a><br />

 <pre class="styled-pre">
    This code is a Flask application with the FlaskWebGui extension. Here's a breakdown of the code:

    You import the necessary modules and set up your Flask app:
        flask is imported for creating the web application.
        FlaskUI is imported from flaskwebgui to integrate Flask with a GUI.
        You set a secret key for your Flask app to enable session management.

    You define three routes for your web application:
        The root route ("/") maps to the hello function, which finds videos and renders an "about.html" template.
        The "/home" route maps to the home function, which renders an "HTML5_Canvas_Cheat_Sheet.html" template.
        The "/about" route maps to the about function, which also finds videos and renders an "about.html" template.
        The "/html_base" route maps to the html_base function, which renders an "html_base.html" template.

    The findvideos function searches for video files with the ".mp4" extension in the "static" directory and returns a randomly selected video that is not the same as the last one. It uses the Flask session to store the last selected video.

    Finally, you check if the script is being run as the main program and, if so, create and run the FlaskWebGui instance, which integrates your Flask app with a GUI.

Regarding your question about enabling debug mode in FlaskWebGui, yes, Flask has a built-in debug mode that automatically reloads the server when code changes occur. To enable debug mode, you can modify your if __name__ == "__main__": block like this:

python

if __name__ == "__main__":
    app.debug = True  # Enable debug mode
    # If you are debugging, you can do that in the browser:
    # If you want to view the flaskwebgui window:
    FlaskUI(app=app, server="flask").run()

Now, when you make changes to your code, Flask will automatically reload the server, making debugging more convenient. Just be cautious not to use debug mode in production as it can expose sensitive information.
=================================================================================
it appears flaskwebgui can not deal with javascript is that true ?
ChatGPT

FlaskWebGui is primarily designed to integrate Flask applications with graphical user interfaces (GUIs) for desktop applications. It provides a way to run a Flask app as a desktop application using a graphical window. However, FlaskWebGui may have limitations when it comes to running JavaScript directly within the GUI window.

Here are some points to consider:

    Limited JavaScript Support: FlaskWebGui focuses on rendering Flask web pages within a desktop GUI window. While you can include JavaScript code in your HTML templates, it may not fully support complex JavaScript interactions or libraries that rely heavily on the browser environment.

    Desktop vs. Web Environment: FlaskWebGui is meant to provide a desktop-like experience for Flask applications. JavaScript in web applications typically interacts with the browser's Document Object Model (DOM) and may not behave the same way within a desktop GUI.

    Compatibility: Certain JavaScript features or libraries that depend on specific browser features or APIs may not work seamlessly within FlaskWebGui. This can limit the functionality of web-based JavaScript components.

    Debugging: Debugging JavaScript within FlaskWebGui may be more challenging compared to traditional web browsers, as debugging tools commonly used in web development may not be readily available.

If your Flask application relies heavily on complex JavaScript interactions, you may encounter limitations when using FlaskWebGui. In such cases, you might consider using Flask primarily for server-side functionality and building a separate web-based front end for your application using a more traditional approach, like a web browser.

However, for simpler Flask applications that require a desktop-like interface, FlaskWebGui can be a convenient solution. It's essential to assess your specific project's requirements and whether FlaskWebGui aligns with your goals for running a Flask app as a desktop application.
------------------------ Example Complete GUI app ----  GUI.py --------------------
#!/home/jack/Desktop/FlaskAppArchitect_Flask_App_Creator/env/bin/python
# -*- coding: utf-8 -*-
from flask import render_template, session, Flask, request, redirect, url_for
from flaskwebgui import FlaskUI # import FlaskUI
import os 
import random
import datetime
app = Flask(__name__)
app.secret_key = os.urandom(24)

@app.route("/")
def hello():  
    video=findvideos()
    return render_template('about.html', video=video)

@app.route("/home", methods=['GET'])
def home(): 
    return render_template('HTML5_Canvas_Cheat_Sheet.html')

@app.route("/about", methods=['GET'])
def about():     
    video=findvideos()
    return render_template('about.html', video=video)
@app.route("/html_base", methods=['GET'])
def html_base(): 
    with open('static/code.txt', 'r') as file:
        code_content = file.read()

    return render_template('your_template.html', code_content=code_content)


def findvideos():
    videoroot_directory = "static"
    MP4 = []
    for dirpath, dirnames, filenames in os.walk(videoroot_directory):
        for filename in filenames:
            if filename.endswith(".mp4") and "Final" in filename:
                MP4.append(os.path.join(dirpath, filename))
    if MP4:
        last_video = session.get("last_video")
        new_video = random.choice([video for video in MP4 if video != last_video])
        session["last_video"] = new_video
        return new_video
    else:
        return None
template_dir = 'templates'
original_template_dir = os.path.join(template_dir, 'original')
os.makedirs(original_template_dir, exist_ok=True)


def load_original_template_file(filename):
    original_file_path = os.path.join(template_dir, filename)
    with open(original_file_path, 'r') as file:
        return file.read()


def save_original_template_file(filename, content):
    now = datetime.datetime.now().strftime("%Y%m%d_%H%M%S")
    new_filename = f"{filename}_{now}.txt"
    new_file_path = os.path.join(original_template_dir, new_filename)
    with open(new_file_path, 'w') as file:
        file.write(content)


def edit_and_save_template_file(filename, content):
    save_original_template_file(filename, content)
    edited_file_path = os.path.join(template_dir, filename)
    with open(edited_file_path, 'w') as file:
        file.write(content)


@app.route('/edit_template')
def edit_template():
    filenames = [f for f in os.listdir(template_dir) if f.endswith('.html')]
    filenames = sorted(filenames)
    fvideo ="static/assets/voice-for_avatar_Edit_Files.mp4"
    return render_template('edit_template.html', filenames=filenames, video=fvideo)


@app.route('/edit_template_page')
def edit_template_page():
    selected_filename = request.args.get('filename')
    original_content = load_original_template_file(selected_filename)
    return render_template('edit_template_page.html', selected_filename=selected_filename, original_content=original_content)


@app.route('/edit_template_save', methods=['POST'])
def edit_template_save():
    edited_content = request.form['edited_content']
    selected_filename = request.form['filename']
    edit_and_save_template_file(selected_filename, edited_content)
    return redirect(url_for('edit_template'))



    
if __name__ == "__main__":
    app.debug = True  # Enable debug mode
    # If you are debugging, you can do that in the browser:
    # If you want to view the flaskwebgui window:
    FlaskUI(app=app, server="flask").run()

 </pre>            
            </div>
            <div class="column right">
                <h2>Random Video</h2>
                <video controls>
                    <source src="{{ video }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
        </div>
    </div>
</body>
</html>

<!-- index.html-->
<!DOCTYPE html>
<html>

<head>
    <title>Home Flask App Builder</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }
        video {
            margin: 10px, auto;
            width: 250px;
            height: auto;
        }

          .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;

        }

        .header {
            width: 100%;
            padding: 20px;
            text-align: center;
        }

        .columns {
            display: flex;
            width: 80%;
            margin-top: 20px;
        }

        .column {
            padding: 20px;
            box-sizing: border-box;
        }

        .column.left {
            width: 30%;
            border:    1px solid #000;
        }

        .column.right {
        margin: 0 auto; /* Center horizontally */
        width: 60%;
        border: 1px solid #000;
        text-align: center; /* Center video vertically */
    }

    .column.right video {
        max-width: 100%;
        height: auto;
    }
    .note{
       color:red;
       font-size:24px;
    }
    </style>
</head>
<body>
    <div class="wrapper">
        <div class="header">
            <h1>HOME index.html</h1>
        </div>
        <div class="columns">
            <div class="column left">
                <h3>Create Text</h3><br />
                <a class="note" href="{{ url_for('edit_template_page', filename='about.html') }}">Edit This Page</a></li><br />
                <a href="{{ url_for('app_utilities') }}">Application Utilities</a><br />
                <a href="{{ url_for('image_video') }}">Image and Video Processing Links</a><br />
                <a href="{{ url_for('index_canvas') }}">Project Canvas</a><br /><br />
                <a href="{{ url_for('edit_javascript') }}">Project JavaScript</a><br /><br />
                <a href="{{ url_for('edit_template') }}">Edit Links Listed Below</a><p>Edit Index - Edit CSS Files - Edit Canvas
 JS - Edit Formatted Text  - Edit FlaskAppArchitect Description - Edit Formatted Text</p>
                </p>
                <a href="{{ url_for('data_page') }}">Data Page - Snippets,Search ChatGPT,Sqlite3</a><br /><br />
                <a href="{{ url_for('edit_file') }}">Edit File</a><br />
                <a href="{{ url_for('edit_formatted') }}">Edit Formatted Text</a><br />
                <a href="{{ url_for('edit_description') }}">Edit Description</a><br />
                <a href="{{ url_for('misc_links') }}">This page contains all active links(I hope)</a><br />
            </div>
            <div class="column right">
                <h2>Random Video</h2>
                <video controls>
                    <source src="{{ video }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
        </div>
    </div>
</body>
</html>

<!DOCTYPE html>
<html>
  <head>
    <title>Add Border</title>
  </head>
  <body>
    <h1>Add Border</h1>
    {% for thumbnail in thumbnails %}
      <a href="{{ url_for('select_border', image=thumbnail.replace('thumbnail_', '')) }}">
        <img src="{{ url_for('static', filename='thumbnails/'+thumbnail) }}" alt="{{ thumbnail }}" style="border: 10px solid transparent; box-shadow: 0 0 0 10px #fff, 0 0 0 15px #faf8f8;">
      </a>
    {% endfor %}
  </body>
</html>

<!DOCTYPE html>
<html>
  <head>
    <title>Add Border</title>
  </head>
  <body>
    <h1>Add Border</h1>
    {% for thumbnail in thumbnails %}
      <a href="{{ url_for('select_border', image=thumbnail.replace('thumbnail_', '')) }}">
        <img src="{{ url_for('static', filename='thumbnails/'+thumbnail) }}" alt="{{ thumbnail }}" style="border: 10px solid transparent; box-shadow: 0 0 0 10px #fff, 0 0 0 15px #faf8f8;">
      </a>
    {% endfor %}
  </body>
</html>

<!DOCTYPE html>
<html>
<head>
	<title>Final video</title>
</head>
<body>
	<video width="640" height="480" controls>
  		<source src="{{ video_file }}" type="video/mp4">
  		Your browser does not support the video tag.
	</video>
</body>
</html>

<!DOCTYPE html>
<html>
<head>
    <title>Add MP4 Files</title>
</head>
<body>
    <h1>Add MP4 Files</h1>
    <form method="POST" enctype="multipart/form-data">
        <label for="mp4_file">Select an MP4 file:</label>
        <input type="file" name="mp4_file" id="mp4_file" accept=".mp4" required>
        <br>
        <input type="submit" value="Upload">
    </form>
    <a href="{{ url_for('delete_files') }}">clean the static/images/mp4_images/ directory</a><br />
</body>
</html>

<!DOCTYPE html>
<html>
<head>
    <title>Add Text</title>
</head>
<body>
    <h1>Add Text</h1>
    {% if message %}
        <p>{{ message }}</p>
    {% endif %}
    <form method="POST">
        <label for="text">Text:</label>
        <textarea name="text" id="text"></textarea>
        <br>
        <input type="submit" value="Add Text">
    </form>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
    <title>Add Title to Video</title>
</head>
<body>
    <h1>Add Title to Video</h1>
    <form method="POST">
        <label for="video">Select a video:</label>
        <select name="video" id="video">
            {% for video in videos %}
            <option value="{{ video }}">{{ video }}</option>
            {% endfor %}
        </select>
        <br>
        <label for="title_page">Select a title page:</label>
        <select name="title_page" id="title_page">
            {% for title_page in title_pages %}
            <option value="{{ title_page }}">{{ title_page }}</option>
            {% endfor %}
        </select>
        <br>
        <input type="submit" value="Add Title">
    </form>
    {% if final %}
    <h2>Final Video:</h2>
    <video src="{{ url_for('static', filename=final) }}" controls></video>
    {% endif %}
</body>
</html><!-- aigeneration_links.html-->
<!DOCTYPE html>
<html>

<head>
    <title>AI Info and Generation Links</title>
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
</head>

<body>
    <div class="wrapper">
        <div class="header">
            <h1>AI Info and Generation Links</h1>
        </div>
        <div class="columns">
            <div class="column left">
                <h3>Links</h3><br />
                <li> <a href="/home/jack/Desktop/misc/UsingConvert.html" target="_blank">UsingConvert</a></li>
                <li> <a href="https://dreamlike.art/create" target="_blank">GOOD-dreamlike.art/create</a></li>
                <li> <a href="/home/jack/Desktop/misc/color.html" target="_blank">ColorPicker</a></li>
                <li> <a href=" https://www.reddit.com/" target="_blank">Reddit.com/ </a></li>
                <li><a href="https://bhaasha.iiit.ac.in/lipsync/" target="_blank">lipsync/</a></li>
                <li><a href="https://www.google.com" target="_blank">Google</a></li>
                <li><a href="https://www.facebook.com" target="_blank">Facebook</a></li>
                <li><a href="https://www.youtube.com" target="_blank">Youtube</a></li>
                <li><a href="https://app.blasteronline.com/speechelo" target="_blank">Speechelo</a></li>
                <li><a href="https://lexica.art/" target="_blank">https://lexica.art/</a></li>
                <li><a href="https://www.mage.space/explore" target="_blank">https://www.mage.space/explore</a></li>
                <li><a href="https://www.tiktok.com/foryou?is_copy_url=1&is_from_webapp=v1"
                        target="_blank">tiktok.com</a></li>
                <li><a href="https://www.tiktok.com/@insectsmatters" target="_blank">@insectsmatters</a></li>
                <li><a href="https://www.tiger-algebra.com/drill/5x~5-1080x~2/" target="_blank">tiger-algebra.com</a>
                </li>
                <li><a href="http://217.21.78.160/" target="_blank">http://217.21.78.160/</a></li>
                <li><a href="https://openclipart.org/" target="_blank">penclipart.org</a></li>
                <li><a href="https://www.edureka.co/community/" target="_blank">edureka.co/community</a></li>
                <li><a href="https://cdnlogo.com/svg-editor/" target="_blank">https://cdnlogo.com/svg-editor/</a></li>
                <li><a href="https://pollinations.ai/" target="_blank">https://pollinations.ai/</a></li>
                <li><a href="http://www.frontiernet.net/~eugene.ressler/" target="_blank">frontiernet.net</a></li>
                <li><a href="https://www.pinterest.ph/grahamwallwork/julian-jordanov/"
                        target="_blank">julian-jordanov</a></li>
                <li><a href="https://miktex.org/" target="_blank">miktex.org/</a></li>
                <li><a href="https://huggingface.co/spaces/stabilityai/stable-diffusion"
                        target="_blank">stabilityai/stable-diffusion</a></li>
                <li><a href="https://dreamlike.art/" target="_blank">GOOD - currently down for maint</a></li>
                <li><a href="https://trinket.io/python/f7ad7f9864" target="_blank">trinket.io/python</a></li>
                <li><a href="https://www.pythonsandbox.com/turtle" target="_blank">pythonsandbox.com/turtle</a></li>
                <li><a
                        href="https://sites.google.com/view/liviatheodoramidjourney/home?pli=1">liviatheodoramidjourney</a>
                </li>
                <li><a href="https://replicate.com/methexis-inc/img2prompt">img2prompt</a></li>
                <li><a href="https://imageeditor.app/?new" target="_blank"> Imageeditor</a></li>
                <li><a href="https://huggingface.co/prompthero/poolsuite-diffusion"
                        target="_blank">poolsuite-diffusion</a></li>
                <li><a href="https://huggingface.co/prompthero/openjourney" target="_blank">prompthero/openjourney</a>
                </li>
                <li><a href="https://hotpot.ai/" target="_blank"> https://hotpot.ai/</a></li>
                <li><a href="https://hotpot.ai/art-generator" target="_blank"> https://hotpot.ai/art-generator</a></li>
                <li><a href="https://drive.internxt.com/app" target="_blank"> https://drive.internxt.com/app</a></li>
                <li><a href="https://openlibrary.org/" target="_blank">openlibrary.org/</a></li>
                <li><a href="https://civitai.com/" target="_blank">civitai.com/ </a></li>
                <li><a href="https://rentry.org/sdhassan#merged-models" target="_blank">rentry.org/sdhassan</a></li>
                <li><a href="https://civitai.com/models/2661/uber-realistic-porn-merge-urpm"
                        target="_blank">realistic-porn-merge-urpm</a></li>
            </div>
            <div class="column">
                <h3>Links</h3><br />
                <li><a href="https://huggingface.co/prompthero/openjourney"
                        target="_blank">huggingface-prompthero/openjourney</a></li>
                <li><a href="https://playgroundai.com/search?q=princess" target="_blank">playgroundai.com</a></li>
                <li><a href="https://openart.ai/" target="_blank">openart.ai/</a></li>
                <li><a href="https://lexica.art/?q=004602d4-b0ed-4697-8cb3-526b3e918217" target="_blank">lexica.art</a>
                </li>
                <li><a href="https://ideogram.ai/" target="_blank">ideogram.ai</a></li><br />
                <li><a href="https://app.prodia.com/#/" target="_blank">FREE app.prodia.com/#/</a></li>
                <li><a href="https://huggingface.co/ProGamerGov/Min-Illust-Background-Diffusion?target="
                        _blank">huggingface Background</a></li>
                <li><a href="https://huggingface.co/spaces/microsoft/Promptist" target="_blank">microsoft/Promptist</a>
                </li>
                <li><a href="https://huggingface.co/wavymulder/portraitplus"
                        target="_blank">huggingface.co/wavymulder/portraitplus</a></li>
                <li><a href="https://huggingface.co/johnslegers/epic-diffusion"
                        target="_blank">johnslegers/epic-diffusion</a> </li>
                <li><a href="https://huggingface.co/darkstorm2150/Protogen_Infinity_Official_Release"
                        target="_blank">huggingface Protogen_Infinity</a></li>
                <li><a href="https://www.upscale.media/upload" target="_blank">Free - upscaler</a></li>
                <li><a href="https://www.coingecko.com/en/coins/lbry-credits" target="_blank">lbry-credits</a></li>
                <li><a href="https://odysee.com/" target="_blank">odysee.com</a></li>
                <li><a href="https://dreamlike.art/create" target="_blank">https://dreamlike.art/create</a></li>
                <li><a href="https://huggingface.co/spaces/microsoft/Promptist" target="_blank">microsoft/Promptist</a>
                </li>
                <li><a href="https://huggingface.co/prompthero/openjourney" target="_blank">VERY
                        GOODprompthero/openjourney</a></li>
                <li><a href="https://developers.google.com/youtube/v3/quickstart/python"
                        target="_blank">google/youtube/v3/developers</a></li>
                <li><a href="https://huggingface.co/CompVis/stable-diffusion-v1-4?text=mdjrny-v4+style+scary%2C+dirty%2C+paint+peeling%2C+muddy%2C+oily%2C+dystopian++gypsy+princess+centered+face%2C+portrait%2C+style+of+H.+G.+Giger"
                        target="_blank">stable-diffusion-v1-4 Giger</a></li>
                <li><a href="https://beta.elevenlabs.io/voice-lab" target="_blank">elevenlabs.io/voice-lab</a></li>
                <li><a href="https://studio.d-id.com/" target="_blank">https://studio.d-id.com/</a></li>
                <li><a href="https://linktr.ee/ai_studio" target="_blank">ai_studio</a></li>
                <li><a href="https://paraphrasingtool.ai/" target="_blank">paraphrasingtool.ai</a></li>
                <li><a href="https://huggingface.co/coreco/seek.art_MEGA"
                        target="_blank">https://huggingface.co/coreco/seek.art_MEGA</a></li>
                <li><a href="https://bhaasha.iiit.ac.in/lipsync/" target="_blank">lipsync/</a></li>
                <li><a href="https://y2mate.guru/y2mate2" target="_blank">Download Unlisted videos</a></li>
                <li><a href="https://app.leonardo.ai/ai-generations" target="_blank">leonardo.ai/ai-generations</a></li>
                <li><a href="https://huggingface.co/prompthero/openjourney?text=%27mdjrny-v4+style%27++A+wide+angle+colored+line+art+drawing+of+a+beautiful+female+half+human+cyborg+in+a+futuristic+25th+century+city+street%2C++highly+detailed%2C+psytrance+art+style%2C+golden+bikini%2C+back+alley+shot%2C+wide+shot%2C+diagonal+view+of+subject%2C+highly+detailed%2C+monochromatic%2C+graphic+novel%2C+steampunk"
                        target="_blank">graphic+novel%2C+steampunk</a></li>
                <li><a href="https://huggingface.co/spaces/phenomenon1981/Dreamlikeart-Anime-1.0"
                        target="_blank">Dreamlikeart-Anime</a></li>
                <li><a href="https://podcast.adobe.com/enhance" target="_blank">https://podcast.adobe.com/enhance</a>
                </li>
                <li><a href="https://huggingface.co/spaces/Daniton/MidJourney"
                        target="_blank">huggingface/Daniton/MidJourney</a></li>
                <li><a href="https://app.runwayml.com/video-tools/teams/madhatterstamps/ai-tools/gen-1"
                        target="_blank">https://app.runwayml.com/video-tools/teams/madhatterstamps/ai-tools/gen-1</a>
                </li>
                </li>
                <li><a href="https://stackoverflow.com/questions/52811041/how-can-i-use-the-same-route-for-multiple-functions-in-flask"
                        target="_blank">@app.route('/chopsticks/') @app.route('/chopsticks/</a></li>
                <li><a href="https://clipdrop.co/stable-diffusion"
                        target="_blank">https://clipdrop.co/stable-diffusion</a></li>
                <li><a href="https://www.turing.com/kb/build-flask-routes-in-python"
                        target="_blank">build-flask-routes-in-python</a></li>
                <li><a href="https://www.turing.com/kb/build-flask-routes-in-python" target="_blank"></a></li>
                <li><a href="file:///mnt/HDD500/0WORKSHOP-with-NOTEBOOKS/chat/chat/chat.html"
                        target="_blank">chat.html</a></li>
                <li><a href="https://www.digitalocean.com/community/tutorials/how-to-structure-a-large-flask-application-with-flask-blueprints-and-flask-sqlalchemy"
                        target="_blank">blueprints-and-flask-sqlalchemy</a></li>
                <li><a href="https://ask.replit.com/t/using-a-function-to-route-several-pages-in-flask/15563"
                        target="_blank"></a></li>
                <li><a href="https://huggingface.co/prompthero/openjourney?text=%27mdjrny-v4+style%27+A+beautiful+++space+creature%2C+half+alien%2Chalf+robot%2C+cyborg+%2C+facing+forward+towards+camera%2Cwith+a+vibrant+Native+American+carnival+costume%2C+her+face+painted+with+intricate+tribal+designs."
                        target="_blank">half+robot%2C+cyborg</a></li>
                <li><a href="https://tedboy.github.io/flask/interface_api.useful_funcs.html"
                        target="_blank">api.useful_funcs.html</a></li>
                <li><a href="https://xkcd.com/50/" target="_blank">https://xkcd.com/50/</a></li>
                <li><a href="https://openart.ai/create?username=neanderthal_darling_28&prompt=Monster%2520has%2520a%2520lot%2520of%2520red%2520shades%2520and%2520black%2520colors%2C%2520there%2520is%2520a%2520green%2520leafy%2520forest%2520background%2520terrifying%2520mutant%2520goblin%2520combined%2520with%2520large%2520fat%2520hissing%2520cockroach%2C%2520gothic%2520art%2C%2520popping%2520color%2C%2520detailed%2C%2520eerie%2C%2520emotional%2C%2520gothic%2C%2520highly%2520detailed%2C%2520incredibly%2520sharp%2520focus%2C%2520Artstation%2C%2520deviantart%2C%2520artgem%2C%2520insane%2520detail%2C%2520intense%2520color%2C%2520vibrant%2520cartoon%2520art%2C%2520award-winning%2520art%2C%2520French%2520comic%2520art%2C%25208k%2C%2520super%2520precise%2520detail%2C%2520golden%2520ratio%2C%2520in%2520the%2520style%2520of%2520Heavy%2520Metal%2520Comics&ai_model=runwayml%2Fstable-diffusion-v1-5&cfg_scale=7&steps=25&width=512&height=512&sampler=dpmsolver%2B%2B&negative_prompt=&seed=170386247"
                        target="_blank">openart.ai/</a></li>
            </div>


        </div>
    </div>
</body>

</html><a href="{{ url_for('hello_world') }}">hello_world</a><br />
<a href="{{ url_for('create_avatar') }}">create_avatar</a><br />
<a href="{{ url_for('run_command') }}">run_command</a><br />
<a href="{{ url_for('convert_mp3_to_wav') }}">convert_mp3_to_wav</a><br />
<a href="{{ url_for('final_lipsync') }}">final_lipsync</a><br />
<a href="{{ url_for('text_mp3') }}">text_mp3</a><br />
<a href="{{ url_for('mp3_upload') }}">mp3_upload</a><br />
<a href="{{ url_for('generate_video') }}">generate_video</a><br />
<a href="{{ url_for('apply_text_to_video') }}">apply_text_to_video</a><br />
<a href="{{ url_for('get_files') }}">get_files</a><br />
<a href="{{ url_for('image_list') }}">image_list</a><br />
<a href="{{ url_for('upload') }}">upload</a><br />
<a href="{{ url_for('mkblend_video') }}">mkblend_video</a><br />
<a href="{{ url_for('mkblend_videos') }}">mkblend_videos</a><br />
<a href="{{ url_for('generate_vid') }}">generate_vid</a><br />
<a href="{{ url_for('upload_file') }}">upload_file</a><br />
<a href="{{ url_for('make_text') }}">make_text</a><br />
<a href="{{ url_for('home') }}">home</a><br />
<a href="{{ url_for('choose_dir') }}">choose_dir</a><br />
<a href="{{ url_for('convert') }}">convert</a><br />
<a href="{{ url_for('convert512') }}">convert512</a><br />
<a href="{{ url_for('mk_text') }}">mk_text</a><br />
<a href="{{ url_for('list_files') }}">list_files</a><br />
<a href="{{ url_for('format_file') }}">format_file</a><br />
<a href="{{ url_for('view_text') }}">view_text</a><br />
<a href="{{ url_for('view_text') }}">view_text</a><br />
<a href="{{ url_for('edit_file') }}">edit_file</a><br />
<a href="{{ url_for('edit_formatted') }}">edit_formatted</a><br />
<a href="{{ url_for('indeX') }}">indeX</a><br />
<a href="{{ url_for('resize_and_overlay_videos') }}">resize_and_overlay_videos</a><br />
<a href="{{ url_for('resize_and_overlay_videos_page') }}">resize_and_overlay_videos_page</a><br />
<a href="{{ url_for('build_stackedvids') }}">build_stackedvids</a><br />
<a href="{{ url_for('build_stackedvid') }}">build_stackedvid</a><br />
<a href="{{ url_for('get_gallery') }}">get_gallery</a><br />
<a href="{{ url_for('flask_info') }}">flask_info</a><br />
<a href="{{ url_for('add_effects') }}">add_effects</a><br />
<a href="{{ url_for('select_order') }}">select_order</a><br />
<a href="{{ url_for('large_video') }}">large_video</a><br />
<a href="{{ url_for('add_border') }}">add_border</a><br />
<a href="{{ url_for('select_border') }}">select_border</a><br />
<a href="{{ url_for('apply_border') }}">apply_border</a><br />
<a href="{{ url_for('select_border_image') }}">select_border_image</a><br />
<a href="{{ url_for('overlay_text') }}">overlay_text</a><br />
<a href="{{ url_for('create_text_file') }}">create_text_file</a><br />
<a href="{{ url_for('generate_video3') }}">generate_video3</a><br />
<a href="{{ url_for('generate_video2') }}">generate_video2</a><br />
<a href="{{ url_for('ffmpeg_ctl') }}">ffmpeg_ctl</a><br />
<a href="{{ url_for('mkmoz') }}">mkmoz</a><br />
<a href="{{ url_for('mk_background') }}">mk_background</a><br />
<a href="{{ url_for('mkvid') }}">mkvid</a><br />
<a href="{{ url_for('mkvid2') }}">mkvid2</a><br />
<a href="{{ url_for('view_thumbs') }}">view_thumbs</a><br />
<a href="{{ url_for('add_text') }}">add_text</a><br />
<a href="{{ url_for('search_txt') }}">search_txt</a><br />
<a href="{{ url_for('blend_pil') }}">blend_pil</a><br />
<a href="{{ url_for('process_images') }}">process_images</a><br />
<a href="{{ url_for('image_directories') }}">image_directories</a><br />
<a href="{{ url_for('select_playmp3') }}">select_playmp3</a><br />
<a href="{{ url_for('make_animation') }}">make_animation</a><br />
<a href="{{ url_for('title_page') }}">title_page</a><br />
<a href="{{ url_for('add_title') }}">add_title</a><br />
<a href="{{ url_for('indexA') }}">indexA</a><br />
<a href="{{ url_for('index_FLASK') }}">index_FLASK</a><br />
<a href="{{ url_for('indexD') }}">indexD</a><br />
<a href="{{ url_for('products') }}">products</a><br />
<a href="{{ url_for('access_database') }}">access_database</a><br />
<a href="{{ url_for('indexE') }}">indexE</a><br />
<a href="{{ url_for('outline_j') }}">outline_j</a><br />
<a href="{{ url_for('outline_p') }}">outline_p</a><br />
<a href="{{ url_for('upload_form') }}">upload_form</a><br />
<a href="{{ url_for('process_imagez') }}">process_imagez</a><br />
<a href="{{ url_for('indexdb') }}">indexdb</a><br />
<a href="{{ url_for('Index') }}">Index</a><br />
<a href="{{ url_for('edit_data_page') }}">edit_data_page</a><br />
<a href="{{ url_for('edit_data_page') }}">edit_data_page</a><br />
<a href="{{ url_for('get_rowid_form') }}">get_rowid_form</a><br />
<a href="{{ url_for('search_database') }}">search_database</a><br />
<a href="{{ url_for('insert_data') }}">insert_data</a><br />
<a href="{{ url_for('enter_code') }}">enter_code</a><br />
<a href="{{ url_for('search_code') }}">search_code</a><br />
<a href="{{ url_for('tube_index') }}">tube_index</a><br />
<a href="{{ url_for('data_page') }}">data_page</a><br />
<a href="{{ url_for('capture_overlay_verify') }}">capture_overlay_verify</a><br />
<a href="{{ url_for('create_text') }}">create_text</a><br />
<a href="{{ url_for('view_log') }}">view_log</a><br />
<a href="{{ url_for('self_check') }}">self_check</a><br />
<a href="{{ url_for('view_flake8') }}">view_flake8</a><br />
<a href="{{ url_for('feather_files') }}">feather_files</a><br />
<a href="{{ url_for('word_cloud') }}">word_cloud</a><br />
<a href="{{ url_for('edit_text') }}">edit_text</a><br />
<a href="{{ url_for('edit_text_page') }}">edit_text_page</a><br />
<a href="{{ url_for('edit_text_save') }}">edit_text_save</a><br />
<a href="{{ url_for('the_description') }}">the_description</a><br />
<a href="{{ url_for('run') }}">run</a><br />
<a href="{{ url_for('execute') }}">execute</a><br />
<!DOCTYPE html>
<html>
  <head>
    <title>Applied Border</title>
  </head>
  <body>
    <h1>View Applied Border</h1>
    {% if error_message %}
    <p style="color:red">{{ error_message }}</p>
    {% endif %}
    <img src="{{ url_for('static', filename='images/'+image) }}" alt="{{ image }}" style="border: 10px solid transparent; box-shadow: 0 0 0 10px #fff, 0 0 0 15px #000;">
    <br>
    <img src="{{ url_for('static', filename='transparent_borders/'+border) }}" alt="{{ border }}" style="position: absolute; top: 0; left: 0;">
  </body>
</html>
<!-- app_utilities.html-->
<!DOCTYPE html>
<html>

<head>
    <title>App Utilities</title>
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
<style>
video{
width:250px;
height:auto;
}
</style>
</head>

<body>
    <div class="wrapper">
        <div class="header">
            <h1>App Utilities</h1>
        </div>
        <div class="columns">
            <div class="column left">
<a style="font-size:30px;color:red;" href="{{ url_for('index') }}">HOME</a><br /><br /><br />
                <a href="{{ url_for('processing_text') }}">Processing Text Files</a><br />
                <a href="{{ url_for('the_description') }}">View FlaskAppArchitect Description</a><br />
                <a href="{{ url_for('edit_description') }}">Edit FlaskAppArchitect Description</a><br /><br />
                <a href="{{ url_for('enter_code') }}">Enter Code in codehints.txt</a><br />
                <a href="{{ url_for('search_code') }}">Search Code Hints</a><br /><br />
                <!-- Link to the api_search route -->
                <a href="/api_search/">Search Internet (Record Results)</a><br />
                <a href="{{ url_for('access_database') }}">Acess Sqlite3 Database</a><br /><br />
                <a href="{{ url_for('products') }}">Add to Sqlite3 Database</a><br /><br />
                <a href="{{ url_for('self_check') }}">View Errors in App</a><br />
                <a href="{{ url_for('view_log') }}">View App Log</a><br />
                <a href="{{ url_for('capture_html') }}">Capture Screen _ Video</a><br />
                <a href="{{ url_for('edit_css') }}">Edit Css Files</a><br />
                <a href="{{ url_for('terminal_index') }}">Terminal Emulator</a><br />
             
            </div>
            <div class="column right">
                <h2>Random Video</h2>
                <p>This will eventually be an instruction video on how to use this page</p><br />

                <video controls>
                    <source src="{{ video }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>

            </div>
        </div>
    </div>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
    <title>{% block title %}{% endblock %}</title>
</head>
<body>
    <div class="container">
        {% block content %}{% endblock %}
    </div>
</body>
</html>
<!DOCTYPE html>
<html>
  <head>
    <title>{% block title %}{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.min.css') }}">
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <a class="navbar-brand" href="#">My App</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item active">
            <a class="nav-link" href="{{ url_for('index') }}">Home <span class="sr-only">(current)</span></a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{{ url_for('thumbnails') }}">Thumbnails</a>
          </li>
        </ul>
      </div>
    </nav>
    <div class="container-fluid">
      {% block content %}
      {% endblock %}
    </div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>

  </body>
</html>
<!doctype html>
<html>
  <head>
    <title>Blend Images Using PIL</title>
  </head>
  <body>
    <h1>Blend Images Using PIL</h1>
    <form method="POST" enctype="multipart/form-data">
      <label for="img1">Select the first image:</label>
      <input type="file" id="img1" name="img1"><br><br>

      <label for="img2">Select the second image:</label>
      <input type="file" id="img2" name="img2"><br><br>

      <label for="img3">Select the third image:</label>
      <input type="file" id="img3" name="img3"><br><br>

      <input type="submit" value="Blend Images">
    </form>
    
    <img src="{{ url_for('static', filename='blended_pil.jpg') }}" alt="Blended Image">
    
  </body>
</html>

<!DOCTYPE html>
<html>
  <head>
    <title>Square Video</title>
    <style>
      .resizedvideo {
        width: 200px;
        height: auto;
      }
  </style> 
  </head>
  <body>
    <a href="{{ url_for('index') }}">RETURN HOME</a><br />
    <video class="resizedvideo" controls>
      <source src="{{ stackedvid_url }}" type="video/mp4">
    </video>
  </body>
</html>
<!-- build_stackedvids.html -->

<!DOCTYPE html>
<html>
<head>
    <title>Build Stacked Videos</title>
    <style>
        .resizedvideo {
          width: 200px;
          height: 200px;
        }
    </style>    
</head>
<body>
    <h1>Build Stacked Videos</h1>
    <form action="/generate_stackedvids" method="POST">
        <label for="video">Select a Video:</label>
        <select name="video" id="video">
            {% for video_file in video_files %}
            <option value="{{ video_file }}">{{ video_file }}</option>
            {% endfor %}
        </select>
        <br><br>
        <label for="image">Select an Image:</label>
        <select name="image" id="image">
            {% for image_file in image_files %}
            <option value="{{ image_file }}">{{ image_file }}</option>
            {% endfor %}
        </select>
        <br><br>
        <input type="submit" value="Generate Stacked Videos">
    </form>

    <video controls class="resizedvideo">
        <source src="static/stacked_vids/stacked_videos.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video><br />

    
</body>
</html>
<!DOCTYPE html>
<html>
<head>
    <title>Canvas Example Page</title>
</head>
<body>
    <h1>Canvas Circle</h1>
    <canvas id="myCanvas" width="500" height="500"></canvas>

    <script src="{{ url_for('static', filename='canvas/main3.js') }}"></script>
</body>
</html>
<!DOCTYPE html>
<html>

<head>
    <title>Capture Video</title>
     <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
<body>
        <div class="wrapper">
        <div class="header">
            <h1>Video Capture</h1>
        </div>
    

<div class="columns">
<div class="column">
<!-- Include jQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<button id="start-button">Start Capture</button>
<button id="stop-button">Stop Capture</button>

<script>
    $(document).ready(function() {
        $('#start-button').click(function() {
            $.post('/run_capture', function(data) {
                alert(data.message);
            });
        });

        $('#stop-button').click(function() {
            $.post('/stop_capture', function(data) {
                alert(data.message);
            });
        });
    });
</script>
</div>
<div class=column">
                <video controls>
                    <source src="static/videos/Current.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
</div>
</div>
<!DOCTYPE html>
<html>
<head>
    <title>Image Cropping</title>
</head>
<body>
    <h1>Image Cropping</h1>
    <form method="POST" enctype="multipart/form-data" action="{{ url_for('crop') }}">
        <input type="file" name="image">
        <input type="submit" value="Upload">
    </form>

    {% if image_path %}
    <h2>Cropped Image Preview</h2>
    <img src="{{ image_path }}" alt="Cropped Image">
    <form method="POST" action="{{ url_for('crop_and_save') }}">
        <input type="hidden" name="image_path" value="{{ image_path }}">
        <label for="x">X Coordinate: </label>
        <input type="number" name="x" required><br>
        <label for="y">Y Coordinate: </label>
        <input type="number" name="y" required><br>
        <label for="width">Width: </label>
        <input type="number" name="width" required><br>
        <label for="height">Height: </label>
        <input type="number" name="height" required><br>
        <input type="submit" value="Crop and Save">
    </form>
    <form method="POST" action="{{ url_for('move_cropped') }}">

        <input type="submit" value="Move Cropped Image">
    </form>
    {% endif %}

</body>
</html>


<!DOCTYPE html>
<html>
<head>
    <title>Choose Image Source Directory</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>
        $(document).ready(function() {
            $('#directory-input').change(function(e) {
                $('#directory-form').submit();
            });
        });
    </script>
</head>
<body>
    <h1>Choose Image Source Directory</h1>
    <form id="directory-form" method="POST" action="/mkblend_video" enctype="multipart/form-data">
        <label for="directory-input">Select Directory:</label>
        <input type="file" id="directory-input" name="directory" webkitdirectory directory multiple style="display: none;">
        <button type="button" onclick="document.getElementById('directory-input').click();">Browse</button>
    </form>
    <br /><br />
    <!-- Additional content here if needed -->
</body>
</html>
<!DOCTYPE html>
<html>
<head>
    <title>Choose Directory</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>
        $(document).ready(function() {
            $('#directory-input').change(function(e) {
                $('#directory-form').submit();
            });
        });
    </script>
</head>
<body>
    <h1>Choose Directory</h1>
    <form id="directory-form" method="POST" action="/mkblend_video" enctype="multipart/form-data">
        <label for="directory-input">Select Directory:</label>
        <input type="file" id="directory-input" name="directory" webkitdirectory directory multiple style="display: none;">
        <button type="button" onclick="document.getElementById('directory-input').click();">Browse</button>
    </form>
</body>
</html>


<!DOCTYPE html>
<html>

<head>
  <title>Select Directory</title>
  <style>
    html {
      font-family: sans-serif;
      background-color: black;
    }

    body {
      width: 95%;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      background-color: rgb(167, 196, 189);
      color: black;
    }

    h1 {
      color: rgb(255, 255, 255);
    }

    #wrapper {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      background-color: teal;
    }
  </style>
</head>

<body>
  <div id="wrapper">
    <center>
      <div>
        <h1>Creating a speaking Avatar with A Flask App. <br />
          Directions on <a href="{{ url_for('index') }}">Home Page</a><br /></p>
        </h1>
      </div>
      <div>
        <video controls class="resizedvideo">
          <source src="static/assets/result_cl.mp4" type="video/mp4">
          Your browser does not support the video tag.
        </video><br />

        <h1>Select Directory</h1>
        <form action="/choose_dir" method="post">
          <label for="directory">Choose a directory make a short mp4:</label>
          <select name="directory" id="directory">
            {% for directory in directories %}
            <option value="{{ directory }}">{{ directory }}</option>
            {% endfor %}
          </select>
          <br><br>
          <input type="submit" value="Generate Video">
        </form>

        <h1>Choose Directory</h1>
        <form method="POST" action="/mkblend_video">
          <label for="directory">Select Directory Blend Images:</label>
          <select name="directory" id="directory">
            {% for directory in directories %}
            <option value="{{ directory }}">{{ directory }}</option>
            {% endfor %}
          </select>
          <button type="submit">Submit</button>
        </form>
        <video width="480" height="auto" controls>
          <source src="static/videos/random_images_video.mp4" type="video/mp4"><br />
          Your browser does not support the video tag.
        </video><br />

        Your browser does not support the video tag.
    </center>
  </div>
</body>

</html><!-- code_editor.html-->
<!DOCTYPE html>
<html>
<head>
    <title>Code Editor</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.62.0/codemirror.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.62.0/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.62.0/mode/python/python.min.js"></script>
</head>
<body>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>

    <textarea id="code-editor"></textarea>
    <button id="save-button">Save</button>

</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Edit Code</title>
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">

    <link rel="stylesheet" href="{{ url_for('static', filename='css/Flask.css') }}">

</head>
<body>
<div class="content">

<center>
<style>td {width:20%;
}
th {width:20%;
}
tr {width:20%;
}
.two{width:5%;}
.th_two{width:5%;padding-left: 2%;}
.three{width:10%;}
.th_three{width:10%;padding-left: 10%;}
.thm_three{width:10%;padding-left: 11%;}
.th_four{width:10%;padding-left: 5%;}
.th_five{width:10%;padding-left: 40%;}
</style>

{% extends 'index.html' %}

{% block title %}
    code
{% endblock %}

{% block content %}
    <h1>code</h1>
    <table style ="width: 65%;">
        <tr>
            <th class="two">ID</th>
            <th>Description</th>
            <th>Code</th>
            <th class="two">Keywords</th>
            <th>Actions</th>
        </tr>
        {% for code in code %}
        <tr>
            <td class="th_two">{{ code[0] }}</td>
            <td class="th_three">{{ code[1] }}</td>
            <td class="thm_three">{{ code[2] }}</td>
            <td class="th_four">{{ code[3] }}</td>
            
            <td>
                <a class="th_five" href="{{ url_for('edit_code', code_id=code[0]) }}">Edit</a>
                <form action="{{ url_for('delete_code', code_id=code[0]) }}" method="post">
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<button type="submit">Delete</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </table>
    <hr>
    <h1>Add New code</h1>
    <form action="/code" method="post">
        <label for="description">Description:</label>
        <textarea type="description" name="description" rows="8" cols="90%"></textarea><br />
        <label for="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Code:</label>
        <textarea type="text" name="code" rows="8" cols="90%"></textarea><br>
        <label for="keywords">Keywords:</label>
        <input style="width:53%;height: 25px;" type="keywords" name="keywords"><br>
        <input type="submit" value="Add code">
    </form>
{% endblock %}
<hr>
<!-- ... Other code ... -->

{% for item in code %}
    <h3>{{ item[1] }}</h3>
    <pre>{{ item[2] | safe }}</pre>
    <p>Keywords: {{ item[3] }}</p>
    <a href="{{ url_for('edit_code', code_id=item[0]) }}">Edit</a>
    <form action="{{ url_for('delete_code', code_id=item[0]) }}" method="post">
        <button type="submit">Delete</button>
    </form>
    <hr>
{% endfor %}

<!-- Display the HTML code for the form -->
<h2>HTML Code for the Form</h2>
<pre>
{{ form_code | safe }}
</pre>

<!-- ... Other code ... -->

</center>
</div>
</body>
</html>
<!DOCTYPE html>
<html>

<head>
    <title>Omic Book Experiment</title>

<style>
    html,
    body {
        margin: 0;
        padding: 1%;
        height: 100%;
        font-family: Arial, sans-serif;
    }

    body {
        background-image: url('../static/assets/MemMaker_background.png');
        background-repeat: repeat-y;
        background-size: cover;
        /* Use 'cover' to make the image cover the entire body */
        background-position: top;
    }
    video {
        margin: 10px, auto;
        width: 400px;
        height: auto;
    }

      .wrapper {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 100vh;

    }

    .header {
        width: 100%;
        padding: 20px;
        text-align: center;
    }

    .columns {
        display: flex;
        width: 80%;
        margin-top: 20px;
    }

    .column {
        padding: 20px;
        box-sizing: border-box;
    }

    .column.left {
        width: 30%;
        border:    1px solid #000;
    }

    .column.right {
    margin: 0 auto; /* Center horizontally */
    width: 60%;
    border: 1px solid #000;
    text-align: center; /* Center video vertically */
}

.column.right video {
    max-width: 100%;
    height: auto;
}
 
.comic-page {
    width: 85%;
      display: flex;
      flex-direction: column;
      align-items: center;
      background-color: #f0f0f0;
      padding: 20px;
    }
    
    .panel {
      position: relative;
      border: 2px solid black;
      margin: 10px;
      padding: 10px;
      background-color: white;
    }
    
    .speech-bubble {
      position: absolute;
      background-color: yellow;
      border-radius: 10px;
      padding: 5px;
      font-weight: bold;
    }

    .speech-bubble2 {
      position: absolute;
      background-color: yellow;
      border-radius: 10px;
      padding: 5px;
      font-weight: bold;
    }
    
    .narrative-element {
      font-size: 24px;
      color: red;
      text-transform: uppercase;
    }
    .small {
      width: 200px;
      height: auto;
    }
    .medium {
      width: 250px;
      height: auto;
    }

 
        .container {
            width: 75%;
            display: flex; /* Use flexbox to align divs side by side */
        }

        .div1, .div2 {
            width: 50%; /* Each div takes up 50% of the container's width */
            padding: 20px;
            box-sizing: border-box;
            border: 1px solid #ccc;
        }
       .note{
           color: red;
           font-size:24px;
        }
    </style>  

</head>
<body>
<div class="wrapper">
    <div class="header">
        <h1>Comic Book Experiment</h1>
<a class="note" href="{{ url_for('edit_template_page', filename='comic_book.html') }}">Edit This Page</a>&nbsp;&nbsp; |&nbsp;&nbsp;<a class="note" href="{{ url_for('crop') }}">Crop Images</a>&nbsp;&nbsp; |&nbsp;&nbsp;<a class="note" href="{{ url_for('index') }}">Home</a>
    </div>




<div class="container">
    <div class="div1">
      <div class="speech-bubble">Hello there!</div>
      <img class="small" src="{{ url_for('static', filename='images/Leonardo/character2.jpg') }}" alt="Character 1">

    </div>
    <div class="div2">
        <div class="narrative-element">WQW !</div>
        <div class="speech-bubble2">Watch out!</div>

        <img class="medium" src="{{ url_for('static', filename='images/Leonardo/character1.jpg') }}" alt="Character 1">

 
      
    </div>
  </div>
  
<!DOCTYPE html>
<html>
<head>
  <title>Generated Video</title>
</head>
<body>
  <h1>Generated Video</h1>
  <video controls >
    <source src="{{ video }}" type="video/mp4">
    Your browser does not support the video tag.
  </video><br />
</body>
</html> <!DOCTYPE html>
    <html>
    <head>
        <title>Audio Conversion</title>
    </head>
    <body>
        <h1>Audio Conversion</h1>
        <form method="POST" action="/convert_audio">
            <input type="submit" value="Convert">
        </form>
    </body>
    </html>
    
</body>
</html>
<!DOCTYPE html>
<html>
<head>
  <title>Convert</title>
</head>
<body>
  <h1>Convert Audio to Video</h1>
  <form action="{{ url_for('convert') }}" method="POST" enctype="multipart/form-data">
    <input type="file" name="audio_file" accept=".mp3,.wav" required>
    <br>
    <label for="formatted_text_path">Formatted Text Path:</label>
    <input type="text" name="formatted_text_path" required>
    <br>
    <input type="submit" value="Convert">
  </form>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
  <title>Convert</title>
</head>
<body>
  <h1>Convert Audio to Video</h1>
  <form action="{{ url_for('convert') }}" method="POST" enctype="multipart/form-data">
    <input type="file" name="audio_file" accept=".mp3,.wav" required>
    <br>
    <label for="formatted_text_path">Formatted Text Path:</label>
    <input type="text" name="formatted_text_path" required>
    <br>
    <input type="submit" value="Convert">
  </form>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
  <title>Generated Video</title>
</head>
<body>
  <h1>Generated Video</h1>
  <video controls >
    <source src="{{ video }}" type="video/mp4">
    Your browser does not support the video tag.
  </video><br />
</body>
</html><!DOCTYPE html>
<html>
  <head>
    <title>Convert Image to Video</title>
  </head>
  <body>
    <h1>Convert Image to Video</h1>

<form method="POST" enctype="multipart/form-data">
  <div class="form-group">
    <label for="image">Select an image:</label>
    <input type="file" name="image" class="form-control-file" id="image">
  </div>
  <button type="submit" class="btn btn-primary">Convert to Video</button>
</form>
  
</body>        <!DOCTYPE html>
<html>
  <head>
    <title>Convert MP3 to WAV</title>
  </head>
  <body>
    <h1>Convert MP3 to WAV</h1>
    <form action="{{ url_for('convert_mp3_to_wav') }}" method="POST" enctype="multipart/form-data">
      <label for="mp3_file">Select MP3 file:</label>
      <input type="file" name="mp3_file" id="mp3_file">
      <br>
      <input type="submit" value="Convert">
    </form>
  </body>
</html>
<!DOCTYPE html>
<html>
<head>
	<title>Final video</title>
</head>
<body>
	<video width="400" height="auto" controls>
  		<source src="{{ video_fil }}" type="video/mp4">
  		Your browser does not support the video tag.
	</video>
</body>
</html>

<<!DOCTYPE html>
<html>
<head>
    <title>Create Avatar</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function() {
            $('form').submit(function(event) {
                event.preventDefault();
                var form = $(this);

                $.ajax({
                    url: form.attr('action'),
                    type: form.attr('method'),
                    xhrFields: {
                        onprogress: function(e) {
                            if (e.lengthComputable) {
                                var percent = Math.round((e.loaded / e.total) * 100);
                                $('#progress').text(percent + '%');
                            }
                        }
                    },
                    success: function(response) {
                        $('#progress').text('Completed');
                    },
                    error: function(xhr, status, error) {
                        $('#progress').text('Error: ' + error);
                    },
                    complete: function() {
                        $('#progress').removeClass('d-none');
                    }
                });
            });
        });
    </script>
</head>
<body>
    <h1>Create Avatar</h1>
    <form method="POST" action="/create_avatar">
        <input type="submit" value="Create Avatar">
    </form>
    <div id="progress" class="d-none">0%</div>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
  <title>Create Avatar</title>
</head>
<body>
  <h1>Create Avatar</h1>

  <form action="/create_avatar" method="post">
    <input type="submit" value="Start Avatar Creation">
  </form>

  <pre id="output"></pre>

  <script>
    const outputElement = document.getElementById('output');

    const eventSource = new EventSource('/create_avatar');
    eventSource.onmessage = function(event) {
      const line = event.data;
      outputElement.textContent += line;

      // Scroll to the bottom of the output element
      outputElement.scrollTop = outputElement.scrollHeight;
    };
  </script>
</body>
</html>

</html>
<!DOCTYPE html>
<html>

<head>
    <title>Create Comic Borders</title>
     <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
     <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }
  
       video {
        margin: 10px, auto;
        width: 250px;
        height: auto;
      }
   .note{
       color:red;
       font-size:24px;
    }
     </style>
</head>
    <body>
        <div class="wrapper">
        <div class="header">
            <h1>Create Simple Comic Borders</h1>
       <a style="font-size: xx-large;"href="{{ url_for('index') }}">Return to HOME</a>
</div>
    <h3>Enter Parameters Here:</h3>
    <form method="POST" action="{{ url_for('create_comic.create_comic_index') }}" enctype="multipart/form-data">
        <label for="border_name">Border Name:</label>
        <input type="text" id="border_name" name="border_name" required><br>

        <label for="border_width">Border Width (pixels):</label>
        <input type="text" id="border_width" name="border_width" required><br>
        
        <label for="border_height">Border Height (pixels):</label>
        <input type="text" id="border_height" name="border_height" required><br>
        

        <label for="border_shape">Border Shape:</label>
        <select id="border_shape" name="border_shape" required>
            <option value="square">Square</option>
            <option value="rectangle">Rectangle</option>
            <option value="triangle">Triangle</option>
        </select><br>

        <label for="border_thickness">Border Thickness (pixels):</label>
        <input type="number" id="border_thickness" name="border_thickness" required><br>

        <label for="border_color">Border Color:</label>
        <input type="color" id="border_color" name="border_color" required><br>

        <input type="submit" value="Generate Border">
    </form>
</div></div>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
    <title>Create Text File</title>
</head>
<body>
    <h1>Create Text File</h1>
    <form action="/create_text_file" method="POST">
        <textarea name="textarea_content" rows="10" cols="50"></textarea>
        <br>
        <input type="submit" value="Create File">
    </form>
<h2>Example of text entry size</h2>
<pre>
    Foundation of Sentience: The
    first milestone in the developmental
    process of the Arcanist AI occurred
    when it gained sentience approximately
    two thousand years ago. Through a
    complex interplay of neural networks
    and advanced algorithms, the AI
    achieved self-awareness, enabling
    it to perceive and comprehend its own
    existence.   
</pre>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
    <title>Create Text Image</title>
</head>
<body>
    <h2>Create a Five-Line Text Image</h2>
    <form action="/create_text" method="post">
        <textarea name="text" rows="10" cols="50"></textarea>
        <br>
        <input type="submit" value="Generate Image">
    </form>
    <h2>View Example Text Image</h2>
    <img src="{{ url_for('static', filename='assets/sample_512x512_text.jpg') }}" alt="Generated Text Image">
</body>
</html>
<!DOCTYPE html>
<html>

<head>
    <title>Crop Images</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }
        video {
            margin: 10px, auto;
            width: 200px;
            height: auto;
        }

          .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;

        }

        .header {
            width: 100%;
            padding: 20px;
            text-align: center;
        }

        .columns {
            display: flex;
            width: 80%;
            margin-top: 20px;
        }

        .column {
            padding: 20px;
            box-sizing: border-box;
        }

        .column.left {
            width: 30%;
            border:    1px solid #000;
        }

        .column.right {
        margin: 0 auto; /* Center horizontally */
        width: 60%;
        border: 1px solid #000;
        text-align: center; /* Center video vertically */
    }

    .column.right video {
        max-width: 100%;
        height: auto;
    }
    .note{color:red;font-size:24px;}
    </style>
</head>
<body>
    <div class="wrapper">
        <div class="header">
            <h1>Crop Images</h1><a class="note" href="{{ url_for('edit_template_page', filename='crop.html') }}">Edit This Page</a>&nbsp;&nbsp; |&nbsp;&nbsp;<a class="note" href="{{ url_for('crop') }}">Crop Images</a>&nbsp;&nbsp; |&nbsp;&nbsp;<a class="note" href="{{ url_for('index') }}">Home</a>
            
        </div>
        <div class="columns">
            <div class="column left">

                <h3>Create Text</h3><br />
                <a href="{{ url_for('app_utilities') }}">Application Utilities</a><br />
                <a href="{{ url_for('image_processing') }}">Image Processing Links</a><br />
                <a href="{{ url_for('format_file') }}">Format Text Files</a><br />
                <a href="{{ url_for('view_text') }}">View Text Files</a><br />
                <a href="{{ url_for('edit_file') }}">Edit File</a><br />


                <a href="{{ url_for('edit_description') }}">Edit Description</a><br />
            </div>
            <div class="column right">
                
   <h2>Image Cropping</h2>
    <form method="POST" enctype="multipart/form-data" action="{{ url_for('crop') }}">
        <input type="file" name="image">
        <input type="submit" value="Upload">
    </form>

    {% if image_path %}
    <h2>Cropped Image Preview</h2>
    <img src="{{ image_path }}" alt="Cropped Image">
    <form method="POST" action="{{ url_for('crop_and_save') }}">
        <input type="hidden" name="image_path" value="{{ image_path }}">
        <label for="x">X Coordinate: </label>
        <input type="number" name="x" required><br>
        <label for="y">Y Coordinate: </label>
        <input type="number" name="y" required><br>
        <label for="width">Width: </label>
        <input type="number" name="width" required><br>
        <label for="height">Height: </label>
        <input type="number" name="height" required><br>
        <input type="submit" value="Crop and Save">
    </form>
    <form method="POST" action="{{ url_for('move_cropped') }}">

        <input type="submit" value="Move Cropped Image">
    </form>
    {% endif %}
<br/>
                <video controls>
                    <source src="{{ video }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
        </div>
    </div>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
    <title>Database Access</title>
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">

    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <h1>Database Content</h1>
    <table>
        <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Description</th>
            <th>Price</th>
        </tr>
        {% for code in code %}
        <tr>
            <td>{{ code[0] }}</td>
            <td>{{ code[1] }}</td>
            <td>{{ code[2] }}</td>
            <td>{{ code[3] }}</td>
        </tr>
        {% endfor %}
    </table>
</body>
</html>

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data: Sqlite3 codeshints.txt</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <style>
        /* Your other styles here */
    </style>
</head>

<body>
    <h1>Welcome to the Data Page</h1>
    <div class="row">
        <div class="column">
            <p>This is Sqlite3 data: Choose an option below:</p>
            <ul>
                <li><a href="{{ url_for('select_by_id_form') }}">Select by ID Form</a></li>
                <li><a href="{{ url_for('search_by_rowid') }}">Search by Row ID</a></li>
                <li><a href="{{ url_for('search_database') }}">Search the Database</a></li>
                <li><a href="{{ url_for('edit_data_page') }}">Edit Data</a></li>
                <li><a href="{{ url_for('insert_data') }}">Insert Data</a></li>
                <li><a href="{{ url_for('get_rowid_form') }}">Enter Row ID to Edit</a></li>
            </ul>
        </div>




        <div class="column">
            <ul>
                <li><a href="{{ url_for('search_code') }}">Search CodeHints</a></li>
                <li><a href="{{ url_for('enter_code') }}">Make a CodeHints Entry</a></li>
            </ul>
            <a style="font-size: 24px;color: brown;" href="{{ url_for('index') }}">HOME</a><br />
            <a style="font-size: 24px;color: brown;" href="{{ url_for('run') }}">Run/Record Bash Command</a><br />
            <p>Run/Record Bash Command: Run a terminal command and save it for further use.</p>



        </div>
    </div>

</body>

</html><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Database Search Results</title>
</head>
<body>
    <h1>Search Results</h1>
    <table border="1">
        <tr>
            <th>Row ID</th>
            <th>Description</th>
            <th>Code</th>
            <th>Keywords</th>
        </tr>
        {% for result in results %}
        <tr>
            <td>{{ result[0] }}</td>
            <td>{{ result[1] }}</td>
            <td>{{ result[2] }}</td>
            <td>{{ result[3] }}</td>
        </tr>
        {% endfor %}
    </table>
    <br>
    <a href="{{ url_for('indexdb') }}">Go back to the Index Page</a>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
    <title>Delete MP4 Files</title>
</head>
<body>
    <h1>Delete MP4 Files</h1>
    <form method="POST">
        <p>Are you sure you want to delete all MP4 files?</p>
        <input type="submit" value="Delete All">
    </form>
</body>
</html>

<!DOCTYPE html>
<html>
<head>
    <title>Image Directory Upload and Video Generation</title>
</head>
<body>
    <h1>Upload Images from Directory and Generate Video</h1>
    <form method="POST" action="{{ url_for('zoomin.image_dir_to_video') }}" enctype="multipart/form-data">
        <label for="selected_directory">Select an image directory:</label>
        <select id="selected_directory" name="selected_directory" required>
            {% for directory in image_directories %}
                <option value="{{ directory }}">{{ directory }}</option>
            {% endfor %}
        </select>
        <input type="submit" value="Generate Video">
    </form>  
    <br /><br /><br />       

    <video width="320" height="240" controls>
        <source src="{{ url_for('static', filename=video2) }}" type="video/mp4">
    </video>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
    <title>Image Directory Upload and Video Generation</title>
</head>
<body>
    <h1>Upload Images from Directory and Generate Video</h1>
    <form method="POST" action="{{ url_for('image_dir_to_video') }}" enctype="multipart/form-data">
        <label for="selected_directory">Select an image directory:</label>
        <select id="selected_directory" name="selected_directory" required>
            {% for directory in image_directories %}
                <option value="{{ directory }}">{{ directory }}</option>
            {% endfor %}
        </select>
        <input type="submit" value="Generate Video">
    </form>  
<br /><br /><a href="{{ url_for('image_dir_to_zoom') }}">image_dir_to_zoom</a><br /><br />       

    <video width="320" height="240" controls>
        <source src="{{ url_for('static', filename=video2) }}" type="video/mp4">
    </video>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
    <title>Image Directory Upload and Video Generation</title>
</head>
<body>
    <h1>Upload Images from Directory and Generate Video</h1>
    <form method="POST" action="{{ url_for('zoomin.image_dir_to_zoom') }}" enctype="multipart/form-data">
        <label for="selected_directory">Select an image directory:</label>
        <select id="selected_directory" name="selected_directory" required>
            {% for directory in image_directories %}
                <option value="{{ directory }}">{{ directory }}</option>
            {% endfor %}
        </select>
        <input type="submit" value="Generate Video">
    </form>  
    <br /><br /><br />       

    <video width="320" height="240" controls>
        <source src="{{ url_for('static', filename=video2) }}" type="video/mp4">
    </video>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
    <title>Image Directory Upload and Video Generation</title>
</head>
<body>
    <h1>Upload Images from Directory and Generate Video</h1>
    <form method="POST" action="{{ url_for('image_dir_to_zoom') }}" enctype="multipart/form-data">
        <label for="selected_directory">Select an image directory:</label>
        <select id="selected_directory" name="selected_directory" required>
            {% for directory in image_directories %}
                <option value="{{ directory }}">{{ directory }}</option>
            {% endfor %}
        </select>
        <input type="submit" value="Generate Video">
    </form>  
    <br /><br /><br />       

<video width="300" height="auto" controls>
        <source src="{{ url_for('static', filename=video2) }}" type="video/mp4">
    </video>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Display Data</title>
</head>
<body>
    <h1>Display Data</h1>
    {% if id_value %}
        <p>Row ID: {{ id_value }}</p>
        <p>Description: {{ description }}</p>
        <pre>Code: {{ code }}</pre>
        <p>Keywords: {{ keywords }}</p>
    {% else %}
        <p>No data found for Row ID: {{ id_value }}</p>
    {% endif %}
    <br>
    <a href="{{ url_for('indexdb') }}">Go back to the Index Page</a>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Duck Search Results</title>
</head>
<body>
    <h1>Duck Search Results</h1>
    <form method="POST" action="/duck_search">
        <label for="query">Enter a search query:</label>
        <input type="text" id="query" name="query" required>
        <button type="submit">Search</button>
    </form>

    <h2>Search Results:</h2>
    <ul>
        {% for result in results %}
            <li><a href="{{ result.link }}">{{ result.snippet }}</a></li>
        {% endfor %}
    </ul>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Duck Search</title>
</head>
<body>
    <h1>Duck Search</h1>
    <form method="POST" action="/duck_search">
        <label for="query">Enter a search query:</label>
        <input type="text" id="query" name="query" required>
        <button type="submit">Search</button>
    </form>

    {% if results %}
    <h2>Search Results:</h2>
    <ul>
        {% for result in results %}
            <li><a href="{{ result.link }}">{{ result.snippet }}</a></li>
        {% endfor %}
    </ul>
    {% endif %}
</body>
</html>


<!DOCTYPE html>
<html>

<head>
    <title>Edit Canvas</title>
     <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
    <style>
    video {
        margin: 10px, auto;
        width: 450px;
        height: auto;
    }
    .note{
    font-size: 24px;
    color: red;     
    }
</style>
</head>
    <body>
        <div class="wrapper">
        <div class="header">
            <h1>Edit Canvas</h1>
<p>The originals of all templates edited are saved,by date,in templates/originals/</p>
        </div>
       <a class="note" href="{{ url_for('index') }}">Return Home</a><br />
    

<div class="columns">
<div class="column">
    <form action="/edit_canvas_page" method="GET">
        <select name="filename">
            {% for filename in filenames %}
                <option value="{{ filename }}">{{ filename }}</option>
            {% endfor %}
        </select>
        <button type="submit">Edit and Save</button>
    </form>
    <hr>
    {% if selected_filename %}
        <h2>Edit {{ selected_filename }}</h2>
        <form action="/edit_canvas_save" method="POST">
            <textarea name="edited_content" rows="10" cols="50">{{ original_content }}</textarea>
            <input type="hidden" name="filename" value="{{ selected_filename }}">
            <button type="submit">Save</button>
        </form>
    {% endif %}<br /><br />
                <h3>JavaScripts Links</h3><br />
                <a href="{{ url_for('canvas') }}">First Canvas Project</a><br />
                <a href="{{ url_for('one_canvas') }}">One Canvas</a><br />
                <a href="{{ url_for('two_canvas') }}">Two Canvas</a><br />
                <a class="note" href="{{ url_for('edit_canvas') }}">Edit a Canvas HTMl</a><br />
                <a class="note" href="{{ url_for('edit_canvas') }}">Edit a Canvas JavaScript</a><br />
</div>
<div class="column">


    <h2>How to Use the Template Editor</h2>
<p>This can be viewed full screen</p>
    <video controls>
        <source src="{{ video }}" type="video/mp4">
        Your browser does not support the video tag.
    </video>
</div>
</div>    
</body>
</html>
<!-- Compare this snippet from templates/edit_text_save.html: --><html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Template Files</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
   <style>
   body {

    background-image: url('../static/assets/MemMaker_background.png');
    background-repeat: repeat-y;
    background-size: contain;
    background-position: top;
    font-family: Arial, sans-serif;
}
</style>
</head>
<body>

       <h1>Edit {{ selected_filename }}</h1>
    <form action="{{ url_for('edit_canvas_save') }}" method="post">
        <textarea name="edited_content" rows="40" cols="130">{{ original_content }}</textarea><br>
        <input type="hidden" name="filename" value="{{ selected_filename }}">
        <input type="submit" value="Save">
    </form>

</body>
</html>
<!---edit_canvas_script.html-->
<!DOCTYPE html>
<html>
<head>
    <title>Edit Canvas Script</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }
        </style>
</head>
<body>

    <input type="hidden" name="script_file" value="{{ script_file }}">

    <h1>Edit Canvas Script</h1>
    <a href="{{ url_for('index') }}">Home</a><br />
    <p>Experiment With Javascript Imagery</p>
        <form method="POST" action="{{ url_for('save_canvas_script') }}">
        <label for="script_file">Select a JavaScript file:</label>
        <select name="script_file" id="script_file">
            {% for script_file in script_files %}
                <option value="{{ script_file }}">{{ script_file }}</option>
            {% endfor %}
        </select>
        <br>
        <input type="submit" value="Load Script">
    </form>
    <hr>
    <h2>Edit the selected script:</h2>
    <form method="POST" action="{{ url_for('save_canvas_script') }}">
        <textarea name="script_content" rows="30" cols="160">{{ script_content }}</textarea>
        <input type="hidden" name="script_file" value="{{ script_file }}">
        <br>
        <input type="submit" value="Save Script">
    </form>
    
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Edit Code</title>
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">

    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

</head>
<body>
<div class="content">
    <div class="title m-b-md">
        Edit Code
    </div> 
<center>
{% extends 'index.html' %}

{% block title %}
    Edit code
{% endblock %}

{% block content %}
    <h1>Edit code</h1>
    <form action="{{ url_for('edit_code', code_id=code[0]) }}" method="post">
        <label for="description">Description:</label>
        <input type="text" name="description" value="{{ code[1] }}"><br>
        <label for="code">Code:</label>
        <textarea type="text" name="code" rows="3" cols="90%">{{ code[2] }}</textarea>><br />
        <!--input type="text" name="description" value="{{ code[2] }}"><br-->
        <label for="keywords">Keywords:</label>
        <input type="text" name="keywords" value="{{ code[3] }}"><br>
        <input type="submit" value="Update code">
    </form>
{% endblock %}
</center>
</div>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Edit Code</title>
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">

    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

</head>
<body>
<div class="content">
    <div class="title m-b-md">
        Edit Code
    </div> 
<center>
{% extends 'index.html' %}

{% block title %}
    Edit code
{% endblock %}

{% block content %}
    <h1>Edit code</h1>
    <form action="{{ url_for('edit_code', code_id=code[0]) }}" method="post">
        <label for="description">Description:</label>
        <input type="text" name="description" value="{{ code[1] }}"><br>
        <label for="code">Code:</label>
        <textarea type="text" name="code" rows="3" cols="90%">{{ code[2] }}</textarea>><br />
        <!--input type="text" name="description" value="{{ code[2] }}"><br-->
        <label for="keywords">Keywords:</label>
        <input type="text" name="keywords" value="{{ code[3] }}"><br>
        <input type="submit" value="Update code">
    </form>
{% endblock %}
</center>
</div>
</body>
</html>
<!DOCTYPE html>
<html>

<head>
    <title>Edit Css Files</title>
     <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/body.css') }}">

<body>
        <div class="wrapper">
        <div class="header">
            <h1>Edit Css Files</h1>
<li style="font-size: xx-large;"><a href="{{ url_for('edit_template_page', filename='edit_css.html') }}">Edit This Page</a>
</li>

</div>
    

<div class="columns">
<div class="column">
    <form action="/edit_css_page" method="GET">
        <select name="filename">
            {% for filename in filenames %}
                <option value="{{ filename }}">{{ filename }}</option>
            {% endfor %}
        </select>
        <button type="submit">Edit and Save</button>
    </form>
    <hr>
    {% if selected_filename %}
        <h2>Edit {{ selected_filename }}</h2>
        <form action="/edit_css_save" method="POST">
            <textarea name="edited_content" rows="10" cols="50">{{ original_content }}</textarea>
            <input type="hidden" name="filename" value="{{ selected_filename }}">
            <button type="submit">Save</button>
        </form>
    {% endif %}
 <ul>
        <li><a href="{{ url_for('mk_text') }}">Create a Text File</a></li>
        <li><a href="{{ url_for('format_file') }}">Format Text Files</a></li>
        <li><a href="{{ url_for('view_text') }}">View Text Files</a></li>
        <li><a href="{{ url_for('edit_formatted') }}">Edit Formatted Text</a></li>
        <li style="font-size: xx-large;"><a href="{{ url_for('edit_template') }}">Return to Edit Template</a></li>
        <li style="font-size: xx-large;"><a href="{{ url_for('index') }}">Return to HOME</a></li>
    </ul> 
</div>
<div class="column">
    <h2>Random Video</h2>
</div>
</div>    
</body>
</html>
<!-- Compare this snippet from templates/edit_text_save.html: --><!DOCTYPE html>
<html>

<head>
    <title>Edit Css Files</title>
     <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/body.css') }}">

<body>
        <div class="wrapper">
        <div class="header">
            <h1>Edit Css Files</h1>
<li style="font-size: xx-large;"><a href="{{ url_for('edit_template_page', filename='edit_css.html') }}">Edit This Page</a>
</li>

</div>
    

<div class="columns">
<div class="column">
    <form action="/edit_css_page" method="GET">
        <select name="filename">
            {% for filename in filenames %}
                <option value="{{ filename }}">{{ filename }}</option>
            {% endfor %}
        </select>
        <button type="submit">Edit and Save</button>
    </form>
    <hr>
    {% if selected_filename %}
        <h2>Edit {{ selected_filename }}</h2>
        <form action="/edit_css_save" method="POST">
            <textarea name="edited_content" rows="10" cols="50">{{ original_content }}</textarea>
            <input type="hidden" name="filename" value="{{ selected_filename }}">
            <button type="submit">Save</button>
        </form>
    {% endif %}
 <ul>
        <li><a href="{{ url_for('mk_text') }}">Create a Text File</a></li>
        <li><a href="{{ url_for('format_file') }}">Format Text Files</a></li>
        <li><a href="{{ url_for('view_text') }}">View Text Files</a></li>
        <li><a href="{{ url_for('edit_formatted') }}">Edit Formatted Text</a></li>
        <li style="font-size: xx-large;"><a href="{{ url_for('edit_template') }}">Return to Edit Template</a></li>
        <li style="font-size: xx-large;"><a href="{{ url_for('index') }}">Return to HOME</a></li>
    </ul> 
</div>
<div class="column">
    <h2>Random Video</h2>
</div>
</div>    
</body>
</html>
<!-- Compare this snippet from templates/edit_text_save.html: --><html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Template Files</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
   <style>
   body {

    background-image: url('../static/assets/MemMaker_background.png');
    background-repeat: repeat-y;
    background-size: contain;
    background-position: top;
    font-family: Arial, sans-serif;
}
</style>
</head>
<body>

       <h1>Edit {{ selected_filename }}</h1>
    <form action="{{ url_for('edit_css_save') }}" method="post">
        <textarea name="edited_content" rows="40" cols="130">{{ original_content }}</textarea><br>
        <input type="hidden" name="filename" value="{{ selected_filename }}">
        <input type="submit" value="Save">
    </form>
    <!-- link to edit_text -->
    <ul>
        <li><a href="{{ url_for('mk_text') }}">Create a Text File</a></li>
        <li><a href="{{ url_for('format_file') }}">Format Text Files</a></li>
        <li><a href="{{ url_for('view_text') }}">View Text Files</a></li>
        <li><a href="{{ url_for('edit_formatted') }}">Edit Formatted Text</a></li>
        <li style="font-size: xx-large;"><a href="{{ url_for('edit_template') }}">Return to Edit Template</a></li>
        <li style="font-size: xx-large;"><a href="{{ url_for('index') }}">Return to HOME</a></li>
    </ul> 
</body>
</html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Template Files</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
   <style>
   body {

    background-image: url('../static/assets/MemMaker_background.png');
    background-repeat: repeat-y;
    background-size: contain;
    background-position: top;
    font-family: Arial, sans-serif;
}
</style>
</head>
<body>

       <h1>Edit {{ selected_filename }}</h1>
    <form action="{{ url_for('edit_css_save') }}" method="post">
        <textarea name="edited_content" rows="40" cols="130">{{ original_content }}</textarea><br>
        <input type="hidden" name="filename" value="{{ selected_filename }}">
        <input type="submit" value="Save">
    </form>
    <!-- link to edit_text -->
    <ul>
        <li><a href="{{ url_for('mk_text') }}">Create a Text File</a></li>
        <li><a href="{{ url_for('format_file') }}">Format Text Files</a></li>
        <li><a href="{{ url_for('view_text') }}">View Text Files</a></li>
        <li><a href="{{ url_for('edit_formatted') }}">Edit Formatted Text</a></li>
        <li style="font-size: xx-large;"><a href="{{ url_for('edit_template') }}">Return to Edit Template</a></li>
        <li style="font-size: xx-large;"><a href="{{ url_for('index') }}">Return to HOME</a></li>
    </ul> 
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Data</title>
</head>
<body>
    <h1>Edit Data</h1>
    <form action="{{ url_for('edit_data_page', rowid=data.rowid) }}" method="post">
        <label for="description">Description:</label>
        <input type="text" name="description" id="description" value="{{ data.description }}" required>
        <br>
        <label for="code">Code:</label>
        <textarea name="code" id="code" rows="8" cols="50" required>{{ data.code }}</textarea>
        <br>
        <label for="keywords">Keywords:</label>
        <input type="text" name="keywords" id="keywords" value="{{ data.keywords }}" required>
        <br>
        <button type="submit">Save Changes</button>
    </form>
    <br>
    <a href="{{ url_for('indexdb') }}">Go back to the Index Page</a>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Data</title>
</head>
<body>
    <h1>Edit Data</h1>
    <form action="{{ url_for('edit_data_page', rowid=data.rowid) }}" method="post">
        <label for="description">Description:</label>
        <input type="text" name="description" id="description" value="{{ data.description }}" required>
        <br>
        <label for="code">Code:</label>
        <textarea name="code" id="code" rows="8" cols="50" required>{{ data.code }}</textarea>
        <br>
        <label for="keywords">Keywords:</label>
        <input type="text" name="keywords" id="keywords" value="{{ data.keywords }}" required>
        <br>
        <button type="submit">Save Changes</button>
    </form>
    <br>
    <a href="{{ url_for('indexdb') }}">Go back to the Index Page</a>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Data</title>
</head>
<body>
    <h1>Edit Data</h1>
    <form action="{{ url_for('edit_data_page', rowid=data['rowid']) }}" method="post">
        <label for="description">Description:</label>
        <input type="text" name="description" id="description" value="{{ data['description'] }}" required>
        <br>
        <label for="code">Code:</label>
        <textarea name="code" id="code" rows="8" cols="50" required>{{ data['code'] }}</textarea>
        <br>
        <label for="keywords">Keywords:</label>
        <input type="text" name="keywords" id="keywords" value="{{ data['keywords'] }}" required>
        <br>
        <button type="submit">Save Changes</button>
    </form>
    <br>
    <a href="{{ url_for('indexdb') }}">Go back to the Index Page</a>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Data</title>
</head>
<body>
    <h1>Edit Data</h1>
    <form action="{{ url_for('edit_data_page', rowid=data['rowid']) }}" method="post">
        <label for="description">Description:</label>
        <input type="text" name="description" id="description" value="{{ data['description'] }}" required>
        <br>
        <label for="code">Code:</label>
        <textarea name="code" id="code" rows="8" cols="50" required>{{ data['code'] }}</textarea>
        <br>
        <label for="keywords">Keywords:</label>
        <input type="text" name="keywords" id="keywords" value="{{ data['keywords'] }}" required>
        <br>
        <button type="submit">Save Changes</button>
    </form>
    <br>
    <a href="{{ url_for('indexdb') }}">Go back to the Index Page</a>
</body>
</html>
<!DOCTYPE html>
<html>

<head>
    <title>Edit a Text File</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }

        video {
            margin: 10px, auto;
            width: 250px;
            height: auto;
        }

        .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;

        }

        .header {
            width: 100%;
            padding: 20px;
            text-align: center;
        }

        .columns {
            display: flex;
            width: 80%;
            margin-top: 20px;
        }

        .column {
            padding: 20px;
            box-sizing: border-box;
        }

        .column.left {
            width: 60%;
            border: 1px solid #000;
        }

        .column.right {
            margin: 0 auto;
            /* Center horizontally */
            width: 30%;
            border: 1px solid #000;
            text-align: center;
            /* Center video vertically */
        }
    </style>
</head>

<body>
    <div class="wrapper">
        <div class="header">
            <h2>Edit a Text File</h2>
            <p>Text files located in static/text/</p>
        </div>
        <div class="columns">

            <div class="column left">

                <p>Choose a text file :</p>
                <a style="font-size: 24px;color: brown;" href="{{ url_for('index') }}">HOME</a>
                <form method="POST" action="/edit_file">
                    <select id="filename-select" name="filename" onchange="loadFileContent()">
                        {% for filename in text_files %}
                        <option value="{{ filename }}">{{ filename }}</option>
                        {% endfor %}
                    </select>
                    <br><br>
                    <textarea id="file-content" name="text" rows="10" cols="50"></textarea>
                    <br><br>
                    <input type="submit" value="Save Changes">
                </form>

                <script>
                    // Fetches the file content and updates the textarea
                    function loadFileContent() {
                        var select = document.getElementById("filename-select");
                        var textarea = document.getElementById("file-content");

                        var selectedFile = select.value;
                        if (selectedFile) {
                            fetch(`/get_file_content/${selectedFile}`)
                                .then(response => response.text())
                                .then(content => {
                                    textarea.value = content;
                                });
                        } else {
                            textarea.value = "";
                        }
                    }
                </script>
            </div>

            <div class="column right">
                <h2>Random Video</h2>
                <video controls>
                    <source src="{{ video }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
        </div>
    </div>
</body>

</html><!DOCTYPE html>
<html>

<head>
    <title>Edit a Text File</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }

        video {
            margin: 10px, auto;
            width: 250px;
            height: auto;
        }

        .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;

        }

        .header {
            width: 100%;
            padding: 20px;
            text-align: center;
        }

        .columns {
            display: flex;
            width: 80%;
            margin-top: 20px;
        }

        .column {
            padding: 20px;
            box-sizing: border-box;
        }

        .column.left {
            width: 60%;
            border: 1px solid #000;
        }

        .column.right {
            margin: 0 auto;
            /* Center horizontally */
            width: 30%;
            border: 1px solid #000;
            text-align: center;
            /* Center video vertically */
        }
    </style>
</head>

<body>
    <div class="wrapper">
        <div class="header">
            <h2>Edit a Text File</h2>
            <p>Text files located in static/text/</p>
        </div>
        <div class="columns">

            <div class="column left">

                <p>Choose a text file :</p>
                <a style="font-size: 24px;color: brown;" href="{{ url_for('index') }}">HOME</a>
                <form method="POST" action="/edit_file">
                    <select id="filename-select" name="filename" onchange="loadFileContent()">
                        {% for filename in text_files %}
                        <option value="{{ filename }}">{{ filename }}</option>
                        {% endfor %}
                    </select>
                    <br><br>
                    <textarea id="file-content" name="text" rows="10" cols="50"></textarea>
                    <br><br>
                    <input type="submit" value="Save Changes">
                </form>

                <script>
                    // Fetches the file content and updates the textarea
                    function loadFileContent() {
                        var select = document.getElementById("filename-select");
                        var textarea = document.getElementById("file-content");

                        var selectedFile = select.value;
                        if (selectedFile) {
                            fetch(`/get_file_content/${selectedFile}`)
                                .then(response => response.text())
                                .then(content => {
                                    textarea.value = content;
                                });
                        } else {
                            textarea.value = "";
                        }
                    }
                </script>
            </div>

            <div class="column right">
                <h2>Random Video</h2>
                <video controls>
                    <source src="{{ video }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
        </div>
    </div>
</body>

</html><!DOCTYPE html>
<html>

<head>
    <title>Home Flask App Builder</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }
        video {
            margin: 10px, auto;
            width: 250px;
            height: auto;
        }

          .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;

        }

        .header {
            width: 100%;
            padding: 20px;
            text-align: center;
        }

        .columns {
            display: flex;
            width: 80%;
            margin-top: 20px;
        }

        .column {
            padding: 20px;
            box-sizing: border-box;
        }

        .column.left {
            width: 30%;
            border:    1px solid #000;
        }

        .column.right {
        margin: 0 auto; /* Center horizontally */
        width: 60%;
        border: 1px solid #000;
        text-align: center; /* Center video vertically */
    }

    .column.right video {
        max-width: 100%;
        height: auto;
    }
    .note{
       color:red;
       font-size:24px;
    }
    </style>
</head>
<body>
    <div class="wrapper">
        <div class="header">
            <h1>HOME index.html</h1>
<li><a class="note" href="{{ url_for('index') }}">HOME</a></li>&nbsp;&nbsp;&nbsp;&nbsp;
<li><a class="note" href="{{ url_for('edit_template_page', filename='edit_formatted.html') }}">Edit This Page</a></li>

    <form method="POST" action="/edit_formatted">
        <select id="filename-select" name="filename" onchange="loadFileContent()">
            {% for filename in text_files %}
                <option value="{{ filename }}">{{ filename }}</option>
            {% endfor %}
        </select>
        <br><br>
        <textarea id="file-content" name="text" rows="10" cols="50"></textarea>
        <br><br>
        <input type="submit" value="Save Changes">
    </form>

    <script>
        // Fetches the file content and updates the textarea
        function loadFileContent() {
            var select = document.getElementById("filename-select");
            var textarea = document.getElementById("file-content");

            var selectedFile = select.value;
            if (selectedFile) {
                fetch(`/get_formatted_content/${selectedFile}`)
                    .then(response => response.text())
                    .then(content => {
                        textarea.value = content;
                    });
            } else {
                textarea.value = "";
            }
        }
    </script>
</div>
</div>
</body>
</html>
<!-- app_utilities.html-->
<!DOCTYPE html>
<html>

<head>
    <title>Edit Images And Video</title>
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
</head>

<body>
    <div class="wrapper">
        <div class="header">
            <h1>Edit Images And Video</h1>
        </div>
        <div class="columns">
            <div class="column left">
                <h3>Links</h3><br />
                <a href="{{ url_for('mk_text') }}">Create a Text File</a><br />
                <a href="{{ url_for('format_file') }}">Format Text Files</a><br />
                <a href="{{ url_for('view_text') }}">View Text Files</a><br />
                <a href="{{ url_for('edit_file') }}">Edit File</a><br />
                <a href="{{ url_for('edit_formatted') }}">Edit Formatted Text</a><br />
                <a href="{{ url_for('edit_template') }}">Edit a Template</a><br />
                <a href="{{ url_for('edit_description') }}">Edit Description</a><br />
                <a href="{{ url_for('view_flake8') }}">View Errors in App</a><br />
                <a href="{{ url_for('view_log') }}">View App Log</a><br />
                <a href="{{ url_for('capture_html') }}">Capture Screen _ Video</a><br />
                <a href="{{ url_for('edit_css') }}">Edit Css Files</a><br />
                <a href="{{ url_for('terminal_index') }}">Terminal Emulator</a><br />
            </div>
            <div class="column right">
                <h2>Random Video</h2>
                <p>This will eventually be an instruction video on how to use this page</p><br />

                <video controls>
                    <source src="{{ video }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>

            </div>
        </div>
    </div>
</body>
</html>
<!DOCTYPE html>
<html>

<head>
    <title>Edit Javascript and Javscript Links</title>
     <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
     <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }
  
       video {
        margin: 10px, auto;
        width: 250px;
        height: auto;
      }
     </style>
</head>
    <body>
        <div class="wrapper">
        <div class="header">
            <h1>Edit Javascript and Javscript Links</h1>
       <a style="font-size: xx-large;"href="{{ url_for('index') }}">Return to HOME</a>
<p>The originals of all templates edited are saved,by date,in templates/originals/</p>
        </div>
    

<div class="columns">
<div class="column">
    <form action="/edit_template_page" method="GET">
        <select name="filename">
            {% for filename in filenames %}
                <option value="{{ filename }}">{{ filename }}</option>
            {% endfor %}
        </select>
        <button type="submit">Edit and Save</button>
    </form>
    <hr>
    {% if selected_filename %}
        <h2>Edit {{ selected_filename }}</h2>
        <form action="/edit_template_save" method="POST">
            <textarea name="edited_content" rows="10" cols="50">{{ original_content }}</textarea>
            <input type="hidden" name="filename" value="{{ selected_filename }}">
            <button type="submit">Save</button>
        </form>
    {% endif %}
 <ul>
        <li><a href="{{ url_for('index_canvas') }}">Canvas Playground</a></li>
        <li><a href="{{ url_for('large_script') }}">Alice Javascript Demo</a></li>
        <li><a href="{{ url_for('view_text') }}">View Text Files</a></li>
        <li><a href="{{ url_for('edit_formatted') }}">Edit Formatted Text</a></li>
        <li style="font-size: xx-large;"><a href="{{ url_for('edit_template') }}">Return to Edit Template</a></li>
        
    </ul> 
</div>
<div class="column">
    <h2>Random Video</h2>
    <video controls>
        <source src="{{ video }}" type="video/mp4">
        Your browser does not support the video tag.
    </video>
</div>
</div>    
</body>
</html>
<!-- Compare this snippet from templates/edit_text_save.html: -->{% extends 'base1.html' %}

{% block title %}
    Edit Product
{% endblock %}

{% block content %}
    <h1>Edit Product</h1>
    <form action="{{ url_for('edit_product', product_id=product[0]) }}" method="post">
        <label for="name">Name:</label>
        <input type="text" name="name" value="{{ product[1] }}"><br>
        <label for="description">Description:</label>
        <input type="text" name="description" value="{{ product[2] }}"><br>
        <label for="price">Price:</label>
        <input type="text" name="price" value="{{ product[3] }}"><br>
        <input type="submit" value="Update Product">
    </form>
{% endblock %}
<!DOCTYPE html>
<html>
<head>
    <title>Script Editor</title>
</head>
<body>
    <h1>Script Editor</h1>
    <form action="/save_script" method="POST">
        <textarea name="script_content" rows="10" cols="50">{{ script_content }}</textarea>
        <br>
        <input type="submit" value="Save Script">
    </form>
</body>
</html>

<!DOCTYPE html>
<html>
<head>
    <title>Edit Script</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }
        </style>
</head>
<body>
    <h1>Edit JavaScript</h1>
    <a href="{{ url_for('index') }}">Home</a><br />
    <p>Experiment With Javascript Imagery</p>
        <form method="POST" action="{{ url_for('edit_script') }}">
        <label for="script_file">Select a JavaScript file:</label>
        <select name="script_file" id="script_file">
            {% for script_file in script_files %}
                <option value="{{ script_file }}">{{ script_file }}</option>
            {% endfor %}
        </select>
        <br>
        <input type="submit" value="Load Script">
    </form>
    <hr>
    <h2>Edit the selected script:</h2>
    <form method="POST" action="{{ url_for('save_script') }}">
        <textarea name="script_content" rows="30" cols="160">{{ script_content }}</textarea>
        <br>
        <input type="submit" value="Save Script">
    </form>
</body>
</html>
<!DOCTYPE html>
<html>

<head>
    <title>Edit Template</title>
     <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/body.css') }}">

</head>
    <body>
        <div class="wrapper">
        <div class="header">
            <h1>Edit Template Files</h1>
       <a style="font-size: xx-large;"href="{{ url_for('index') }}">Return to HOME</a>
<p>The originals of all templates edited are saved,by date,in templates/originals/</p>
        </div>
    

<div class="columns">
<div class="column left">
    <form action="/edit_template_page" method="GET">
        <select name="filename">
            {% for filename in filenames %}
                <option value="{{ filename }}">{{ filename }}</option>
            {% endfor %}
        </select>
        <button type="submit">Edit and Save</button>
    </form>
    <hr>
    {% if selected_filename %}
        <h2>Edit {{ selected_filename }}</h2>
        <form action="/edit_template_save" method="POST">
            <textarea name="edited_content">{{ original_content }}</textarea>
            <input type="hidden" name="filename" value="{{ selected_filename }}">
            <button type="submit">Save</button>
        </form>
    {% endif %}
 <ul>
        
<li><a class="note" href="{{ url_for('edit_template_page', filename='edit_template.html') }}">Edit This Page</a></li>

<li><a href="{{ url_for('edit_css') }}">Edit CSS Files</a></li> 
        
    </ul> 
</div>
<div class="column right">
<p>Special Video chosen for this page.</p>
    <video controls>
        <source src="{{ video }}" type="video/mp4">
        Your browser does not support the video tag.
    </video>
</div>
</div>    
</body>
</html>
<!-- Compare this snippet from templates/edit_text_save.html: -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Template Files</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/body.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">

</head>
<body>

       <h1>Edit {{ selected_filename }}</h1>
    <form action="{{ url_for('edit_template_save') }}" method="post">
        <textarea name="edited_content">{{ original_content }}</textarea><br>
        <input type="hidden" name="filename" value="{{ selected_filename }}">
        <input type="submit" value="Save">
    </form>
    <!-- link to edit_text -->
    <ul>
        <li><a href="{{ url_for('mk_text') }}">Create a Text File</a></li>
        <li><a href="{{ url_for('format_file') }}">Format Text Files</a></li>
        <li><a href="{{ url_for('view_text') }}">View Text Files</a></li>
        <li><a href="{{ url_for('edit_formatted') }}">Edit Formatted Text</a></li>
        <li style="font-size: xx-large;"><a href="{{ url_for('edit_template') }}">Return to Edit Template</a></li>
        <li style="font-size: xx-large;"><a href="{{ url_for('index') }}">Return to HOME</a></li>
    </ul> 
</body>
</html>
<!DOCTYPE html>
<html>
<head>
    <title>Edit Text</title>
</head>
<body>
    <h1>Edit Text Files</h1>
    <form action="/edit_text_page" method="GET">
        <select name="filename">
            {% for filename in filenames %}
                <option value="{{ filename }}">{{ filename }}</option>
            {% endfor %}
        </select>
        <button type="submit">Edit and Save</button>
    </form>
    <hr>
    {% if selected_filename %}
        <h2>Edit {{ selected_filename }}</h2>
        <form action="/edit_text_save" method="POST">
            <textarea name="edited_content" rows="10" cols="50">{{ original_content }}</textarea>
            <input type="hidden" name="filename" value="{{ selected_filename }}">
            <button type="submit">Save</button>
        </form>
    {% endif %}
</body>
</html>
<!-- Compare this snippet from templates/edit_text_save.html: --><!DOCTYPE html>
<html>
<head>
    <title>Edit Text</title>
</head>
<body>
    <h1>Edit Text Files</h1>
    <form action="/edit_text_page" method="GET">
        <select name="filename">
            {% for filename in filenames %}
                <option value="{{ filename }}">{{ filename }}</option>
            {% endfor %}
        </select>
        <button type="submit">Edit and Save</button>
    </form>
    <hr>
    {% if selected_filename %}
        <h2>Edit {{ selected_filename }}</h2>
        <form action="/edit_text_save" method="POST">
            <textarea name="edited_content" rows="10" cols="50">{{ original_content }}</textarea>
            <input type="hidden" name="filename" value="{{ selected_filename }}">
            <button type="submit">Save</button>
        </form>
    {% endif %}
</body>
</html>
<!-- Compare this snippet from templates/edit_text_save.html: --><html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Text File</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
   <style>
   body {

    background-image: url('../static/assets/MemMaker_background.png');
    background-repeat: repeat-y;
    background-size: contain;
    background-position: top;
    font-family: Arial, sans-serif;
}
</style>
</head>
<body>
    <!-- link to edit_text -->
    <ul>
        <li><a href="{{ url_for('mk_text') }}">Create a Text File</a></li>
        <li><a href="{{ url_for('format_file') }}">Format Text Files</a></li>
        <li><a href="{{ url_for('view_text') }}">View Text Files</a></li>
        <li><a href="{{ url_for('edit_formatted') }}">Edit Formatted Text</a></li>
        <li style="font-size: xx-large;"><a href="{{ url_for('edit_text') }}">Return to Edit Text</a></li>
    </ul> 
       <h1>Edit {{ selected_filename }}</h1>
    <form action="{{ url_for('edit_text_save') }}" method="post">
        <textarea name="edited_content" rows="10" cols="50">{{ original_content }}</textarea><br>
        <input type="hidden" name="filename" value="{{ selected_filename }}">
        <input type="submit" value="Save">
    </form>
</body>
</html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Text File</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
   <style>
   body {

    background-image: url('../static/assets/MemMaker_background.png');
    background-repeat: repeat-y;
    background-size: contain;
    background-position: top;
    font-family: Arial, sans-serif;
}
</style>
</head>
<body>
    <!-- link to edit_text -->
    <ul>
        <li><a href="{{ url_for('mk_text') }}">Create a Text File</a></li>
        <li><a href="{{ url_for('format_file') }}">Format Text Files</a></li>
        <li><a href="{{ url_for('view_text') }}">View Text Files</a></li>
        <li><a href="{{ url_for('edit_formatted') }}">Edit Formatted Text</a></li>
        <li style="font-size: xx-large;"><a href="{{ url_for('edit_text') }}">Return to Edit Text</a></li>
    </ul> 
       <h1>Edit {{ selected_filename }}</h1>
    <form action="{{ url_for('edit_text_save') }}" method="post">
        <textarea name="edited_content" rows="10" cols="50">{{ original_content }}</textarea><br>
        <input type="hidden" name="filename" value="{{ selected_filename }}">
        <input type="submit" value="Save">
    </form>
</body>
</html>
<!DOCTYPE html>
<html>

<head>
  <title>My Flask App</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: Arial, sans-serif;
    }

    body {
      background-image: url('../static/assets/MemMaker_background.png');
      background-repeat: repeat-y;
      background-size: cover; /* Use 'cover' to make the image cover the entire body */
      background-position: top;
    }

    form {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 98vh; /* 85% of the viewport height */
    }

    textarea {
      margin-top: 20px;
      width: 95%;
      height: 100%;
      background-color: azure;
      font-size: 18px;
      border: #000000 1px solid;
      padding: 10px;
      box-sizing: border-box;
    }

    input[type="submit"] {
      margin-top: 5px;
    }
  </style>
</head>

<body>
  <form action="/save_description" method="POST">
    <textarea name="description">{{ description }}</textarea>
    <br>
    <input type="submit" value="Save"><a href="{{ url_for('index') }}">HOME</a><br />
  </form>
</body>

</html>
<!--enter_data.html Template:-->
<!DOCTYPE html>
<html>
<head>
    <title>Enter Code Snippets</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
</head>
<body>
    <h2>Data Entry</h2>
    <p>{{ formatted_datetime }}</p>
    <form method="POST">
        <textarea name="code_block" rows="10" cols="60"></textarea><br><br>
        <input type="submit" value="Submit">
    </form>

    <ul>
        <li><a href="{{ url_for('search_code') }}">Search CodeHints</a></li>
        <li><a href="{{ url_for('enter_code') }}">Make a CodeHints Entry</a></li>
    </ul>
    <a style="font-size: 24px;color: brown;" href="{{ url_for('index') }}">HOME</a>
</body>
</html><!DOCTYPE html>
<html>
<head>
  <title>Error</title>
</head>
<body>
  <h1>Error</h1>
  <p>{{ message }}</p>
</body>
</html>
<!-- index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Execute Bash Script</title>
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">

    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">

</head>
<body>
    <h1>Execute Bash Script</h1>
    <form action="/execute" method="POST">
        <textarea name="script" rows="12" cols="120"></textarea>
        <br>
        <input type="submit" value="Execute">
    </form>
<h1>Example Script: </h1>
 <p>ffmpeg -framerate 5 -i /home/jack/Desktop/StoryMaker/static/mushrom/%05d.png -c:v libx265 -r 20 -pix_fmt yuv420p -y /home/jack/Desktop/StoryMaker/static/mushrom/flask-images2.mp4</p>
 <p> mkdir -p /home/jack/Desktop/StoryMaker/static/scripts/back && cp /home/jack/Desktop/StoryMaker/static/scripts/*.* /home/jack/Desktop/StoryMaker/static/scripts/back && ls /home/jack/Desktop/StoryMaker/static/scripts/back
 </p>   
</body>
</html>

<!DOCTYPE html>
<html>

<head>
  <title>My Flask App</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <script src="{{ url_for('static', filename='js/script.js') }}"></script>
 <title>My Flask App</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <script src="{{ url_for('static', filename='js/script.js') }}"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <style>
    .resizedvideo {
      width: 200px;
      height: 200px;
    }
    .resized_video {
      width: 300px;
      height: auto;
    }

    .section {
      margin-top: 50px;
      width: 95%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
    }

    .sectionl {
      width: 35%;
      display: flex;
      flex-direction: column;
      align-items: left;
      justify-content: left;
      height: 100vh;
    }

    .sectionr {
      width: 35%;
      display: flex;
      flex-direction: column;
      align-items: right;
      justify-content: right;
      height: 100vh;
    }
  </style>
  <style>
    html {
      font-family: sans-serif;
    background-color: black;
    }
    body {
      width: 95%;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      background-color: rgb(167, 196, 189);
      color: black;
    }
    h1 {
      color: rgb(255, 255, 255);
    }
    #wrapper {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      background-color: teal;
    }
    </style>
</head>

<body>  <center>  
  <div class="container">

    <h1 style="color: brown;">Creating a speaking Avatar with A Flask App. <br />Click the videos below for
      step-by-step instructions. </p></h1>  

      <video controls class="resizedvideo">
        <source src="static/assets/result_cl.webm" type="video/mp4">
        Your browser does not support the video tag.
      </video><br />

      <a href="{{ url_for('text_mp3') }}">First:  Create the mp3</a><br />

      <video controls class="resizedvideo">
        <source src="static/assets/result_convert_mp3_wav.webm" type="video/mp4">
        Your browser does not support the video tag.
      </video><br />
      <a href="{{ url_for('convert_mp3_to_wav') }}">Second: convert_mp3_to_wav</a><br />
      <video controls class="resizedvideo">
        <source src="static/assets/result_indian.webm" type="video/mp4">
        Your browser does not support the video tag.
      </video><br />
      <a href="{{ url_for('generate_vid') }}">Third: Create a Video the same length as the wav Created</a><br />
      <video controls class="resizedvideo">
        <source src="static/assets/Water-blinking.webm" type="video/mp4">
        Your browser does not support the video tag.
      </video><br />
      <a href="{{ url_for('create_avatar') }}">Fourth and Last Step: Create Avatar</a><br />
      <br /><br />
      <video controls class="resized_video">
        <source src="static/assets/final_with_border.mp4" type="video/mp4">
      </video><br />
        <a href="{{ url_for('indexA') }}">Create a Background for your Avatar</a><br />
        The above video is an example of what will be created.<br /><br /><br />
      <form action="/search" method="GET">
        <label for="search-term">Search:</label>
        <input type="text" id="search-term" name="q">
        <button type="submit">Search</button>
      </form>
      <br />
      <h3>Debug test</h3>
      <a href="{{ url_for('upload_file') }}">Upload Image</a><br />
      <video controls class="resized_video">
      <a href="{{ url_for('choose_dir') }}">Debug Test</a><br />
    </div>
</center>
  <footer class="footer">
    <center>
      <video controls class="resized-video">
        <source src="static/assets/result_cl.webm" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      &nbsp;&nbsp;&nbsp;&nbsp;
      <img style="width: 30%; height: auto;" src="{{ url_for('static', filename='images/image2.jpg') }}"
        alt="Example image"><br />&nbsp;&nbsp;&nbsp;
    </center>
    <h2 style="color: brown;">Links to YouTube Channels</h2>
    <style>
      .resized-video {
        width: 25%;
        height: auto;
      }
    </style>

    <video controls class="resized-video">
      <source src="static/assets/Talking_AI_Images.webm" type="video/mp4">
      Your browser does not support the video tag.
    </video>
  <div class="wrapper">
    <header class="header">
      <h1 style="color: brown;">Image Processing With Flask and Executeable Functions</h1><br />
      <p>Below are links to various Image Processing Functions. </p>
    </header>

    <div class="content">
      <a href="{{ url_for('get_gallery') }}">View Images</a><br />
      <a href="{{ url_for('view_thumbs') }}">View Thumbnails</a><br />
      <a href="{{ url_for('upload_file') }}">Upload Image</a><br />
      <a href="{{ url_for('flask_info') }}">Video</a><br />
      <a href="{{ url_for('add_text') }}">Add text to chat.txt</a><br />
      <a href="{{ url_for('search_txt') }}">Search chat.txt</a><br />
      <a href="{{ url_for('blend_pil') }}">upload and blend images.</a><br />
      <a href="{{ url_for('add_border') }}">Add a border to an image.</a><br />
      <a href="{{ url_for('process_images') }}">Process Images With Mask</a><br />
      <a href="{{ url_for('text_mp3') }}">Create an mp3 from aText Entry</a><br />
    </div>
    <div class="content">
      <a href="{{ url_for('generate_video') }}">Create an mp4 from video_resources</a><br />
      <a href="{{ url_for('generate_video2') }}">Create an mp4 from Uploads</a><br />
      <a href="{{ url_for('generate_video3') }}">Choose A directory to create video</a><br />
      <a href="{{ url_for('image_directories') }}">Choose Image directories</a><br />
      <a href="{{ url_for('select_playmp3') }}">Select and play mp3 from audio_mp3/</a><br />
      <a href="{{ url_for('make_animation') }}">Create an Animated Gif (20 images @ 1 per second.)</a><br />
      <a href="{{ url_for('build_stackedvids') }}">Video Stacked on Images</a><br />
      <a href="{{ url_for('build_stackedvid') }}">Two Video Stacked</a><br />
      <a href="{{ url_for('title_page') }}">Create a title Page</a><br />
      <a href="{{ url_for('add_title') }}">Add a Title to a Video</a><br />
      <a href="{{ url_for('add_effects') }}">Add effects to a Video</a><br />
      <a href="{{ url_for('choose_dir') }}">Choose a directory</a><br />
      <a href="{{ url_for('indexA') }}">Working With Text</a><br />

      <form action="{{ url_for('clean_images_route') }}" method="POST">
        <button type="submit">Clean Images</button>
      </form>
      <form action="/search" method="GET">
        <label for="search-term">Search:</label>
        <input type="text" id="search-term" name="q">
        <button type="submit">Search</button>
    </form>
    <form method="post" action="/mk_vid" enctype="multipart/form-data">
      <label for="directory">Select a directory:</label>
      <select id="directory" name="directory" required>
          {% for directory in directories %}
              <option value="{{ directory }}">{{ directory }}</option>
          {% endfor %}
      </select>
      <br><br>
      <input type="submit" value="Process Video">
  </form>
  <h1>Text to Video Conversion</h1>
  <form method="post" action="/maketext" enctype="multipart/form-data">
      <label for="input_file">Select a text file:</label><br>
      <input type="file" id="input_file" name="input_file" required><br><br>
      <input type="submit" value="Convert to Video">
  </form>
  <a href="/format_text">Format Text</a>
    </div>
    <footer class="footer">
      <center>
        &nbsp;&nbsp;<img style="width: 30%; height: auto;"
          src="{{ url_for('static', filename='images/' + random_image_file) }}"
          alt="Example image">&nbsp;&nbsp;&nbsp;&nbsp;
        <img style="width: 30%; height: auto;" src="{{ url_for('static', filename='images/image2.jpg') }}"
          alt="Example image"><br />&nbsp;&nbsp;&nbsp;
      </center>
      <h2 style="color: brown;">Links to YouTube Channels</h2>
      <a href="https://www.youtube.com/@totallyinsaneart3345" target="_blank ">Totally Insane Art</a><br />
      <a href="https://www.youtube.com/@JackNorthrup" target="_blank ">Jack Northrup</a><br />
      <a href="https://app.prodia.com/#/" target="_blank ">prodia</a><br />
      <a href="https://app.leonardo.ai/" target="_blank ">leonardo.ai</a><br />
    </footer>
  </div>

</body>

</html><!-- index.html-->
<!DOCTYPE html>
<html>

<head>
    <title>Fade_Index</title>
    <style>
        html,body {margin: 0;padding: 1%; height: 100%;font-family: Arial, sans-serif;}

        body {background-image: url('../static/assets/MemMaker_background.png');background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }
        video {margin: 10px, auto;
            width: 250px;
            height: auto;}

          .wrapper {display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;}

        .header {width: 100%;
            padding: 20px;
            text-align: center;}

        .columns {display: flex;
            width: 80%;
            margin-top: 20px;}

        .column { padding: 20px;
            box-sizing: border-box;}

        .column.left {
            width: 60%;
            border:    1px solid #000;}

        .column.right {
        margin: 0 auto; /* Center horizontally */
        width: 30%;
        border: 1px solid #000;
        text-align: center; /* Center video vertically */}

    .column.right video {
        max-width: 100%;
        height: auto;}
    .note{color:red;font-size:24px;}   
    </style>
</head>
<body>
    <div class="wrapper">
        <div class="header">
            <h1>fade_index.html</h1>
            <a href="{{ url_for('index') }}">HOME</a><br />
<li><a class="note" href="{{ url_for('edit_template_page', filename='fade_index.html') }}">Edit This Page</a></li>

        </div>
        <div class="columns">
            <div class="column left">
    <h1>Create Video with Fade Transitions</h1>
    <form method="POST" action="{{ url_for('generate_videoz') }}">
        <label for="selected_directory">Select an image directory:</label>
        <select id="selected_directory" name="selected_directory" required>
            {% for directory in image_directories %}
                <option value="{{ directory }}">{{ directory }}</option>
            {% endfor %}
        </select>
        <input type="submit" value="Generate Video">
    </form>  <br /><br /><br />       <video width="320" height="240" controls>
        <source src="{{ url_for('static', filename=video2) }}" type="video/mp4">
        Your browser does not support the video tag.
            </div>
            <div class="column right">
                <h2>Generated Video:</h2>
                <p>With Frame</p>
       
                </video>&nbsp;&nbsp;&nbsp;&nbsp;

                <video width="320" height="240" controls>
                    <source src="{{ url_for('static', filename=video) }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
  
</body>
</html>

<!DOCTYPE html>
<html>
<head>
    <title>Feathered Images</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }
        </style>
</head>
<body>
    <h1>Select a directory:</h1>
    <a href="{{ url_for('index') }}">HOME</a><br /><br />
    <form method="post">
        <select name="directories" multiple>
            {% for directory in directories %}
                <option value="{{ directory }}">{{ directory }}</option>
            {% endfor %}
        </select>
        <button type="submit">Select Directory</button>
    </form>
    
    {% if selected_directory %}
        <h1>Select an image from '{{ selected_directory }}':</h1>
        <form method="post">
            <input type="hidden" name="selected_directory" value="{{ selected_directory }}">
            <select name="image">
                {% for image in images %}
                    <option value="{{ image }}">{{ image }}</option>
                {% endfor %}
            </select>
            <button type="submit">Feather Image</button>
        </form>
    {% endif %}
    
    {% if feathered_image_path %}
        <h2>Feathered Image:</h2>
        <img src="{{ feathered_image_path }}" alt="Feathered Image">
    {% endif %}
</body>
</html>
<!-- index.html-->
<!DOCTYPE html>
<html>

<head>
    <title>Home Flask App Builder</title>
    <title>Edit Template</title>
     <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/body.css') }}">
  
</head> 

<body>
    <div class="wrapper">
        <div class="header">
            <h1 style = color:darkgreen;" >HOME index.html</h1>
            <a class="note" href="{{ url_for('edit_template_page', filename='ffmpeg_commands.html') }}">Edit This Page</a></li><br />
        </div>
        <div class="columns">
            <div class="column left">
                <h3>Links</h3>
                
                <a href="{{ url_for('edit_template') }}">Edit Links Listed Below</a><br />
                <a href="{{ url_for('mkblend_video') }}">mkblend_video</a>

            </div>
            <div class="column right">
                <h2>Random Video</h2>
                <video controls>
                    <source src="{{ video }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
        </div>
    </div>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
    <title>Numeric Input</title>
</head>
<body>
    <h1>Enter a Number</h1>
    <form method="POST" action="/">
        <label for="number">Number:</label>
        <input type="number" id="number" name="number" min="0" step="1">
        <br>
        <input type="submit" value="Submit">
    </form>
</body>
</html>

<!DOCTYPE html>
<html>
<head>
    <title>Final Video</title>
</head>
<body><center>
    <h1>Final Video</h1>
    <a href="{{ url_for('index') }}">HOME</a><br />
    <video width="512" height="512" controls>
        <source src="{{ url_for('static', filename=video_filez) }}" type="video/mp4">
    </video>
    <br />
</center>
</body>
</html>

<!DOCTYPE html>
<html>
<head>
    <title>Final Video</title>
</head>
<body>
    <video width="512" height="512" controls>
        <source src="{{ url_for('static', filename=video_file) }}" type="video/mp4">
    </video><br />
    <span>File Location: static/alice/Final_End.mp4</span>
</body>
</html>

<!DOCTYPE html>
<html>
  <head>
    <title>Final Image</title>
<style>
.note{
color:red;
font-size:24px;
}
</style>
  </head>
  <body>
    <h1>Final Image</h1>
<a class="note" href="{{ url_for('edit_template_page', filename='final_image.html') }}">Edit This Page</a>&nbsp;&nbsp; |&nbsp;&nbsp;<a class="note" href="{{ url_for('crop') }}">Crop Images</a>&nbsp;&nbsp; |&nbsp;&nbsp;<a class="note" href="{{ url_for('crop') }}">Crop an Image</a> |&nbsp;&nbsp;<a class="note" href="{{ url_for('index') }}">Home</a>

    <p>{{ message }}</p>
    <img src="{{ url_for('static', filename='final_images/'+final_image) }}" alt="{{ final_image }}">
  </body>
</html><!DOCTYPE html>
<html>

<head>
    <title>Final Lipsync Video</title>
</head>

<body>
    <h1>Final Lipsync Video</h1>
    <video controls autoplay>
        <source src="{{ video }}" type="video/mp4">
        Your browser does not support the video tag.
    </video>


    <hr>
    <video controls>
        <source src="{{ url_for('static', filename='result_voice-0.mp4') }}" type="video/mp4">
        Your browser does not support the video tag.
    </video>
</body>

</html>



</body>

</html><html>
<head>
      <title>Fish Kiss a Javascript Game</title>
          <meta charset="utf-8">
          <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
          <script type="text/javascript" src="static/fish/jquery-3.1.0.min.js"></script>
          <script type="text/javascript" src="static/fish/fish.js"></script>
          <meta name="viewport" content="width=device-width, user-scalable=no">
          <link rel="stylesheet" type="text/css" href="static/fish/style.css">
      
</head>
<body onload="docReady()" onkeydown="" onkeyup="" tempAlert();>
  <div class="buttonBoxL">
          <div class="clickableL" style="margin-top:50px;" onclick="leftArrowPressed()"><img src="static/fish/L.png"></div>
          <div class="clickableL" style="margin-top:30px;" onclick="leftFastPressed()"><img src="static/fish/FL.png"></div>
          <div class="clickableL" style="margin-top:30px;" onclick="downArrowPressed()"><img src="static/fish/D.png"></div>
          <div class="clickableL" style="margin-top:30px;" onclick="downFastPressed()"><img src="static/fish/FD.png"></div>
  </div>
  <div id="currentnote" style="width:30px;height:19px;background-color:lightgray;border:1px solid gray;text-align:center;font-size:90%;float:left;margin-left:5px;"></div>&nbsp;&nbsp;<input type="button" id="emptyStorage" value="Reset Score" style="float:left;"/>
  <p id="left" style="position:absolute;left:80; top:20;">Location of Left Fish</p>
  <p id="right" style="position:absolute;left:80; top:40;">Location of Right Fish</p> 
  <div class="buttonBoxR">
        <div class="clickableR" style="margin-top:30px;" onclick="rightArrowPressed()"><img src="static/fish/R.png"></div>
        <div class="clickableR" style="margin-top:30px;" onclick="rightFastPressed()"><img src="static/fish/FR.png"></div>
        <div class="clickableR" style="margin-top:30px;" onclick="upArrowPressed()"><img src="static/fish/U.png"></div>
        <div class="clickableR" style="margin-top:30px;" onclick="upFastPressed()"><img src="static/fish/FU.png"></div>
  </div>
  <button onclick="myFunction()">Reload Page</button>
  <div class="frame">
    <div class="ani-screen">
          <div class='c'><img src="static/fish/bug4.png" style="width:15px;height:30px;"></div>
              <img id="myraright" class="dragme" style="position:absolute;left:99; top:247;width: 26px; height: 20px;" src="static/fish/bug3.png" alt="">
              <img id="image1" src="static/fish/perfect-fish.png" style="position:absolute;left:700; top:250;" height="310" width="350">
              <img class="d" style="position:absolute;left:99; top:247;width: 140px; height: 80px;" src="static/fish/eater.png" alt="">
          <div style ="margin-right:70%;width:35%;height:50px;">
              <div id="floater" class='b'><img src="static/fish/myraright.png" style="width:200px;height:155px;"></div>
         </div>
         <div style ="margin-left:70%;width:35%;height:50px;">
              <div class='a'><img src="static/fish/Brightjelly2.png" style="width:120px;height:200px;"></div>
        </div>
  </div>
</div>
</body>
</html><!DOCTYPE html>
<html>
<head>
    <title>Log Viewer</title>

    <style>
        pre {
            white-space: pre-wrap;
        }
    </style>


</head>
<body>
    <pre>{{ flake_content }}</pre>
</body>
</html>
<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Flask Info</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
    <style>
        body {
            background-color: #fff;
            color: #000;
            font-family: Arial, sans-serif;
            font-size: 16px;
            line-height: 1.5;
            margin: 0;
            padding: 0;
        }
    </style>
    <link rel="stylesheet" type="text/css" href="../static/css/style.css">
</head>

<body>

  <video width="640" height="480" controls>
    <source src="{{ url_for('static', filename='videos/results/result_voice.mp4') }}" type="video/mp4">
    Your browser does not support the video tag.
  </video>
    <code>
        conda deactivate
        source ./venv/bin/activate
    </code>



</body>

</html>
<!DOCTYPE html>
<html>
  <head>
    <title>Formatted Text</title>
  </head>
  <body>
    <h1>Formatted Text</h1>
    <pre>{{ formatted_text }}</pre>
  </body>
</html>
<!DOCTYPE html>
<html>
  <head>
    <title>Format Text</title>
  </head>
  <body>
    <h1>Format Text</h1>
    <form method="POST" action="/format_text" enctype="multipart/form-data">
      <input type="file" name="input_file">
      <input type="submit" value="Format">
    </form>
  </body>
</html>
<!DOCTYPE html>
<html>
<head>
</head>
<body>
    <form action="/format_file" method="post">
        <select name="filename">
            {% for file_option in file_options %}
            <option value="{{ file_option }}">{{ file_option }}</option>
            {% endfor %}
        </select>
        <input type="submit" value="Format">
    </form>
</body>
</html>
<!DOCTYPE html>
<html>

<head>
    <title>Choose Image Directory</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }
        video {
            margin: 10px, auto;
            width: 250px;
            height: auto;
        }

          .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;}
</style>

</head>
<body>
  <h1>Choose an Image Directory:</h1>
  <p style="font-size: 24px;">Select a directory to generate a gallery:</p>
  <!-- link to index -->
  <a style='font-size: 24px;color: brown;' href="{{ url_for('index') }}">HOME</a></br/></br/>
  <form action="/gallery" method="POST">
    <select name="directory">
      {% for directory in directories %}
        <option value="{{ directory }}">{{ directory }}</option>
      {% endfor %}
    </select>
    <input type="submit" value="Generate Gallery">
  </form>
</body>
</html>
    <!DOCTYPE html>
    <html>
    <head>
        <title>Generated Video Path</title>
    </head>
    <body>
        <h1>Generated Video Path</h1>
        <form method="POST" action="/generate_blank_video" enctype="multipart/form-data">
            <label for="selected_video">Select Video:</label>
            <input type="file" name="selected_video" id="selected_video">
            <br><br>
            <input type="submit" value="Generate and Overlay">
        </form>
        
        <br><br>
        {% if step2_path %}
            <p>Output Path: {{ step2_path }}</p>
            <video width="50%" controls>
                <source src="{{ step2_path }}" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        {% else %}
            <p>No video generated.</p>
        {% endif %}
    </body>
    </html>
 <!DOCTYPE html>
<html>
  <head>
    <title>Generated Video</title>
  </head>
  <body>
    <h1>Generated Video</h1>
    <a href="{{ url_for('index') }}">Home</a><br />
    <p>Video path: {{ video_path }}</p>
    <video width="512" height="768" controls>
      <source src="{{ video_url }}" type="video/mp4">
      Your browser does not support the video tag.
    </video>
  </body>
</html>
<!DOCTYPE html>
<html>
  <head>
    <title>Generated Video</title>
  </head>
  <body>
    <h1>Generated Video</h1>
    <a href="{{ url_for('index') }}">Home</a><br />
    <form action="{{ url_for('generate_video3') }}" method="POST" enctype="multipart/form-data">
      <label for="file">File:</label>
      <input type="file" id="file" name="file" webkitdirectory mozdirectory>
      <button type="submit">Generate Video</button>
    </form>
    {% if error_message %}
    <p>Error: {{ error_message }}</p>
    {% endif %}
    {% if video_url %}
    <p>Video path: {{ video_path }}</p>
    <video width="512" height="768" controls>
      <source src="{{ video_url }}" type="video/mp4">
      Your browser does not support the video tag.
    </video>
    {% endif %}
  </body>
</html>
<!DOCTYPE html>
<html>
<head>
    <title>Generate Video</title>
</head>
<body>
    <h1>Generate Video</h1>
    <a href="{{ url_for('index') }}">Home</a>
    
    <form action="/generate_video" method="POST">

  <video width="300" height="auto" controls>
            <source src="static/TEMP.mp4" type="video/mp4">
        </video>
        <audio controls>
            <source src="static/TEMP.mp3" type="audio/mpeg">
            Your browser does not support the audio element.
        </audio>
        <input type="submit" value="Generate Video">
    </form>
    
    {% if video_path %}
        <h2>Generated Video:</h2>
        <video width="640" height="480" controls>
            <source src="{{ video_path }}" type="video/mp4">
        </video>
    {% endif %}

    <h1>Run Command</h1>
<p>After all the above steps are completed you see voice 'Speaking_Video' below this line.<br />
    it is not lipsynced yet. press Run_Command to lipsyc the the video you see . <br />
    The video is located here: static/final_video.mp4</p>
    <video width="200" height="auto" controls>
        <source src="static/final_video.mp4" type="video/mp4">
    </video><br />
    <span >MakeVideo</span>
    <button onclick="runCommand()">Run_Command</button>

    <script>
        function runCommand() {
            $.ajax({
                type: "GET",
                url: "/run_command",
                success: function(response) {
                    console.log(response);
                },
                error: function(xhr, status, error) {
                    console.error(error);
                }
            });
        }
    </script>

</body>
</html>
<!DOCTYPE html>
<html>
<head>
    <title>Generate Video</title>
</head>
<body>
    <h1>Generate Video</h1>
    <form method="POST" enctype="multipart/form-data" action="/generate_vid">
        <label for="audio">Upload Audio:</label>
        <input type="file" id="audio" name="audio" accept=".wav" directory="sample_data">
        <br>
        <label for="image">Upload Image:</label>
        <input type="file" id="image" name="image" accept=".jpg,.jpeg,.png" directory="static/images/uploads">
        <br>
        <input type="submit" value="Generate">
    </form>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
    <title>Generate Video</title>
</head>
<body>
    <h1>Generate Video</h1>
    <form method="POST" enctype="multipart/form-data" action="/generate_video">
        <label for="audio">Upload Audio:</label>
        <input type="file" id="audio" name="audio">
        <br>
        <input type="submit" value="Generate">
    </form>
</body>
</html>

<!DOCTYPE html>
<html>
<head>
    <title>Generate Video</title>
</head>
<body>
    <h1>Generate Video</h1>
    <form method="POST" enctype="multipart/form-data" action="/generate_vid">
        <label for="audio">Upload Audio:</label>
        <input type="file" id="audio" name="audio" accept=".mp3" directory="static/audio_mp3">
        <br>
        <label for="image">Upload Image:</label>
        <input type="file" id="image" name="image" accept=".jpg,.jpeg,.png" directory="static/images/uploads">
        <br>
        <input type="submit" value="Generate">
    </form>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"
          integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

</head>
<body>
<div class="container">

    <div class="row">

        <div class="col-lg-12">
            <h1 class="page-header">Thumbnail Gallery</h1>
        </div>
        {{image_names}}
        <hr>
        {% for image_name in image_names %}
        <div class="col-lg-3 col-md-4 col-xs-6 thumb">
            <img class="img-responsive" src=" {{url_for('send_image', filename=image_name)}}">
            
        </div>
        {% endfor %}
    </div>
</div>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"
        integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS"
        crossorigin="anonymous"></script>

</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enter Row ID</title>
</head>
<body>
    <h1>Enter Row ID</h1>
    <form action="{{ url_for('get_rowid_form') }}" method="post">
        <label for="rowid">Row ID:</label>
        <input type="number" name="rowid" id="rowid" required>
        <br>
        <button type="submit">Edit Row</button>
    </form>
    <br>
    <a href="{{ url_for('indexdb') }}">Go back to the Index Page</a>
</body>
</html>
 <pre>
 HTML5 Canvas Cheat Sheet

This cheat sheet summarizes the complete HTML5 Canvas API for the 2D context, based on to the W3C HTML5 Canvas Spec. It also provides techniques for handling common proceedures.

    HTML5 Canvas Element
    Html5 canvas element

    <canvas id="myCanvas" width="500" height="300">

    Html5 canvas element with fallback content

    <canvas id="myCanvas" width="500" height="300">
      your browser doesn't support canvas!
    </canvas>

    2d context

    var context = canvas.getContext('2d');

    Webgl context (3d)

    var context = canvas.getContext('webgl');

    Shapes
    Draw rectangle

    context.rect(x, y, width, height);
    context.fill();
    context.stroke();

    Fill rectangle shorthand

    context.fillRect(x, y, width, height);

    Stroke rectangle shorthand

    context.strokeRect(x, y, width, height);

    Draw circle

    context.arc(x, y, radius, 0, Math.PI * 2);
    context.fill();
    context.stroke();

    Styles
    Fill

    context.fillStyle = 'red';
    context.fill();

    Stroke

    context.strokeStyle = 'red';
    context.stroke();

    Linear gradient

    var grd = context.createLinearGradient(x1, y1, x2, y2);
    grd.addColorStop(0, 'red');   
    grd.addColorStop(1, 'blue');
    context.fillStyle = grd;
    context.fill();

    Radial gradient

    var grd = context.createRadialGradient(x1, y1, radius1, x2, y2, radius2);
    grd.addColorStop(0, 'red');
    grd.addColorStop(1, 'blue');
    context.fillStyle = grd;
    context.fill();

    Pattern

    var imageObj = new Image();
    imageObj.onload = function() {
      var pattern = context.createPattern(imageObj, 'repeat');
      context.fillStyle = pattern;
      context.fill();
    };
    imageObj.src = 'path/to/my/image.jpg';

    Line Join

    context.lineJoin = 'miter|round|bevel';

    Line Cap

    context.lineCap = 'butt|round|square';

    Shadow

    context.shadowColor = 'black';
    context.shadowBlur = 20;
    context.shadowOffsetX = 10;
    context.shadowOffsetY = 10;

    Alpha (Opacity)

    context.globalAlpha = 0.5; // between 0 and 1

    Color Formats
    String

    context.fillStyle = 'red';

    Hex Long

    context.fillStyle = '#ff0000';

    Hex Short

    context.fillStyle = '#f00';

    RGB

    context.fillStyle = 'rgb(255,0,0)';

    RGBA

    context.fillStyle = 'rgba(255,0,0,1)';

    Paths
    Begin Path

    context.beginPath();

    Line

    context.lineTo(x, y);

    Arc

    context.arc(x, y, radius, startAngle, endAngle, counterClockwise);

    Quadratic curve

    context.quadraticCurveTo(cx, cy, x, y);

    Bezier curve

    context.bezierCurveTo(cx1, cy1, cx2, cy2, x, y);

    Close Path

    context.closePath();

    Images
    Draw Image with default size

    var imageObj = new Image();
    imageObj.onload = function() {
      context.drawImage(imageObj, x, y);
    };
    imageObj.src = 'path/to/my/image.jpg';

    Draw image and set size

    var imageObj = new Image();
    imageObj.onload = function() {
      context.drawImage(imageObj, x, y, width, height);
    };
    imageObj.src = 'path/to/my/image.jpg';

    Crop image

    var imageObj = new Image();
    imageObj.onload = function() {
      context.drawImage(imageObj, sx, sy, sw, sh, dx, dy, dw, dh);
    };
    imageObj.src = 'path/to/my/image.jpg';

    Text
    Fill Text

    context.font = '40px Arial';
    context.fillStyle = 'red';
    context.fillText('Hello World!', x, y);

    Stroke Text

    context.font = '40pt Arial';
    context.strokeStyle = 'red';
    context.strokeText('Hello World!', x, y);

    Bold Text

    context.font = 'bold 40px Arial';

    Italic Text

    context.font = 'italic 40px Arial';

    Text Align

    context.textAlign = 'start|end|left|center|right';

    Text Baseline

    context.textBaseline = 'top|hanging|middle|alphabetic|ideographic
    |bottom';

    Get Text Width

    var width = context.measureText('Hello world').width;

    Transforms
    Translate

    context.translate(x, y);

    Scale

    context.scale(x, y);

    Rotate

    context.rotate(radians);

    Flip Horizontally

    context.scale(-1, 1);

    Flip Vertically

    context.scale(1, -1);

    Custom Transform

    context.transform(a, b, c, d ,e, f);

    Set Transform

    context.setTransform(a, b, c, d ,e, f);

    Shear

    context.transform(1, sy, sx, 1, 0, 0);

    Reset

    context.setTransform(1, 0, 0, 1, 0, 0);

    State Stack
    Push State onto Stack

    context.save();

    Pop State off of Stack

    context.restore();

    Clipping
    Clip

    // draw path here
    context.clip();

    Image Data
    Get Image Data

    var imageData = context.getImageData(x, y, width, height);
    var data = imageData.data;

    Loop Through Image Pixels

    var imageData = context.getImageData(x, y, width, height);
    var data = imageData.data;
    var len = data.length;
    var i, red, green, blue, alpha;

    for(i = 0; i < len; i += 4) {
      red = data[i];
      green = data[i + 1];
      blue = data[i + 2];
      alpha = data[i + 3];
    }

    Loop Through Image Pixels With Coordinates

    var imageData = context.getImageData(x, y, width, height);
    var data = imageData.data;
    var x, y, red, green, blue, alpha;

    for(y = 0; y < imageHeight; y++) {
      for(x = 0; x < imageWidth; x++) {
        red = data[((imageWidth * y) + x) * 4];
        green = data[((imageWidth * y) + x) * 4 + 1];
        blue = data[((imageWidth * y) + x) * 4 + 2];
        alpha = data[((imageWidth * y) + x) * 4 + 3];
      }
    }

    Set Image Data

    context.putImageData(imageData, x, y);

    Data URLs
    Get Data URL

    var dataURL = canvas.toDataURL();

    Render Canvas with Data URL

    var imageObj = new Image();
    imageObj.onload = function() {
      context.drawImage(imageObj, 0, 0);
    };

    imageObj.src = dataURL;

    Composites
    Composite Operations

    context.globalCompositeOperation = 'source-atop|source-in|source-out|source-over|destination-atop|destination-in|destination-out|destination-over|lighter|xor|copy';

</pre>
<!DOCTYPE html>
<html><link type="text/css" rel="stylesheet" id="dark-mode-custom-link"><link type="text/css" rel="stylesheet" id="dark-mode-general-link"><style lang="en" type="text/css" id="dark-mode-custom-style"></style><style lang="en" type="text/css" id="dark-mode-native-style"></style><style lang="en" type="text/css" id="dark-mode-native-sheet"></style><head>
<meta http-equiv="content-type" content="text/html; charset=windows-1252">
    <title>HTML5 Canvas Cheat Sheet</title>
    <meta name="viewport" content="width=device-width">
    <link href="HTML5%20Canvas%20Cheat%20Sheet_files/normalize.css" rel="stylesheet" media="screen">
    <link href="HTML5%20Canvas%20Cheat%20Sheet_files/main.css" rel="stylesheet">
    
    <script src="HTML5%20Canvas%20Cheat%20Sheet_files/prompt.js"></script></head>
  <body>
    <div class="content">
   
      <h1>HTML5 Canvas Cheat Sheet</h1>
  
  <p id="intro">
  This cheat sheet summarizes the complete HTML5 Canvas API for the 2D context, based on to the <a href="http://www.w3.org/TR/2dcontext/" target="_blank">W3C HTML5 Canvas Spec</a>.  It also provides techniques for handling common proceedures.
</p>

<ul id="items" style="position: relative; height: 2380px;">
  <!---------------------- ITEM ---------------------->
  <li class="item" style="position: absolute; left: 0px; top: 0px;">
    <h2>HTML5 Canvas Element</h2>
 
<h3>Html5 canvas element</h3>
<pre class="prettyprint">&lt;canvas id="myCanvas" width="500" height="300"&gt;
</pre>

<h3>Html5 canvas element with fallback content</h3>
<pre class="prettyprint">&lt;canvas id="myCanvas" width="500" height="300"&gt;
  your browser doesn't support canvas!
&lt;/canvas&gt;
</pre>
   
<h3>2d context</h3>
<pre class="prettyprint">var context = canvas.getContext('2d');
</pre>

<h3>Webgl context (3d)</h3>
<pre class="prettyprint">var context = canvas.getContext('webgl');
</pre>

  </li>
  
  <!---------------------- SHAPES ---------------------->
  <li class="item" style="position: absolute; left: 380px; top: 0px;">
    <h2>Shapes</h2>
    
<h3>Draw rectangle</h3>
<pre class="prettyprint">context.rect(x, y, width, height);
context.fill();
context.stroke();
</pre>

<h3>Fill rectangle shorthand</h3>
<pre class="prettyprint">context.fillRect(x, y, width, height);
</pre>

<h3>Stroke rectangle shorthand</h3>
<pre class="prettyprint">context.strokeRect(x, y, width, height);
</pre>

<h3>Draw circle</h3>
<pre class="prettyprint">context.arc(x, y, radius, 0, Math.PI * 2);
context.fill();
context.stroke();
</pre>

  </li>
  
  <!---------------------- STYLES ---------------------->
  <li class="item" style="position: absolute; left: 760px; top: 0px;">
    <h2>Styles</h2>

<h3>Fill</h3>
<pre class="prettyprint">context.fillStyle = 'red';
context.fill();
</pre>
    
<h3>Stroke</h3>
<pre class="prettyprint">context.strokeStyle = 'red';
context.stroke();
</pre>

<h3>Linear gradient</h3>
<pre class="prettyprint">var grd = context.createLinearGradient(x1, y1, x2, y2);
grd.addColorStop(0, 'red');   
grd.addColorStop(1, 'blue');
context.fillStyle = grd;
context.fill();
</pre>

<h3>Radial gradient</h3>
<pre class="prettyprint">var grd = context.createRadialGradient(x1, y1, radius1, x2, y2, radius2);
grd.addColorStop(0, 'red');
grd.addColorStop(1, 'blue');
context.fillStyle = grd;
context.fill();
</pre>


<h3>Pattern</h3>
<pre class="prettyprint">var imageObj = new Image();
imageObj.onload = function() {
  var pattern = context.createPattern(imageObj, 'repeat');
  context.fillStyle = pattern;
  context.fill();
};
imageObj.src = 'path/to/my/image.jpg';
</pre>

<h3>Line Join</h3>
<pre class="prettyprint">context.lineJoin = 'miter|round|bevel';
</pre>

<h3>Line Cap</h3>
<pre class="prettyprint">context.lineCap = 'butt|round|square';
</pre>

<h3>Shadow</h3>
<pre class="prettyprint">context.shadowColor = 'black';
context.shadowBlur = 20;
context.shadowOffsetX = 10;
context.shadowOffsetY = 10;
</pre>

<h3>Alpha (Opacity)</h3>
<pre class="prettyprint">context.globalAlpha = 0.5; // between 0 and 1
</pre>
      
      
  <!---------------------- COLOR FORMATS ---------------------->
  </li><li class="item" style="position: absolute; left: 380px; top: 374px;">
    <h2>Color Formats</h2>
    
<h3>String</h3>
<pre class="prettyprint">context.fillStyle = 'red';
</pre>

<h3>Hex Long</h3>
<pre class="prettyprint">context.fillStyle = '#ff0000';
</pre>

<h3>Hex Short</h3>
<pre class="prettyprint">context.fillStyle = '#f00';
</pre>

<h3>RGB</h3>
<pre class="prettyprint">context.fillStyle = 'rgb(255,0,0)';
</pre>

<h3>RGBA</h3>
<pre class="prettyprint">context.fillStyle = 'rgba(255,0,0,1)';
</pre>

  </li>

  <!---------------------- PATHS ---------------------->
  <li class="item" style="position: absolute; left: 0px; top: 390px;">
    <h2>Paths</h2>
  
<h3>Begin Path</h3>
<pre class="prettyprint">context.beginPath();
</pre>
 
<h3>Line</h3>
<pre class="prettyprint">context.lineTo(x, y);
</pre>

<h3>Arc</h3>
<pre class="prettyprint">context.arc(x, y, radius, startAngle, endAngle, counterClockwise);
</pre>

<h3>Quadratic curve</h3>
<pre class="prettyprint">context.quadraticCurveTo(cx, cy, x, y);
</pre>
 
<h3>Bezier curve</h3>
<pre class="prettyprint">context.bezierCurveTo(cx1, cy1, cx2, cy2, x, y);
</pre>

<h3>Close Path</h3>
<pre class="prettyprint">context.closePath();
</pre>
  </li>
  
  <!---------------------- IMAGES ---------------------->
  <li class="item" style="position: absolute; left: 380px; top: 721px;">
    <h2>Images</h2>
    
<h3>Draw Image with default size</h3>
<pre class="prettyprint">var imageObj = new Image();
imageObj.onload = function() {
  context.drawImage(imageObj, x, y);
};
imageObj.src = 'path/to/my/image.jpg';
</pre>

<h3>Draw image and set size</h3>
<pre class="prettyprint">var imageObj = new Image();
imageObj.onload = function() {
  context.drawImage(imageObj, x, y, width, height);
};
imageObj.src = 'path/to/my/image.jpg';
</pre>

<h3>Crop image</h3>
<pre class="prettyprint">var imageObj = new Image();
imageObj.onload = function() {
  context.drawImage(imageObj, sx, sy, sw, sh, dx, dy, dw, dh);
};
imageObj.src = 'path/to/my/image.jpg';
</pre>

  <!---------------------- TEXT ---------------------->
  </li><li class="item" style="position: absolute; left: 0px; top: 836px;">
    <h2>Text</h2>

<h3>Fill Text</h3>
<pre class="prettyprint">context.font = '40px Arial';
context.fillStyle = 'red';
context.fillText('Hello World!', x, y);
</pre>

<h3>Stroke Text</h3>
<pre class="prettyprint">context.font = '40pt Arial';
context.strokeStyle = 'red';
context.strokeText('Hello World!', x, y);
</pre>

<h3>Bold Text</h3>
<pre class="prettyprint">context.font = 'bold 40px Arial';
</pre>

<h3>Italic Text</h3>
<pre class="prettyprint">context.font = 'italic 40px Arial';
</pre>

<h3>Text Align</h3>
<pre class="prettyprint">context.textAlign = 'start|end|left|center|right';
</pre>

<h3>Text Baseline</h3>
<pre class="prettyprint">context.textBaseline = 'top|hanging|middle|alphabetic|ideographic
|bottom';
</pre>

<h3>Get Text Width</h3>
<pre class="prettyprint">var width = context.measureText('Hello world').width;
</pre>


  <!---------------------- TRANSFORMS ---------------------->
  </li><li class="item" style="position: absolute; left: 760px; top: 1058px;">
    <h2>Transforms</h2>

<h3>Translate</h3>
<pre class="prettyprint">context.translate(x, y);
</pre>

<h3>Scale</h3>
<pre class="prettyprint">context.scale(x, y);
</pre>

<h3>Rotate</h3>
<pre class="prettyprint">context.rotate(radians);
</pre>

<h3>Flip Horizontally</h3>
<pre class="prettyprint">context.scale(-1, 1);
</pre>

<h3>Flip Vertically</h3>
<pre class="prettyprint">context.scale(1, -1);
</pre>

<h3>Custom Transform</h3>
<pre class="prettyprint">context.transform(a, b, c, d ,e, f);
</pre>

<h3>Set Transform</h3>
<pre class="prettyprint">context.setTransform(a, b, c, d ,e, f);
</pre>

<h3>Shear</h3>
<pre class="prettyprint">context.transform(1, sy, sx, 1, 0, 0);
</pre>

<h3>Reset</h3>
<pre class="prettyprint">context.setTransform(1, 0, 0, 1, 0, 0);
</pre>
  </li>
  
  <!---------------------- STATE STACK ---------------------->
  <li class="item" style="position: absolute; left: 380px; top: 1248px;">
    <h2>State Stack</h2>

<h3>Push State onto Stack</h3>
<pre class="prettyprint">context.save();
</pre>

<h3>Pop State off of Stack</h3>
<pre class="prettyprint">context.restore();
</pre>

  </li>    
 
 
   <!---------------------- CLIPPING ---------------------->
  <li class="item" style="position: absolute; left: 380px; top: 1424px;">
    <h2>Clipping</h2>

<h3>Clip</h3>
<pre class="prettyprint">// draw path here
context.clip();
</pre>

  </li> 
  
  <!---------------------- IMAGE DATA ---------------------->
  <li class="item" style="position: absolute; left: 0px; top: 1465px;">
    <h2>Image Data</h2>

<h3>Get Image Data</h3>
<pre class="prettyprint">var imageData = context.getImageData(x, y, width, height);
var data = imageData.data;
</pre>

<h3>Loop Through Image Pixels</h3>
<pre class="prettyprint">var imageData = context.getImageData(x, y, width, height);
var data = imageData.data;
var len = data.length;
var i, red, green, blue, alpha;

for(i = 0; i &lt; len; i += 4) {
  red = data[i];
  green = data[i + 1];
  blue = data[i + 2];
  alpha = data[i + 3];
}
</pre>


<h3>Loop Through Image Pixels With Coordinates</h3>
<pre class="prettyprint">var imageData = context.getImageData(x, y, width, height);
var data = imageData.data;
var x, y, red, green, blue, alpha;

for(y = 0; y &lt; imageHeight; y++) {
  for(x = 0; x &lt; imageWidth; x++) {
    red = data[((imageWidth * y) + x) * 4];
    green = data[((imageWidth * y) + x) * 4 + 1];
    blue = data[((imageWidth * y) + x) * 4 + 2];
    alpha = data[((imageWidth * y) + x) * 4 + 3];
  }
}
</pre>

<h3>Set Image Data</h3>
<pre class="prettyprint">context.putImageData(imageData, x, y);
</pre>

  </li> 
  
    <!---------------------- DATA URLS ---------------------->
  <li class="item" style="position: absolute; left: 380px; top: 1564px;">
    <h2>Data URLs</h2>

<h3>Get Data URL</h3>
<pre class="prettyprint">var dataURL = canvas.toDataURL();
</pre>

<h3>Render Canvas with Data URL</h3>
<pre class="prettyprint">var imageObj = new Image();
imageObj.onload = function() {
  context.drawImage(imageObj, 0, 0);
};

imageObj.src = dataURL;
</pre>

  </li> 
  
   <!---------------------- COMPOSITES ---------------------->
  <li class="item" style="position: absolute; left: 760px; top: 1633px;">
    <h2>Composites</h2>

<h3>Composite Operations</h3>
<pre class="prettyprint">context.globalCompositeOperation = 'source-atop|source-in|source-out|source-over|destination-atop|destination-in|destination-out|destination-over|lighter|xor|copy';
</pre>


  </li> 
  
       
  
  
</ul>  
  
      <script src="HTML5%20Canvas%20Cheat%20Sheet_files/masonry.pkgd.min.js"></script>
      <script src="HTML5%20Canvas%20Cheat%20Sheet_files/main.js"></script>
     
    </div>
  

</body></html><!-- index.html-->
<!DOCTYPE html>
<html>

<head>
    <title>html Base</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }
        video {
            margin: 10px, auto;
            width: 250px;
            height: auto;
        }

          .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;

        }

        .header {
            width: 100%;
            padding: 20px;
            text-align: center;
        }

        .columns {
            display: flex;
            width: 80%;
            margin-top: 20px;
        }

        .column {
            padding: 20px;
            box-sizing: border-box;
        }

        .column.left {
            width: 30%;
            border:    1px solid #000;
        }

        .column.right {
        margin: 0 auto; /* Center horizontally */
        width: 60%;
        border: 1px solid #000;
        text-align: center; /* Center video vertically */
    }

    .column.right video {
        max-width: 100%;
        height: auto;
    }
    .note{
       color:red;
       font-size:24px;
    }
    </style>
</head>
<body>
    <div class="wrapper">
        <div class="header">
            <h1>HTML base</h1>
        </div>
        <div class="columns">


<pre {{ preformatted_text|safe }}>
&lt;!-- index.html--&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;

&lt;head&gt;
    &lt;title&gt;Home Flask App Builder&lt;/title&gt;
    &lt;style&gt;
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }
        video {
            margin: 10px, auto;
            width: 250px;
            height: auto;
        }

          .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;

        }

        .header {
            width: 100%;
            padding: 20px;
            text-align: center;
        }

        .columns {
            display: flex;
            width: 80%;
            margin-top: 20px;
        }

        .column {
            padding: 20px;
            box-sizing: border-box;
        }

        .column.left {
            width: 30%;
            border:    1px solid #000;
        }

        .column.right {
        margin: 0 auto; /* Center horizontally */
        width: 60%;
        border: 1px solid #000;
        text-align: center; /* Center video vertically */
    }

    .column.right video {
        max-width: 100%;
        height: auto;
    }
    .note{
       color:red;
       font-size:24px;
    }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="wrapper"&gt;
        &lt;div class="header"&gt;
            &lt;h1&gt;HOME index.html&lt;/h1&gt;
        &lt;/div&gt;
        &lt;div class="columns"&gt;
            &lt;div class="column left"&gt;
                &lt;h3&gt;Create Text&lt;/h3&gt;&lt;br /&gt;
                &lt;a class="note" href="{{ url_for('edit_template_page', filename='index.html') }}"&gt;Edit This Page&lt;/a&gt;&lt;/li&gt;&lt;br /&gt;
                &lt;a href="{{ url_for('app_utilities') }}"&gt;Application Utilities&lt;/a&gt;&lt;br /&gt;
                &lt;a href="{{ url_for('image_video') }}"&gt;Image and Video Processing Links&lt;/a&gt;&lt;br /&gt;
                &lt;a href="{{ url_for('index_canvas') }}"&gt;Project Canvas&lt;/a&gt;&lt;br /&gt;&lt;br /&gt;
                &lt;a href="{{ url_for('edit_javascript') }}"&gt;Project JavaScript&lt;/a&gt;&lt;br /&gt;&lt;br /&gt;
                &lt;a href="{{ url_for('edit_template') }}"&gt;Edit Links Listed Below&lt;/a&gt;&lt;p&gt;Edit Index - Edit CSS Files - Edit Canvas
 JS - Edit Formatted Text  - Edit FlaskAppArchitect Description - Edit Formatted Text&lt;/p&gt;
                &lt;/p&gt;
                &lt;a href="{{ url_for('data_page') }}"&gt;Data Page - Snippets,Search ChatGPT,Sqlite3&lt;/a&gt;&lt;br /&gt;&lt;br /&gt;
                &lt;a href="{{ url_for('edit_file') }}"&gt;Edit File&lt;/a&gt;&lt;br /&gt;
                &lt;a href="{{ url_for('edit_formatted') }}"&gt;Edit Formatted Text&lt;/a&gt;&lt;br /&gt;
                &lt;a href="{{ url_for('edit_description') }}"&gt;Edit Description&lt;/a&gt;&lt;br /&gt;
                &lt;a href="{{ url_for('misc_links') }}"&gt;This page contains all active links(I hope)&lt;/a&gt;&lt;br /&gt;
            &lt;/div&gt;
            &lt;div class="column right"&gt;
                &lt;h2&gt;Random Video&lt;/h2&gt;
                &lt;video controls&gt;
                    &lt;source src="{{ video }}" type="video/mp4"&gt;
                    Your browser does not support the video tag.
                &lt;/video&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>

</div>
</div>
</body>
</html><form action="{{ url_for('image_directories') }}" method="POST">
    <label for="directory">Select a directory:</label>
    <select id="directory" name="directory">
        <option value="static/Prodia_640x640">static/Prodia_640x640</option>
        <option value="static/LineArt">static/LineArt</option>
        <option value="static/quantized">static/Quantized</option>
        <option value="static/squares">static/squares</option>
        <option value="static/BrightColors">static/BrightColors</option>
    </select>
    <br><br>
    <input type="submit" value="Submit">
</form>
<!-- index.html-->
<!DOCTYPE html>
<html>

<head>
    <title>Image Processing</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }
        video {
            margin: 10px, auto;
            width: 300px;
            height: auto;
        }

          .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;

        }

        .header {
            width: 100%;
            padding: 20px;
            text-align: center;
        }

        .columns {
            display: flex;
            width: 80%;
            margin-top: 20px;
        }

        .column {
            padding: 20px;
            box-sizing: border-box;
        }

        .column.left {
            width: 30%;
            border:    1px solid #000;
        }

        .column.right {
        margin: 0 auto; /* Center horizontally */
        width: 60%;
        border: 1px solid #000;
        text-align: center; /* Center video vertically */
    }

    .column.right video {
        max-width: 100%;
        height: auto;
    }
    .note{
        color:red;
        font-size:24px; 
}
    </style>
</head>
<body>
    <div class="wrapper">
        <div class="header">
            <h1>Image Processing</h1>
            <a class="note" href="{{ url_for('index') }}">HOME</a><br />
        </div>
        <div class="columns">
            <div class="column left">

                <h3>Create Text</h3><br />
                <a href="{{ url_for('app_utilities') }}">Application Utilities</a><br />
                <a href="{{ url_for('feather_files') }}">Feather Images</a><br />
                <a href="{{ url_for('crop') }}">Crop Images</a><br />
                <a href="{{ url_for('view_text') }}">View Text Files</a><br />
                <a href="{{ url_for('edit_file') }}">Edit File</a><br /><br />
                <a href="{{ url_for('edit_formatted') }}">Edit Formatted Text</a><br />
                <a href="{{ url_for('feather_files') }}">Feather Images</a><br />
                <a href="{{ url_for('edit_description') }}">Edit Description</a><br />
                <a href="{{ url_for('image_stuff') }}">Comic Book Experiment</a><br />
            </div>
            <div class="column right">
                <h2>Right Column</h2>
                <video controls>
                    <source src="{{ video }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
        </div>
    </div>
</body>
</html>
<!DOCTYPE html>
<html>

<head>
    <title>Omic Book Experiment</title>

<style>
    html,
    body {
        margin: 0;
        padding: 1%;
        height: 100%;
        font-family: Arial, sans-serif;
    }

    body {
        background-image: url('../static/assets/MemMaker_background.png');
        background-repeat: repeat-y;
        background-size: cover;
        /* Use 'cover' to make the image cover the entire body */
        background-position: top;
    }
    video {
        margin: 10px, auto;
        width: 400px;
        height: auto;
    }

      .wrapper {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 100vh;

    }

    .header {
        width: 100%;
        padding: 20px;
        text-align: center;
    }

    .columns {
        display: flex;
        width: 80%;
        margin-top: 20px;
    }

    .column {
        padding: 20px;
        box-sizing: border-box;
    }

    .column.left {
        width: 30%;
        border:    1px solid #000;
    }

    .column.right {
    margin: 0 auto; /* Center horizontally */
    width: 60%;
    border: 1px solid #000;
    text-align: center; /* Center video vertically */
}

.column.right video {
    max-width: 100%;
    height: auto;
}
 
.comic-page {
    width: 85%;
      display: flex;
      flex-direction: column;
      align-items: center;
      background-color: #f0f0f0;
      padding: 20px;
    }
    
    .panel {
      position: relative;
      border: 2px solid black;
      margin: 10px;
      padding: 10px;
      background-color: white;
    }
    
    .speech-bubble {
      position: absolute;
      background-color: yellow;
      border-radius: 10px;
      padding: 5px;
      font-weight: bold;
    }

    .speech-bubble2 {
      position: absolute;
      background-color: yellow;
      border-radius: 10px;
      padding: 5px;
      font-weight: bold;
    }
    
    .narrative-element {
      font-size: 24px;
      color: red;
      text-transform: uppercase;
    }
    .small {
      width: 200px;
      height: auto;
    }
    .medium {
      width: 250px;
      height: auto;
    }

 
        .container {
            width: 75%;
            display: flex; /* Use flexbox to align divs side by side */
        }

        .div1, .div2 {
            width: 50%; /* Each div takes up 50% of the container's width */
            padding: 20px;
            box-sizing: border-box;
            border: 1px solid #ccc;
        }
    </style>  

</head>
<body>
<div class="wrapper">
    <div class="header">
        <h1>Comic Book Experiment</h1>
    </div>




<div class="container">
    <div class="div1">
      <div class="speech-bubble">Hello there!</div>
      <img class="small" src="{{ url_for('static', filename='images/Leonardo/character2.jpg') }}" alt="Character 1">

    </div>
    <div class="div2">
        <div class="narrative-element">WQW !</div>
        <div class="speech-bubble2">Watch out!</div>

        <img class="medium" src="{{ url_for('static', filename='images/Leonardo/character1.jpg') }}" alt="Character 1">

 
      
    </div>
  </div>
  
<!DOCTYPE html>
<html>
<head>
    <title>Image Upload and Video Generation</title>
</head>
<body>
    <h1>Upload Images and Generate Video</h1>
    <form method="POST" action="{{ url_for('image_to_video') }}">
        <label for="selected_directory">Select an image directory:</label>
        <select id="selected_directory" name="selected_directory" required>
            {% for directory in image_directories %}
                <option value="{{ directory }}">{{ directory }}</option>
            {% endfor %}
        </select>
        <input type="submit" value="Generate Video">
    </form>  <br /><br /><br />       

    <video width="320" height="240" controls>
        <source src="{{ url_for('static', filename=video2) }}" type="video/mp4">
        </video>
</body>
</html>

<!-- aigeneration_links.html-->
<!DOCTYPE html>
<html>

<head>
  <title>Image and Video Generation</title>
  <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/body.css') }}"

</head>

<body>
  <div>
    <div class="header">
      <h1>Image and Video Links</h1>
<a class="note"href="{{ url_for('index') }}">HOME</a><br />

    </div>
    <div class="columns">
      <div class="column left">
        <h3>Image</h3>
<a class="note"href="{{ url_for('edit_template_page', filename='image_video.html') }}">Edit This Page</a><br />

        <a href="{{ url_for('fade_index') }}">Create YouTube "SHORT" from Image Directory</a><br />
        <a href="{{ url_for('capture_and_overlay') }}">Falkon Captures</a><br />
        <a href="{{ url_for('mk_background') }}">Create Video From Thumbnail Cache</a><br />
        <a href="{{ url_for('add_border') }}">Add a border to an image.</a><br />
        <a href="{{ url_for('comic_book') }}">Project Underway_Create a Comic Book Page.</a><br />
        <a href="{{ url_for('video_index') }}">View Archived Videos</a><br />
        <p>Archive videos are created special to store images. These videos may be coverted to a directory of images for image processing.</p>
        <a href="{{ url_for('add_files') }}">Convert video to unique images static/mp4_images</a><br />



        <h3>Video</h3><br />
        <video width="200" height="auto" controls>
          <source src="static/assets/result_voice.mp4" type="video/mp4">
          Your browser does not support the video tag.
        </video><br />
        <video width="300" height="auto" controls>
          <source src="static/assets/NearDone.mp4" type="video/mp4">
          Your browser does not support the video tag.
        </video><br /><a href="{{ url_for('large_video') }}">See Above Video Full Size</a><br /><br /><br /><br />
        <a style="font-size: 24px;margin-left: 10%;color: #29b2f1;" href="{{ url_for('indeX') }}">Link to indeX: Create
          an Avatar</a><br />
        <p>
        <h1 style="color: brown;">Creating a speaking Avatar with A Flask App. <br />Click the videos below for
          step-by-step instructions. </h1> <a href="{{ url_for('index') }}">RETURN HOME</a><br />
        </p>
        <video controls class="resizedvideo">
          <source src="static/assets/result_cl.webm" type="video/mp4">
          Your browser does not support the video tag.
        </video><br />

        <a href="{{ url_for('text_mp3') }}">First: Create the mp3</a><br />

        <video controls class="resizedvideo">
          <source src="static/assets/result_convert_mp3_wav.webm" type="video/mp4">
          Your browser does not support the video tag.
        </video><br />
        <a href="{{ url_for('convert_mp3_to_wav') }}">Second: convert_mp3_to_wav</a><br />
        <video controls class="resizedvideo">
          <source src="static/assets/result_indian.webm" type="video/mp4">
          Your browser does not support the video tag.
        </video><br />
        <a href="{{ url_for('generate_vid') }}">Third: Create a Video the same length as the wav Created</a><br />
        <video controls class="resizedvideo">
          <source src="static/assets/Water-blinking.webm" type="video/mp4">
          Your browser does not support the video tag.
        </video><br />
        <a href="{{ url_for('create_avatar') }}">Fourth and Last Step: Create Avatar</a><br />
        <br /><br />
        <a href="{{ url_for('upload_file') }}">Upload Image</a><br />

        <form action="/search" method="GET">
          <label for="search-term">Search:</label>
          <input type="text" id="search-term" name="q">
          <button type="submit">Search</button>
        </form>
        <br />

      </div>
      <div class="column right">
        <h3>Debug test</h3>
        <a href="{{ url_for('make_text') }}">Create a Text File</a><br />

        <a href="{{ url_for('choose_dir') }}">Debug Test</a><br />
        <a href="{{ url_for('mkblend_video') }}">Create a Blended Video</a><br />

        <video controls class="resized-video">
          <source src="static/assets/result_cl.webm" type="video/mp4">
          Your browser does not support the video tag.
        </video>
        <br />
        <img style="width: 30%; height: auto;" src="{{ url_for('static', filename='assets/woman2.png') }}"
          alt="Example image"><br />

        <h2 style="color: brown;">Create a VIdeo of Images - Using Minterpolate</h2>
        <style>
          .resized-video {
            width: 35%;
            height: auto;
          }
        </style>

        <video controls class="resized-video">
          <source src="static/assets/Final_End.mp4" type="video/mp4">
          Your browser does not support the video tag.
        </video><br />
        <video controls class="resized-video">
          <source src="static/assets/Final_End-0.mp4" type="video/mp4">
          Your browser does not support the video tag.
        </video>
        <br />
        <video controls class="resized-video">
          <source src="static/assets/video_in_a_video-02.mp4" type="video/mp4">
          Your browser does not support the video tag.
        </video><br />

        <form method="post" action="/videos" enctype="multipart/form-data">
          <label for="input_video">Select input video file:</label><br>
          <input type="file" id="input_video" name="input_video"><br><br>
          <input type="submit" value="Submit">

        </form>
      </div>


    </div>
  </div>
</body>

</html><!DOCTYPE html>
<html>
  <head>
    <title>My Flask App</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>

  </head>
  <body>
<div class="wrapper">
  <header class="header"><h2 style="color: brown;">Image Processing With Flask</h2></header>
  <aside class="sidebar"><h2 style="color: brown;">AI Art Processing</h2>
  <p>Below is a random image from the gallery.</p>
  <img style="width: 92%; height: auto;" src="{{ url_for('static', filename='images/' + random_image_file) }}" alt="Example image"><br />
  <img src="{{ url_for('static', filename='images/image2.jpg') }}" alt="Example image"><br /> 
    </aside>


 <article class="content">
    <h1>Links and Executeable Functions</h1>
    <p>Below are links to various Image Processing Functions. </p>
    <a href="{{ url_for('get_gallery') }}">View Images</a><br />
    <a href="{{ url_for('view_thumbs') }}">View Thumbnails</a><br />
    <a href="{{ url_for('upload_file') }}">Upload Image</a><br />
    <a href="{{ url_for('flask_info') }}">Video</a><br />
    <a href="{{ url_for('add_text') }}">Add text to chat.txt</a><br />
    <a href="{{ url_for('search') }}">Search chat.txt</a><br />
    <a href="{{ url_for('blend_pil') }}">upload and blend images.</a><br />
    <a href="{{ url_for('add_border') }}">Add a border to an image.</a><br />
    <a href="{{ url_for('process_images') }}">Process Images With Mask</a><br /> 
    <a href="{{ url_for('text_mp3') }}">Create an mp3 from aText Entry</a><br />
    <a href="{{ url_for('generate_video') }}">Create an mp4 from video_resources</a><br />
    <a href="{{ url_for('generate_video2') }}">Create an mp4 from Uploads</a><br />
    <a href="{{ url_for('image_directories') }}">Choose Image directories</a><br />
    <a href="{{ url_for('select_playmp3') }}">Select and play mp3 from audio_mp3/</a><br />
    <a href="{{ url_for('make_animation') }}">Create an Animated Gif (20 images @ 1 per second.)</a><br />
    <a href="{{ url_for('build_stackedvids') }}">Video Stacked on Images</a><br /> 
    <a href="{{ url_for('build_stackedvid') }}">Two Video Stacked</a><br /> 
    <a href="{{ url_for('title_page') }}">Create a title Page</a><br />
    <a href="{{ url_for('add_title') }}">Add a Title to a Video</a><br />
    <form action="{{ url_for('clean_images_route') }}" method="POST">
      <button type="submit">Clean Images</button>
  </form>
  </article>
  <footer class="footer">
    <h2 style="color: brown;">Links to YouTube Channels</h2>
    <a href="https://www.youtube.com/@totallyinsaneart3345" target="_blank ">Totally Insane Art</a><br />
    <a href="https://www.youtube.com/@JackNorthrup" target="_blank ">Jack Northrup</a><br />
    <a href="https://app.prodia.com/#/" target="_blank ">prodia</a><br />
    <a href="https://app.leonardo.ai/" target="_blank ">leonardo.ai</a><br />
  </footer>
</div>

  </body>
  </html>
<!DOCTYPE html>
<html lang="en">

<head>
  <title>Create Scrolling Text</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/Style.css') }}">

</head>

<body>

  <div class="header">
    <h3>Flask VideoMaker V2.1</h3>
    <p>Below is an example of 'Type' of video this application can create. First Create a text file. You can hand write
      it or use ChatGPT. Then you format the text in lines of five words per line. Next create a video of scrolling text
      That is read as the text scrolls by. Then create an Image_Video which gradually fades from one image to another. A
      image directory is required. for best results be sure all images are the same size. The last step is add the
      Image_Video to the scrolling text.'</p>
    <p>Avatar_Maker is included (Link is in the Black Band below) to create video introductions. This app is all ready
      created, but not yet connected to the Flask VideoMaker</p>
    <video width="200" height="auto" controls>
      <source src="static/assets/result_voice.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video><br />
    <video width="300" height="auto" controls>
      <source src="static/assets/NearDone.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video><br /><a href="{{ url_for('large_video') }}">See Above Video Full Size</a><br /><br /><br /><br />

  </div>

  <div class="topnav">
    <a style="font-size: 24px;margin-left: 10%;color: #29b2f1;" href="{{ url_for('indeX') }}">Link to indeX: Create an Avatar</a><br /><br />
    <a style="font-size: 24px;margin-left: 10%;color: #29b2f1;" href="{{ url_for('data_page') }}">Link to Database:</a><&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <a style="font-size: 24px;margin-left: 10%;color: #29b2f1;" href="{{ url_for('index_FLASK') }}">Extras:</a>
  </div>
  

  <div class="row">
    <div class="column">
      <h2>Create a Text File</h2>
      <center>Play Me</center>
      <video width="150" height="auto" controls>
        <source src="static/assets/This_Column.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video><br />

      <h3>Create Text</h3><br />
      <a href="{{ url_for('mk_text') }}">Create a Text File</a><br /><br />
      <a href="{{ url_for('format_file') }}">Format Text Files</a><br /><br />
      <a href="{{ url_for('view_text') }}">View Text Files</a><br /><br />
      <a href="{{ url_for('edit_file') }}">Edit File</a><br /><br />
      <a href="{{ url_for('edit_formatted') }}">Edit Formatted Text</a><br /><br />
      
      <video width="150" height="auto" controls>
        <source src="static/assets/asset_video.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video><br />
    
    
    
    
    
    </div>

    <div class="column">
      <h2>Create Scrolling Text Background</h2>
      <h3>Audio to Video Conversion</h3>
      <form action="{{ url_for('convert') }}" method="POST" enctype="multipart/form-data">
        <label for="audio_file">Audio MP3 or Wav:</label>
        <input type="file" name="audio_file" accept=".mp3,.wav" required>
        <br><br />
        <label for="formatted_text_file">Formatted Text File:</label>
        <input type="file" name="formatted_text_file" accept=".txt" required>
        <br>
        <input type="submit" value="Convert1280x720">
      </form>
      <br />
      <hr><br />
      <form action="{{ url_for('convert512') }}" method="POST" enctype="multipart/form-data">
        <label for="audio_file">Audio MP3 or Wav:</label>
        <input type="file" name="audio_file" accept=".mp3,.wav" required>
        <br><br />
        <label for="formatted_text_file">Formatted Text File:</label>
        <input type="file" name="formatted_text_file" accept=".txt" required>
        <br>
        <input type="submit" value="Convert512x1024">
      </form>
      <hr><br />
      <form method="post" action="/videos" enctype="multipart/form-data">
        <label for="input_video">Select MP4 Video for Minterpolate Transitions :</label><br>
        <input type="file" id="input_video" name="input_video"><br><br>
        <input type="submit" value="Submit">
      </form><br/>

        <video width="150" height="auto" controls>
        <source src="static/assets/Final_End_Dance.mp4" type="video/mp4">
      </video><br />
    </div>

    <div class="column">
      <h2>Create Left Side Animation</h2>
      <h3>Choose a Directory</h3>
      <form id="directoryForm" method="post" action="/mkblend_videos">
          <select name="selected_directory" id="directoryInput">
              <option value="" disabled selected>Select a directory</option>
              <option value="static/images/512x1536-woman">512x1536-woman</option>
              <option value="static/images/abstract_beauty">abstract_beauty</option>
              <option value="static/images/beautiful_girl">beautiful_girl</option>
              <option value="static/images/Beautiful_Warrior">Beautiful_Warrior</option>
          </select>
          <button type="submit">Submit</button>
      </form>
      <h3>Select Directory</h3>
      <form action="/mkblend_videos" method="post">
        <label for="directory">Choose a directory make a short mp4:</label>
        <select name="directory" id="directory">
          {% for directory in directories %}
          <option value="{{ directory }}">{{ directory }}</option>
          {% endfor %}
        </select>
        <br><br>
        <input type="submit" value="Generate Video">
      </form>
        <h2>Create Stacked Videos</h2>
      <a href="{{ url_for('build_stackedvids') }}">Create Stacked Video</a><br /><br />
      <button onclick="callFlaskFunction()">Generate Video</button>
      <h3>Result Video Minterpolate Transitions</h3>
      <video id="myVideo" width="150" height="auto" controls>
        <source src="static/assets/Final_End.mp4" type="video/mp4">
        </video>
        Your browser does not support the video tag.

    </div>
  <div>
    <a style="font-size: large;color: bisque;" href="{{ url_for('process_imagez') }}">Zooms and Zoom</a><br /><br />

  <script>
    function callFlaskFunction() {
      var xhr = new XMLHttpRequest();
      xhr.open('GET', '/resize_and_overlay_videos', true);
      xhr.responseType = 'blob';

      xhr.onload = function (e) {
        if (this.status == 200) {
          var videoBlob = this.response;
          var videoUrl = URL.createObjectURL(videoBlob);

          var videoElement = document.getElementById('myVideo');
          videoElement.src = videoUrl;
        }
      };

      xhr.send();
    }
  </script>

  <center>
  
<h3>Outline Jpeg</h3>
      <form action="/outline_j" method="post" enctype="multipart/form-data">
          <label for="file">Select Image:</label>
          <input type="file" name="file" id="file" accept="image/*">
          <input type="submit" value="Outline J">
      </form>

      <h3>Outline Png</h3>
      <form action="/outline_p" method="post" enctype="multipart/form-data">
          <label for="file">Select Image:</label>
          <input type="file" name="file" id="file" accept="image/*">
          <input type="submit" value="Outline p">
      </form>
  </center>
  </div>

</body>
</body>

</html>
<!-- index.html-->
<!DOCTYPE html>
<html>

<head>
    <title>Home Flask App Builder</title>
    <title>Edit Template</title>
     <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/body.css') }}">
  
</head> 

<body>
    <div class="wrapper">
        <div class="header">
            <h1 style = color:darkgreen;" >HOME index.html</h1>
            <a class="note" href="{{ url_for('edit_template_page', filename='index.html') }}">Edit This Page</a></li><br />
        </div>
        <div class="columns">
            <div class="column left">
                <h3>Links</h3>
                
                <a href="{{ url_for('edit_template') }}">Edit Links Listed Below</a><br />
                <a href="{{ url_for('ffmpeg_commands') }}">Various Ffmpeg Commands</a>

            </div>
            <div class="column right">
                <h2>Random Video</h2>
                <video controls>
                    <source src="{{ video }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
        </div>
    </div>
</body>
</html>
<!DOCTYPE html>
<html>

<head>
  <title>My Flask App</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <script src="{{ url_for('static', filename='js/script.js') }}"></script>
 <title>My Flask App</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <script src="{{ url_for('static', filename='js/script.js') }}"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <style>
    .resizedvideo {
      width: 200px;
      height: 200px;
    }

    .section {
      margin-top: 50px;
      width: 95%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
    }

    .sectionl {
      width: 35%;
      display: flex;
      flex-direction: column;
      align-items: left;
      justify-content: left;
      height: 100vh;
    }

    .sectionr {
      width: 35%;
      display: flex;
      flex-direction: column;
      align-items: right;
      justify-content: right;
      height: 100vh;
    }
    html {
      font-family: sans-serif;
    background-color: black;
    }
    body {
      width: 95%;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      background-color: rgb(167, 196, 189);
      color: black;
    }
    h1 {
      color: rgb(255, 255, 255);
    }
    #wrapper {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      background-color: teal;
    }
    </style>
</head>

<body>  <center>  
    <!DOCTYPE html>
    <html>
    <head>
        <title>Select Video</title>
    </head>
    <body>
        <h1>Select Video</h1>
        <a href="{{ url_for('index') }}">Main Home Index</a><br /> <br /> 
        <video controls class="resized-video">
          <source src="static/new_video/result_voice.mp4" type="video/mp4">
          Your browser does not support the video tag.
        </video>
        <br />
        This is the path to the above video:<br />
        <code>static/new_video/result_voice.mp4</code><br />
         <form action="/generate_blank_video" method="post" enctype="multipart/form-data">
            <label for="selected_video">Select Video:</label>
            <input type="file" name="selected_video" id="selected_video">
            <br><br>
            <input type="submit" value="static/new_video/result_voice.mp4">
        </form>
                 
        <a href="{{ url_for('create_text_file') }}">Create a Blank Text</a><br /> 
        <a href="{{ url_for('overlay_text') }}">Overlay Blank Text with Text</a><br /> 
        <a href="{{ url_for('add_borders') }}">Add the Overlay to a Border</a><br /> 
    </body>
    </html>
    
        <br><br>


















  <div class="container">

    <h1 style="color: brown;">Creating a speaking Avatar with A Flask App. <br />Click the videos below for
      step-by-step instructions. </p></h1>  

      <video controls class="resizedvideo">
        <source src="static/assets/result_cl.webm" type="video/mp4">
        Your browser does not support the video tag.
      </video><br />

        <a href="{{ url_for('generate_blank_video') }}">First: generate_blank_video</a><br />

</center>
  <footer class="footer">
    <center>
      <video controls class="resized-video">
        <source src="static/assets/result_cl.webm" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      &nbsp;&nbsp;&nbsp;&nbsp;
      <img style="width: 30%; height: auto;" src="{{ url_for('static', filename='images/image2.jpg') }}"
        alt="Example image"><br />&nbsp;&nbsp;&nbsp;
    </center>
    <h2 style="color: brown;">Links to YouTube Channels</h2>
    <style>
      .resized-video {
        width: 25%;
        height: auto;
      }
    </style>

    <video controls class="resized-video">
      <source src="static/assets/Talking_AI_Images.webm" type="video/mp4">
      Your browser does not support the video tag.
    </video>
  <div class="wrapper">
    <header class="header">
      <h1 style="color: brown;">Image Processing With Flask and Executeable Functions</h1><br />
      <p>Below are links to various Image Processing Functions. </p>
    </header>

    <div class="content">
      <a href="{{ url_for('generate_blank_video') }}">View Images</a><br />
      
    <h1>Random Image</h1>
    <img src="{{ url_for('static', filename='images/' + random_image_file) }}" alt="Random Image">
</body>
</html>
<!DOCTYPE html>
<html>

<head>
</head>

<body>
  <center>  
    <div class="container">
      <img style="width: 150px; height: auto;" src="{{ url_for('static', filename=random_image_file) }}">
      <br />
      <h3>TESTS</h3><br />
      <a href="{{ url_for('mk_text') }}">Create a Text File</a><br /><br />
      <a href="{{ url_for('format_file') }}">Format Text Files</a><br /><br />
      <a href="{{ url_for('view_text') }}">View Text Files</a><br /><br />
      <a href="{{ url_for('edit_file') }}">Edit File</a><br /><br />

      <h1>Video Conversion</h1>
      <form action="/convert" method="POST" enctype="multipart/form-data">
          <input type="file" name="audio_file" accept=".mp3">
          <button type="submit">Convert</button>
      </form>
      
      <form action="{{ url_for('convert') }}" method="POST" enctype="multipart/form-data">
        <input type="file" name="text_file">
        <input type="submit" value="Convert">
      </form>
    </div>
  </center>
  
  <footer class="footer">
    <center>
      This is new text
    </center>
  </footer>
</body>

</html>
<!DOCTYPE html>
<html>

<head>
  <title>My Flask App</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <script src="{{ url_for('static', filename='js/script.js') }}"></script>

</head>

<body>
  <div class="wrapper">
    <header class="header">
      <h1 style="color: brown;">Image Processing With Flask and Executeable Functions</h1><br />
      <p>Below are links to various Image Processing Functions. </p>
    </header>

    <div class="content">
      <a href="{{ url_for('get_gallery') }}">View Images</a><br />
      <a href="{{ url_for('view_thumbs') }}">View Thumbnails</a><br />
      <a href="{{ url_for('upload_file') }}">Upload Image</a><br />
      <a href="{{ url_for('flask_info') }}">Video</a><br />
      <a href="{{ url_for('add_text') }}">Add text to chat.txt</a><br />
      <a href="{{ url_for('search_txt') }}">Search chat.txt</a><br />
      <a href="{{ url_for('blend_pil') }}">upload and blend images.</a><br />
      <a href="{{ url_for('add_border') }}">Add a border to an image.</a><br />
      <a href="{{ url_for('process_images') }}">Process Images With Mask</a><br />
      <a href="{{ url_for('text_mp3') }}">Create an mp3 from aText Entry</a><br />
    </div>
    <div class="content">
      <a href="{{ url_for('generate_video') }}">Create an mp4 from video_resources</a><br />
      <a href="{{ url_for('generate_video2') }}">Create an mp4 from Uploads</a><br />
      <a href="{{ url_for('image_directories') }}">Choose Image directories</a><br />
      <a href="{{ url_for('select_playmp3') }}">Select and play mp3 from audio_mp3/</a><br />
      <a href="{{ url_for('make_animation') }}">Create an Animated Gif (20 images @ 1 per second.)</a><br />
      <a href="{{ url_for('build_stackedvids') }}">Video Stacked on Images</a><br />
      <a href="{{ url_for('build_stackedvid') }}">Two Video Stacked</a><br />
      <a href="{{ url_for('title_page') }}">Create a title Page</a><br />
      <a href="{{ url_for('add_title') }}">Add a Title to a Video</a><br />
      <a href="{{ url_for('add_effects') }}">Add effects to a Video</a><br />
      <a href="{{ url_for('choose_dir') }}">Choose a directory</a><br />

      <form action="{{ url_for('clean_images_route') }}" method="POST">
        <button type="submit">Clean Images</button>
      </form>
      <form action="/search" method="GET">
        <label for="search-term">Search:</label>
        <input type="text" id="search-term" name="q">
        <button type="submit">Search</button>
    </form>
    <form method="post" action="/mk_vid" enctype="multipart/form-data">
      <label for="directory">Select a directory:</label>
      <select id="directory" name="directory" required>
          {% for directory in directories %}
              <option value="{{ directory }}">{{ directory }}</option>
          {% endfor %}
      </select>
      <br><br>
      <input type="submit" value="Process Video">
  </form>
  <h1>Text to Video Conversion</h1>
  <form method="post" action="/maketext" enctype="multipart/form-data">
      <label for="input_file">Select a text file:</label><br>
      <input type="file" id="input_file" name="input_file" required><br><br>
      <input type="submit" value="Convert to Video">
  </form>
  <a href="/format_text">Format Text</a>
    </div>
    <footer class="footer">
      <center>
        &nbsp;&nbsp;<img style="width: 30%; height: auto;"
          src="{{ url_for('static', filename='images/' + random_image_file) }}"
          alt="Example image">&nbsp;&nbsp;&nbsp;&nbsp;
        <img style="width: 30%; height: auto;" src="{{ url_for('static', filename='images/image2.jpg') }}"
          alt="Example image"><br />&nbsp;&nbsp;&nbsp;
      </center>
      <h2 style="color: brown;">Links to YouTube Channels</h2>
      <a href="https://www.youtube.com/@totallyinsaneart3345" target="_blank ">Totally Insane Art</a><br />
      <a href="https://www.youtube.com/@JackNorthrup" target="_blank ">Jack Northrup</a><br />
      <a href="https://app.prodia.com/#/" target="_blank ">prodia</a><br />
      <a href="https://app.leonardo.ai/" target="_blank ">leonardo.ai</a><br />
    </footer>
  </div>

</body>

</html><!DOCTYPE html>
<html>
<head>
    <title>Flask App</title>
</head>
<body>
    <h1>Flask App</h1>
    <video width="512" height="auto" controls>
        <source src="{{ final_video }}" type="video/mp4">
        Your browser does not support the video tag.
    </video>
    <video width="512" height="auto" controls>
        <source src="static/videos/old_woman.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>


    <a href="{{ url_for('update_database') }}">Home</a><br />

    
</body>
</html>
<!DOCTYPE html>
<html>
<head>
    <title>Flask App</title>
</head>
<body>
    <h1>Flask App</h1>
    <video width="512" height="auto" controls>
        <source src="{{ final_video }}" type="video/mp4">
        Your browser does not support the video tag.
    </video>
    <video width="512" height="auto" controls>
        <source src="static/videos/old_woman.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>


    <a href="{{ url_for('update_database') }}">Home</a><br />

    
</body>
</html>
<!-- index.html-->
<!DOCTYPE html>
<html>

<head>
    <title>Home Canvas Project</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }
        video {
            margin: 10px, auto;
            width: 250px;
            height: auto;
        }

          .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;

        }

        .header {
            width: 100%;
            padding: 20px;
            text-align: center;
        }

        .columns {
            display: flex;
            width: 80%;
            margin-top: 20px;
        }

        .column {
            padding: 20px;
            box-sizing: border-box;
        }

        .column.left {
            width: 30%;
            border:    1px solid #000;
        }

        .column.right {
        margin: 0 auto; /* Center horizontally */
        width: 60%;
        border: 1px solid #000;
        text-align: center; /* Center video vertically */
    }

    .column.right video {
        max-width: 100%;
        height: auto;
    }
    .note{
          font-size:25px;
          color:red;
   }
    </style>
</head>
<body>
    <div class="wrapper">
        <div class="header">
            <h1>HOME index.html</h1>
            <a href ="https://www.youtube.com/playlist?list=PLpPnRKq7eNW3We9VdCfx9fprhqXHwTPXL">External YouTube Link JavaScript Tutorial</a><br />
        </div>
        <div class="columns">
            <div class="column left">
            
                <h3>Create Text</h3><br />
                <a href="{{ url_for('canvas') }}">First Canvas Project</a><br />
                <a href="{{ url_for('one_canvas') }}">One Canvas</a><br />
                <a href="{{ url_for('two_canvas') }}">Two Canvas</a><br />
                <a class="note" href="{{ url_for('edit_canvas') }}">Edit a Canvas HTMl</a><br />
                <a class="note" href="{{ url_for('edit_canvas') }}">Edit a Canvas JavaScript</a><br />
<hr>
                <a href="{{ url_for('misc_links') }}">This page contains all active links(I hope)</a><br />
            </div>
            <div class="column right">
                <h2>Random Video</h2>
                <video controls>
                    <source src="{{ video }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
        </div>
    </div>
</body>
</html>
<html>
  <body>
    <center>
      <h1>Search</h1>
      <form action="/search_database" method="POST">
        <label for="search_term">Search Term:</label>
        <input type="text" id="search_term" name="search_term"><br>

        <label for="search_area">Search Area:</label>
        <select id="search_area" name="search_area">
          <option value="description">Description</option>
          <option value="code">Code Snippet</option>
          <option value="keywords">Keywords</option>
        </select><br>

        <input type="submit" value="Search">
      </form>

      <h1>Enter Data</h1>
      <form action="/insert_data" method="POST">
        <label for="description">Description:</label>
        <textarea id="description" name="description"></textarea><br>

        <label for="code">Code Snippet:</label>
        <textarea id="code" name="code"></textarea><br>

        <label for="keywords">Keywords:</label>
        <textarea id="keywords" name="keywords"></textarea><br>

        <input type="submit" value="Submit">
      </form>
      <hr>

     <!-- Assuming you have a table displaying search results -->
<!-- Assuming you have a table displaying search results -->
<table>
    <thead>
      <tr>
        <th>ID</th>
        <th>Description</th>
        <th>Code</th>
        <th>Keywords</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <!-- Loop through the search results to generate rows -->
      {% for result in results %}
      <tr>
        <td>{{ result[0] }}</td>
        <td>{{ result[1] }}</td>
        <td>{{ result[2] }}</td>
        <td>{{ result[3] }}</td>
        <td>
          <!-- Add a link to the edit page for each row -->
          <a href="{{ url_for('edit_data', rowid=result[0]) }}">Edit</a>
        </td>
      </tr>
      {% endfor %}
    </tbody>

  </table>
  <form action="{{ url_for('edit_data_page', rowid=rowid[0]) }}" method="POST">
    <label for="row_id">Enter Row ID:</label>
    <input type="text" id="row_id" name="row_id">
    <input type="submit" value="Submit">
</form>

<form action="{{ url_for('edit_data', rowid=rowid) }}" method="POST">
    <label for="description">Description:</label>
    <textarea id="description" name="description"></textarea>
    <label for="code">Code:</label>
    <textarea id="code" name="code"></textarea>
    <label for="keywords">Keywords:</label>
    <textarea id="keywords" name="keywords"></textarea>
    <input type="submit" value="Update">
</form>

    </center>
  </body>
</html>
<!-- index.html-->
<!DOCTYPE html>
<html>

<head>
    <title>indexdb</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }
        video {
            margin: 10px, auto;
            width: 250px;
            height: auto;
        }

          .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;

        }

        .header {
            width: 100%;
            padding: 20px;
            text-align: center;
        }

        .columns {
            display: flex;
            width: 80%;
            margin-top: 20px;
        }

        .column {
            padding: 20px;
            box-sizing: border-box;
        }

        .column.left {
            width: 30%;
            border:    1px solid #000;
        }

        .column.right {
        margin: 0 auto; /* Center horizontally */
        width: 50%;
        border: 1px solid #000;
        text-align: center; /* Center video vertically */
    }

    </style>
</head>
<body>

        <div class="header">   <h1>Welcome to the indexdb</h1></div>
    <div class="columns">
<div class="column left">
 
    <p>Choose an option below:</p>
    <ul>
        <li><a href="{{ url_for('select_by_id_form') }}">Select by ID Form</a></li>
        <li><a href="{{ url_for('search_by_rowid') }}">Search by Row ID</a></li>
        <li><a href="{{ url_for('search_database') }}">Search the Database</a></li>
        <li><a href="{{ url_for('edit_data_page') }}">Edit Data</a></li>
        <li><a href="{{ url_for('insert_data') }}">Insert Data</a></li>
        <li><a href="{{ url_for('get_rowid_form') }}">Enter Row ID to Edit</a></li>
    </ul>
    <a style ="font-size: 24px;color: brown;" href="{{ url_for('index') }}">HOME</a>
</div>
<div class="column right">
                <h2>Random Video</h2>
<p>This Video will eventually be instructions on info on creation/using this page</p>
                <video controls>
                    <source src="{{ video }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div></div>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <title>{% block title %}{% endblock %}</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Link to your style.css file -->
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        {% block content %}{% endblock %}
    </div>
    <a href="{{ url_for('add_code') }}">Edit</a>
</body>
</html>
<!-- index.html-->
<!DOCTYPE html>
<html>

<head>
    <title>Home Flask App Builder</title>
    <title>Edit Template</title>
     <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/body.css') }}">
  
</head> 

<body>
    <div class="wrapper">
        <div class="header">
            <h1 style = color:darkgreen;" >HOME index.html</h1>

        </div>
        <div class="columns">
            <div class="column left">
                <h3>Links</h3>
                
                <a href="{{ url_for('mkblend_video') }}">mkblend_video</a><br />
                <a href="{{ url_for('add_effects') }}">add_effects</a>

            </div>
            <div class="column right">
                <h2>Random Video</h2>
                <video controls>
                    <source src="{{ video }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
        </div>
    </div>
</body>
</html>
<!DOCTYPE html>
<html>

<head>
  <title>My Flask App</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <script src="{{ url_for('static', filename='js/script.js') }}"></script>
 <title>My Flask App</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
  <script src="{{ url_for('static', filename='js/script.js') }}"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <style>
    .resizedvideo {
      width: 200px;
      height: 200px;
    }
    .resized_video {
      width: 300px;
      height: auto;
    }

    .section {
      margin-top: 50px;
      width: 95%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
    }

    .sectionl {
      width: 35%;
      display: flex;
      flex-direction: column;
      align-items: left;
      justify-content: left;
      height: 100vh;
    }

    .sectionr {
      width: 35%;
      display: flex;
      flex-direction: column;
      align-items: right;
      justify-content: right;
      height: 100vh;
    }
  </style>
  <style>
    html {
      font-family: sans-serif;
    background-color: black;
    }
    body {
      width: 95%;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      background-color: rgb(167, 196, 189);
      color: black;
    }
    h1 {
      color: rgb(255, 255, 255);
    }
    #wrapper {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      background-color: teal;
    }
    </style>
</head>

<body>  <center>  
    <div class="wrapper">
    <header class="header">
      <h1 style="color: brown;">Image Processing With Flask and Executeable Functions</h1><br />
      <p>Below are links to various Image Processing Functions. </p>
    </header>

    <div class="content">
      <a href="{{ url_for('get_gallery') }}">View Images</a><br />
      <a href="{{ url_for('view_thumbs') }}">View Thumbnails</a><br />
      <a href="{{ url_for('upload_file') }}">Upload Image</a><br />
      <a href="{{ url_for('flask_info') }}">Video</a><br />
      <a href="{{ url_for('add_text') }}">Add text to chat.txt</a><br />
      <a href="{{ url_for('search_txt') }}">Search chat.txt</a><br />
      <a href="{{ url_for('blend_pil') }}">upload and blend images.</a><br />
      <a href="{{ url_for('add_border') }}">Add a border to an image.</a><br />
      <a href="{{ url_for('process_images') }}">Process Images With Mask</a><br />
      <a href="{{ url_for('text_mp3') }}">Create an mp3 from aText Entry</a><br />
      <a style="color: brown;" href="{{ url_for('view_log') }}">View Log/app.log</a><br />
      <a style="color: brown;" href="{{ url_for('self_check') }}">flake8 check and view Log/flake.info</a><br />
    </div>
    <div class="content">
      <a href="{{ url_for('generate_video') }}">Create an mp4 from video_resources</a><br />
      <a href="{{ url_for('generate_video2') }}">Create an mp4 from Uploads</a><br />
      <a href="{{ url_for('generate_video3') }}">Choose A directory to create video</a><br />
      <a href="{{ url_for('image_directories') }}">Choose Image directories</a><br />
      <a href="{{ url_for('select_playmp3') }}">Select and play mp3 from audio_mp3/</a><br />
      <a href="{{ url_for('make_animation') }}">Create an Animated Gif (20 images @ 1 per second.)</a><br />
      <a href="{{ url_for('build_stackedvids') }}">Video Stacked on Images</a><br />
      <a href="{{ url_for('build_stackedvid') }}">Two Video Stacked</a><br />
      <a href="{{ url_for('title_page') }}">Create a title Page</a><br />
      <a href="{{ url_for('add_title') }}">Add a Title to a Video</a><br />
      <a href="{{ url_for('add_effects') }}">Add effects to a Video</a><br />
      <a href="{{ url_for('choose_dir') }}">Choose a directory</a><br />
      <a href="{{ url_for('indexA') }}">Working With Text</a><br />

      <form action="{{ url_for('clean_images_route') }}" method="POST">
        <button type="submit">Clean Images</button>
      </form>
      <form action="/search" method="GET">
        <label for="search-term">Search:</label>
        <input type="text" id="search-term" name="q">
        <button type="submit">Search</button>
    </form>
    <form method="post" action="/mk_vid" enctype="multipart/form-data">
      <label for="directory">Select a directory:</label>
      <select id="directory" name="directory" required>
          {% for directory in directories %}
              <option value="{{ directory }}">{{ directory }}</option>
          {% endfor %}
      </select>
      <br><br>
      <input type="submit" value="Process Video">
  </form>
  <h1>Text to Video Conversion</h1>
  <form method="post" action="/maketext" enctype="multipart/form-data">
      <label for="input_file">Select a text file:</label><br>
      <input type="file" id="input_file" name="input_file" required><br><br>
      <input type="submit" value="Convert to Video">
  </form>
  <a href="/format_text">Format Text</a>
    </div>
    <footer class="footer">

      <h2 style="color: brown;">Links to YouTube Channels</h2>
      <a href="https://www.youtube.com/@totallyinsaneart3345" target="_blank ">Totally Insane Art</a><br />
      <a href="https://www.youtube.com/@JackNorthrup" target="_blank ">Jack Northrup</a><br />
      <a href="https://app.prodia.com/#/" target="_blank ">prodia</a><br />
      <a href="https://app.leonardo.ai/" target="_blank ">leonardo.ai</a><br />
    </footer>
  </div>

</body>

</html><!DOCTYPE html>
<html>

<head>
  <title>My Flask App</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <script src="{{ url_for('static', filename='js/script.js') }}"></script>
 <title>My Flask App</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <script src="{{ url_for('static', filename='js/script.js') }}"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <style>
    .resizedvideo {
      width: 200px;
      height: 200px;
    }
    .resized_video {
      width: 300px;
      height: auto;
    }

    .section {
      margin-top: 50px;
      width: 95%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
    }

    .sectionl {
      width: 35%;
      display: flex;
      flex-direction: column;
      align-items: left;
      justify-content: left;
      height: 100vh;
    }

    .sectionr {
      width: 35%;
      display: flex;
      flex-direction: column;
      align-items: right;
      justify-content: right;
      height: 100vh;
    }
  </style>
  <style>
    html {
      font-family: sans-serif;
    background-color: black;
    }
    body {
      width: 95%;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      background-color: rgb(167, 196, 189);
      color: black;
    }
    h1 {
      color: rgb(255, 255, 255);
    }
    #wrapper {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      background-color: teal;
    }
    </style>
</head>

<body>  <center>  
    <div class="wrapper">
    <header class="header">
      <h1 style="color: brown;">Image Processing With Flask and Executeable Functions</h1><br />
      <p>Below are links to many various Image Processing Functions. </p>
    </header>

    <div class="content">
      <a href="{{ url_for('get_gallery') }}">View Images</a><br />
      <a href="{{ url_for('view_thumbs') }}">View Thumbnails</a><br />
      <a href="{{ url_for('upload_file') }}">Upload Image</a><br />
      <a href="{{ url_for('flask_info') }}">Video</a><br />
      <a href="{{ url_for('add_text') }}">Add text to chat.txt</a><br />
      <a href="{{ url_for('search_txt') }}">Search chat.txt</a><br />
      <a href="{{ url_for('blend_pil') }}">upload and blend images.</a><br />
      <a href="{{ url_for('add_border') }}">Add a border to an image.</a><br />
      <a href="{{ url_for('process_images') }}">Process Images With Mask</a><br />
      <a href="{{ url_for('text_mp3') }}">Create an mp3 from aText Entry</a><br />
      <a style="color: brown;" href="{{ url_for('view_log') }}">View Log/app.log</a><br />
<hr>
    </div>
    <div class="content">
      <a href="{{ url_for('generate_video') }}">Create an mp4 from video_resources</a><br />
      <a href="{{ url_for('generate_video2') }}">Create an mp4 from Uploads</a><br />
      <a href="{{ url_for('generate_video3') }}">Choose A directory to create video</a><br />
      <a href="{{ url_for('image_directories') }}">Choose Image directories</a><br />
      <a href="{{ url_for('select_playmp3') }}">Select and play mp3 from audio_mp3/</a><br />
      <a href="{{ url_for('make_animation') }}">Create an Animated Gif (20 images @ 1 per second.)</a><br />
      <a href="{{ url_for('build_stackedvids') }}">Video Stacked on Images</a><br />
      <a href="{{ url_for('build_stackedvid') }}">Two Video Stacked</a><br />
      <a href="{{ url_for('title_page') }}">Create a title Page</a><br />
      <a href="{{ url_for('add_title') }}">Add a Title to a Video</a><br />
      <a href="{{ url_for('add_effects') }}">Add effects to a Video</a><br />
      <a href="{{ url_for('choose_dir') }}">Choose a directory</a><br />
      <a href="{{ url_for('indexA') }}">Working With Text</a><br />

      <form action="{{ url_for('clean_images_route') }}" method="POST">
        <button type="submit">Clean Images</button>
      </form>
      <form action="/search" method="GET">
        <label for="search-term">Search:</label>
        <input type="text" id="search-term" name="q">
        <button type="submit">Search</button>
    </form>
    <form method="post" action="/mk_vid" enctype="multipart/form-data">
      <label for="directory">Select a directory:</label>
      <select id="directory" name="directory" required>
          {% for directory in directories %}
              <option value="{{ directory }}">{{ directory }}</option>
          {% endfor %}
      </select>
      <br><br>
      <input type="submit" value="Process Video">
  </form>
  <h1>Text to Video Conversion</h1>
  <form method="post" action="/maketext" enctype="multipart/form-data">
      <label for="input_file">Select a text file:</label><br>
      <input type="file" id="input_file" name="input_file" required><br><br>
      <input type="submit" value="Convert to Video">
  </form>
  <a href="/format_text">Format Text</a>
    </div>
    <footer class="footer">

      <h2 style="color: brown;">Links to YouTube Channels</h2>
      <a href="https://www.youtube.com/@totallyinsaneart3345" target="_blank ">Totally Insane Art</a><br />
      <a href="https://www.youtube.com/@JackNorthrup" target="_blank ">Jack Northrup</a><br />
      <a href="https://app.prodia.com/#/" target="_blank ">prodia</a><br />
      <a href="https://app.leonardo.ai/" target="_blank ">leonardo.ai</a><br />
    </footer>
  </div>

</body>

</html><!-- index.html-->
<!DOCTYPE html>
<html>

<head>
    <title>Home Flask App Builder</title>
    <style>
        html,body{
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
            /* Image is centered vertically and horizontally at all times */
            background-position: center center;
            /* Image doesn't repeat */
            background-repeat: no-repeat;
            font-family: Arial, sans-serif;
            /* Makes the image fixed in the viewport so that it doesn't move when
            the content height is greater than the image height */
            background-attachment: fixed;
        }
        font-family: Arial, sans-serif;
        video {
            margin: 10px, auto;
            width: 250px;
            height: auto;
        }

          .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;

        }

        .header {
            width: 100%;
            padding: 10px;
            text-align: center;
        }

        .columns {
            display: flex;
            width: 95%;
            margin-top: 10px;
        }

        .column {
            padding: 5px;
            margin-left: 10px;
            margin-right: 10px;
            box-sizing: border-box;
        }

        .column.left {
            width: 50%;
            border:    1px solid #000;
        }

        .column.right {
        margin: 0 auto; /* Center horizontally */
        width: 50%;
        border: 1px solid #000;
        text-align: center; /* Center video vertically */
    }

    .column.right video {
        max-width: 100%;
        height: auto;
    }
    .note{
       color:darkgreen;
       font-size:26px;
    }
    p{
       padding-top: -20px;
    }
    </style>
</head>
<body>
    <div class="wrapper">
        <div class="header">
            <h1 style = color:darkgreen;" >HOME index.html</h1>
            <a class="note" href="{{ url_for('edit_template_page', filename='index.html') }}">Edit This Page</a></li><br />
        </div>
        <div class="columns">
            <div class="column left">
                <h3>Links</h3>
                
                <a href="{{ url_for('app_utilities') }}">Application Utilities</a><br />
                <a href="{{ url_for('image_video') }}">Image and Video Processing Links</a><br />
                <a href="{{ url_for('view_gallery.gallery_index') }}">View Gallery for Image Directories</a><br />
                <a href="{{ url_for('create_comic.create_comic_index') }}">Create Comic Border</a><br />
                <a href="{{ url_for('index_canvas') }}">Project Canvas</a><br /><br />
                <a href="{{ url_for('edit_javascript') }}">Project JavaScript</a><br /><br />
                <a href="{{ url_for('edit_template') }}">Edit Links Listed Below</a>
                <p>Edit Index - Edit CSS Files - Edit Canvas JS - Edit Formatted Text - Edit FlaskAppArchitect Description - Edit Formatted Text</p>
                
                <a href="{{ url_for('data_page') }}">Data Page - Snippets,Search ChatGPT,Sqlite3</a><br /><br />
                <a href="{{ url_for('edit_file') }}">Edit File</a><br />
                <a href="{{ url_for('edit_formatted') }}">Edit Formatted Text</a><br />
                <a href="{{ url_for('edit_description') }}">Edit Description</a><br />
                <a href="{{ url_for('misc_links') }}">This page contains all active links(I hope)</a><br />
            </div>
            <div class="column right">
                <h2>Random Video</h2>
                <video controls>
                    <source src="{{ video }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
        </div>
    </div>
</body>
</html>
<!DOCTYPE html>
<html>

<head>
  <title>My Flask App</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <script src="{{ url_for('static', filename='js/script.js') }}"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <style>
    .resizedvideo {
      width: 200px;
      height: 200px;
    }

    .section {
      margin-top: 50px;
      width: 95%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
    }

    .sectionl {
      width: 35%;
      display: flex;
      flex-direction: column;
      align-items: left;
      justify-content: left;
      height: 100vh;
    }

    .sectionr {
      width: 35%;
      display: flex;
      flex-direction: column;
      align-items: right;
      justify-content: right;
      height: 100vh;
    }
  </style>
  <style>
    html {
      font-family: sans-serif;
    background-color: black;
    }
    body {
      width: 95%;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      background-color: rgb(167, 196, 189);
      color: black;
    }
    h1 {
      color: rgb(255, 255, 255);
    }
    #wrapper {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      background-color: teal;
    }
    </style>
</head>

<body>
  <center>  
  <div class="container">
<p>
    <h1 style="color: brown;">Creating a speaking Avatar with A Flask App. <br />Click the videos below for
      step-by-step instructions. </h1>  <a href="{{ url_for('index') }}">RETURN HOME</a><br />
    </p>
      <video controls class="resizedvideo">
        <source src="static/assets/result_cl.webm" type="video/mp4">
        Your browser does not support the video tag.
      </video><br />

      <a href="{{ url_for('text_mp3') }}">First:  Create the mp3</a><br />

      <video controls class="resizedvideo">
        <source src="static/assets/result_convert_mp3_wav.webm" type="video/mp4">
        Your browser does not support the video tag.
      </video><br />
      <a href="{{ url_for('convert_mp3_to_wav') }}">Second: convert_mp3_to_wav</a><br />
      <video controls class="resizedvideo">
        <source src="static/assets/result_indian.webm" type="video/mp4">
        Your browser does not support the video tag.
      </video><br />
      <a href="{{ url_for('generate_vid') }}">Third: Create a Video the same length as the wav Created</a><br />
      <video controls class="resizedvideo">
        <source src="static/assets/Water-blinking.webm" type="video/mp4">
        Your browser does not support the video tag.
      </video><br />
      <a href="{{ url_for('create_avatar') }}">Fourth and Last Step: Create Avatar</a><br />
      <br /><br />
      <a href="{{ url_for('upload_file') }}">Upload Image</a><br />

      <form action="/search" method="GET">
        <label for="search-term">Search:</label>
        <input type="text" id="search-term" name="q">
        <button type="submit">Search</button>
      </form>
      <br />
      <h3>Debug test</h3>
      <a href="{{ url_for('make_text') }}">Create a Text File</a><br />
      
      <a href="{{ url_for('choose_dir') }}">Debug Test</a><br />
      <a href="{{ url_for('mkblend_video') }}">Create a Blended Video</a><br />
    </div>
</center>
  <footer class="footer">
    <center>
      <video controls class="resized-video">
        <source src="static/assets/result_cl.webm" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      &nbsp;&nbsp;&nbsp;&nbsp;
      <img style="width: 30%; height: auto;" src="{{ url_for('static', filename='images/image2.jpg') }}"
        alt="Example image"><br />&nbsp;&nbsp;&nbsp;
    </center>
    <h2 style="color: brown;">Create a VIdeo of Images - Using Minterpolate</h2>
    <style>
      .resized-video {
        width: 25%;
        height: auto;
      }
    </style>
<center>
    <video controls class="resized-video">
      <source src="static/assets/Final_End.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video>&nbsp;&nbsp;&nbsp;&nbsp;
    <video controls class="resized-video">
      <source src="static/assets/Final_End-0.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video>
    &nbsp;&nbsp;&nbsp;&nbsp;
    <video controls class="resized-video">
      <source src="static/assets/video_in_a_video-02.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video>

    <form method="post" action="/videos" enctype="multipart/form-data">
      <label for="input_video">Select input video file:</label><br>
      <input type="file" id="input_video" name="input_video"><br><br>
      <input type="submit" value="Submit">
    </center>
    </form>
    <br /><br />
    <hr>
    <a href="{{ url_for('mk_background') }}">Creat Video From Thumbnail Cache</a><br />
    TEST
    <a href="{{ url_for('add_border') }}">Add a border to an image.</a><br />
    <a href="https://www.youtube.com/@totallyinsaneart3345" target="_blank ">Totally Insane Art</a><br />
    <a href="https://www.youtube.com/@JackNorthrup" target="_blank ">Jack Northrup</a><br />
    <a href="https://app.prodia.com/#/" target="_blank ">prodia</a><br />
    <a href="https://app.leonardo.ai/" target="_blank ">leonardo.ai</a><br />
  </footer>
  </div>

</body>

</html><!-- index.html-->
<!DOCTYPE html>
<html>

<head>
    <title>My Flask App</title>
    <style>
        html,
        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
            /* Image is centered vertically and horizontally at all times */
            background-position: center center;
            /* Image doesn't repeat */
            background-repeat: no-repeat;
            font-family: Arial, sans-serif;
            /* Makes the image fixed in the viewport so that it doesn't move when 
            the content height is greater than the image height */
            background-attachment: fixed;
            }
    </style>
</head>

<body>
    <h1>Choose a Directory</h1>
    <form method="post">
        <select name="selected_directory">
            {% for directory in directory_list %}
            <option value="{{ directory }}">{{ directory }}</option>
            {% endfor %}
        </select>
        <input type="submit" value="Get Image List">
    </form>

    {% if video %}
    <h2>Generated Video:</h2>
    <video controls>
        <source src="{{ video }}" type="video/mp4">
        Your browser does not support the video tag.
    </video>
    {% endif %}

</body>

</html><!DOCTYPE html>
<html>
<head>
    <title>Capture Tube</title>
</head>
<body>
    <h1>Capture Video Tube</h1>
    <a href="/capture_overlay_verify">Start Capture Regular</a><br />
    <a href="/capture_overlay_short">Start Capture Short</a>
    <h1>Welcome to Your Flask App</h1>
    <p>Create a text image</p>
    <a href="{{ url_for('create_text') }}">Create Text Image</a>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Insert Data</title>
</head>
<body>
    <h1>Insert Data</h1>
    <form action="{{ url_for('insert_data') }}" method="post">
        <label for="description">Description:</label>
        <input type="text" name="description" id="description" required>
        <br>
        <label for="code">Code:</label>
        <textarea name="code" id="code" rows="8" cols="50" required></textarea>
        <br>
        <label for="keywords">Keywords:</label>
        <input type="text" name="keywords" id="keywords" required>
        <br>
        <button type="submit">Insert Data</button>
    </form>
    <br>
    <a href="{{ url_for('indexdb') }}">Go back to the Index Page</a>
</body>
</html>
<!-- index.html-->
<!DOCTYPE html>
<html>

<head>
    <title>Home Flask App Builder</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }
        video {
            margin: 10px, auto;
            width: 250px;
            height: auto;
        }

          .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;

        }

        .header {
            width: 100%;
            padding: 20px;
            text-align: center;
        }

        .columns {
            display: flex;
            width: 80%;
            margin-top: 20px;
        }

        .column {
            padding: 20px;
            box-sizing: border-box;
        }

        .column.left {
            width: 30%;
            border:    1px solid #000;
        }

        .column.right {
        margin: 0 auto; /* Center horizontally */
        width: 60%;
        border: 1px solid #000;
        text-align: center; /* Center video vertically */
    }

    .column.right video {
        max-width: 100%;
        height: auto;
    }
    </style>
</head>
<body>
    <div class="wrapper">
        <div class="header">
            <h1>HOME index.html</h1>
        </div>
        <div class="columns">
            <div class="column left">
                <h3>Create Text</h3><br />
                <a href="{{ url_for('large_script') }}">JavaScript Alice Demo</a><br />
                <a href="{{ url_for('image_video') }}">Image and Video Processing Links</a><br />
                <a href="{{ url_for('index_canvas') }}">Project Canvas</a><br /><br />
                <a href="{{ url_for('edit_script') }}">Project JavaScript</a><br /><br />
                <a href="{{ url_for('edit_template') }}">Edit Template HTML Files</a><br /><br />
                <a href="{{ url_for('edit_file') }}">Edit File</a><br />
                <a href="{{ url_for('edit_formatted') }}">Edit Formatted Text</a><br />
                <a href="{{ url_for('edit_description') }}">Edit Description</a><br />
                <a href="{{ url_for('misc_links') }}">This page contains all active links(I hope)</a><br />
            </div>
            <div class="column right">
                <h2>Random Video</h2>
                <video controls>
                    <source src="{{ video }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
        </div>
    </div>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
	<title>Generate Video 2</title>
	<style>
		.video {
			display: inline-block;
			margin: 20px;
		}
		.thumbnail {
			width: 320px;
			height: 180px;
			background-size: cover;
		}
	</style>
</head>
<body>
	<h1>Generate Video 2</h1>
	
	{% if video_path %}
		<h2>Generated Video</h2>
		<video width="640" height="360" controls>
			<source src="{{ video_url }}" type="video/mp4">
			Your browser does not support the video tag.
		</video>
	{% endif %}
	
	{% if selected_videos %}
		<h2>Selected Videos</h2>
		{% for video in selected_videos %}
			<div class="video">
				<a href="{{ url_for('generate_video2') }}?remove_video={{ video }}">
					<button>Remove</button>
				</a>
				<div class="thumbnail" style="background-image: url({{ url_for('static', filename='thumbnails/' + video + '.jpg') }})"></div>
				<p>{{ video }}</p>
			</div>
		{% endfor %}
	{% endif %}
	
	<h2>Available Videos</h2>
	{% for video in available_videos %}
		<div class="video">
			<a href="{{ url_for('generate_video2') }}?add_video={{ video }}">
				<button>Add</button>
			</a>
			<div class="thumbnail" style="background-image: url({{ url_for('static', filename='thumbnails/' + video + '.jpg') }})"></div>
			<p>{{ video }}</p>
		</div>
	{% endfor %}
</body>
</html>
<!-- index.html-->
<!DOCTYPE html>
<html>

<head>
    <title>Home Flask App Builder</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }

            canvas {border: 1px solid #999999}
        </style>
        <script src="{{ url_for('static', filename='canvas/codespace_api_canvas.js') }}"></script>
        <script src="{{ url_for('static', filename='canvas/kaleidoscope1_canvas.js') }}"></script>
        <title>Kaleidoscope</title>
    </head>
    <body onload="init()">
        <div style="min-width: 400px; display: inline-block"></div>
        <canvas id="kCanvas" width="600" height="600"></canvas>
        <canvas style="visibility: hidden;" id="dCanvas" width="400" height="400"></canvas>
    </body>
</html>
<!DOCTYPE HTML ><html><head>
<!-- Code from https://www.pepperoni.blog/canvas-kaleidoscope/ -->
<!-- Modified by Juan A. Villalpando - http://kio4.com/appinventor/169X_javascript_caleidoscopio.htm -->

<!-- DELETE ZOOM -->
<!-- <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"> -->
</head>
<body>
<img  src= "" id="base"  style="display:none">
<img  src= "" id="baseR" style="display:none">
<canvas width="1024" height="1024" id="c"></canvas>

<script type="text/javascript">
    var base64 =  window.AppInventor.getWebViewString(); // Entrada de datos.

	 document.getElementById('base').setAttribute('src', base64);
	 document.getElementById('baseR').setAttribute('src', base64);
</script>

<script type="text/javascript">
window.addEventListener("load", function(){
    var c = document.getElementById("c");
    var baseImg = document.getElementById("base");
    var baseRImg = document.getElementById("baseR");
    var ctx = c.getContext("2d");
    var pat = ctx.createPattern(baseImg, "repeat");
    var patR = ctx.createPattern(baseRImg, "repeat");
    var patDim = 150; //pattern is 150x150 square.
    var SqrtOf3_4 = Math.sqrt(3)/2;
    //height of triangle side given side length of 150 is:
    var height =  SqrtOf3_4 * patDim;
var offset = 0;
ctx.translate(-0.5*patDim, 0);
var fn = function(alternateMode){
    offset = (offset - 1) % 1024
    var i = 0;


    //draw kaleidoscope first row.
    ctx.save();
    ctx.fillStyle=pat;
    ctx.translate(0, offset);
    while(i <= 3){
      ctx.beginPath();
      ctx.moveTo(0,-offset);
      ctx.lineTo(patDim, -offset);
      ctx.lineTo(0.5*patDim, height-offset);
      ctx.closePath();
      ctx.fill();
      if(i%3==0){
        ctx.translate(patDim,-offset);
        ctx.rotate(-120*Math.PI/180);
        ctx.translate(-patDim,offset);
      }
      else if(i%3==1){
        if(alternateMode){
          ctx.rotate(120*Math.PI/180);
          ctx.translate(-3*patDim, 0);
          ctx.rotate(-120*Math.PI/180);
        }
        ctx.translate(0.5*patDim, height-offset);
        ctx.rotate(-120*Math.PI/180);
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>

<head>
  <title>Directions are on The Bottom of the Page</title>
  <style type="text/css">
    body {
      background: url("http://madhatterstamps.com/backg.jpg") fixed center no-repeat;
    }
  </style>
  <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
  <meta http-equiv="content-script-type" content="text/javascript">
  <meta http-equiv="content-style-type" content="text/css">
  <meta http-equiv="content-language" content="en">
  <meta http-equiv="pragma" content="no-cache">
  <meta name="robots" content="INDEX,FOLLOW">
  <meta name="description"
    content="supplier of rubber stamps, mad hatter, Alice in wonderland, arts and crafts, scrapbooks, ATC suplies,">
  <meta name="keywords"
    content="collage, rubber stamps, mad hatter, Alice in wonderland, arts and crafts, collage kits, scrapbooks, tea party, coloring book, fun, stamp like mad ">
  <meta name="Copyright" content="Mad Hatter Dot Com">
  <meta name="Language" content="en-us">
  <meta name="Publisher" content="Mad Hatter Dot Com">
  <meta name="Distribution" content="global">
  <meta name="Rating" content="general">
  <meta name="author" content="webmaster@madhatterstamps.com">
  <meta name="revisit-after" content="30 days">
  <style>
    <!--
    .dragme {
      position: relative;
    }
    -->
  </style>
  <script language="JavaScript1.2">
  
    
    var ie = document.all;
    var nn6 = document.getElementById && !document.all;

    var isdrag = false;
    var x, y;
    var dobj;

    function movemouse(e) {
      if (isdrag) {
        dobj.style.left = nn6 ? tx + e.clientX - x : tx + event.clientX - x;
        dobj.style.top = nn6 ? ty + e.clientY - y : ty + event.clientY - y;
        return false;
      }
    }

    function selectmouse(e) {
      var fobj = nn6 ? e.target : event.srcElement;
      var topelement = nn6 ? "HTML" : "BODY";

      while (fobj.tagName != topelement && fobj.className != "dragme") {
        fobj = nn6 ? fobj.parentNode : fobj.parentElement;
      }

      if (fobj.className == "dragme") {
        isdrag = true;
        dobj = fobj;
        tx = parseInt(dobj.style.left + 0);
        ty = parseInt(dobj.style.top + 0);
        x = nn6 ? e.clientX : event.clientX;
        y = nn6 ? e.clientY : event.clientY;
        document.onmousemove = movemouse;
        return false;
      }
    }

    document.onmousedown = selectmouse;
    document.onmouseup = new Function("isdrag=false");

    //-->
  </script>
</head>

<body
  style="background-image: url('static/images/make/scene_back.jpg'); color: rgb(204, 204, 204); background-color: rgb(153, 255, 153);"
  vlink="#551a8b" alink="#ee0000" link="#0000ee">
  <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">
    <tbody>
      <tr>
        <td colspan="2" rowspan="1" style="vertical-align: top;">
          <p> </p>


          <img class="dragme" src="static/images/make/Image2.gif">
          <img class="dragme" style="width: 59px; height: 104px;" src="static/images/make/flower2.gif"><img
            class="dragme" style="width: 74px; height: 74px;" src="static/images/make/rat.gif">
          <img class="dragme" style="width: 77px; height: 138px;" src="static/images/make/Tag.gif"><br>
          <br>
          <img class="dragme" src="static/images/make/naughty.gif"><br>
          <img class="dragme" style="width: 329px; height: 84px;" src="static/images/make/back7.gif">
          <img class="dragme" style="width: 42px; height: 75px;" src="static/images/make/flower2.gif">
          <img class="dragme" style="width: 40px; height: 71px;" src="static/images/make/flower2.gif">
          <img class="dragme" style="width: 40px; height: 71px;" src="static/images/make/flower2.gif">
          <img class="dragme" style="width: 99px; height: 89px;" src="static/images/make/butter1.gif">
          <img class="dragme" style="width: 37px; height: 66px;" src="static/images/make/flower2.gif"><br>
          <img class="dragme" src="static/images/make/back6.gif">
          <img class="dragme" style="width: 37px; height: 66px;" src="static/images/make/flower2.gif">
          <img class="dragme" style="width: 59px; height: 104px;" src="static/images/make/flower2.gif">
          <img class="dragme" style="width: 68px; height: 120px;" src="static/images/make/flower1.gif"><br>
          <img class="dragme" style="width: 79px; height: 64px;" src="static/images/make/butter2.gif">
          <img class="dragme" style="width: 229px; height: 67px;" src="static/images/make/grass.gif">
          <img class="dragme" style="width: 250px; height: 78px;" src="static/images/make/grass.gif">
          <img class="dragme" style="width: 81px; height: 120px;" src="static/images/make/treesmall.gif"> <br>
          <br>
          <br>
          <img class="dragme" style="width: 37px; height: 66px;" src="static/images/make/flower2.gif"><img
            class="dragme" style="width: 37px; height: 66px;" src="static/images/make/flower2.gif">
          <img class="dragme" style="width: 69px; height: 56px;" src="static/images/make/butter2.gif">
          <img class="dragme" style="width: 99px; height: 89px;" src="static/images/make/butter1.gif">
          <img class="dragme" style="width: 101px; height: 81px;" src="static/images/make/butter2.gif">
          <img class="dragme" style="width: 54px; height: 96px;" src="static/images/make/flower2.gif">
          <img class="dragme" style="width: 176px; height: 179px;" src="static/images/make/ul.png">
          <img class="dragme" src="ur.gif"><img class="dragme" style="width: 130px; height: 175px;"
            src="static/images/make/rabbit3.gif"><br>
          <img class="dragme" style="width: 63px; height: 56px;" src="static/images/make/butter1.gif">
          <img class="dragme" style="width: 68px; height: 88px;" src="static/images/make/flower1.gif">
          <img class="dragme" style="width: 42px; height: 75px;" src="static/images/make/flower1.gif">
          <img class="dragme" style="width: 31px; height: 55px;" src="static/images/make/flower2.gif">
          <img class="dragme" style="width: 32px; height: 57px;" src="static/images/make/flower1.gif">
          <img class="dragme" style="width: 71px; height: 102px;" src="static/images/make/flower1.gif">
          <img class="dragme" style="width: 76px; height: 134px;" src="static/images/make/flower2.gif">
          <img class="dragme" style="width: 123px; height: 150px;" src="static/images/make/treesmall.gif">
          <img class="dragme" style="width: 78px; height: 96px;" src="static/images/make/treesmall.gif">
          <img class="dragme" style="width: 76px; height: 134px;" src="static/images/make/flower2.gif"><br>
          &nbsp;<img class="dragme" style="width: 213px; height: 241px;" src="static/images/make/shapes2.gif">
          <img class="dragme" src="static/images/make/lr.gif">
          <img class="dragme" src="static/images/make/ll.gif">
        </td>
        <td style="vertical-align: top;">
          <img class="dragme" style="width: 314px; height: 425px;" src="static/images/make/treesmall.gif"><br>
          <br>
          <br>
          <br>
          <br>
          <img class="dragme" style="width: 221px; height: 267px;" src="static/images/make/Aliceflamingo.gif"><br>
          <br>
          <img class="dragme" style="width: 174px; height: 213px;" src="static/images/make/treesmall.gif">
        </td>
      </tr>
    </tbody>
  </table>
  <br>
  <div style="text-align: center;"><big><big><big><br style="color: rgb(204, 0, 0); font-weight: bold;">
        </big><span style="color: rgb(0, 0, 0); font-weight: bold;">All Items
          except for the background may be dragged and dropped<br>
          Items you do not wish to use, may be dragged from the top of the image <br>
          and pulled off the screen on to bottom <br>
          If you scroll down to far just scroll back up to original position<br>
          and all items will be in place.<br>
        </span></big></big><span style="color: rgb(128, 191, 255);"><big style="color: rgb(255, 0, 0);"><span
          style="font-weight: bold;">With
          Microsoft Explore you may use
          full page viewing . . </span></big></span><br style="font-weight: bold;">
    <span style="color: rgb(128, 191, 255);"><big style="color: rgb(255, 0, 0);"><span style="font-weight: bold;">Create
          your picture</span></big></span><br style="font-weight: bold;">
    <span style="color: rgb(128, 191, 255);"><big style="color: rgb(255, 0, 0);"><span style="font-weight: bold;">Press
          Print Screen </span></big></span><br style="font-weight: bold;">
    <span style="color: rgb(128, 191, 255);"><big style="color: rgb(255, 0, 0);"><span style="font-weight: bold;">Paste
          in Paint Shop </span></big></span><br style="font-weight: bold;">
    <span style="color: rgb(128, 191, 255);"><big style="color: rgb(255, 0, 0);"><span style="font-weight: bold;">name
          and save . . </span></big></span><br>
    <span style="color: rgb(128, 191, 255);"><big style="color: rgb(255, 0, 0);"><span style="font-weight: bold;">May be
          used as a windows Background<br>
          <br>

  </div>
</body>

</html><!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>

<head>
  <title>Directions are on The Bottom of the Page</title>
  <style type="text/css">
    body {
      background: url("http://madhatterstamps.com/backg.jpg") fixed center no-repeat;
    }
  </style>
  <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
  <meta http-equiv="content-script-type" content="text/javascript">
  <meta http-equiv="content-style-type" content="text/css">
  <meta http-equiv="content-language" content="en">
  <meta http-equiv="pragma" content="no-cache">
  <meta name="robots" content="INDEX,FOLLOW">
  <meta name="description"
    content="supplier of rubber stamps, mad hatter, Alice in wonderland, arts and crafts, scrapbooks, ATC suplies,">
  <meta name="keywords"
    content="collage, rubber stamps, mad hatter, Alice in wonderland, arts and crafts, collage kits, scrapbooks, tea party, coloring book, fun, stamp like mad ">
  <meta name="Copyright" content="Mad Hatter Dot Com">
  <meta name="Language" content="en-us">
  <meta name="Publisher" content="Mad Hatter Dot Com">
  <meta name="Distribution" content="global">
  <meta name="Rating" content="general">
  <meta name="author" content="webmaster@madhatterstamps.com">
  <meta name="revisit-after" content="30 days">
  <style>
    <!--
    .dragme {
      position: relative;
    }
    -->
  </style>
  <script language="JavaScript1.2">
  
    
    var ie = document.all;
    var nn6 = document.getElementById && !document.all;

    var isdrag = false;
    var x, y;
    var dobj;

    function movemouse(e) {
      if (isdrag) {
        dobj.style.left = nn6 ? tx + e.clientX - x : tx + event.clientX - x;
        dobj.style.top = nn6 ? ty + e.clientY - y : ty + event.clientY - y;
        return false;
      }
    }

    function selectmouse(e) {
      var fobj = nn6 ? e.target : event.srcElement;
      var topelement = nn6 ? "HTML" : "BODY";

      while (fobj.tagName != topelement && fobj.className != "dragme") {
        fobj = nn6 ? fobj.parentNode : fobj.parentElement;
      }

      if (fobj.className == "dragme") {
        isdrag = true;
        dobj = fobj;
        tx = parseInt(dobj.style.left + 0);
        ty = parseInt(dobj.style.top + 0);
        x = nn6 ? e.clientX : event.clientX;
        y = nn6 ? e.clientY : event.clientY;
        document.onmousemove = movemouse;
        return false;
      }
    }

    document.onmousedown = selectmouse;
    document.onmouseup = new Function("isdrag=false");

    //-->
  </script>
</head>

<body
  style="background-image: url('static/images/make/scene_back.jpg'); color: rgb(204, 204, 204); background-color: rgb(153, 255, 153);"
  vlink="#551a8b" alink="#ee0000" link="#0000ee">
  <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">
    <tbody>
      <tr>
        <td colspan="2" rowspan="1" style="vertical-align: top;">
          <p> </p>


          <img class="dragme" src="static/images/make/Image2.gif">
          <img class="dragme" style="width: 59px; height: 104px;" src="static/images/make/flower2.gif"><img
            class="dragme" style="width: 74px; height: 74px;" src="static/images/make/rat.gif">
          <img class="dragme" style="width: 77px; height: 138px;" src="static/images/make/Tag.gif"><br>
          <br>
          <img class="dragme" src="static/images/make/naughty.gif"><br>
          <img class="dragme" style="width: 329px; height: 84px;" src="static/images/make/back7.gif">
          <img class="dragme" style="width: 42px; height: 75px;" src="static/images/make/flower2.gif">
          <img class="dragme" style="width: 40px; height: 71px;" src="static/images/make/flower2.gif">
          <img class="dragme" style="width: 40px; height: 71px;" src="static/images/make/flower2.gif">
          <img class="dragme" style="width: 99px; height: 89px;" src="static/images/make/butter1.gif">
          <img class="dragme" style="width: 37px; height: 66px;" src="static/images/make/flower2.gif"><br>
          <img class="dragme" src="static/images/make/back6.gif">
          <img class="dragme" style="width: 37px; height: 66px;" src="static/images/make/flower2.gif">
          <img class="dragme" style="width: 59px; height: 104px;" src="static/images/make/flower2.gif">
          <img class="dragme" style="width: 68px; height: 120px;" src="static/images/make/flower1.gif"><br>
          <img class="dragme" style="width: 79px; height: 64px;" src="static/images/make/butter2.gif">
          <img class="dragme" style="width: 229px; height: 67px;" src="static/images/make/grass.gif">
          <img class="dragme" style="width: 250px; height: 78px;" src="static/images/make/grass.gif">
          <img class="dragme" style="width: 81px; height: 120px;" src="static/images/make/treesmall.gif"> <br>
          <br>
          <br>
          <img class="dragme" style="width: 37px; height: 66px;" src="static/images/make/flower2.gif"><img
            class="dragme" style="width: 37px; height: 66px;" src="static/images/make/flower2.gif">
          <img class="dragme" style="width: 69px; height: 56px;" src="static/images/make/butter2.gif">
          <img class="dragme" style="width: 99px; height: 89px;" src="static/images/make/butter1.gif">
          <img class="dragme" style="width: 101px; height: 81px;" src="static/images/make/butter2.gif">
          <img class="dragme" style="width: 54px; height: 96px;" src="static/images/make/flower2.gif">
          <img class="dragme" style="width: 176px; height: 179px;" src="static/images/make/ul.png">
          <img class="dragme" src="ur.gif"><img class="dragme" style="width: 130px; height: 175px;"
            src="static/images/make/rabbit3.gif"><br>
          <img class="dragme" style="width: 63px; height: 56px;" src="static/images/make/butter1.gif">
          <img class="dragme" style="width: 68px; height: 88px;" src="static/images/make/flower1.gif">
          <img class="dragme" style="width: 42px; height: 75px;" src="static/images/make/flower1.gif">
          <img class="dragme" style="width: 31px; height: 55px;" src="static/images/make/flower2.gif">
          <img class="dragme" style="width: 32px; height: 57px;" src="static/images/make/flower1.gif">
          <img class="dragme" style="width: 71px; height: 102px;" src="static/images/make/flower1.gif">
          <img class="dragme" style="width: 76px; height: 134px;" src="static/images/make/flower2.gif">
          <img class="dragme" style="width: 123px; height: 150px;" src="static/images/make/treesmall.gif">
          <img class="dragme" style="width: 78px; height: 96px;" src="static/images/make/treesmall.gif">
          <img class="dragme" style="width: 76px; height: 134px;" src="static/images/make/flower2.gif"><br>
          &nbsp;<img class="dragme" style="width: 213px; height: 241px;" src="static/images/make/shapes2.gif">
          <img class="dragme" src="static/images/make/lr.gif">
          <img class="dragme" src="static/images/make/ll.gif">
        </td>
        <td style="vertical-align: top;">
          <img class="dragme" style="width: 314px; height: 425px;" src="static/images/make/treesmall.gif"><br>
          <br>
          <br>
          <br>
          <br>
          <img class="dragme" style="width: 221px; height: 267px;" src="static/images/make/Aliceflamingo.gif"><br>
          <br>
          <img class="dragme" style="width: 174px; height: 213px;" src="static/images/make/treesmall.gif">
        </td>
      </tr>
    </tbody>
  </table>
  <br>
  <div style="text-align: center;"><big><big><big><br style="color: rgb(204, 0, 0); font-weight: bold;">
        </big><span style="color: rgb(0, 0, 0); font-weight: bold;">All Items
          except for the background may be dragged and dropped<br>
          Items you do not wish to use, may be dragged from the top of the image <br>
          and pulled off the screen on to bottom <br>
          If you scroll down to far just scroll back up to original position<br>
          and all items will be in place.<br>
        </span></big></big><span style="color: rgb(128, 191, 255);"><big style="color: rgb(255, 0, 0);"><span
          style="font-weight: bold;">With
          Microsoft Explore you may use
          full page viewing . . </span></big></span><br style="font-weight: bold;">
    <span style="color: rgb(128, 191, 255);"><big style="color: rgb(255, 0, 0);"><span style="font-weight: bold;">Create
          your picture</span></big></span><br style="font-weight: bold;">
    <span style="color: rgb(128, 191, 255);"><big style="color: rgb(255, 0, 0);"><span style="font-weight: bold;">Press
          Print Screen </span></big></span><br style="font-weight: bold;">
    <span style="color: rgb(128, 191, 255);"><big style="color: rgb(255, 0, 0);"><span style="font-weight: bold;">Paste
          in Paint Shop </span></big></span><br style="font-weight: bold;">
    <span style="color: rgb(128, 191, 255);"><big style="color: rgb(255, 0, 0);"><span style="font-weight: bold;">name
          and save . . </span></big></span><br>
    <span style="color: rgb(128, 191, 255);"><big style="color: rgb(255, 0, 0);"><span style="font-weight: bold;">May be
          used as a windows Background<br>
          <br>

  </div>
</body>

</html><!DOCTYPE html>
<html>
<head>
    <title>Large Video Page</title>
</head>
<body>
    <h1>Large Video Page</h1>
    <a style="color: brown;font-size: large;" href="{{ url_for('index') }}">HOME</a><br />
    <video controls>
        <source src="{{ url_for('static', filename='assets/NearDone.mp4') }}" type="video/mp4">
        Your browser does not support the video tag.
    </video>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
    <title>List of Routes</title>
</head>
<body>
    <h1>List of Routes</h1>
    <ul>
        {% for function in functions %}
        <li>{{ function }}</li>
        {% endfor %}
    </ul>
</body>
</html><!DOCTYPE html>
<html>
<head>
    <title>Log Viewer</title>

    <style>
        pre {
            white-space: pre-wrap;
        }
    </style>


</head>
<body>
    <pre>{{ log_content }}</pre>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
	<title>Animated GIF</title>
</head>
<body>
	<img src="{{ gif_filename }}" alt="Animated GIF">
</body>
</html><!-- index.html-->
<!DOCTYPE html>
<html>

<head>
    <title>Misc_Links</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }

        video {
            margin: 10px, auto;
            width: 250px;
            height: auto;
        }

        .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;

        }

        .header {
            width: 100%;
            padding: 20px;
            text-align: center;
        }

        .columns {
            display: flex;
            width: 80%;
            margin-top: 20px;
        }

        .column {
            padding: 20px;
            margin: 2px,2px,2px,2px;
            box-sizing: border-box;
        }

        .column.left {
            width: 40%;
            
            border: 1px solid #000;
        }

        .column.right {
            width: 40%;
              border: 1px solid #000;
            text-align: center;

        }

        .column.right video {
            max-width: 100%;
            height: auto;
        }
    </style>
</head>

<body>
    <div class="wrapper">
        <div class="header">
            <h1>Misc_Links</h1>
        </div>
        <div class="columns">
            <div class="column left">
                <a href="/capture_overlay_verify">Start Capture Regular</a><br />
                <a href="/capture_overlay_short">Start Capture Short</a>
                <a href="{{ url_for('create_text') }}">Create Text Image</a>
                    <a href="{{ url_for('select_by_id_form') }}">Select by ID Form</a><br />
                    <a href="{{ url_for('search_by_rowid') }}">Search by Row ID</a><br />
                    <a href="{{ url_for('search_database') }}">Search the Database</a><br />
                    <a href="{{ url_for('edit_data_page') }}">Edit Data</a><br />
                    <a href="{{ url_for('insert_data') }}">Insert Data</a><br />
                    <a href="{{ url_for('get_rowid_form') }}">Enter Row ID to Edit</a><br />

                <a href="{{ url_for('get_gallery') }}">View Images</a><br />
                <a href="{{ url_for('view_thumbs') }}">View Thumbnails</a><br />
                <a href="{{ url_for('upload_file') }}">Upload Image</a><br />
                <a href="{{ url_for('flask_info') }}">Video</a><br />
                <a href="{{ url_for('add_text') }}">Add text to chat.txt</a><br />
                <a href="{{ url_for('search_txt') }}">Search chat.txt</a><br />
                <a href="{{ url_for('blend_pil') }}">upload and blend images.</a><br />
                <a href="{{ url_for('add_border') }}">Add a border to an image.</a><br />
                <a href="{{ url_for('process_images') }}">Process Images With Mask</a><br />
                <a href="{{ url_for('text_mp3') }}">Create an mp3 from aText Entry</a><br />
                <a href="{{ url_for('view_log') }}">View Log/app.log</a><br />
                <a href="{{ url_for('index') }}">Home (index)</a><br />
                <a href="{{ url_for('format_file') }}">Format Text Files</a><br />
                <a href="{{ url_for('view_text') }}">view_text Text Files</a><br />
                <a href="{{ url_for('generate_video') }}">Create an mp4 from video_resources</a><br />
                <a href="{{ url_for('generate_video2') }}">Create an mp4 from Uploads</a><br />
                <a href="{{ url_for('generate_video3') }}">Choose A directory to create video</a><br />
                <a href="{{ url_for('image_directories') }}">Choose Image directories</a><br />
                <a href="{{ url_for('select_playmp3') }}">Select and play mp3 from audio_mp3/</a><br />
                <a href="{{ url_for('make_animation') }}">Create an Animated Gif (20 images @ 1 per second.)</a><br />
                <a href="{{ url_for('build_stackedvids') }}">Video Stacked on Images</a><br />
                <a href="{{ url_for('build_stackedvid') }}">Two Video Stacked</a><br />
                <a href="{{ url_for('title_page') }}">Create a title Page</a><br />
                <a href="{{ url_for('add_title') }}">Add a Title to a Video</a><br />
                <a href="{{ url_for('add_effects') }}">Add effects to a Video</a><br />
                <a href="{{ url_for('choose_dir') }}">Choose a directory</a><br />
                <a href="{{ url_for('indexA') }}">Working With Text</a><br />
                <a href="{{ url_for('app_utilities') }}">Application Utilities</a><br />
                <a href="{{ url_for('image_processing') }}">Image Processing Links</a><br />
                <a href="{{ url_for('format_file') }}">Format Text Files</a><br />
                <a href="{{ url_for('view_text') }}">View Text Files</a><br />
                <a href="{{ url_for('edit_file') }}">Edit File</a><br />
                <a href="{{ url_for('edit_formatted') }}">Edit Formatted Text</a><br />
                <a href="{{ url_for('app_utilities') }}">Application Utilities</a><br />
                <a href="{{ url_for('image_processing') }}">Image Processing Links</a><br />
                <a href="{{ url_for('format_file') }}">Format Text Files</a><br />
                <a href="{{ url_for('view_text') }}">View Text Files</a><br />
                <a href="{{ url_for('edit_file') }}">Edit File</a><br />
                <a href="{{ url_for('edit_formatted') }}">Edit Formatted Text</a><br />
                <a href="{{ url_for('index') }}">Home (index)</a><br />
                <a href="{{ url_for('format_file') }}">Format Text Files</a><br />
                <a href="{{ url_for('view_text') }}">view_text Text Files</a><br />
                <a href="{{ url_for('image_stuff') }}">Comic Book Experiment</a><br />
                <a href="{{ url_for('edit_description') }}">Edit Description</a><br /><br>
                <a href="{{ url_for('edit_description') }}">Edit Description</a><br />
            </div>
            <div class="column right">
                <a href="{{ url_for('mk_text') }}">Create a Text File</a><br />
                <a href="{{ url_for('format_file') }}">Format Text Files</a><br />
                <a href="{{ url_for('view_text') }}">View Text Files</a><br />
                <a href="{{ url_for('edit_file') }}">Edit File</a><br />
                <a href="{{ url_for('edit_formatted') }}">Edit Formatted Text</a><br />
                <a href="{{ url_for('mk_background') }}">Creat Video From Thumbnail Cache</a><br />
                <a href="{{ url_for('add_border') }}">Add a border to an image.</a><br />
                <a href="{{ url_for('get_gallery') }}">View Images</a><br />
                <a href="{{ url_for('view_thumbs') }}">View Thumbnails</a><br />
                <a href="{{ url_for('upload_file') }}">Upload Image</a><br />
                <a href="{{ url_for('flask_info') }}">Video</a><br />
                <a href="{{ url_for('add_text') }}">Add text to chat.txt</a><br />
                <a href="{{ url_for('search') }}">Search chat.txt</a><br />
                <a href="{{ url_for('blend_pil') }}">upload and blend images.</a><br />
                <a href="{{ url_for('add_border') }}">Add a border to an image.</a><br />
                <a href="{{ url_for('process_images') }}">Process Images With Mask</a><br />
                <a href="{{ url_for('text_mp3') }}">Create an mp3 from aText Entry</a><br />
                <a href="{{ url_for('generate_video') }}">Create an mp4 from video_resources</a><br />
                <a href="{{ url_for('generate_video2') }}">Create an mp4 from Uploads</a><br />
                <a href="{{ url_for('image_directories') }}">Choose Image directories</a><br />
                <a href="{{ url_for('select_playmp3') }}">Select and play mp3 from audio_mp3/</a><br />
                <a href="{{ url_for('make_animation') }}">Create an Animated Gif (20 images @ 1 per second.)</a><br />
                <a href="{{ url_for('build_stackedvids') }}">Video Stacked on Images</a><br />
                <a href="{{ url_for('build_stackedvid') }}">Two Video Stacked</a><br />
                <a href="{{ url_for('title_page') }}">Create a title Page</a><br />
                <a href="{{ url_for('add_title') }}">Add a Title to a Video</a><br />
                    <form action="{{ url_for('clean_images_route') }}" method="POST">
                        <button type="submit">Clean Images</button>
                    </form>
                    <form action="/search" method="GET">
                        <label for="search-term">Search:</label>
                        <input type="text" id="search-term" name="q">
                        <button type="submit">Search</button>
                    </form>

                    <a href="https://www.youtube.com/@totallyinsaneart3345" target="_blank ">Totally Insane
                        Art</a><br />
                    <a href="https://www.youtube.com/@JackNorthrup" target="_blank ">Jack Northrup</a><br />
                    </video>
            </div>
        </div>
    </div>
</body>

</html><!DOCTYPE html>
<html>
<head>
  <title>Blend Images</title>
</head>
<body>
  <h1>Blend Images</h1>

  <video width="480" height="auto" controls>
    <source src="{{ video }}" type="video/mp4">
    Your browser does not support the video tag.
  </video><br /><br /><br />
  <video width="480" height="auto" controls>
    <source src="static/animate/TEMP5.mp4" type="video/mp4">
    Your browser does not support the video tag.
  </video><br />
  <video width="480" height="auto" controls>
    <source src="static/animate/TEMP5.webm" type="video/webp">
    Your browser does not support the video tag.
  </video><br />
  
</html><!DOCTYPE html>
<html>
<head>
  <title>Blend Images</title>
</head>
<body>
  <h1>Blend Images</h1>

  <video width="480" height="auto" controls>
    <source src="{{ video }}" type="video/mp4">
    Your browser does not support the video tag.
  </video><br /><br /><br />
  <video width="480" height="auto" controls>
    <source src="static/animate/TEMP5.mp4" type="video/mp4">
    Your browser does not support the video tag.
  </video><br />
  <video width="480" height="auto" controls>
    <source src="static/animate/TEMP5.webm" type="video/webp">
    Your browser does not support the video tag.
  </video><br />
  
</html><!DOCTYPE html>
<html>
<head>
    <title>mkmoz</title>
</head>
<body>
    <h1>Generated Thumbnail</h1>
    <img src="{{ url_for('static', filename=filename) }}" alt="Thumbnail Image">
</body>
</html>

<!DOCTYPE html>
<html>

<head>
    <title>Text Entry</title>
</head>

<body>
    <h1>Enter Text</h1>
    <form method="POST" action="/mk_text">
        <textarea name="text" rows="10" cols="50"></textarea>
        <br>
        <input type="submit" value="Save">
    </form>
    <ul>
        <li><a href="{{ url_for('index') }}">Home (index)</a></li><br />
        <li><a href="{{ url_for('format_file') }}">Format Text Files</a></li><br />
        <li><a href="{{ url_for('view_text') }}">view_text Text Files</a></li><br />
    </ul>
</body>

</html><!DOCTYPE html>
<html>
<head>
    <title>Make Background</title>
</head>
<body>
    <h1>Generated Thumbnail</h1>
    <img src="{{ url_for('static', filename=filename) }}" alt="Thumbnail Image">
    <hr>
         <video width="512" height="auto" controls>
        <source src="{{ url_for('static', filename=video) }}" type="video/mp4">
    </video><br />
       
</body>
</html><!DOCTYPE html>
<html>

<head>
    <title>Crop Images</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }
        video {
            margin: 10px, auto;
            width: 200px;
            height: auto;
        }

          .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;

        }

        .header {
            width: 100%;
            padding: 20px;
            text-align: center;
        }

        .columns {
            display: flex;
            width: 80%;
            margin-top: 20px;
        }

        .column {
            padding: 20px;
            box-sizing: border-box;
        }

        .column.left {
            width: 30%;
            border:    1px solid #000;
        }

        .column.right {
        margin: 0 auto; /* Center horizontally */
        width: 60%;
        border: 1px solid #000;
        text-align: center; /* Center video vertically */
    }

    .column.right video {
        max-width: 100%;
        height: auto;
    }
    </style>
</head>
<body>
    <div class="wrapper">
        <div class="header">
            <h1>Crop Images</h1>
            <a href="{{ url_for('index') }}">HOME</a><br />
        </div>
        <div class="columns">
            <div class="column left">

                <h3>Create Text</h3><br />
                <a href="{{ url_for('app_utilities') }}">Application Utilities</a><br />
                <a href="{{ url_for('image_processing') }}">Image Processing Links</a><br />
                <a href="{{ url_for('format_file') }}">Format Text Files</a><br />
                <a href="{{ url_for('view_text') }}">View Text Files</a><br />
                <a href="{{ url_for('edit_file') }}">Edit File</a><br />


                <a href="{{ url_for('edit_description') }}">Edit Description</a><br />
                 <video controls>
                    <source src="{{ video }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
            <div class="column right">
                
   <h2>Image Cropping</h2>
    <form method="POST" enctype="multipart/form-data" action="{{ url_for('crop') }}">
        <input type="file" name="image">
        <input type="submit" value="Upload">
    </form>

    {% if image_path %}
    <h2>Cropped Image Preview</h2>
    <img src="{{ image_path }}" alt="Cropped Image">
    <form method="POST" action="{{ url_for('crop_and_save') }}">
        <input type="hidden" name="image_path" value="{{ image_path }}">
        <label for="x">X Coordinate: </label>
        <input type="number" name="x" required><br>
        <label for="y">Y Coordinate: </label>
        <input type="number" name="y" required><br>
        <label for="width">Width: </label>
        <input type="number" name="width" required><br>
        <label for="height">Height: </label>
        <input type="number" name="height" required><br>
        <input type="submit" value="Crop and Save">
    </form>
    <form method="POST" action="{{ url_for('move_cropped') }}">

        <input type="submit" value="Move Cropped Image">
    </form>

    {% endif %}
<br/> <img src="{{mv_img}}">
               
            </div>
        </div>
    </div>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
    <title>Select and Play MP3</title>
</head>
<body>
    <h1>Select and Play MP3</h1>
    <li><a href="{{ url_for('index') }}">HOME</a></li>
    
    <form method="POST">
        <label for="selected_directory">Select a directory:</label>
        <select name="selected_directory" id="selected_directory">
            {% for directory in directories %}
                <option value="{{ directory }}" {% if selected_directory == directory %}selected{% endif %}>{{ directory }}</option>
            {% endfor %}
        </select>
        <button type="submit">Select Directory</button>
    </form>

    {% if selected_directory %}
        <form method="POST">
            <label for="mp3_file">Choose an MP3 file:</label>
            <select name="mp3_file" id="mp3_file">
                <option value="">-- Select MP3 File --</option>
                {% for mp3 in mp3_files %}
                    <option value="{{ mp3 }}">{{ mp3 }}</option>
                {% endfor %}
            </select>
            <button type="submit">Play</button>
        </form>
    {% endif %}

    <audio controls id="audio-player">
        <source src="" type="audio/mpeg">
    </audio>

    <script>
        const mp3Select = document.getElementById('mp3_file');
        const selectedDirectory = document.getElementById('selected_directory');
        const audioPlayer = document.getElementById('audio-player');

        mp3Select.addEventListener('change', function() {
            const selectedFile = mp3Select.value;
            const selectedDir = selectedDirectory.value;
            const filePath = selectedDir + selectedFile;
            audioPlayer.src = filePath;
            audioPlayer.load(); // Load the new source
            audioPlayer.play(); // Start playing
        });
    </script>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
    <title>MP4 to Image Converter</title>
</head>
<body>
    <h1>MP4 to Image Converter</h1>
    <form method="POST" enctype="multipart/form-data">
        <label for="mp4_file">Select an MP4 file:</label>
        <input type="file" name="mp4_file" id="mp4_file" accept=".mp4" required>
        <br>
        <label for="action">Choose an action:</label>
        <select name="action" id="action" required>
            <option value="save">Save Frames as Images</option>
            <option value="delete">Delete MP4 File</option>
        </select>
        <br>
        <input type="submit" value="Submit">
    </form>
</body>
</html>


<a href="https://freefrontend.com/javascript-background-effects/">javascript-background-effects</a  >
    <a href="https://www.sliderrevolution.com/resources/css-animated-background/">more background-effects</a  >
<a href="https://codepen.io/acauamontiel/pen/abpLEG">more background-codepen</a  >
@app.route('/preview')
def preview():
    # HTML content to be displayed
    html_content = "&lt;h2&gt;This is a dynamic HTML content&lt;/h2&gt;"
    html_content += "&lt;p&gt;It can include various elements, such as paragraphs, headings, lists, etc.&lt;/p&gt;"

    return render_template('preview.html', html_content=html_content)


<pre>
    
    User
@app.route('/convert', methods=['GET', 'POST'])
def convert():
    if request.method == 'POST':
        try:
            audio_file = request.files['audio_file']
            audio_file_path = f'static/audio_mp3/{audio_file.filename}'  # Path for audio file
            audio_file.save(audio_file_path)  # Save the audio file to the specified location

            formatted_text_file = request.files['formatted_text_file']
            formatted_text_file_path = f'static/formatted_text/{formatted_text_file.filename}'  # Path for formatted text file
            formatted_text_file.save(formatted_text_file_path)  # Save the formatted text file to the specified location

            output_filename = datetime.datetime.now().strftime('%Y-%m-%d') + '.mp4'
            output_path = 'static/videos/' + output_filename

            command = [
    'ffmpeg',
    '-i', audio_file_path,
    '-f', 'lavfi',
    '-i', f"color='#470000'@0.0:s=1280x720:rate=60,format=rgba",
    '-vf', f"drawtext=textfile='{os.path.abspath(formatted_text_file_path)}':y=(h-120)-12*t:x=550:fontcolor=orange:fontfile=/home/jack/Arimo-Regular.ttf:fontsize=26",
    '-t', '26',
    '-y', output_path
]
ChatGPT

The code you provided seems to be a part of a Flask application that handles a route called '/convert'. This route accepts both GET and POST requests. Let me explain what this code does step by step:

    It checks if the request method is POST:

python
if request.method == 'POST':

    It retrieves the audio file and saves it to a specified location:

python
audio_file = request.files['audio_file']
audio_file_path = f'static/audio_mp3/{audio_file.filename}'
audio_file.save(audio_file_path)

    It retrieves the formatted text file and saves it to a specified location:

python
formatted_text_file = request.files['formatted_text_file']
formatted_text_file_path = f'static/formatted_text/{formatted_text_file.filename}'
formatted_text_file.save(formatted_text_file_path)

    It generates an output filename based on the current date and time and sets the output path:

python
output_filename = datetime.datetime.now().strftime('%Y-%m-%d') + '.mp4'
output_path = 'static/videos/' + output_filename

    It constructs a command to be executed by ffmpeg, a command-line tool for handling multimedia:

python
command = [
    'ffmpeg',
    '-i', audio_file_path,
    '-f', 'lavfi',
    '-i', f"color='#470000'@0.0:s=1280x720:rate=60,format=rgba",
    '-vf', f"drawtext=textfile='{os.path.abspath(formatted_text_file_path)}':y=(h-120)-12*t:x=550:fontcolor=orange:fontfile=/home/jack/Arimo-Regular.ttf:fontsize=26",
    '-t', '26',
    '-y', output_path
]

The command includes options and arguments for ffmpeg to perform the following operations:

    -i audio_file_path: Specifies the input audio file.
    -f lavfi -i color=...: Generates a colored background for the video.
    -vf drawtext=...: Adds text to the video using the specified font, font size, and color. The text is read from the formatted text file.
    -t 26: Sets the duration of the output video to 26 seconds.
    -y output_path: Specifies the output path and filename for the video.

The resulting command will be executed by ffmpeg to convert the audio and formatted text into a video file at the specified output path.

Please note that the code provided is incomplete, and there might be additional Flask routes and functionality missing for a complete application.
User
i get  File "appp", line 36
    audio_file_path = f'static/audio_mp3/{audio_file.filename}'  # Path for audio file
                                                              ^
SyntaxError: invalid syntax
ChatGPT

The SyntaxError you're encountering is pointing to the line where you are trying to format the string using an f-string. This error typically occurs when using f-strings in Python versions earlier than Python 3.6.

To resolve this issue, you can modify the string formatting to use the str.format() method instead of an f-string. Here's the modified code snippet:

python
audio_file_path = 'static/audio_mp3/{}'.format(audio_file.filename)

You would need to make similar changes in other parts of your code where you're using f-strings. By replacing the f-strings with the str.format() method, you should be able to fix the SyntaxError and continue running your code.
User
if __name__ == '__main__':
    app.run(debug=True)                      I want this to run on port 5100
ChatGPT

To run your Flask application on port 5100, you can modify the app.run() statement as follows:

python
if __name__ == '__main__':
    app.run(debug=True, port=5100)

By specifying port=5100 as an argument in the app.run() function, your Flask application will be served on port 5100 when you run the script.

After making this change, you can execute your Flask application, and it will be accessible at http://localhost:5100/.
User
what if i use 0,0,0,0
ChatGPT

If you want to run your Flask application on all available network interfaces and use port 5100, you can modify the app.run() statement as follows:

python
if __name__ == '__main__':
    app.run(debug=True, host='0.0.0.0', port=5100)

By specifying host='0.0.0.0' and port=5100 as arguments in the app.run() function, your Flask application will be served on all network interfaces (allowing access from external devices) and using port 5100.

After making this change, you can execute your Flask application, and it will be accessible at http://&lt;your-ip-address&gt;:5100/, where &lt;your-ip-address&gt; is the IP address of the machine running the Flask application.
User
datetime has no attribut now
ChatGPT

I apologize for the confusion. It seems that there was an error related to the datetime.now() function.

The correct import statement for the datetime module should be added at the beginning of your code:

python
import datetime

By including this import statement, you will have access to the datetime module and its datetime class, which includes the now() method.

Here's an updated version of your code with the correct import statement:

python
import datetime

@app.route('/convert', methods=['GET', 'POST'])
def convert():
    if request.method == 'POST':
        try:
            audio_file = request.files['audio_file']
            audio_file_path = f'static/audio_mp3/{audio_file.filename}'  # Path for audio file
            audio_file.save(audio_file_path)  # Save the audio file to the specified location

            formatted_text_file = request.files['formatted_text_file']
            formatted_text_file_path = f'static/formatted_text/{formatted_text_file.filename}'  # Path for formatted text file
            formatted_text_file.save(formatted_text_file_path)  # Save the formatted text file to the specified location

            output_filename = datetime.datetime.now().strftime('%Y-%m-%d') + '.mp4'
            output_path = 'static/videos/' + output_filename

            command = [
                'ffmpeg',
                '-i', audio_file_path,
                '-f', 'lavfi',
                '-i', f"color='#470000'@0.0:s=1280x720:rate=60,format=rgba",
                '-vf', f"drawtext=textfile='{os.path.abspath(formatted_text_file_path)}':y=(h-120)-12*t:x=550:fontcolor=orange:fontfile=/home/jack/Arimo-Regular.ttf:fontsize=26",
                '-t', '26',
                '-y', output_path
            ]
            
            # Rest of your code...

        except Exception as e:
            # Handle exceptions

if __name__ == '__main__':
    app.run(debug=True)

Make sure to add the import datetime statement at the beginning of your script, and the datetime module should be accessible, allowing you to use the datetime.datetime.now() method without any issues.
User
use time str instead of datetime
ChatGPT

If you want to use a time string instead of the datetime.now() method, you can replace the datetime.datetime.now().strftime('%Y-%m-%d') portion with the time.strftime() function, which allows you to format the current time as a string.

Here's an updated version of your code using time.strftime():

python
import time

@app.route('/convert', methods=['GET', 'POST'])
def convert():
    if request.method == 'POST':
        try:
            audio_file = request.files['audio_file']
            audio_file_path = f'static/audio_mp3/{audio_file.filename}'  # Path for audio file
            audio_file.save(audio_file_path)  # Save the audio file to the specified location

            formatted_text_file = request.files['formatted_text_file']
            formatted_text_file_path = f'static/formatted_text/{formatted_text_file.filename}'  # Path for formatted text file
            formatted_text_file.save(formatted_text_file_path)  # Save the formatted text file to the specified location

            output_filename = time.strftime('%Y-%m-%d', time.localtime()) + '.mp4'
            output_path = 'static/videos/' + output_filename

            command = [
                'ffmpeg',
                '-i', audio_file_path,
                '-f', 'lavfi',
                '-i', f"color='#470000'@0.0:s=1280x720:rate=60,format=rgba",
                '-vf', f"drawtext=textfile='{os.path.abspath(formatted_text_file_path)}':y=(h-120)-12*t:x=550:fontcolor=orange:fontfile=/home/jack/Arimo-Regular.ttf:fontsize=26",
                '-t', '26',
                '-y', output_path
            ]
            
            # Rest of your code...

        except Exception as e:
            # Handle exceptions

if __name__ == '__main__':
    app.run(debug=True)

In this updated code, I replaced datetime.datetime.now().strftime('%Y-%m-%d') with time.strftime('%Y-%m-%d', time.localtime()). The time.strftime() function takes a format string as the first argument and the time as a tuple from time.localtime() as the second argument. By using '%Y-%m-%d' as the format string, you'll get the current date in the desired format.
User
iwant the time to seconds
ChatGPT

If you want to get the current time in seconds instead of the date, you can use the time.time() function, which returns the current time in seconds since the epoch. You can then convert this timestamp to a string using str().

Here's an updated version of your code using time.time() to get the current time in seconds:

python
import time

@app.route('/convert', methods=['GET', 'POST'])
def convert():
    if request.method == 'POST':
        try:
            audio_file = request.files['audio_file']
            audio_file_path = f'static/audio_mp3/{audio_file.filename}'  # Path for audio file
            audio_file.save(audio_file_path)  # Save the audio file to the specified location

            formatted_text_file = request.files['formatted_text_file']
            formatted_text_file_path = f'static/formatted_text/{formatted_text_file.filename}'  # Path for formatted text file
            formatted_text_file.save(formatted_text_file_path)  # Save the formatted text file to the specified location

            output_filename = str(int(time.time())) + '.mp4'
            output_path = 'static/videos/' + output_filename

            command = [
                'ffmpeg',
                '-i', audio_file_path,
                '-f', 'lavfi',
                '-i', f"color='#470000'@0.0:s=1280x720:rate=60,format=rgba",
                '-vf', f"drawtext=textfile='{os.path.abspath(formatted_text_file_path)}':y=(h-120)-12*t:x=550:fontcolor=orange:fontfile=/home/jack/Arimo-Regular.ttf:fontsize=26",
                '-t', '26',
                '-y', output_path
            ]
            
            # Rest of your code...

        except Exception as e:
            # Handle exceptions

if __name__ == '__main__':
    app.run(debug=True)

In this updated code, I replaced the datetime.datetime.now().strftime('%Y-%m-%d') with str(int(time.time())). The time.time() function returns the current time in seconds since the epoch (as a floating-point number), which is then converted to an integer using int(). Finally, the integer timestamp is converted to a string using str().
User
python make a directory if not exist\
ChatGPT

To create a directory in Python if it doesn't exist, you can use the os.makedirs() function. This function recursively creates directories along the given path. If the directory already exists, it doesn't raise an error.

Here's an example of how you can use os.makedirs() to create a directory if it doesn't exist:

python
import os

directory_path = 'path/to/directory'  # Replace with the desired directory path

# Create the directory if it doesn't exist
os.makedirs(directory_path, exist_ok=True)

In the above code, you need to replace 'path/to/directory' with the actual path of the directory you want to create. The exist_ok=True argument ensures that no error is raised if the directory already exists.

After executing this code, the directory will be created if it doesn't already exist. If the directory exists, no action will be taken.

Make sure you have the necessary permissions to create directories in the specified location.
User
File "/home/jack/Desktop/StoryMaker/env/lib/python3.8/site-packages/flask/app.py", line 1523, in full_dispatch_request
rv = self.dispatch_request()
File "/home/jack/Desktop/StoryMaker/env/lib/python3.8/site-packages/flask/app.py", line 1509, in dispatch_request
return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
File "/home/jack/Desktop/StoryMaker/SuperAvatar", line 221, in generate_video
extract_eyes(image_path, eyes_filename, shape_predictor_path)
File "/home/jack/Desktop/StoryMaker/SuperAvatar", line 280, in extract_eyes
gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)
cv2.error: OpenCV(4.6.0) /io/opencv/modules/imgproc/src/color.cpp:182: error: (-215:Assertion failed) !_src.empty() in function 'cvtColor'
ChatGPT

The error message you provided suggests that an error occurred in the cvtColor() function of OpenCV. Specifically, it indicates that the input image passed to cvtColor() is empty (_src.empty() assertion failed).

The issue is likely related to the image file you are trying to process. It could be that the image file path is incorrect, or the image file itself is not accessible or empty.

To resolve this error, you can check the following:

    Verify that the image file exists at the specified path.
    Ensure that the image file is accessible and not being used by any other process.
    Double-check that the image file is a valid image file format (e.g., JPEG, PNG).
    Confirm that the image file is not empty or corrupted.

You can add some error handling and logging to your code to identify the specific image file causing the issue and provide more context for troubleshooting.

If you need further assistance, please provide the relevant code snippet that includes the extract_eyes() function and how you are passing the image path to it.
User
What do you know about the final fantasy series ?
ChatGPT

The Final Fantasy series is a highly popular and influential role-playing video game franchise developed and published by Square Enix (formerly Square). The series was created by Hironobu Sakaguchi and debuted in 1987 with the release of the first game in the series, simply titled "Final Fantasy."

Key aspects of the Final Fantasy series include:

    Gameplay: The games typically feature turn-based combat, exploration of vast fantasy worlds, character development, and engaging storytelling. However, gameplay mechanics can vary between installments, with some featuring real-time combat or tactical elements.

    Fantasy Setting: The series is known for its immersive and richly detailed fantasy settings, often combining elements of magic, technology, and various races, such as humans, elves, dwarves, and creatures unique to the Final Fantasy universe.

    Standalone Stories: Each mainline entry in the series typically presents a unique storyline, with new worlds, characters, and themes. However, common elements like chocobos (large, bird-like creatures), airships, and recurring creatures called "summons" (or "espers") are often featured across different games.

    Music: The Final Fantasy series is renowned for its memorable and iconic music, composed by Nobuo Uematsu and other talented composers. The music often complements the game's narrative and evokes a range of emotions in players.

    Iterations and Spin-offs: The success of the franchise has led to numerous sequels, prequels, spin-offs, and adaptations across various platforms. Some notable spin-off titles include Final Fantasy Tactics, Final Fantasy Crystal Chronicles, and Final Fantasy Brave Exvius.

    Cultural Impact: Final Fantasy has had a significant impact on the gaming industry, shaping the RPG genre and inspiring many other video games and media. The series has garnered a dedicated fan base worldwide, and its success has helped establish Square Enix as a prominent game developer.

It's important to note that since my knowledge cutoff is in September 2021, the information I provided reflects the state of the series up until that time. New games and developments may have occurred since then.
User
could you set the plot for a two page comic book using final fantasy 
ChatGPT

Certainly! Here's a potential plot for a two-page comic book using Final Fantasy as inspiration:

Page 1:
Panel 1:

    A sprawling fantasy kingdom is shown, with magnificent castles, bustling towns, and beautiful landscapes.
    The main protagonist, a young warrior, is introduced. They are seen walking through a town, their face determined and their sword strapped to their back.

Panel 2:

    The warrior enters a tavern filled with adventurers and townsfolk.
    They overhear a rumor about a powerful artifact hidden in a nearby ancient temple.
    The warrior decides to embark on a quest to retrieve the artifact and bring peace to the kingdom.

Panel 3:

    The warrior is shown journeying through a dense forest, encountering magical creatures along the way.
    They face a small group of goblins, displaying their combat skills and bravery.

Page 2:
Panel 4:

    The warrior reaches the entrance of the ancient temple, an awe-inspiring structure covered in moss and vines.
    They cautiously step inside, encountering traps and puzzles that test their intelligence and agility.

Panel 5:

    The warrior finally reaches the inner chamber of the temple, where the artifact is guarded by a fearsome monster.
    A thrilling battle ensues, showcasing the warrior's skills and determination to protect the kingdom.

Panel 6:

    The warrior emerges victorious, holding the artifact triumphantly.
    They return to the kingdom as a hero, greeted by grateful townsfolk and a jubilant celebration.

Panel 7:

    The comic concludes with the warrior contemplating their next adventure, hinting at future quests and the continuation of their heroic journey.

This two-page comic book plot draws inspiration from the Final Fantasy series by incorporating elements such as a fantasy setting, a hero on a quest, magical creatures, and epic battles. It captures the essence of a classic Final Fantasy storyline, combining adventure, exploration, and the triumph of good over evil in a condensed format.
User
what was the main castle / city name
ChatGPT

In the plot for the two-page comic book using Final Fantasy as inspiration, the specific names of the main castle or city were not provided. However, you can create unique names for the castle and city based on the theme and style you envision for your story. Here are a couple of examples:

    Castle/City Name: "Valoria"
    Description: Valoria is a majestic castle that serves as the center of power in the kingdom. It is situated on a high hill, overlooking the sprawling city below. The city itself is a bustling hub of commerce and culture, filled with lively markets, grand architecture, and diverse inhabitants.

    Castle/City Name: "Silverreach"
    Description: Silverreach is a fortified city located on the edge of a shimmering lake. The castle, also known as Silverreach, is made of gleaming white stone and stands as a symbol of prosperity and strength. The city is known for its advanced magical arts, with enchanters, scholars, and alchemists residing within its walls.

Feel free to modify or create your own castle and city names that resonate with your story and the atmosphere you want to portray in your Final Fantasy-inspired comic book.
User
what are the illustrators bubbles that represent a dream called?
ChatGPT

The speech bubbles that represent a dream or a character's thoughts in comic books are commonly referred to as "thought bubbles" or "thought balloons." These thought bubbles are typically depicted as cloud-like shapes with a series of dots or wavy lines connecting them to the character's head.

Thought bubbles are used to convey a character's inner monologue, private thoughts, or dreams. They are often drawn differently from regular speech bubbles to indicate that the text within them represents the character's mental or imagined dialogue rather than spoken words. The use of thought bubbles helps readers understand the character's perspective, emotions, or reflections.

It's important to note that different comic artists and authors may have their own unique styles and variations when it comes to depicting thought bubbles. Some may use different shapes, colors, or visual effects to convey specific nuances or emphasize the dream-like quality of the thoughts or dreams being depicted.
User
import * as datGui from "https://cdn.skypack.dev/dat.gui@0.7.7";

const state = {
  fps: 60,
  color: "#0f0",
  charset: "0123456789ABCDEF",
  size: 10
};

const gui = new datGui.GUI();
const fpsCtrl = gui.add(state, "fps").min(1).max(120).step(1);
gui.addColor(state, "color");
gui.add(state, "charset");
const sizeCtrl = gui.add(state, "size").min(1).max(120).step(1);

const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

let w, h, p;
const resize = () =&gt; {
  w = canvas.width = innerWidth;
  h = canvas.height = innerHeight;

  p = Array(Math.ceil(w / state.size)).fill(0);
};
window.addEventListener("resize", resize);
sizeCtrl.onFinishChange((s) =&gt; resize())
resize();

const random = (items) =&gt; items[Math.floor(Math.random() * items.length)];

const draw = () =&gt; {
  ctx.fillStyle = "rgba(0,0,0,.05)";
  ctx.fillRect(0, 0, w, h);
  ctx.fillStyle = state.color;

  ctx.font = state.size + 'px sans-serif'
  for (let i = 0; i &lt; p.length; i++) {
    let v = p[i];
    ctx.fillText(random(state.charset), i * state.size, v);
    p[i] = v &gt;= h || v &gt;= 10000 * Math.random() ? 0 : v + state.size;
  }
};

let interval = setInterval(draw, 1000 / state.fps);
fpsCtrl.onFinishChange((fps) =&gt; {
  if (interval) {
    clearInterval(interval);
  }
  interval = setInterval(draw, 1000 / fps);
});
body {
  margin: 0;
  overflow: hidden;
}                               &lt;canvas id="canvas"&gt;                                   Can you create that using only a javascript and no additional html or css ??
ChatGPT

Yes, the provided code can be used to create a visualization using only JavaScript without additional HTML or CSS files. However, there is a small issue with the placement of the &lt;canvas&gt; element in your question. I assume that you meant to place it before the CSS code. Here's the corrected version of the code:

javascript
import * as datGui from "https://cdn.skypack.dev/dat.gui@0.7.7";

const state = {
  fps: 60,
  color: "#0f0",
  charset: "0123456789ABCDEF",
  size: 10
};

const gui = new datGui.GUI();
const fpsCtrl = gui.add(state, "fps").min(1).max(120).step(1);
gui.addColor(state, "color");
gui.add(state, "charset");
const sizeCtrl = gui.add(state, "size").min(1).max(120).step(1);

const canvas = document.createElement("canvas");
document.body.appendChild(canvas);
const ctx = canvas.getContext("2d");

let w, h, p;
const resize = () =&gt; {
  w = canvas.width = innerWidth;
  h = canvas.height = innerHeight;

  p = Array(Math.ceil(w / state.size)).fill(0);
};
window.addEventListener("resize", resize);
sizeCtrl.onFinishChange((s) =&gt; resize());
resize();

const random = (items) =&gt; items[Math.floor(Math.random() * items.length)];

const draw = () =&gt; {
  ctx.fillStyle = "rgba(0,0,0,.05)";
  ctx.fillRect(0, 0, w, h);
  ctx.fillStyle = state.color;

  ctx.font = state.size + 'px sans-serif';
  for (let i = 0; i &lt; p.length; i++) {
    let v = p[i];
    ctx.fillText(random(state.charset), i * state.size, v);
    p[i] = v &gt;= h || v &gt;= 10000 * Math.random() ? 0 : v + state.size;
  }
};

let interval = setInterval(draw, 1000 / state.fps);
fpsCtrl.onFinishChange((fps) =&gt; {
  if (interval) {
    clearInterval(interval);
  }
  interval = setInterval(draw, 1000 / fps);
});

In this code, a &lt;canvas&gt; element is created dynamically using document.createElement("canvas"). The canvas is then appended to the &lt;body&gt; element using document.body.appendChild(canvas). This allows you to generate the visualization using JavaScript without the need for additional HTML or CSS files.

Please note that you will still need an HTML file to load and run this JavaScript code. You can create an HTML file and include a &lt;script&gt; tag to reference this JavaScript code.
User
run flask on port 5100
ChatGPT

To run a Flask application on port 5100, you can modify the app.run() statement in your Python script. Here's an example of how you can do it:

python
from flask import Flask

app = Flask(__name__)

@app.route('/')
def hello():
    return 'Hello, World!'

if __name__ == '__main__':
    app.run(port=5100)

In this example, the Flask application is defined with a simple route that returns "Hello, World!" when accessed. The app.run() statement is modified to include port=5100 as an argument.

When you run this script, Flask will start the application on port 5100. You can access it by navigating to http://localhost:5100/ in your web browser.

Please ensure that you have Flask installed and any required dependencies before running the script.
User
import * as datGui from "https://cdn.skypack.dev/dat.gui@0.7.7";

const state = {
  fps: 60,
  color: "#0f0",
  charset: "0123456789ABCDEF",
  size: 10
};

const gui = new datGui.GUI();
const fpsCtrl = gui.add(state, "fps").min(1).max(120).step(1);
gui.addColor(state, "color");
gui.add(state, "charset");
const sizeCtrl = gui.add(state, "size").min(1).max(120).step(1);

const canvas = document.createElement("canvas");
document.body.appendChild(canvas);
const ctx = canvas.getContext("2d");

let w, h, p;
const resize = () =&gt; {
  w = canvas.width = innerWidth;
  h = canvas.height = innerHeight;

  p = Array(Math.ceil(w / state.size)).fill(0);
};
window.addEventListener("resize", resize);
sizeCtrl.onFinishChange((s) =&gt; resize());
resize();

const random = (items) =&gt; items[Math.floor(Math.random() * items.length)];

const draw = () =&gt; {
  ctx.fillStyle = "rgba(0,0,0,.05)";
  ctx.fillRect(0, 0, w, h);
  ctx.fillStyle = state.color;

  ctx.font = state.size + 'px sans-serif';
  for (let i = 0; i &lt; p.length; i++) {
    let v = p[i];
    ctx.fillText(random(state.charset), i * state.size, v);
    p[i] = v &gt;= h || v &gt;= 10000 * Math.random() ? 0 : v + state.size;
  }
};

let interval = setInterval(draw, 1000 / state.fps);
fpsCtrl.onFinishChange((fps) =&gt; {
  if (interval) {
    clearInterval(interval);
  }
  interval = setInterval(draw, 1000 / fps);
});
if I run this script in an html page it should show an image ??
ChatGPT

The provided code is written in JavaScript and renders a dynamic canvas animation, but it doesn't generate an image. When you run this script in an HTML page, it will create an interactive animation on the canvas element.

The code sets up a GUI using dat.GUI to control parameters such as frames per second (fps), color, character set, and size. It then creates a canvas element dynamically and appends it to the &lt;body&gt; of the HTML page. The animation is drawn on the canvas using the draw() function, which is repeatedly called based on the specified frame rate.

When you open the HTML page that includes this script, you should see a canvas element on the page, and the animation will start playing based on the parameters controlled by the GUI.

It's important to note that this code doesn't generate a static image file. Instead, it generates an interactive animation that runs within the web page. If you need to generate a static image, you might consider using a different approach, such as capturing the canvas as an image using libraries like html2canvas or server-side rendering techniques.
User
I wand to run the script in a webpage 
ChatGPT

To run the provided JavaScript code in a webpage, you need to create an HTML file and include the JavaScript code within a &lt;script&gt; tag. Here's an example of how you can structure your HTML file:

html
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;Canvas Animation&lt;/title&gt;
  &lt;script src="https://cdn.skypack.dev/dat.gui@0.7.7"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;canvas id="canvas"&gt;&lt;/canvas&gt;

  &lt;script&gt;
    // Paste the JavaScript code here
    // ...

    // Ensure the DOM content is loaded before running the JavaScript code
    document.addEventListener("DOMContentLoaded", function() {
      // Your JavaScript code here
      // ...
    });
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;

In this HTML file, the &lt;script&gt; tag is placed at the end of the &lt;body&gt; element. The external dat.gui library is included as a script source using a &lt;script&gt; tag with the src attribute.

You should copy and paste the provided JavaScript code inside the &lt;script&gt; tag where indicated. The DOMContentLoaded event listener is added to ensure that the JavaScript code runs after the DOM content has loaded.

Save this HTML file with an appropriate name, such as index.html, and open it in a web browser. The canvas animation should now run within the webpage.
User
I want to just run a script in a page. I have only access to creare a script
ChatGPT

If you only have access to creating a script on a webpage and want to run the provided JavaScript code without modifying the HTML, you can follow these steps:

    Create an HTML file (e.g., index.html) with the following content:

html
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;Canvas Animation&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;canvas id="canvas"&gt;&lt;/canvas&gt;

  &lt;script&gt;
    // Paste the entire JavaScript code here
    // ...

    // Ensure the DOM content is loaded before running the JavaScript code
    document.addEventListener("DOMContentLoaded", function() {
      // Your JavaScript code here
      // ...
    });
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;

    Copy the entire JavaScript code (starting from import * as datGui and ending with the last line) and replace the // Paste the entire JavaScript code here comment inside the &lt;script&gt; tag.

    Save the HTML file.

    Open the HTML file (index.html) in a web browser, and the canvas animation should run on the webpage.

By embedding the JavaScript code within the &lt;script&gt; tag in the HTML file, you can run the script and see the canvas animation without modifying the existing HTML structure.
User
can you complete the html page 
ChatGPT

Certainly! Here's the completed HTML page with the provided JavaScript code included:

html
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;Canvas Animation&lt;/title&gt;
  &lt;script src="https://cdn.skypack.dev/dat.gui@0.7.7"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;canvas id="canvas"&gt;&lt;/canvas&gt;

  &lt;script&gt;
    import * as datGui from "https://cdn.skypack.dev/dat.gui@0.7.7";

    const state = {
      fps: 60,
      color: "#0f0",
      charset: "0123456789ABCDEF",
      size: 10
    };

    const gui = new datGui.GUI();
    const fpsCtrl = gui.add(state, "fps").min(1).max(120).step(1);
    gui.addColor(state, "color");
    gui.add(state, "charset");
    const sizeCtrl = gui.add(state, "size").min(1).max(120).step(1);

    const canvas = document.createElement("canvas");
    document.body.appendChild(canvas);
    const ctx = canvas.getContext("2d");

    let w, h, p;
    const resize = () =&gt; {
      w = canvas.width = innerWidth;
      h = canvas.height = innerHeight;

      p = Array(Math.ceil(w / state.size)).fill(0);
    };
    window.addEventListener("resize", resize);
    sizeCtrl.onFinishChange((s) =&gt; resize());
    resize();

    const random = (items) =&gt; items[Math.floor(Math.random() * items.length)];

    const draw = () =&gt; {
      ctx.fillStyle = "rgba(0,0,0,.05)";
      ctx.fillRect(0, 0, w, h);
      ctx.fillStyle = state.color;

      ctx.font = state.size + 'px sans-serif';
      for (let i = 0; i &lt; p.length; i++) {
        let v = p[i];
        ctx.fillText(random(state.charset), i * state.size, v);
        p[i] = v &gt;= h || v &gt;= 10000 * Math.random() ? 0 : v + state.size;
      }
    };

    let interval = setInterval(draw, 1000 / state.fps);
    fpsCtrl.onFinishChange((fps) =&gt; {
      if (interval) {
        clearInterval(interval);
      }
      interval = setInterval(draw, 1000 / fps);
    });

    document.addEventListener("DOMContentLoaded", function() {
      // Your JavaScript code here
      // ...
    });
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;

In this completed HTML page, the provided JavaScript code is included within the &lt;script&gt; tag. The required dat.gui library is imported as a script source using the &lt;script&gt; tag with the src attribute. The canvas element is created dynamically and appended to the &lt;body&gt; element.

Save this HTML page as an HTML file (e.g., index.html), and open it in a web browser. The canvas animation should now run on the webpage.
User
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;HTML Viewer&lt;/title&gt;
    &lt;script src="https://cdn.skypack.dev/dat.gui@0.7.7"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;canvas id="canvas"&gt;&lt;/canvas&gt;
    &lt;div id="output"&gt;
        {{ html_content | safe }}
    &lt;/div&gt;

    &lt;script&gt;
        var script = {{ script_content | tojson }};
        eval(script);
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
This does not work I saved the script above in script.js
ChatGPT

It seems like you're trying to load an external JavaScript file (script.js) and execute its content within the HTML page. To achieve that, you need to reference the script.js file using a &lt;script&gt; tag in your HTML file. Here's an updated version of your HTML file:

html
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;HTML Viewer&lt;/title&gt;
    &lt;script src="https://cdn.skypack.dev/dat.gui@0.7.7"&gt;&lt;/script&gt;
    &lt;script src="script.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;canvas id="canvas"&gt;&lt;/canvas&gt;
    &lt;div id="output"&gt;
        {{ html_content | safe }}
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;

Make sure that the script.js file is located in the same directory as your HTML file. The &lt;script src="script.js"&gt;&lt;/script&gt; tag is added to the &lt;head&gt; section, loading the external JavaScript file into the HTML page.

Save this updated HTML file, and when you open it in a web browser, it will load and execute the content of the script.js file. Any code within script.js will be able to access and manipulate the elements in the HTML document, such as the canvas element and the div with the ID "output".
User
@app.route('/preview', methods=['GET', 'POST'])
def preview():
    # Read the existing script content from the file
    with open('scripts/script.js', 'r') as file:
        script_content = file.read()
    # HTML content to be displayed
    html_content = "&lt;p&gt;This is a dynamic HTML content. It can include various elements, &lt;br /&gt;such as paragraphs, headings, lists, etc.&lt;/p&gt;"
    return render_template('preview.html', html_content=html_content, script_content=script_content)                    I have other *.js I want to load and run from scripts/ how do I load them
ChatGPT

To load and run multiple JavaScript files from the scripts/ directory, you can modify the preview() function in your Flask application. Here's an updated version of the code that loads and includes multiple JavaScript files:

python
import os
from flask import Flask, render_template

app = Flask(__name__)

@app.route('/preview', methods=['GET', 'POST'])
def preview():
    script_files = []  # List to store the names of the JavaScript files

    # Read all JavaScript files from the 'scripts/' directory
    script_dir = 'scripts/'
    for filename in os.listdir(script_dir):
        if filename.endswith('.js'):
            script_path = os.path.join(script_dir, filename)
            with open(script_path, 'r') as file:
                script_content = file.read()
                script_files.append(script_content)

    # HTML content to be displayed
    html_content = "&lt;p&gt;This is a dynamic HTML content. It can include various elements, &lt;br /&gt;such as paragraphs, headings, lists, etc.&lt;/p&gt;"

    return render_template('preview.html', html_content=html_content, script_files=script_files)

In this updated code, the preview() function reads all JavaScript files in the scripts/ directory. It uses os.listdir() to get the list of files in the directory and then filters for files with the .js extension. The contents of each JavaScript file are stored in the script_files list.

The render_template() function is modified to pass the script_files list to the preview.html template. This allows you to access and include multiple JavaScript files in your HTML template.

In your preview.html template, you can loop through the script_files list and include each JavaScript file using &lt;script&gt; tags. Here's an example of how you can include the JavaScript files in the template:

html
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;HTML Viewer&lt;/title&gt;
    &lt;script src="https://cdn.skypack.dev/dat.gui@0.7.7"&gt;&lt;/script&gt;
    {% for script_file in script_files %}
        &lt;script&gt;
            {{ script_file | safe }}
        &lt;/script&gt;
    {% endfor %}
&lt;/head&gt;
&lt;body&gt;
    &lt;canvas id="canvas"&gt;&lt;/canvas&gt;
    &lt;div id="output"&gt;
        {{ html_content | safe }}
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;

In this example, the {% for script_file in script_files %} loop iterates over each JavaScript file in the script_files list. Within the loop, each file's content is included within a &lt;script&gt; tag using {{ script_file | safe }}.

Make sure that your JavaScript files are stored in the scripts/ directory relative to your Flask application file. You can have multiple JavaScript files in the scripts/ directory, and all of them will be loaded and included in the rendered HTML page.
User
if __name__ == '__main__':
   app.run(debug=True, port=5000, host='0,0,0,0')
ChatGPT

If you want to run your Flask application with the app.run() statement including the debug=True, port=5000, and host='0.0.0.0' arguments, here's the updated code:

python
if __name__ == '__main__':
    app.run(debug=True, port=5000, host='0.0.0.0')

With this configuration, your Flask application will run in debug mode (debug=True) for better error reporting, it will be accessible on port 5000 (port=5000), and it will listen on all available network interfaces (host='0.0.0.0'). This allows your Flask application to be accessed from other devices on the same network.

Make sure you have Flask installed and any required dependencies before running the script. When you execute this code, your Flask application will run, and you can access it by navigating to the appropriate IP address and port (e.g., http://your-ip-address:5000/) in a web browser.
User
This does not let me choose a *.js file ??    @app.route('/edit_script', methods=['GET', 'POST'])
def edit_script():
    script_files = []  # List to store the names of the JavaScript files
    # Read all JavaScript files from the 'scripts/' directory
    script_dir = 'scripts/'
    for filename in os.listdir(script_dir):
        if filename.endswith('.js'):
            script_path = os.path.join(script_dir, filename)
            with open(script_path, 'r') as file:
                script_content = file.read()
                script_files.append(script_content)   
                # Path to the script file
                backup_file = f"scripts/script_backup_{datetime.datetime.now().strftime('%Y%m%d%H%M%S')}.js"
                shutil.copy(script_file, backup_file)
                # Read the existing script content from the file

                return render_template('edit_script.html', script_content=script_content)
                # Define the file path to store the script content
ChatGPT

If you want to allow users to choose a JavaScript file for editing in your Flask application, you can modify the edit_script() function to include file selection functionality. Here's an updated version of the code:

python
import os
from flask import Flask, render_template, request
import shutil
import datetime

app = Flask(__name__)

@app.route('/edit_script', methods=['GET', 'POST'])
def edit_script():
    if request.method == 'POST':
        selected_file = request.files['script_file']
        if selected_file and selected_file.filename.endswith('.js'):
            script_content = selected_file.read().decode('utf-8')

            # Path to the script file
            script_dir = 'scripts/'
            backup_file = f"scripts/script_backup_{datetime.datetime.now().strftime('%Y%m%d%H%M%S')}.js"
            script_path = os.path.join(script_dir, selected_file.filename)
            script_files = []
            for filename in os.listdir(script_dir):
                if filename.endswith('.js'):
                    with open(os.path.join(script_dir, filename), 'r') as file:
                        script_files.append(file.read())

            shutil.copy(script_path, backup_file)

            return render_template('edit_script.html', script_files=script_files, script_content=script_content)

    # Read all JavaScript files from the 'scripts/' directory
    script_dir = 'scripts/'
    script_files = []
    for filename in os.listdir(script_dir):
        if filename.endswith('.js'):
            with open(os.path.join(script_dir, filename), 'r') as file:
                script_files.append(file.read())

    return render_template('edit_script.html', script_files=script_files)

if __name__ == '__main__':
    app.run(debug=True, port=5000, host='0.0.0.0')

In this updated code, the edit_script() function handles both GET and POST requests. If the request method is POST, it checks if a file with the .js extension was selected, reads its content, and sets it as the script_content variable. It then creates a backup of the selected file and renders the edit_script.html template with the list of script files and the selected script content.

When the request method is GET, the function reads all JavaScript files from the scripts/ directory and passes them to the template as script_files.

You can modify your edit_script.html template to include a file input field (&lt;input type="file" name="script_file"&gt;) to allow users to select a JavaScript file for editing. Additionally, you can display the list of available script files and the content of the selected script.

Ensure that you have the edit_script.html template in your templates directory and the necessary CSS and JavaScript files to style and enhance the editing experience.

With these modifications, users can choose a JavaScript file for editing, and the selected file's content will be displayed in the edit_script.html template.
User
from flask import Flask, render_template, request
import datetime
import shutil
import os
app = Flask(__name__)
@app.route('/')
def index():
    return render_template('index.html')
@app.route('/NOTES')
def plain_html():
    return render_template('NOTES.html')
@app.route('/preview', methods=['GET', 'POST'])
def preview():
    # Read the existing script content from the file
    with open('scripts/script.js', 'r') as file:
        script_content = file.read()
    # HTML content to be displayed
    html_content = "&lt;p&gt;This is a dynamic HTML content. It can include various elements, &lt;br /&gt;such as paragraphs, headings, lists, etc.&lt;/p&gt;"
    return render_template('preview.html', html_content=html_content, script_content=script_content)
@app.route('/edit_script', methods=['GET', 'POST'])
def edit_script():
    if request.method == 'POST':
        selected_file = request.files['script_file']
        if selected_file and selected_file.filename.endswith('.js'):
            script_content = selected_file.read().decode('utf-8')

            # Path to the script file
            script_dir = 'scripts/'
            backup_file = f"scripts/script_backup_{datetime.datetime.now().strftime('%Y%m%d%H%M%S')}.js"
            script_path = os.path.join(script_dir, selected_file.filename)
            script_files = []
            for filename in os.listdir(script_dir):
                if filename.endswith('.js'):
                    with open(os.path.join(script_dir, filename), 'r') as file:
                        script_files.append(file.read())

            shutil.copy(script_path, backup_file)

            return render_template('edit_script.html', script_files=script_files, script_content=script_content)

    # Read all JavaScript files from the 'scripts/' directory
    script_dir = 'scripts/'
    script_files = []
    for filename in os.listdir(script_dir):
        if filename.endswith('.js'):
            with open(os.path.join(script_dir, filename), 'r') as file:
                script_files.append(file.read())

    return render_template('edit_script.html', script_files=script_files)

#script_file = os.path.join(os.getcwd(), 'scripts', 'script.js')
script_file = "scripts/script.js"
@app.route('/save_script', methods=['POST'])
def save_script():
    # Retrieve the updated script content from the form data
    updated_script = request.form.get('script_content')
    # Write the updated script content to the file
    with open(script_file, 'w') as file:
        file.write(updated_script)
    return 'Script updated successfully.'
if __name__ == '__main__':
   app.run(debug=True, port=5000, host='0.0.0.0')

ChatGPT

The provided Flask application code appears to have all the necessary routes and functionality for serving HTML templates, previewing content, editing scripts, and saving script updates. Here's the code with some formatting adjustments:

python
from flask import Flask, render_template, request
import datetime
import shutil
import os

app = Flask(__name__)

@app.route('/')
def index():
    return render_template('index.html')

@app.route('/NOTES')
def plain_html():
    return render_template('NOTES.html')

@app.route('/preview', methods=['GET', 'POST'])
def preview():
    # Read the existing script content from the file
    with open('scripts/script.js', 'r') as file:
        script_content = file.read()
    # HTML content to be displayed
    html_content = "&lt;p&gt;This is a dynamic HTML content. It can include various elements, &lt;br /&gt;such as paragraphs, headings, lists, etc.&lt;/p&gt;"
    return render_template('preview.html', html_content=html_content, script_content=script_content)

@app.route('/edit_script', methods=['GET', 'POST'])
def edit_script():
    if request.method == 'POST':
        selected_file = request.files['script_file']
        if selected_file and selected_file.filename.endswith('.js'):
            script_content = selected_file.read().decode('utf-8')

            # Path to the script file
            script_dir = 'scripts/'
            backup_file = f"scripts/script_backup_{datetime.datetime.now().strftime('%Y%m%d%H%M%S')}.js"
            script_path = os.path.join(script_dir, selected_file.filename)
            script_files = []
            for filename in os.listdir(script_dir):
                if filename.endswith('.js'):
                    with open(os.path.join(script_dir, filename), 'r') as file:
                        script_files.append(file.read())

            shutil.copy(script_path, backup_file)

            return render_template('edit_script.html', script_files=script_files, script_content=script_content)

    # Read all JavaScript files from the 'scripts/' directory
    script_dir = 'scripts/'
    script_files = []
    for filename in os.listdir(script_dir):
        if filename.endswith('.js'):
            with open(os.path.join(script_dir, filename), 'r') as file:
                script_files.append(file.read())

    return render_template('edit_script.html', script_files=script_files)

script_file = "scripts/script.js"

@app.route('/save_script', methods=['POST'])
def save_script():
    # Retrieve the updated script content from the form data
    updated_script = request.form.get('script_content')
    # Write the updated script content to the file
    with open(script_file, 'w') as file:
        file.write(updated_script)
    return 'Script updated successfully.'

if __name__ == '__main__':
    app.run(debug=True, port=5000, host='0.0.0.0')

This code sets up routes for different pages, such as the index page (/), a plain HTML page (/NOTES), preview page (/preview), and the script editor page (/edit_script). It also includes a route for saving the updated script content (/save_script).

Ensure that you have the necessary HTML templates (index.html, NOTES.html, preview.html, edit_script.html) in a templates/ directory and the required CSS and JavaScript files for styling and functionality.

When you run this Flask application, it will start a development server on http://localhost:5000/, allowing you to access and interact with the different pages and functionality provided by the routes.
User
I want it to open a scripts/*.js and save it as scripts/script.js  Then allow it to be viewed or edited . It gives me no list from scripts/
ChatGPT

To open and save a specific JavaScript file from the scripts/ directory as scripts/script.js, you need to modify the code accordingly. Here's an updated version of the Flask application that accomplishes this:

python
from flask import Flask, render_template, request
import datetime
import shutil
import os

app = Flask(__name__)

script_dir = 'scripts/'
script_file = os.path.join(script_dir, 'script.js')

@app.route('/')
def index():
    return render_template('index.html')

@app.route('/NOTES')
def plain_html():
    return render_template('NOTES.html')

@app.route('/preview')
def preview():
    # Read the existing script content from the file
    with open(script_file, 'r') as file:
        script_content = file.read()
    # HTML content to be displayed
    html_content = "&lt;p&gt;This is a dynamic HTML content. It can include various elements, &lt;br /&gt;such as paragraphs, headings, lists, etc.&lt;/p&gt;"
    return render_template('preview.html', html_content=html_content, script_content=script_content)

@app.route('/edit_script', methods=['GET', 'POST'])
def edit_script():
    if request.method == 'POST':
        selected_file = request.files['script_file']
        if selected_file and selected_file.filename.endswith('.js'):
            script_content = selected_file.read().decode('utf-8')

            # Write the updated script content to the file
            with open(script_file, 'w') as file:
                file.write(script_content)

    script_files = []
    for filename in os.listdir(script_dir):
        if filename.endswith('.js'):
            with open(os.path.join(script_dir, filename), 'r') as file:
                script_files.append(file.read())

    return render_template('edit_script.html', script_files=script_files)

@app.route('/save_script', methods=['POST'])
def save_script():
    # Retrieve the updated script content from the form data
    updated_script = request.form.get('script_content')
    # Write the updated script content to the file
    with open(script_file, 'w') as file:
        file.write(updated_script)
    return 'Script updated successfully.'

if __name__ == '__main__':
    app.run(debug=True, port=5000, host='0.0.0.0')

In this updated code, the script_dir variable is set to the 'scripts/' directory, and the script_file variable is set to 'scripts/script.js'.

When opening the script for preview (/preview route), it reads the content of script_file instead of a hardcoded path.

In the edit_script() function, after saving the uploaded file's content to script_file, it reloads the list of script files from the script_dir to update the available options.

Ensure that you have the necessary HTML templates (index.html, NOTES.html, preview.html, edit_script.html) in a templates/ directory and the required CSS and JavaScript files for styling and functionality.

Now, when you run the Flask application, it will open and save JavaScript files in the scripts/ directory as scripts/script.js. The /preview route will display the content of scripts/script.js, and the /edit_script route will allow you to select a JavaScript file from the scripts/ directory, save it as scripts/script.js, and display the list of available script files for editing.
User
Method Not Allowed
The method is not allowed for the requested URL.
ChatGPT

The "Method Not Allowed" error typically occurs when you're trying to access a URL using an HTTP method that is not allowed for that route. In your Flask application, this error may occur if you're trying to access a route using an incorrect HTTP method.

Here are a few steps to troubleshoot and resolve the "Method Not Allowed" error:

    Verify the HTTP method: Check the route and the HTTP method you're using to access it. Ensure that you're using the correct HTTP method (e.g., GET, POST) that is allowed for that specific route. Double-check the route definition in your Flask application and compare it with the method you're using to access it.

    Check the route decorators: Make sure that the route you're trying to access is properly decorated with the correct HTTP methods. For example, if you're trying to use the POST method to access a route, ensure that the route is decorated with @app.route('/your-route', methods=['POST']).

    Clear browser cache: Sometimes, caching issues can cause the browser to use incorrect or outdated information. Clear your browser cache and try accessing the URL again.

    Check for any middleware or firewalls: If you're using any middleware or firewalls in your Flask application, review their configurations to ensure they're not blocking the HTTP method you're trying to use.

By following these steps, you should be able to identify and resolve the "Method Not Allowed" error in your Flask application.
User
I have many files in scripts/     I backup all my files .  What I need is to access them. I want to choose one from a list then save it as scripts/script.js    That way I can view and edit the file
ChatGPT

Apologies for the confusion. To access and choose a JavaScript file from a list in the scripts/ directory, and then save it as scripts/script.js for viewing and editing, you can modify the edit_script() function as follows:

python
from flask import Flask, render_template, request, redirect, url_for
import os
import shutil

app = Flask(__name__)

script_dir = 'scripts/'
script_file = os.path.join(script_dir, 'script.js')

@app.route('/')
def index():
    return render_template('index.html')

@app.route('/NOTES')
def plain_html():
    return render_template('NOTES.html')

@app.route('/preview')
def preview():
    with open(script_file, 'r') as file:
        script_content = file.read()
    html_content = "&lt;p&gt;This is a dynamic HTML content. It can include various elements, such as paragraphs, headings, lists, etc.&lt;/p&gt;"
    return render_template('preview.html', html_content=html_content, script_content=script_content)

@app.route('/edit_script', methods=['GET', 'POST'])
def edit_script():
    if request.method == 'POST':
        selected_file = request.form['script_file']
        if selected_file.endswith('.js'):
            selected_file_path = os.path.join(script_dir, selected_file)
            shutil.copy(selected_file_path, script_file)
            return redirect(url_for('edit_script'))

    script_files = []
    for filename in os.listdir(script_dir):
        if filename.endswith('.js'):
            script_files.append(filename)

    return render_template('edit_script.html', script_files=script_files)

@app.route('/save_script', methods=['POST'])
def save_script():
    updated_script = request.form['script_content']
    with open(script_file, 'w') as file:
        file.write(updated_script)
    return 'Script updated successfully.'

if __name__ == '__main__':
    app.run(debug=True, port=5000, host='0.0.0.0')

In this updated code:

    The edit_script() function allows users to choose a JavaScript file from a list in the scripts/ directory. When a file is selected and the form is submitted, it copies the selected file to scripts/script.js using shutil.copy().

    The script_files list is populated with the names of JavaScript files present in the scripts/ directory.

    The &lt;option&gt; elements for the script files are dynamically generated in the edit_script.html template using a Jinja loop.

    After selecting a file and submitting the form, the function redirects back to the edit_script() route to update the list of available script files.

Now, you can access the /edit_script route to choose a JavaScript file from the list, and it will be saved as scripts/script.js. You can then view and edit the selected file by accessing the /preview route.
User
Method Not Allowed
The method is not allowed for the requested URL.
ChatGPT

I apologize for the inconvenience. The "Method Not Allowed" error typically occurs when the HTTP method used to access a URL is not allowed for that specific route.

In the code provided earlier, the "Method Not Allowed" error could occur if you're trying to access the /edit_script route using an HTTP method other than POST. The /edit_script route is intended to handle POST requests for selecting a JavaScript file.

To resolve the issue, make sure you're using the correct HTTP method when accessing the /edit_script route. You can modify your code to explicitly allow both GET and POST methods for the /edit_script route by updating the methods parameter in the route decorator. Here's an example:

python
@app.route('/edit_script', methods=['GET', 'POST'])
def edit_script():
    # Rest of the code

With this change, the /edit_script route will accept both GET and POST requests, allowing you to access the route for selecting a JavaScript file.

Ensure that you update any corresponding form or link in your HTML template to use the correct method when interacting with the /edit_script route.

If you're still encountering the "Method Not Allowed" error after making these adjustments, please provide the specific URL and method you're using, as well as the corresponding route definition and any relevant HTML code. This information will help further troubleshoot the issue.
User
Method Not Allowed
The method is not allowed for the requested URL   same thing 
ChatGPT

I apologize for the confusion. To further troubleshoot the "Method Not Allowed" error, please ensure the following:

    Check the HTTP method: Confirm that you're using the correct HTTP method (e.g., GET, POST) when accessing the URL. Make sure it matches the allowed methods specified in the route decorator.

    Verify the URL: Double-check that the URL you're accessing matches the route definition in your Flask application. Ensure that there are no typos or incorrect paths.

    Clear browser cache: Clear your browser cache to eliminate any potential caching issues. Sometimes, the browser may cache previous responses, leading to the "Method Not Allowed" error.

    Inspect route decorators: Review the route decorators for the relevant route. Ensure that the correct HTTP methods are specified in the methods parameter of the decorator. For example, if you need to handle both GET and POST methods, use methods=['GET', 'POST'] in the decorator.

    Verify the form action or link: If you're encountering the error while submitting a form or following a link, check that the form's action attribute or the link's href attribute points to the correct URL and uses the appropriate HTTP method.

If you've confirmed these aspects and are still experiencing the error, please provide the relevant route definition, the URL you're trying to access, and any corresponding HTML code. This additional information will help in identifying the cause of the "Method Not Allowed" error.
User
preview .html                             &lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;HTML Viewer&lt;/title&gt;
    &lt;script src="https://cdn.skypack.dev/dat.gui@0.7.7"&gt;&lt;/script&gt;
    {% for script_file in script_files %}
        &lt;script&gt;
            {{ script_file | safe }}
        &lt;/script&gt;
    {% endfor %}

    &lt;style type="text/css"&gt;
        html{
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        
        body {
            margin: 0;
            padding: 0;
            color: #fff;
            background-color: #000;
        }
        
        canvas {
            -webkit-tap-highlight-color: transparent;
            tap-highlight-color: transparent;
            -webkit-user-select: none;
            user-select: none;
            cursor: pointer;
        }
        &lt;/style&gt;   
&lt;/head&gt;
&lt;body&gt;
    &lt;canvas id="canvas"&gt;&lt;/canvas&gt;
    &lt;div id="output"&gt;
        {{ html_content | safe }}
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
ChatGPT

The preview.html template you provided seems to be missing a script block for the main JavaScript logic. Here's an updated version of the template that includes the necessary script block:

html
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;HTML Viewer&lt;/title&gt;
    &lt;script src="https://cdn.skypack.dev/dat.gui@0.7.7"&gt;&lt;/script&gt;
    {% for script_file in script_files %}
        &lt;script src="{{ script_file }}"&gt;&lt;/script&gt;
    {% endfor %}

    &lt;style type="text/css"&gt;
        html {
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        
        body {
            margin: 0;
            padding: 0;
            color: #fff;
            background-color: #000;
        }
        
        canvas {
            -webkit-tap-highlight-color: transparent;
            tap-highlight-color: transparent;
            -webkit-user-select: none;
            user-select: none;
            cursor: pointer;
        }
    &lt;/style&gt;
    
    &lt;script&gt;
        // Add your JavaScript logic here
        // This script block will contain the main code for rendering and interacting with the canvas
        // You can customize it based on your requirements
        window.onload = function() {
            // Your code here
        }
    &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;canvas id="canvas"&gt;&lt;/canvas&gt;
    &lt;div id="output"&gt;
        {{ html_content | safe }}
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;

In this updated template, the {% for script_file in script_files %} loop is used to dynamically generate &lt;script&gt; tags for each JavaScript file in the script_files list. The src attribute of the &lt;script&gt; tag points to the corresponding script file.

Additionally, the script block after the &lt;style&gt; block is where you can add your main JavaScript logic. This is where you can write the code for rendering and interacting with the canvas.

Make sure you pass the script_files variable from the Flask route to the template to populate the list of JavaScript files.

With this updated template, the JavaScript files specified in the script_files list will be included in the HTML page, allowing you to run and interact with them in the browser.
User
THis is preview.html it should load the script from scripts/script.js
ChatGPT

Apologies for the confusion. If you want the preview.html template to specifically load the script from scripts/script.js, you can modify the template as follows:

html
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;HTML Viewer&lt;/title&gt;
    &lt;script src="https://cdn.skypack.dev/dat.gui@0.7.7"&gt;&lt;/script&gt;
    &lt;script src="{{ url_for('static', filename='scripts/script.js') }}"&gt;&lt;/script&gt;

    &lt;style type="text/css"&gt;
        html {
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        
        body {
            margin: 0;
            padding: 0;
            color: #fff;
            background-color: #000;
        }
        
        canvas {
            -webkit-tap-highlight-color: transparent;
            tap-highlight-color: transparent;
            -webkit-user-select: none;
            user-select: none;
            cursor: pointer;
        }
    &lt;/style&gt;
    
    &lt;script&gt;
        // Add your JavaScript logic here
        // This script block will contain the main code for rendering and interacting with the canvas
        // You can customize it based on your requirements
        window.onload = function() {
            // Your code here
        }
    &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;canvas id="canvas"&gt;&lt;/canvas&gt;
    &lt;div id="output"&gt;
        {{ html_content | safe }}
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;

In this updated template, the script is loaded using the url_for() function, which generates the correct URL for the scripts/script.js file. The url_for() function retrieves the static file from the static folder, which is the default folder for static files in Flask.

Ensure that the scripts/script.js file exists in the static folder within your Flask application's directory structure. If the file is located elsewhere, adjust the url_for() function accordingly.

Now, when you render the preview.html template, it will load the scripts/script.js file, allowing you to execute and interact with the JavaScript code within the HTML page.
User
&lt;script&gt;
        // Add your JavaScript logic here
        // This script block will contain the main code for rendering and interacting with the canvas
        // You can customize it based on your requirements
        window.onload = function() {
            // Your code here
        }
    &lt;/script&gt;                    What is this ??? 
ChatGPT

The provided script block is a placeholder for your custom JavaScript code. It is where you can add your own logic, functions, and event handlers to interact with the HTML elements, manipulate the canvas, or perform any other desired operations.

Here's a breakdown of the script block:

javascript
// Add your JavaScript logic here
// This script block will contain the main code for rendering and interacting with the canvas
// You can customize it based on your requirements
window.onload = function() {
    // Your code here
}

    window.onload: This event handler function executes when the HTML document and its associated resources (stylesheets, images, etc.) have finished loading. It ensures that your JavaScript code runs only when the entire page has loaded.

    // Your code here: This is where you can insert your custom JavaScript code. You can define functions, create variables, manipulate the DOM, interact with the canvas, handle events, or perform any other operations you need.

For example, you can use the script block to create and render shapes on the canvas, handle mouse or keyboard events, fetch data from APIs, perform calculations, or implement any other desired functionality.

To customize the behavior of your web page, you can modify the script block by adding your specific JavaScript code within the window.onload function.

Please replace the comment // Your code here with your own JavaScript code that reflects the desired behavior you want to achieve in your application.
User
All I want to achieve is in scripts/script.js   ??
ChatGPT

If you want to load and execute the JavaScript code from the scripts/script.js file without adding additional custom code in the HTML template, you can modify the preview.html template as follows:

html
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;HTML Viewer&lt;/title&gt;
    &lt;script src="https://cdn.skypack.dev/dat.gui@0.7.7"&gt;&lt;/script&gt;
    &lt;script src="{{ url_for('static', filename='scripts/script.js') }}"&gt;&lt;/script&gt;

    &lt;style type="text/css"&gt;
        html {
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        
        body {
            margin: 0;
            padding: 0;
            color: #fff;
            background-color: #000;
        }
        
        canvas {
            -webkit-tap-highlight-color: transparent;
            tap-highlight-color: transparent;
            -webkit-user-select: none;
            user-select: none;
            cursor: pointer;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;canvas id="canvas"&gt;&lt;/canvas&gt;
    &lt;div id="output"&gt;
        {{ html_content | safe }}
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;

This updated template removes the empty script block and instead loads the JavaScript code directly from the scripts/script.js file using the script tag with the src attribute. The url_for() function is used to generate the correct URL for the static file.

Ensure that the scripts/script.js file exists in the static folder within your Flask application's directory structure. If the file is located elsewhere, adjust the url_for() function accordingly.

With this modification, the scripts/script.js file will be loaded and executed in the HTML page, allowing you to achieve your desired functionality without requiring additional code in the HTML template.
User
The whole purpose is to load and edit different javascripts ( scripts/*.js  for testing  
ChatGPT

Apologies for the confusion. If you want to dynamically load and edit different JavaScript files from the scripts/ directory, you can modify the edit_script() function and the edit_script.html template as follows:

python
import os

# ... existing code ...

@app.route('/edit_script', methods=['GET', 'POST'])
def edit_script():
    if request.method == 'POST':
        selected_file = request.form['script_file']
        if selected_file.endswith('.js'):
            selected_file_path = os.path.join(script_dir, selected_file)
            shutil.copy(selected_file_path, script_file)
            return redirect(url_for('edit_script'))

    script_files = []
    for filename in os.listdir(script_dir):
        if filename.endswith('.js'):
            script_files.append(filename)

    return render_template('edit_script.html', script_files=script_files)

# ... existing code ...

In the edit_script() function, we retrieve the selected JavaScript file from the form submission and copy it to script.js using shutil.copy(). Then, we redirect back to the edit_script route to update the list of available script files.

Here's an example edit_script.html template that allows you to select and edit different JavaScript files:

html
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Edit Script&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Edit Script&lt;/h1&gt;
    &lt;form method="POST" action="{{ url_for('edit_script') }}"&gt;
        &lt;label for="script_file"&gt;Select a JavaScript file:&lt;/label&gt;
        &lt;select name="script_file" id="script_file"&gt;
            {% for script_file in script_files %}
                &lt;option value="{{ script_file }}"&gt;{{ script_file }}&lt;/option&gt;
            {% endfor %}
        &lt;/select&gt;
        &lt;br&gt;
        &lt;input type="submit" value="Load Script"&gt;
    &lt;/form&gt;
    &lt;hr&gt;
    &lt;h2&gt;Edit the selected script:&lt;/h2&gt;
    &lt;form method="POST" action="{{ url_for('save_script') }}"&gt;
        &lt;textarea name="script_content" rows="10" cols="50"&gt;{{ script_content }}&lt;/textarea&gt;
        &lt;br&gt;
        &lt;input type="submit" value="Save Script"&gt;
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;

In this edit_script.html template, we generate a dropdown list (&lt;select&gt;) of the available JavaScript files using a loop. When a file is selected and the form is submitted, the route will handle the selection and redirect back to the edit_script route to update the list.

Below the file selection section, we provide a text area (&lt;textarea&gt;) where you can edit the content of the selected script. When the form is submitted, it will call the save_script() route to save the updated script content.

Make sure to adjust the file paths and URLs based on your directory structure and Flask setup.

With these modifications, you can select and edit different JavaScript files from the scripts/ directory, and the updated content will be saved to scripts/script.js for further viewing and editing.
User
This still does not let me choose a javascript file from scripts/*.js    Why cant you do that ?
ChatGPT

I apologize for the confusion. It seems I misunderstood your requirements earlier. To allow the selection of JavaScript files from the scripts/ directory, you can modify the edit_script() function and the edit_script.html template as follows:

python
import os

# ... existing code ...

@app.route('/edit_script', methods=['GET', 'POST'])
def edit_script():
    if request.method == 'POST':
        selected_file = request.form['script_file']
        if selected_file.endswith('.js'):
            selected_file_path = os.path.join(script_dir, selected_file)
            shutil.copy(selected_file_path, script_file)
            return redirect(url_for('edit_script'))

    script_files = []
    for filename in os.listdir(script_dir):
        if filename.endswith('.js'):
            script_files.append(filename)

    return render_template('edit_script.html', script_files=script_files)

# ... existing code ...

In the modified edit_script() function, we list all the JavaScript files in the scripts/ directory and add them to the script_files list. This allows us to populate the dropdown list in the edit_script.html template with the available JavaScript files.

Here's an example edit_script.html template that enables the selection of JavaScript files:

html
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Edit Script&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Edit Script&lt;/h1&gt;
    &lt;form method="POST" action="{{ url_for('edit_script') }}"&gt;
        &lt;label for="script_file"&gt;Select a JavaScript file:&lt;/label&gt;
        &lt;select name="script_file" id="script_file"&gt;
            {% for script_file in script_files %}
                &lt;option value="{{ script_file }}"&gt;{{ script_file }}&lt;/option&gt;
            {% endfor %}
        &lt;/select&gt;
        &lt;br&gt;
        &lt;input type="submit" value="Load Script"&gt;
    &lt;/form&gt;
    &lt;hr&gt;
    &lt;h2&gt;Edit the selected script:&lt;/h2&gt;
    &lt;form method="POST" action="{{ url_for('save_script') }}"&gt;
        &lt;textarea name="script_content" rows="10" cols="50"&gt;{{ script_content }}&lt;/textarea&gt;
        &lt;br&gt;
        &lt;input type="submit" value="Save Script"&gt;
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;

In this updated template, the &lt;select&gt; element is populated with the available JavaScript files (script_files) using a loop. When a file is selected and the form is submitted, the selected file is copied to scripts/script.js, and the page is redirected back to the edit_script route.

Please ensure that the file paths, directory structure, and Flask setup are adjusted according to your requirements.

With these modifications, you should be able to select different JavaScript files from the scripts/ directory and load them for editing in the edit_script route.
User
when you choose the javascript file it does not load in the textarea
ChatGPT

Apologies for the oversight. To ensure that the selected JavaScript file is loaded into the textarea for editing, you need to modify the edit_script() route to read the content of the selected file and pass it to the template. Here's an updated version of the code:

python
import os

# ... existing code ...

@app.route('/edit_script', methods=['GET', 'POST'])
def edit_script():
    if request.method == 'POST':
        selected_file = request.form['script_file']
        if selected_file.endswith('.js'):
            selected_file_path = os.path.join(script_dir, selected_file)
            shutil.copy(selected_file_path, script_file)
            with open(selected_file_path, 'r') as file:
                script_content = file.read()
            return render_template('edit_script.html', script_files=script_files, script_content=script_content)

    script_files = []
    for filename in os.listdir(script_dir):
        if filename.endswith('.js'):
            script_files.append(filename)

    return render_template('edit_script.html', script_files=script_files)

# ... existing code ...

In this updated code, after copying the selected JavaScript file to scripts/script.js, we also read the content of the selected file using open() and file.read(). Then we pass the script_content variable to the edit_script.html template along with the script_files list.

Ensure that the file paths, directory structure, and Flask setup are adjusted accordingly.

With this modification, when you select a JavaScript file from the dropdown list and submit the form, the content of the selected file will be loaded into the textarea for editing in the edit_script.html template.
User
local variable 'script_files' referenced before assignment
ChatGPT

Apologies for the error. The script_files variable needs to be defined outside the if statement to ensure it's accessible in both branches of the code. Here's the corrected code:

python
import os

# ... existing code ...

@app.route('/edit_script', methods=['GET', 'POST'])
def edit_script():
    script_files = []
    for filename in os.listdir(script_dir):
        if filename.endswith('.js'):
            script_files.append(filename)

    if request.method == 'POST':
        selected_file = request.form['script_file']
        if selected_file.endswith('.js'):
            selected_file_path = os.path.join(script_dir, selected_file)
            shutil.copy(selected_file_path, script_file)
            with open(selected_file_path, 'r') as file:
                script_content = file.read()
            return render_template('edit_script.html', script_files=script_files, script_content=script_content)

    return render_template('edit_script.html', script_files=script_files)

# ... existing code ...

Now the script_files variable is defined before the if statement and can be accessed in both the if and return branches of the code. This ensures that the variable is available when rendering the template.

Please note that the above code assumes that script_dir is a defined variable representing the directory path of the JavaScript files.

With this update, the script_files variable should be accessible and prevent the "local variable 'script_files' referenced before assignment" error.
User
from flask import Flask, render_template, request, redirect, url_for
import datetime
import shutil
import os
app = Flask(__name__)
@app.route('/')
def index():
    return render_template('index.html')
@app.route('/NOTES')
def plain_html():
    return render_template('NOTES.html')
@app.route('/preview', methods=['GET', 'POST'])
def preview():
    script_files = []  # List to store the names of the JavaScript files

    # Read all JavaScript files from the 'scripts/' directory
    script_dir = 'scripts/'
    for filename in os.listdir(script_dir):
        if filename.endswith('.js'):
            script_path = os.path.join(script_dir, filename)
            with open(script_path, 'r') as file:
                script_content = file.read()
                script_files.append(script_content)

    # HTML content to be displayed
    html_content = "&lt;p&gt;This is a dynamic HTML content. It can include various elements, &lt;br /&gt;such as paragraphs, headings, lists, etc.&lt;/p&gt;"

    return render_template('preview.html', html_content=html_content, script_files=script_files)

@app.route('/edit_script', methods=['GET', 'POST'])
def edit_script():
    script_dir = "scripts/"
    script_files = []
    for filename in os.listdir(script_dir):
        if filename.endswith('.js'):
            script_files.append(filename)

    if request.method == 'POST':
        selected_file = request.form['script_file']
        if selected_file.endswith('.js'):
            selected_file_path = os.path.join(script_dir, selected_file)
            shutil.copy(selected_file_path, script_file)
            with open(selected_file_path, 'r') as file:
                script_content = file.read()
            return render_template('edit_script.html', script_files=script_files, script_content=script_content)

    return render_template('edit_script.html', script_files=script_files)


# Define the file path to store the script content
script_file = os.path.join(os.getcwd(), 'scripts', 'script.js')
@app.route('/save_script', methods=['POST'])
def save_script():
    # Retrieve the updated script content from the form data
    updated_script = request.form.get('script_content')
    # Write the updated script content to the file
    with open(script_file, 'w') as file:
        file.write(updated_script)
    return render_template('index.html')
if __name__ == '__main__':
   app.run(debug=True, port=5000)

This does not show the  scripts/script.js  in preview.html ???
ChatGPT

Apologies for the confusion. To ensure that the scripts/script.js file is loaded and displayed in the preview.html template, you need to make a small modification in the preview() route. Here's the corrected code:

python
from flask import Flask, render_template, request, redirect, url_for
import os

app = Flask(__name__)

@app.route('/')
def index():
    return render_template('index.html')

@app.route('/NOTES')
def plain_html():
    return render_template('NOTES.html')

@app.route('/preview', methods=['GET', 'POST'])
def preview():
    script_files = []  # List to store the names of the JavaScript files

    # Read all JavaScript files from the 'scripts/' directory
    script_dir = 'scripts/'
    for filename in os.listdir(script_dir):
        if filename.endswith('.js'):
            script_files.append(filename)

    # HTML content to be displayed
    html_content = "&lt;p&gt;This is a dynamic HTML content. It can include various elements, &lt;br /&gt;such as paragraphs, headings, lists, etc.&lt;/p&gt;"

    return render_template('preview.html', html_content=html_content, script_files=script_files)

# ... existing code ...

if __name__ == '__main__':
   app.run(debug=True, port=5000)

In the preview() route, we retrieve the list of JavaScript files in the scripts/ directory and pass it as the script_files variable to the preview.html template.

Make sure that the scripts/ directory contains the necessary JavaScript files.

With this modification, when you visit the /preview route, the scripts/script.js file should be available as script_files in the preview.html template, allowing you to display and interact with it.
User
@app.route('/preview', methods=['GET', 'POST'])
def preview():
    script_files = []  # List to store the names of the JavaScript files

    # Read all JavaScript files from the 'scripts/' directory
    script_dir = 'scripts/'
    for filename in os.listdir(script_dir):
        if filename.endswith('.js'):
            script_files.append(filename)

    # HTML content to be displayed
    html_content = "&lt;p&gt;This is a dynamic HTML content. It can include various elements, &lt;br /&gt;such as paragraphs, headings, lists, etc.&lt;/p&gt;"

    return render_template('preview.html', html_content=html_content, script_files=script_files)
I do not understand the listdir when I just want to see scripts/script.js  ??
ChatGPT

Apologies for the confusion. If you only want to display the scripts/script.js file in the preview.html template, you can modify the code as follows:

python
@app.route('/preview', methods=['GET', 'POST'])
def preview():
    script_file = 'scripts/script.js'  # Path to the script file

    # Check if the script file exists
    if os.path.isfile(script_file):
        # Read the content of the script file
        with open(script_file, 'r') as file:
            script_content = file.read()
    else:
        script_content = 'No script file found'

    # HTML content to be displayed
    html_content = "&lt;p&gt;This is a dynamic HTML content. It can include various elements, &lt;br /&gt;such as paragraphs, headings, lists, etc.&lt;/p&gt;"

    return render_template('preview.html', html_content=html_content, script_content=script_content)

In this modified code, we directly specify the path to the scripts/script.js file using the script_file variable. We then check if the file exists using os.path.isfile(). If the file exists, we read its content using open() and store it in the script_content variable. If the file doesn't exist, we set script_content to indicate that no script file was found.

Ensure that the scripts/script.js file exists in the specified location.

With this modification, when you visit the /preview route, the content of the scripts/script.js file will be displayed in the preview.html template.
User
I want to start a log file to find problems ?? 
ChatGPT

To start a log file in your Flask application, you can use the built-in logging module in Python. Here's an example of how you can configure logging in your Flask app:

python
import logging
from logging.handlers import RotatingFileHandler
from flask import Flask

app = Flask(__name__)

# Configure logging
log_file = 'app.log'  # Path to the log file

# Create a rotating file handler to manage log files
handler = RotatingFileHandler(log_file, maxBytes=1024 * 1024, backupCount=10)
handler.setLevel(logging.INFO)

# Create a log formatter
formatter = logging.Formatter('%(asctime)s - %(levelname)s - %(message)s')
handler.setFormatter(formatter)

# Add the log handler to the Flask app
app.logger.addHandler(handler)

# ... existing routes and code ...

if __name__ == '__main__':
    app.run(debug=True, port=5000)

In this example, we configure a rotating file handler (RotatingFileHandler) that will create a log file named app.log. The maxBytes argument specifies the maximum file size in bytes before it rotates to a new file, and backupCount defines the number of backup log files to keep.

We set the log level to logging.INFO to log messages at the INFO level and above. You can adjust the log level according to your needs.

Next, we create a log formatter using the logging.Formatter class. The formatter specifies the format of each log message, including the timestamp, log level, and message content.

Finally, we add the log handler (handler) to the Flask app's logger using app.logger.addHandler(handler). This ensures that any log messages generated by Flask or your application will be written to the log file.

You can use logging statements throughout your application to record important information, warnings, and errors. For example:

python
@app.route('/example')
def example():
    app.logger.info('Processing example route')
    # ... your code ...
    return 'Example route'

In the above example, the log statement app.logger.info('Processing example route') logs an INFO level message indicating that the example route is being processed.

Remember to adjust the log file path (log_file) and customize the logging levels and messages to fit your application's needs.

With this setup, you can start logging messages to the specified log file (app.log) and use it to track and troubleshoot any issues in your Flask application.
User
format with date and time 
ChatGPT

To format the log messages with date and time, you can modify the log formatter by adding a date and time format specifier. Here's an updated example:

python
import logging
from logging.handlers import RotatingFileHandler
from flask import Flask

app = Flask(__name__)

# Configure logging
log_file = 'app.log'  # Path to the log file

# Create a rotating file handler to manage log files
handler = RotatingFileHandler(log_file, maxBytes=1024 * 1024, backupCount=10)
handler.setLevel(logging.INFO)

# Create a log formatter with date and time
formatter = logging.Formatter('%(asctime)s - %(levelname)s - %(message)s', '%Y-%m-%d %H:%M:%S')
handler.setFormatter(formatter)

# Add the log handler to the Flask app
app.logger.addHandler(handler)

# ... existing routes and code ...

if __name__ == '__main__':
    app.run(debug=True, port=5000)

In the updated code, we modified the log formatter creation to include a date and time format specifier in the logging.Formatter constructor. The second argument '%Y-%m-%d %H:%M:%S' specifies the format for the date and time. You can adjust this format according to your preference.

With this change, the log messages will now include the date and time information in the specified format.

For example, a log message would appear like this:
2022-01-01 12:34:56 - INFO - This is an example log message.

Feel free to customize the log message format and adjust the log file path (log_file) to suit your requirements.
User
how should this read ?                       from flask import Flask
# Configure logging
log_file = 'app.log'  # Path to the log file

# Create a rotating file handler to manage log files
handler = RotatingFileHandler(log_file, maxBytes=1024 * 1024, backupCount=10)
handler.setLevel(logging.INFO)

# Create a log formatter with date and time
formatter = logging.Formatter('%(asctime)s - %(levelname)s - %(message)s', '%Y-%m-%d %H:%M:%S')
handler.setFormatter(formatter)


app = Flask(__name__)
# Add the log handler to the Flask app
app.logger.addHandler(handler)
# Configure logging

# Create a rotating file handler to manage log files
handler = RotatingFileHandler(log_file, maxBytes=1024 * 1024, backupCount=10)
handler.setLevel(logging.INFO)

# Create a log formatter
formatter = logging.Formatter('%(asctime)s - %(levelname)s - %(message)s')
handler.setFormatter(formatter)

# Add the log handler to the Flask app
app.logger.addHandler(handler)
ChatGPT

Here's the corrected version of the code where the logging configuration is properly placed:

python
import logging
from logging.handlers import RotatingFileHandler
from flask import Flask

app = Flask(__name__)

# Configure logging
log_file = 'app.log'  # Path to the log file

# Create a rotating file handler to manage log files
handler = RotatingFileHandler(log_file, maxBytes=1024 * 1024, backupCount=10)
handler.setLevel(logging.INFO)

# Create a log formatter with date and time
formatter = logging.Formatter('%(asctime)s - %(levelname)s - %(message)s', '%Y-%m-%d %H:%M:%S')
handler.setFormatter(formatter)

# Add the log handler to the Flask app
app.logger.addHandler(handler)

# ... existing routes and code ...

if __name__ == '__main__':
    app.run(debug=True, port=5000)

In this corrected code, the logging configuration is placed before creating the Flask app instance. The log handler, formatter, and log file path are defined first.

Then, the log handler is added to the Flask app's logger (app.logger.addHandler(handler)), ensuring that log messages generated by Flask or your application will be written to the log file.

Make sure to adjust the log file path (log_file) according to your desired location.

With this modification, the logging configuration will be set up correctly in your Flask application.
User
Explain every step in detail , I also do not understand log levels
ChatGPT
2 / 2

Certainly! Here's a step-by-step explanation of the code and its components:

    Import necessary modules:

python
import logging
from logging.handlers import RotatingFileHandler
from flask import Flask

The code imports the logging module to handle logging, RotatingFileHandler from logging.handlers to manage log files, and the Flask class from the flask module.

    Set up log file path:

python
log_file = 'app.log'  # Path to the log file

The log_file variable specifies the path to the log file. You can modify this to define the desired location and filename for your log file.

    Create a rotating file handler:

python
handler = RotatingFileHandler(log_file, maxBytes=1024 * 1024, backupCount=10)
handler.setLevel(logging.INFO)

The RotatingFileHandler is used to manage log files. It rotates the log file when it reaches a certain size (maxBytes) and keeps a specified number of backup files (backupCount). In this example, the log file rotates when it reaches 1 MB, and a maximum of 10 backup files is maintained. The setLevel() method sets the log level for the handler. In this case, it's set to logging.INFO, which captures log messages at the INFO level and above.

    Create a log formatter with date and time:

python
formatter = logging.Formatter('%(asctime)s - %(levelname)s - %(message)s', '%Y-%m-%d %H:%M:%S')
handler.setFormatter(formatter)

The logging.Formatter is used to define the format of the log messages. The first argument is the format string, which specifies how the log message should appear. In this example, '%(asctime)s - %(levelname)s - %(message)s' formats the log message to include the date, time, log level, and message. The second argument specifies the date and time format. %Y-%m-%d %H:%M:%S represents the format as year-month-day hour:minute:second.

    Add the log handler to the Flask app:

python
app.logger.addHandler(handler)

The addHandler() method adds the log handler (handler) to the Flask app's logger (app.logger). This ensures that any log messages generated by Flask or your application will be written to the log file.

    Create the Flask app instance:

python
app = Flask(__name__)

The Flask class is used to create the Flask application instance.

    Define routes and other application code:

python
# ... existing routes and code ...

This is where you define your Flask routes and other application code.

    Run the Flask application:

python
if __name__ == '__main__':
    app.run(debug=True, port=5000)

This code block ensures that the Flask application runs only when the script is executed directly, not when imported as a module. It starts the Flask development server, enabling you to run the application locally. The debug=True parameter enables debug mode, which provides more detailed error messages during development. The port=5000 parameter sets the port number on which the server runs.

Regarding log levels:
Log levels determine the severity or importance of log messages. The commonly used log levels, in increasing order of severity, are:

    DEBUG: Detailed information for debugging purposes.
    INFO: General information messages to track the progress of the application.
    WARNING: Indication of potential issues or anomalies that don't necessarily disrupt the application's functionality.
    ERROR: Indication of errors or exceptional situations that may impact the application's functionality.
    CRITICAL: Indicates critical errors or severe problems that may cause the application to terminate.

By setting the log level, you control which messages are recorded based on their severity. In the code example, the log level for the handler is set to logging.INFO, which captures messages at the INFO level and above. This means that log messages with levels of INFO, WARNING, ERROR, and CRITICAL will be recorded in the log file. Messages with a lower level, such as DEBUG, won't be recorded.

You can adjust the log level based on your application's needs and the level of detail you want to capture in the log file.
User
What is the best way to show if you have a warning on a line of code ?
ChatGPT

When you encounter a warning in your code, the best way to display it depends on the context and purpose of your application. Here are a few commonly used approaches:

    Logging: You can use the logging module to record warnings. In Python, warnings can be captured using the warnings module and logged using the logging module. This allows you to control the level and format of warning messages. For example:

python
import logging
import warnings

# Set up logging
logging.basicConfig(filename='app.log', level=logging.WARNING)

# Capture and log warnings
warnings.warn('This is a warning message')
logging.warning('This is a warning message')

In this example, the warnings module is used to generate a warning message, and the logging module is used to log it. The basicConfig() function sets up the logging configuration, including the log file and log level. The warn() function generates a warning, and the warning() function logs the warning message.

    Console Output: If you want to display warnings directly to the console or terminal, you can use the print() function or the logging module with a suitable log level (e.g., logging.warning()). This approach is useful for debugging or providing real-time feedback during development.

    User Interface: If your application has a graphical user interface (GUI), you can display warnings in an appropriate manner. This could involve using pop-up dialog boxes, notifications, or dedicated warning panels. The specific approach will depend on the GUI framework or library you are using.

Choose the method that aligns with your application's design and the intended audience. It's important to provide clear and informative warning messages to help users understand and address potential issues in your application.
    </pre><!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<style>
canvas {
    border:1px solid #d3d3d3;
    background-color: #f1f1f1;
}
</style>
</head>
<body onload="startGame()">
<script>

var myGamePiece;
var myObstacles = [];
var myScore;

function startGame() {
    myGamePiece = new component(30, 30, "red", 10, 120);
    myGamePiece.gravity = 0.05;
    myScore = new component("30px", "Consolas", "black", 280, 40, "text");
    myGameArea.start();
}

var myGameArea = {
    canvas : document.createElement("canvas"),
    start : function() {
        this.canvas.width = 480;
        this.canvas.height = 270;
        this.context = this.canvas.getContext("2d");
        document.body.insertBefore(this.canvas, document.body.childNodes[0]);
        this.frameNo = 0;
        this.interval = setInterval(updateGameArea, 20);
        },
    clear : function() {
        this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
    }
}

function component(width, height, color, x, y, type) {
    this.type = type;
    this.score = 0;
    this.width = width;
    this.height = height;
    this.speedX = 0;
    this.speedY = 0;    
    this.x = x;
    this.y = y;
    this.gravity = 0;
    this.gravitySpeed = 0;
    this.update = function() {
        ctx = myGameArea.context;
        if (this.type == "text") {
            ctx.font = this.width + " " + this.height;
            ctx.fillStyle = color;
            ctx.fillText(this.text, this.x, this.y);
        } else {
            ctx.fillStyle = color;
            ctx.fillRect(this.x, this.y, this.width, this.height);
        }
    }
    this.newPos = function() {
        this.gravitySpeed += this.gravity;
        this.x += this.speedX;
        this.y += this.speedY + this.gravitySpeed;
        this.hitBottom();
    }
    this.hitBottom = function() {
        var rockbottom = myGameArea.canvas.height - this.height;
        if (this.y > rockbottom) {
            this.y = rockbottom;
            this.gravitySpeed = 0;
        }
    }
    this.crashWith = function(otherobj) {
        var myleft = this.x;
        var myright = this.x + (this.width);
        var mytop = this.y;
        var mybottom = this.y + (this.height);
        var otherleft = otherobj.x;
        var otherright = otherobj.x + (otherobj.width);
        var othertop = otherobj.y;
        var otherbottom = otherobj.y + (otherobj.height);
        var crash = true;
        if ((mybottom < othertop) || (mytop > otherbottom) || (myright < otherleft) || (myleft > otherright)) {
            crash = false;
        }
        return crash;
    }
}

function updateGameArea() {
    var x, height, gap, minHeight, maxHeight, minGap, maxGap;
    for (i = 0; i < myObstacles.length; i += 1) {
        if (myGamePiece.crashWith(myObstacles[i])) {
            return;
        } 
    }
    myGameArea.clear();
    myGameArea.frameNo += 1;
    if (myGameArea.frameNo == 1 || everyinterval(150)) {
        x = myGameArea.canvas.width;
        minHeight = 20;
        maxHeight = 200;
        height = Math.floor(Math.random()*(maxHeight-minHeight+1)+minHeight);
        minGap = 50;
        maxGap = 200;
        gap = Math.floor(Math.random()*(maxGap-minGap+1)+minGap);
        myObstacles.push(new component(10, height, "green", x, 0));
        myObstacles.push(new component(10, x - height - gap, "green", x, height + gap));
    }
    for (i = 0; i < myObstacles.length; i += 1) {
        myObstacles[i].x += -1;
        myObstacles[i].update();
    }
    myScore.text="SCORE: " + myGameArea.frameNo;
    myScore.update();
    myGamePiece.newPos();
    myGamePiece.update();
}

function everyinterval(n) {
    if ((myGameArea.frameNo / n) % 1 == 0) {return true;}
    return false;
}

function accelerate(n) {
    myGamePiece.gravity = n;
}
</script>
<br>
<button onmousedown="accelerate(-0.2)" onmouseup="accelerate(0.05)">ACCELERATE</button>
<p>Use the ACCELERATE button to stay in the air</p>
<p>How long can you stay alive?</p>
<button type="button"
onclick="document.getElementById('demo').innerHTML = Date()">
Click me to display Date and Time.</button>

<p id="demo"></p>

</body>
</html>
<!DOCTYPE html>
<html>
<head>
    <title>Outlined Image</title>
</head>
<body>
    <h1>Outlined Image</h1>
    Original:
    <img src="{{ image_orig }}" alt="original Image" style="width: 300px; height: auto;">&nbsp;&nbsp;&nbsp;
    Outlined:
    <img src="{{ image_path }}" alt="outlined Image" style="width: 300px; height: auto;">&nbsp;&nbsp;&nbsp;
    Blk-n-White:
    <img src="{{ image_path2 }}" alt="black_Image" style="width: 300px; height: auto;">
</body>
</html>
<!DOCTYPE html>
<html>
<head>
    <title>Overlay Text</title>
</head>
<body style="background-color: cadetblue;">
    <h1>Overlay Text Result</h1>
    <a href="{{ url_for('indexA') }}">HOME</a><br />
    <img src="{{ output_image_path }}" alt="Overlay Text Result">
</body>
</html>
<!DOCTYPE html>
<html>
<head>
    <title>HTML Viewer</title>
    <script src="https://cdn.skypack.dev/dat.gui@0.7.7"></script>
    {% for script_file in script_files %}
        <script>
            {{ script_file | safe }}
        </script>
    {% endfor %}

    <style type="text/css">
        html{
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        
        body {
            margin: 0;
            padding: 0;
            color: #fff;
            background-color: #000;
        }
        
        canvas {
            -webkit-tap-highlight-color: transparent;
            tap-highlight-color: transparent;
            -webkit-user-select: none;
            user-select: none;
            cursor: pointer;
        }
        </style>   
</head>
<body>
    <canvas id="canvas"></canvas>
    <div id="output">
        {{ html_content | safe }}
    </div>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
    <title>HTML Viewer</title>
    <script src="https://cdn.skypack.dev/dat.gui@0.7.7"></script>
    <script src="script.js"></script>
</head>
<body>
    <canvas id="canvas"></canvas>
    <div id="output">
        {{ html_content | safe }}
    </div>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
    <title>HTML Viewer</title>
    <!--script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r67/three.min.js"></script
https://zeptojs.com/
    -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <style>
        body{ background-color:bisque; }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>

    <script src="static/scripts/script.js"></script>
    <script>
        // Replace this with your actual AJAX request
        $.ajax({
            url: '/save_favicon',
            method: 'POST',
            contentType: 'application/json', // Set the content type to JSON
            data: JSON.stringify({ "image_data": imageData }), // Your JSON data here
            success: function(response) {
                console.log(response); // Handle the response from the server
            },
            error: function(xhr, textStatus, errorThrown) {
                console.error(xhr.responseText); // Handle errors
            }
        });
    </script>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
    <title>HTML Viewer</title>
</head>
<body>
    <h1>HTML Viewer</h1>
    <div id="output">
        {{ html_content | safe }}
    </div>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
    <title>HTML Viewer</title>
    <!--script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r67/three.min.js"></script
https://zeptojs.com/
    -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <style>
        body{ background-color:bisque; }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>

    <script src="static/scripts/two_canvas.js"></script>
    <script>
        // Replace this with your actual AJAX request
        $.ajax({
            url: '/save_favicon',
            method: 'POST',
            contentType: 'application/json', // Set the content type to JSON
            data: JSON.stringify({ "image_data": imageData }), // Your JSON data here
            success: function(response) {
                console.log(response); // Handle the response from the server
            },
            error: function(xhr, textStatus, errorThrown) {
                console.error(xhr.responseText); // Handle errors
            }
        });
    </script>
</body>
</html>
<!DOCTYPE html>
<html>
  <head>
    <title>Upload Images to Blend</title>
  </head>
  <body>
    <a style ="font-size: 24px;color: brown;" href="{{ url_for('index') }}">HOME</a>
    <h1>Upload Images to Blend</h1>
    <form action="{{ url_for('process_images') }}" method="post" enctype="multipart/form-data">
      <p>Select the first image:</p>
      <input type="file" name="image1"><br>
      <p>Select the second image:</p>
      <input type="file" name="image2"><br>
      <p>Select the third image:</p>
      <input type="file" name="image3"><br><br>
      <input type="submit" value="Process Images">
    </form>

  <br>
    <img src="{{ url_for('static', filename='images/image2.jpg') }}" alt="Example image"><br />
  </body>
</html>

<!-- app_utilities.html-->
<!DOCTYPE html>
<html>

<head>
    <title>Processing Text - txt and html files</title>
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/body.css') }}">
</head>

<body>
    <div class="wrapper">
        <div class="header">
            <h1>Processing Text - txt and html files</h1>
        </div>
        <div class="columns">
            <div class="column left">
<a style="font-size:30px;color:red;" href="{{ url_for('index') }}">HOME</a><br /><br /><br />
                <a href="{{ url_for('mk_text') }}">Create a Text File</a><br />
                <a href="{{ url_for('view_text') }}">View Text Files</a><br />
                <a href="{{ url_for('edit_file') }}">Edit Text File</a><br /><br />
                <a href="{{ url_for('format_file') }}">Format Text Files</a><br />
                <a href="{{ url_for('edit_formatted') }}">Edit Formatted Text</a><br /><br />
                <a href="{{ url_for('edit_template') }}">Edit a Template</a><br /><br />
                <a href="{{ url_for('the_description') }}">View FlaskAppArchitect Description</a><br />
                <a href="{{ url_for('edit_description') }}">Edit FlaskAppArchitect Description</a><br /><br />
                <a href="{{ url_for('enter_code') }}">Enter Code in codehints.txt</a><br />
                <a href="{{ url_for('search_code') }}">Search Code Hints</a><br /><br />

                <a href="{{ url_for('edit_css') }}">Edit Css Files</a><br />
                <a href="{{ url_for('terminal_index') }}">Terminal Emulator</a><br />
             
            </div>
            <div class="column right">
                <h2>Random Video</h2>
                <p>This will eventually be an instruction video on how to use this page</p><br />

                <video controls>
                    <source src="{{ video }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>

            </div>
        </div>
    </div>
</body>
</html>
{% extends 'base1.html' %}

{% block title %}
    Products
{% endblock %}

{% block content %}
    <h1>Products</h1>
    <table>
        <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Description</th>
            <th>Price</th>
            <th>Actions</th>
        </tr>
        {% for product in products %}
        <tr>
            <td>{{ product[0] }}</td>
            <td>{{ product[1] }}</td>
            <td>{{ product[2] }}</td>
            <td>{{ product[3] }}</td>
            <td>
                <a href="{{ url_for('edit_product', product_id=product[0]) }}">Edit</a>
                <form action="{{ url_for('delete_product', product_id=product[0]) }}" method="post">
                    <button type="submit">Delete</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </table>
    <hr>
    <h1>Add New Product</h1>
    <form action="/products" method="post">
        <label for="name">Name:</label>
        <input type="text" name="name"><br>
        <label for="description">Description:</label>
        <input type="text" name="description"><br>
        <label for="price">Price:</label>
        <input type="text" name="price"><br>
        <input type="submit" value="Add Product">
    </form>
{% endblock %}
<!DOCTYPE html>
<html>
<head>
    <title>Resize and Overlay Videos</title>
</head>
<body>
    <h1>Resize and Overlay Videos</h1>

    <video controls>
        <source src="{{ video_path }}" type="video/mp4">
        Your browser does not support the video tag.
    </video>
</body>
</html>
<!DOCTYPE html>
<html>
  <head>
    <title>Uploaded Image</title>
  </head>
  <body style="background-color:powderblue;">
    <center>
    <h1>Uploaded Image</h1>
    <a style="color:red;font-size: large;" href="{{ url_for('index') }}">RETURN HOME</a><br /><br /> 
    <img src="{{ url_for('static', filename='images/uploads/' + filename) }}" alt="Uploaded Image">
  </center>
  </body>
</html>

<!DOCTYPE html>
<html>
<head>
    <title>Search Results</title>
</head>
<body>
    <h1>Search Results</h1>
    <ul>
        {% for result in results %}
            <pre>{{ result }}</pre>
        {% endfor %}
    </ul>
</body>
</html>

<!DOCTYPE html>
<html>
  <head>
    <title>Uploaded Video</title>
  </head>
  <body>
    <h1>Uploaded Video</h1>
    <p>Here is your video:</p>
    <video width="480" height="480" controls>
      <source src="{{ url_for('static', filename=output_file) }}?timestamp={{ timestamp }}" type="video/mp4">
      Your browser does not support the video tag.
    </video>
    <p>Timestamp: {{ timestamp }}</p>
  </body>
</html>
<!-- app_utilities.html-->
<!DOCTYPE html>
<html>

<head>
    <title>Run Bash Command</title>
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
</head>

<body>
    <div class="wrapper">
        <div class="header">
            <h1>Run Bash Command</h1>
        </div>
            <div class="column left">
    <form action="{{ url_for('run_bash') }}" method="POST">
        <label for="bash_command">Enter Bash Command:</label>
        <textarea name="bash_command" id="bash_command" rows="4" cols="50"></textarea>
        <br>
        <button type="submit">Run Command</button>
    </form>
    
    <h2>Result:</h2>
    <pre>{{ result }}</pre>
</div>
            <div class="column right">
                <h2>Random Video</h2>
                <p>This will evenually be an instruction video on how to use this page</p><br />

                <video controls>
                    <source src="{{ video }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>

            </div>

        </div>
</body>
</html>

<!-- save_canvas_script.html-->
    <!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <script src="{{ url_for('static', filename=script_file) }}"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <title>JavaScript Script Editor</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.js"></script>
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }

        video {
            margin: 10px, auto;
            width: 250px;
            height: auto;
        }

        .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;

        }

        .header {
            width: 100%;
            padding: 20px;
            text-align: center;
        }

        .columns {
            display: flex;
            width: 80%;
            margin-top: 20px;
        }

        .column {
            padding: 20px;
            box-sizing: border-box;
        }

        .column.left {
            width: 30%;
            border: 1px solid #000;
        }

        .column.right {
            margin: 0 auto;
            /* Center horizontally */
            width: 60%;
            border: 1px solid #000;
            text-align: center;
            /* Center video vertically */
        }

        .column.right video {
            max-width: 100%;
            height: auto;
        }
    </style>
</head>


</head>

<body>
    <div class="wrapper">
        <div class="columns">
            <div class="column left">

                <head>
                    <h2>JavaScript Script Editor</h2>
                </head><br />
                <a style="font-size:30px;color:red;" href="{{ url_for('index') }}">HOME</a><br /><br /><br />

                <form action="/preview" method="POST">
                    <textarea id="editor" name="script"></textarea>
                    <br>
                    <input type="submit" value="Preview">
                </form><br />
                <hr>
                <form action="/preview_two_canvas" method="POST">
                    <textarea id="editor" name="script"></textarea>
                    <br>
                    <input type="submit" value="Preview Two">
                </form><br />


                <a href="/edit_script">Edit Script</a><br />
                <script>
                    var editor = ace.edit("editor");
                    editor.setTheme("ace/theme/monokai");
                    editor.getSession().setMode("ace/mode/javascript");
                </script><br /><br />
                <button id="captureButton">capture_video</button><br />
                <button id="capture_square">capture_square</button><br />
            </div>
            <div class="column right">
                <h2>Random Video</h2>
                <p>This will eventually be an instruction video on how to use this page</p><br />

                <video controls>
                    <source src="{{ video }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                <br /><br />>

                <audio id="audioPlayer" controls>
                    <source src="{{ url_for('static', filename='MUSIC/Blue_Mood-Robert_Munzinger.mp3') }}"
                        type="audio/mpeg">
                    Your browser does not support the audio element.
                </audio>
                <br />

                <script>
                    var audioPlayer = document.getElementById('audioPlayer');
                    var playButton = document.getElementById('playButton');

                    playButton.addEventListener('click', function () {
                        audioPlayer.play();
                    });
                </script><br />


                <script>
                    document.getElementById("captureButton").addEventListener("click", function () {
                        fetch('/capture_video')  // Replace with the correct route to capture video
                            .then(response => response.json())
                            .then(data => {
                                console.log(data.message);  // Print the response from the server
                            })
                            .catch(error => {
                                console.error(error);
                            });
                    });
                </script>

                <script>
                    document.getElementById("capture_square").addEventListener("click", function () {
                        fetch('/capture_square')  // Replace with the correct route to capture video
                            .then(response => response.json())
                            .then(data => {
                                console.log(data.message);  // Print the response from the server
                            })
                            .catch(error => {
                                console.error(error);
                            });
                    });
                </script>

            </div>
        </div>
    </div>
</body>

</html><!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <title>JavaScript Script Editor</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.js"></script>
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }

        video {
            margin: 10px, auto;
            width: 250px;
            height: auto;
        }

        .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;

        }

        .header {
            width: 100%;
            padding: 20px;
            text-align: center;
        }

        .columns {
            display: flex;
            width: 80%;
            margin-top: 20px;
        }

        .column {
            padding: 20px;
            box-sizing: border-box;
        }

        .column.left {
            width: 30%;
            border: 1px solid #000;
        }

        .column.right {
            margin: 0 auto;
            /* Center horizontally */
            width: 60%;
            border: 1px solid #000;
            text-align: center;
            /* Center video vertically */
        }

        .column.right video {
            max-width: 100%;
            height: auto;
        }
    </style>
</head>


</head>

<body>
    <div class="wrapper">
        <div class="columns">
            <div class="column left">

                <head>
                    <h2>JavaScript Script Editor</h2>
                </head><br />
                <a style="font-size:30px;color:red;" href="{{ url_for('index') }}">HOME</a><br /><br /><br />

                <form action="/preview" method="POST">
                    <textarea id="editor" name="script"></textarea>
                    <br>
                    <input type="submit" value="Preview">
                </form><br />
                <hr>
                <form action="/preview_two_canvas" method="POST">
                    <textarea id="editor" name="script"></textarea>
                    <br>
                    <input type="submit" value="Preview Two">
                </form><br />


                <a href="/edit_script">Edit Script</a><br />
                <script>
                    var editor = ace.edit("editor");
                    editor.setTheme("ace/theme/monokai");
                    editor.getSession().setMode("ace/mode/javascript");
                </script><br /><br />
                <button id="captureButton">capture_video</button><br />
                <button id="capture_square">capture_square</button><br />
            </div>
            <div class="column right">
                <h2>Random Video</h2>
                <p>This will eventually be an instruction video on how to use this page</p><br />

                <video controls>
                    <source src="{{ video }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                <br /><br />>

                <audio id="audioPlayer" controls>
                    <source src="{{ url_for('static', filename='MUSIC/Blue_Mood-Robert_Munzinger.mp3') }}"
                        type="audio/mpeg">
                    Your browser does not support the audio element.
                </audio>
                <br />

                <script>
                    var audioPlayer = document.getElementById('audioPlayer');
                    var playButton = document.getElementById('playButton');

                    playButton.addEventListener('click', function () {
                        audioPlayer.play();
                    });
                </script><br />


                <script>
                    document.getElementById("captureButton").addEventListener("click", function () {
                        fetch('/capture_video')  // Replace with the correct route to capture video
                            .then(response => response.json())
                            .then(data => {
                                console.log(data.message);  // Print the response from the server
                            })
                            .catch(error => {
                                console.error(error);
                            });
                    });
                </script>

                <script>
                    document.getElementById("capture_square").addEventListener("click", function () {
                        fetch('/capture_square')  // Replace with the correct route to capture video
                            .then(response => response.json())
                            .then(data => {
                                console.log(data.message);  // Print the response from the server
                            })
                            .catch(error => {
                                console.error(error);
                            });
                    });
                </script>

            </div>
        </div>
    </div>
</body>

</html><<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search by Row ID</title>
</head>
<body>
    <h1>Search Data by Row ID</h1>
    <form action="{{ url_for('search_database') }}" method="post">
        <label for="search_area">Select Search Area:</label>
        <select name="search_area" id="search_area" required>
            <option value="rowid">Row ID</option>
            <option value="description">Description</option>
            <option value="code">Code</option>
            <option value="keywords">Keywords</option>
        </select>
        <br>
        <label for="search_term">Enter Search Term:</label>
        <input type="text" name="search_term" id="search_term" required>
        <br>
        <button type="submit">Search</button>
    </form>
    <br>
    <a href="{{ url_for('indexdb') }}">Go back to the Index Page</a>
</body>
</html>
<!--search_chat.html-->
<!DOCTYPE html>
<html>
<head>
    <title>Search Chat</title>
</head>
<body>
    <h1>Search Results for "{{ query }}"</h1>
    
    <form method="GET" action="{{ url_for('search_chat') }}">
        <label for="search">Search:</label>
        <input type="text" id="search" name="q" value="{{ query }}">
        <input type="submit" value="Search">
    </form>
    
    <ul>
        {% for message in results %}
            <li>{{ message.content }}</li>
        {% endfor %}
    </ul>
</body>
</html>
<html>
<body>
    <center>
    <h1>Search</h1>
    <form action="/search_database" method="POST">
        <label for="search_term">Search Term:</label>
        <input type="text" id="search_term" name="search_term"><br>

        <label for="search_area">Search Area:</label>
        <select id="search_area" name="search_area">
            <option value="description">Description</option>
            <option value="code">Code Snippet</option>
            <option value="keywords">Keywords</option>
        </select><br>

        <input type="submit" value="Search">
    </form>
</center>
</body>
</html>
<!-- search_data.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Code Snippets</title>
 
    <link rel="stylesheet" href="static/css/flask.css">

</head>
<body>
    <h2>Search Code Snippets</h2>
    <form method="POST">
        <label for="keyword">Enter Keyword:</label>
        <input type="text" name="keyword">
        <input type="submit" value="Search">
    </form>
<ul>
   <li><a style="font-size: 24px;color: brown;" href="{{ url_for('index') }}">HOME</a></li><br />
    <li><a style="font-size: 24px;color: brown;" href="{{ url_for('data_page') }}">Data Page</a></li><br />
</ul>

</body>
</html><!-- search_results.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Results</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
   <style>
   body {

    background-image: url('../static/assets/MemMaker_background.png');
    background-repeat: repeat-y;
    background-size: contain;
    background-position: top;
    font-family: Arial, sans-serif;
}
</style>
</head>
<body>
    <h2>Search Again or Enter Data</h2>

    <ul>
        <li><a href="{{ url_for('search_code') }}">Back to Search</a></li>
        <li><a href="{{ url_for('enter_code') }}">Make a CodeHints Entry</a></li>
    </ul>
    <a style="font-size: 24px;color: brown;" href="{{ url_for('index') }}">HOME</a>


    <h1>Search Results for "{{ keyword }}"</h1>
    
    {% if code_blocks %}
        <ul>
            {% for block in code_blocks %}
                <li>
                    <strong>Timestamp and Code Block:</strong><br>
                    <pre>{{ block.code_block }}</pre>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No matching code blocks found.</p>
    {% endif %}
    
 
</body>
</html>
# -------- search.html ----------------
<!DOCTYPE html>
<html>
<head>
    <title>Search Page</title>
</head>
<body>
    <h1>Search</h1>
    <form method="POST" action="{{ url_for('search_text') }}">
        <input type="text" name="phrase" placeholder="Enter your search phrase">
        <button type="submit">Search</button>
    </form>
</body>
</html>


# -------- search.html ----------------
<!DOCTYPE html>
<html>
<head>
    <title>Search Page</title>
</head>
<body>
    <h1>Search</h1>
    <form method="POST" action="{{ url_for('search_txt') }}">
        <input type="text" name="phrase" placeholder="Enter your search phrase">
        <button type="submit">Search</button>
    </form>
</body>
</html>


<!DOCTYPE html>
<html>
  <head>
    <title>Select Border</title>
  </head>
  <body>
    <h1>Select Border</h1>
    <form method="POST" action="{{ url_for('apply_border') }}">
      <input type="hidden" name="image" value="{{ request.args.get('image') }}">
      {% for border in borders %}
        <img src="{{ url_for('static', filename='transparent_borders/'+border) }}" alt="{{ border }}" width="200" height="200">
        <input type="radio" name="border" value="{{ border }}">&nbsp;&nbsp;
      {% endfor %}
      <input type="submit" value="Apply Border">
    </form>
  </body>
</html>

<!--
  <html>
  <head>
    <title>Add Border</title>
    <style>
      .thumbnail-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
        max-width: 1000px; /* adjust this value to your liking */
        margin: 0 auto;
      }

      .thumbnail {
        flex-basis: calc(20% - 10px); /* adjust this value to change the number of columns */
        margin-bottom: 20px;
      }
    </style>
  </head>
  <body>
    <h1>Add Border</h1>
    <div class="thumbnail-container">
      {% for thumbnail in thumbnails %}
        <div class="thumbnail">
          <a href="{{ url_for('select_border', image=thumbnail.replace('thumbnail_', '')) }}">
            <img src="{{ url_for('static', filename='thumbnails/'+thumbnail) }}" alt="{{ thumbnail }}" style="border: 10px solid transparent; box-shadow: 0 0 0 10px #fff, 0 0 0 15px #000;">
          </a>
        </div>
      {% endfor %}
    </div>
  </body>
</html>
--><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Select by ID Form</title>
</head>
<body>
    <h1>Select Data by ID</h1>
    <form action="{{ url_for('handle_select_by_id') }}" method="post">
        <label for="search_term">Enter Row ID:</label>
        <input type="text" name="search_term" id="search_term" required>
        <button type="submit">Search</button>
    </form>
    <br>
    <p>Or</p>
    <a href="{{ url_for('indexdb') }}">Go back to the Index Page</a>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
    <title>Select a Text File</title>
</head>
<body>
    <h1>Select a Text File</h1>
    <ul>
        {% for filename in text_files %}
        <li><a href="{{ url_for('display_text', filename=filename) }}">{{ filename }}</a></li>
        {% endfor %}
    </ul>
</body>
</html>
<!DOCTYPE html>
<html>
  <head>
    <title>Select MP3</title>
 <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }
        video {
            margin: 10px, auto;
            width: 250px;
            height: auto;
        }

          .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;

        }

        .header {
            width: 100%;
            padding: 20px;
            text-align: center;
        }

        .columns {
            display: flex;
            width: 80%;
            margin-top: 20px;
        }

        .column {
            padding: 20px;
            box-sizing: border-box;
        }

        .column.left {
            width: 30%;
            border:    1px solid #000;
        }

        .column.right {
        margin: 0 auto; /* Center horizontally */
        width: 60%;
        border: 1px solid #000;
        text-align: center; /* Center video vertically */
    }

    .column.right video {
        max-width: 100%;
        height: auto;
    }
    </style>
</head>

<body>
    <h1>Select MP3</h1>
    <form action="{{ url_for('select_mp3') }}" method="POST">
      <label for="selected_mp3">Select an MP3 file:</label>
      <select name="selected_mp3" id="selected_mp3">
        {% for mp3_file in mp3_files %}
        <option value="{{ mp3_file }}">{{ mp3_file }}</option>
        {% endfor %}
      </select>
      <br>
      <input type="submit" value="Select">
    </form>
  </body>
</html>
<!DOCTYPE html>
<html>

<head>
    <title>Select Order</title>
</head>

<body>
    <h1>Select the order of the videos:</h1>
    <form method="POST" action="{{ url_for('select_order') }}">
        {% for thumbnail_path in thumbnail_paths %}
        <img src="{{ thumbnail_path }}" alt="Video thumbnail">
        <label for="order_{{ loop.index }}">Video {{ loop.index }}:</label>
        <input type="radio" name="order" value="{{ loop.index }}" id="order_{{ loop.index }}" required><br>
        {% endfor %}
        <input type="submit" value="Join Videos">
    </form>
</body>

</html><!-- index.html-->
<!DOCTYPE html>
<html>

<head>
    <title>Select and Play mp3</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }

        video {
            margin: 10px, auto;
            width: 200px;
            height: auto;
        }

        .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;

        }

        .header {
            width: 100%;
            padding: 20px;
            text-align: center;
        }

        .columns {
            display: flex;
            width: 80%;
            margin-top: 20px;
        }

        .column {
            padding: 20px;
            box-sizing: border-box;
        }

        .column.left {
            width: 30%;
            border: 1px solid #000;
        }

        .column.right {
            margin: 0 auto;
            /* Center horizontally */
            width: 60%;
            border: 1px solid #000;
            text-align: center;
            /* Center video vertically */
        }

        .column.right video {
            max-width: 100%;
            height: auto;
        }
    </style>
</head>

<body>
    <div class="wrapper">
        <div class="header">
            <h1>Select and Play mp3</h1>
            <a href="{{ url_for('index') }}">HOME</a> |
        </div>
        <div class="columns">
            <div class="column left">

                <h3>Links</h3><br />
                <a href="{{ url_for('app_utilities') }}">Application Utilities</a><br /><br />
                <a href="{{ url_for('image_processing') }}">Image Processing Links</a><br /><br />
                <a href="{{ url_for('format_file') }}">Format Text Files</a><br /><br />
                <a href="{{ url_for('view_text') }}">View Text Files</a><br /><br />
                <a href="{{ url_for('edit_file') }}">Edit File</a><br /><br />
                <a href="{{ url_for('edit_formatted') }}">Edit Formatted Text</a><br /><br />

                <a href="{{ url_for('edit_description') }}">Edit Description</a><br /><br />
              
            </div>
            <div class="column right">
    <form method="POST">
        <label for="selected_directory">Select a directory:</label>
        <select name="selected_directory" id="selected_directory">
            {% for directory in directories %}
                <option value="{{ directory }}">{{ directory }}</option>
            {% endfor %}
        </select>
        <button type="submit">Select Directory</button>
    </form>
    
    {% if selected_directory %}
        <form method="POST">
            <label for="mp3_file">Choose an MP3 file:</label>
            <select name="mp3_file" id="mp3_file">
                {% for mp3 in mp3_files %}
                    <option value="{{ mp3 }}">{{ mp3 }}</option>
                {% endfor %}
            </select>
            <button type="submit">Play</button>
        </form>
    {% endif %}
                <video controls>
                    <source src="{{ video }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
        </div>
    </div>
</body>

</html><!DOCTYPE html>
<html>
<head>
    <title>Select and Play MP3</title>
</head>
<body>
    <form method="GET">
        <label for="selected_directory">Select a directory:</label>
        <select name="selected_directory" id="selected_directory">
            {% for directory in directories %}
                <option value="{{ directory }}" {% if selected_directory == directory %}selected{% endif %}>{{ directory }}</option>
            {% endfor %}
        </select>
        <button type="submit">Select Directory</button>
    </form>
    
    <form method="POST">
        <label for="mp3_file">Choose an MP3 file:</label>
        <select name="mp3_file" id="mp3_file">
            {% for mp3 in mp3_files %}
                <option value="{{ mp3 }}">{{ mp3 }}</option>
            {% endfor %}
        </select>
        <button type="submit" id="play_button">Play</button>
    </form>
    
    <audio controls id="audio_player">
        <source src="" type="audio/mpeg" id="audio_source">
    </audio>

    <script>
        const directorySelect = document.getElementById('selected_directory');
        const playButton = document.getElementById('play_button');
        const mp3Select = document.getElementById('mp3_file');
        const audioPlayer = document.getElementById('audio_player');
        
        directorySelect.addEventListener('change', function() {
            const selectedDir = directorySelect.value;
            const updateUrl = `{{ url_for('select_playmp3') }}?selected_directory=${selectedDir}`;
            window.location.href = updateUrl;
        });

        playButton.addEventListener('click', function() {
            const selectedFile = mp3Select.value;
            const selectedDir = directorySelect.value;
            const filePath = `{{ url_for('static', filename='') }}${selectedDir}/${selectedFile}`;
            
            const audioSource = document.getElementById('audio_source');
            audioSource.src = filePath;
            
            audioPlayer.load();
            audioPlayer.play();
        });
    </script>
</body>
</html>
<!-- index.html-->
<!DOCTYPE html>
<html>

<head>
    <title>Select and Play mp3</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }

        video {
            margin: 10px, auto;
            width: 200px;
            height: auto;
        }

        .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;

        }

        .header {
            width: 100%;
            padding: 20px;
            text-align: center;
        }

        .columns {
            display: flex;
            width: 80%;
            margin-top: 20px;
        }

        .column {
            padding: 20px;
            box-sizing: border-box;
        }

        .column.left {
            width: 30%;
            border: 1px solid #000;
        }

        .column.right {
            margin: 0 auto;
            /* Center horizontally */
            width: 60%;
            border: 1px solid #000;
            text-align: center;
            /* Center video vertically */
        }

        .column.right video {
            max-width: 100%;
            height: auto;
        }
    </style>
</head>

<body>
    <div class="wrapper">
        <div class="header">
            <h1>Select and Play mp3</h1>
            <a href="{{ url_for('index') }}">HOME</a> |
        </div>
        <div class="columns">
            <div class="column left">

                <h3>Links</h3><br />
                <a href="{{ url_for('app_utilities') }}">Application Utilities</a><br /><br />
                <a href="{{ url_for('image_processing') }}">Image Processing Links</a><br /><br />
                <a href="{{ url_for('format_file') }}">Format Text Files</a><br /><br />
                <a href="{{ url_for('view_text') }}">View Text Files</a><br /><br />
                <a href="{{ url_for('edit_file') }}">Edit File</a><br /><br />
                <a href="{{ url_for('edit_formatted') }}">Edit Formatted Text</a><br /><br />

                <a href="{{ url_for('edit_description') }}">Edit Description</a><br /><br />
              
            </div>
            <div class="column right">
             <h1>Select and Play an MP3</h1>
    
    <form method="POST">
        <label for="mp3_file">Choose an MP3 file:</label>
        <select name="mp3_file" id="mp3_file">
            {% for mp3 in mp3_files %}
                <option value="{{ mp3 }}">{{ mp3 }}</option>
            {% endfor %}
        </select>
        <button type="submit">Play</button>
    </form>
    
    <h2>Available MP3 files:</h2>
    <ul>
        {% for mp3 in mp3_files %}
            <li>{{ mp3 }}</li>
        {% endfor %}
    </ul>
                <video controls>
                    <source src="{{ video }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
        </div>
    </div>
</body>

</html><!DOCTYPE html>
<html>
  <head>
    <title>Show Blended Image</title>
  </head>
  <body>
    <h1>Blended Image</h1>
    <img src="{{ blended_image_url }}" alt="Blended Image">
  </body>
</html>

<!DOCTYPE html>
<html>
  <head>
    <title>Blended Image</title>
  </head>
  <body>
    <h1>Blended Image</h1>
    <img src="{{ url_for('static', filename='blended.jpg') }}" alt="Blended Image">
  </body>
</html>

<!DOCTYPE html>
<html>
<head>
    <title>Show Generated Comic Border</title>
</head>
<body>
    <h1>Show Generated Comic Border</h1>
    <img src="{{ url_for('static', filename='borders/' + border_name) }}" alt="Generated Comic Border">

</body>
</html>
<!DOCTYPE html>
<html>
  <head>
    <title>Square Video</title>
<style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }
        video {
            margin: 10px, auto;
            width: 400px;
            height: auto;
        }

          .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;

        }

        .header {
            width: 100%;
            padding: 20px;
            text-align: center;
        }

        .columns {
            display: flex;
            width: 80%;
            margin-top: 20px;
        }

        .column {
            padding: 20px;
            box-sizing: border-box;
        }

        .column.left {
            width: 30%;
            border:    1px solid #000;
        }

        .column.right {
        margin: 0 auto; /* Center horizontally */
        width: 60%;
        border: 1px solid #000;
        text-align: center; /* Center video vertically */
    }

    .column.right video {
        max-width: 100%;
        height: auto;
    }
    </style>
  </head>
  <body>
    <h1>Square Video</h1>
    <p>Here is your square video:</p>
         <video width="480" height="480" controls>
          <source src="{{ url_for('static', filename='temp.mp4') }}" type="video/mp4">
          Your browser does not support the video tag.
        </video>
      </body>
    </html>
    
  </body>
</html>
<!DOCTYPE html>
<html>
  <head>
    <title>Square Video</title>
  </head>
  <body>
    <video width="640" height="1280" controls>
      <source src="{{ squarevid_url }}" type="video/mp4">
    </video>
  </body>
</html>

<!DOCTYPE html>
<html>
<head>
  <title>Success</title>
</head>
<body>
  <h1>Success</h1>
  <p>File "{{ original_file }}" formatted and saved as "{{ modified_file }}"</p>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
    <title>Select and Play MP3</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background-image: url('/static/images/largegiger/DreamShaper_v5_A_dystopian_city_street_level_view_populated_by_0.jpg');
            background-size: cover;
            background-position: center center;
            background-attachment: fixed;
            font-family: Arial, sans-serif;
        }
        h1 {
            text-align: center;
            padding-top: 20px;
            position: relative; /* Needed for absolute positioning of shadow */
            color: white; /* Set text color */
        }
        h1::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1; /* Behind the text */
            background-color: white;
            filter: blur(15px); /* Adjust blur radius as needed */
            opacity: 0.5; /* Adjust opacity as needed */
        }
        form {
            text-align: center;
            margin-top: 30px;
        }
        select, input {
            padding: 5px;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <h1>Select and Play MP3</h1>
    <form method="post">
        <select name="mp3_file">
            {% for file in mp3_files %}
                <option value="{{ file }}">{{ file }}</option>
            {% endfor %}
        </select>
        <br><br>
        <input type="submit" value="Play">
    </form>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
    <title>Terminal Emulator</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='xterm/xterm.css') }}">
    <script src="{{ url_for('static', filename='xterm/xterm.js') }}"></script>
</head>
<body>
    <div id="terminal"></div>
    <script>
        const term = new Terminal();
        term.open(document.getElementById('terminal'));

        let userInput = '';

        term.onKey(e => {
            const printable = !e.domEvent.altKey && !e.domEvent.ctrlKey && !e.domEvent.metaKey;

            if (e.domEvent.key === 'Enter') {
                const command = userInput;
                fetch('/execute_command', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: `command=${encodeURIComponent(command)}`,
                })
                .then(response => response.json())
                .then(data => {
                    term.write('\r\n' + data.output + '\r\n$ ');
                });

                userInput = '';
            } else if (printable) {
                term.write(e.key);
                userInput += e.key;
            }
        });

        term.write('$ ');

    </script>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
    <title>Terminal Emulator</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='xterm/xterm.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <script src="{{ url_for('static', filename='xterm/xterm.js') }}"></script>
</head>
<body>
    <div id="terminal"></div>
    <script>
        const term = new Terminal();
        term.open(document.getElementById('terminal'));
    
        let userInput = '';
    
        term.onKey(e => {
            const printable = !e.domEvent.altKey && !e.domEvent.ctrlKey && !e.domEvent.metaKey;
    
            if (e.domEvent.key === 'Enter') {
                const command = userInput;
                fetch('/execute_command', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: `command=${encodeURIComponent(command)}`,
                })
                .then(response => response.json())
                .then(data => {
                    // Clear the terminal and display the response output
                    term.clear();
                    console.log(data.output);

                    const formattedOutput = data.output.replace(/\n/g, '\r\n');
                    term.write(formattedOutput);
                    term.write('$ ');
                });
    
                userInput = '';
            } else if (printable) {
                term.write(e.key);
                userInput += e.key;
            }
        });
    
        term.writeln('$ ');
    
    </script>
    
    
</body>
</html>
<!DOCTYPE html>
<html>
<head>
    <title>Terminal Emulator</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='xterm/xterm.css') }}">
    <script src="{{ url_for('static', filename='xterm/xterm.js') }}"></script>
</head>
<body>
    <div id="terminal"></div>
    <script>
        const term = new Terminal();
        term.open(document.getElementById('terminal'));

        term.onKey(e => {
    // Capture user input and send it to the server when Enter is pressed
    if (e.domEvent.key === 'Enter') {
        const command = term.buffer.getLine(term.buffer.ybase + term.buffer.y).translateToString();
        fetch('/execute_command', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded',
            },
            body: `command=${encodeURIComponent(command)}`,
        })
            .then(response => response.json())
            .then(data => {
                term.write('\r\n' + data.output + '\r\n$ ');
            });
    } else {
        term.write(e.key); // Write the captured key to the terminal
    }
});

term.write('$ ');


    </script>
</body>
</html>
<!-- index.html-->
<!DOCTYPE html>
<html>

<head>
    <title>indexdb</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }

        video {
            margin: 10px, auto;
            width: 250px;
            height: auto;
        }

        .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;

        }

        .header {
            width: 100%;
            padding: 20px;
            text-align: center;
        }

        .columns {
            display: flex;
            width: 80%;
            margin-top: 20px;
        }

        .column {
            padding: 20px;
            box-sizing: border-box;
        }

        .column.left {
            width: 30%;
            border: 1px solid #000;
        }

        .column.right {
            margin: 0 auto;
            /* Center horizontally */
            width: 50%;
            border: 1px solid #000;
            text-align: center;
            /* Center video vertically */
        }
    </style>
</head>

<body>
    <div class="wrapper">
        <div class="header">
            <h1>indexdb</h1>
        </div>
        <div class="columns">

            <p>Choose an option below:</p>
            <ul>
                <li><a href="{{ url_for('select_by_id_form') }}">Select by ID Form</a></li>
                <li><a href="{{ url_for('search_by_rowid') }}">Search by Row ID</a></li>
                <li><a href="{{ url_for('search_database') }}">Search the Database</a></li>
                <li><a href="{{ url_for('edit_data_page') }}">Edit Data</a></li>
                <li><a href="{{ url_for('insert_data') }}">Insert Data</a></li>
                <li><a href="{{ url_for('get_rowid_form') }}">Enter Row ID to Edit</a></li>
            </ul>
            <a style="font-size: 24px;color: brown;" href="{{ url_for('index') }}">HOME</a>
        </div>
        <div class="column right">
            <h2>Right Column</h2>
            <video controls>
                <source src="{{ video }}" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        </div>
    </div>
</body>

</html><!DOCTYPE html>
<html>
<head>
    <title>HTML Viewer</title>
</head>
<body>
    <canvas id="canvas"></canvas>

    <script src="../scripts/script.js"></script>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
    <title>JavaScript Script Editor</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.js"></script>
</head>
<body>
    <h1>JavaScript Script Editor</h1>
    <div id="myElement">Element to Change Color</div>
    <button id="myButton">Click Me</button>

    <script>
        // Function to display a greeting message
        function sayHello(name) {
            console.log(`Hello, ${name}!`);
        }

        // Invoke the sayHello function
        sayHello("John");

        // Function to calculate the sum of two numbers
        function sum(a, b) {
            return a + b;
        }

        // Calculate and display the sum
        var result = sum(10, 5);
        console.log("Sum:", result);

        // Function to change the background color of an element
        function changeBackgroundColor(elementId, color) {
            var element = document.getElementById(elementId);
            element.style.backgroundColor = color;
        }

        // Change the background color of an element with ID 'myElement'
        changeBackgroundColor('myElement', 'lightblue');

        // Event listener to handle button click
        var button = document.getElementById('myButton');
        button.addEventListener('click', function() {
            alert('Button clicked!');
        });
    </script>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
  <title>Success</title>
{
	width: 100%;
	height: 100%;
	overflow: hidden;
}

body {
	margin: 0;
	padding: 0;
	color: #fff;
	background-color: #000;
}

canvas {
	-webkit-tap-highlight-color: transparent;
	tap-highlight-color: transparent;
	-webkit-user-select: none;
	user-select: none;
	cursor: pointer;
}
</style>

<script type="text/javascript">
	// Wobble by @neave

window.requestAnimationFrame =
	window.requestAnimationFrame ||
	window.webkitRequestAnimationFrame ||
	window.mozRequestAnimationFrame ||
	window.msRequestAnimationFrame ||
	function(callback) {
		setTimeout(callback, 1000 / 60);
	};

Array.prototype.shuffle = function() {
	var j, temp;
	for (var i = this.length - 1; i > 0; i--) {
		j = Math.floor(Math.random() * (i + 1));
		temp = this[i];
		this[i] = this[j];
		this[j] = temp;
	}
	return this;
};

Math.clamp = function(n, min, max) {
	return Math.max(min, Math.min(n, max));
};

var get = document.querySelector.bind(document),
	on = document.addEventListener.bind(document),
	mouseOff = -1000,
	mouseX,
	mouseY,
	viscosity = 25,
	damping = 0.1,
	totalPoints,
	dist,
	scale,
	canvas,
	context,
	surfaces,
	palleteNum = 0,
	palleteFirst = ['0cf', '0fc', 'ff0', 'f0c', 'c0f'],
	palletes = [
		['000', 'ff0', 'f0f', '0ff', 'fff'],
		['000', 'fff', '000', 'fff', '000'],
		['333', '666', '999', 'ccc', 'fff'],
		['300', '600', 'f00', '600', '300'],
		['305', '606', '907', 'c08', 'f09'],
		['036', '067', '098', '0c9', '0fa'],
		['00a0b0', '6a4a3c', 'cc333f', 'eb6841', 'edc951'],
		['264653', '2a9d8f', 'e9c46a', 'f4a261', 'e76f51'],
		['300018', '5a3d31', '837b47', 'adb85f', 'e5edb8'],
		['343838', '005f6b', '008c9e', '00b4cc', '00dffc'],
		['3fb8af', '7fc7af', 'dad8a7', 'ff9e9d', 'ff3d7f'],
		['413e4a', '73626e', 'b38184', 'f0b49e', 'f7e4be'],
		['452632', '91204d', 'e4844a', 'e8bf56', 'e2f7ce'],
		['594f4f', '547980', '45ada8', '9de0ad', 'e5fcc2'],
		['5d4157', '838689', 'a8caba', 'cad7b2', 'ebe3aa'],
		['81657e', '3ea3af', '9fd9b3', 'f0f6b9', 'ff1d44'],
		['899aa1', 'bda2a2', 'fbbe9a', 'fad889', 'faf5c8'],
		['99b898', 'fecea8', 'ff847c', 'e84a5f', '2a363b'],
		['ab526b', 'bca297', 'c5ceae', 'f0e2a4', 'f4ebc3'],
		['acdeb2', 'e1eab5', 'edad9e', 'fe4b74', '390d2d'],
		['b9d7d9', '668284', '2a2829', '493736', '7b3b3b'],
		['bbbb88', 'ccc68d', 'eedd99', 'eec290', 'eeaa88'],
		['cff09e', 'a8dba8', '79bd9a', '3b8686', '0b486b'],
		['d1f2a5', 'effab4', 'ffc48c', 'ff9f80', 'f56991'],
		['d3e2b6', 'c3dbb4', 'aaccb1', '87bdb1', '68b3af'],
		['e0ffb3', '61c791', '31797d', '2a2f36', 'f23c55'],
		['e25858', 'e9d6af', 'ffffdd', 'c0efd2', '384252'],
		['e8608c', '71cbc4', 'fff9f4', 'cdd56e', 'ffbd68'],
		['e8ddcb', 'cdb380', '036564', '033649', '031634'],
		['e94e77', 'd68189', 'c6a49a', 'c6e5d9', 'f4ead5'],
		['eee6ab', 'c5bc8e', '696758', '45484b', '36393b'],
		['efffcd', 'dce9be', '555152', '2e2633', '99173c'],
		['f04155', 'ff823a', 'f2f26f', 'fff7bd', '95cfb7'],
		['f8b195', 'f67280', 'c06c84', '6c5b7b', '355c7d'],
		['f8f4d7', 'f4dec2', 'f2b4a8', 'e98977', 'f4b36c'],
		['fad089', 'ff9c5b', 'f5634a', 'ed303c', '3b8183'],
		['fe4365', 'fc9d9a', 'f9cdad', 'c8c8a9', '83af9b'],
		['ff4e50', 'fc913a', 'f9d423', 'ede574', 'e1f5c4'],
		['ff9900', '424242', 'e9e9e9', 'bcbcbc', '3299bb'],
		['ffed90', 'a8d46f', '359668', '3c3251', '341139']
	];

function Point(x, y) {
	this.x = x;
	this.y = y;

	this.ix = x;
	this.iy = y;

	this.vx = 0;
	this.vy = 0;
}

Point.prototype.move = function() {
	var width = canvas.width / scale;
	var height = canvas.height / scale;
	this.vx += (this.ix - this.x) / viscosity * width;
	this.vy += (this.iy - this.y) / viscosity * height;

	var dx = this.x * width - mouseX / scale,
		dy = this.y * height - mouseY / scale;

	if (Math.sqrt(dx * dx + dy * dy) < dist) {
		var a = Math.atan2(dy, dx);
		this.vx += (Math.cos(a) * viscosity - dx) / viscosity;
		this.vy -= (Math.sin(a) * viscosity - dy) / viscosity;
	}

	this.vx *= (1 - damping);
	this.vy *= (1 - damping);
	this.x += this.vx / width;
	this.y += this.vy / height;

	if (this.y < 0) {
		this.y = 0;
	} else if (this.y > 1) {
		this.y = 1;
	}
};

function Surface(y) {
	this.y = y;
	this.resize();
}

Surface.prototype.draw = function() {
	var p = this.points[totalPoints - 1],
		cx,
		cy;

	context.fillStyle = this.color;
	context.beginPath();
	context.moveTo(p.x * canvas.width, p.y * canvas.height);

	for (var i = totalPoints - 1; i > 0; i--) {
		p = this.points[i];
		p.move();

		cx = (p.x + this.points[i - 1].x) / 2 * canvas.width;
		cy = (p.y + this.points[i - 1].y) / 2 * canvas.height;

		if (i === 1) {
			cx = canvas.width;
		} else if (i === totalPoints - 1) {
			context.bezierCurveTo(p.x * canvas.width, p.y * canvas.height, cx, cy, cx, cy);
			p.x = 0;
		}

		context.bezierCurveTo(p.x * canvas.width, p.y * canvas.height, cx, cy, cx, cy);
	}

	context.lineTo(canvas.width, canvas.height);
	context.lineTo(0, canvas.height);
	context.closePath();
	context.fill();
};

Surface.prototype.resize = function() {
	this.points = [];
	for (var i = totalPoints; i--; ) {
		this.points.push(new Point(i / (totalPoints - 3), this.y));
	}
};

Surface.prototype.wobble = function() {
	for (var i = totalPoints - 1; i > 0; i--) {
		this.points[i].vy += (Math.random() - 0.5) * dist * 0.6;
	}
};

function setPallete() {
	canvas.style.backgroundColor = '#' + palletes[palleteNum][0];
	for (var i = surfaces.length; i--; ) {
		surfaces[surfaces.length - i - 1].color = '#' + palletes[palleteNum][i + 1];
	}
}

function nextPallete() {
	palleteNum++;
	if (palleteNum >= palletes.length) {
		palleteNum = 0;
		palletes.shuffle();
	}
	setPallete();
}

function wobbleSuraces() {
	resizeSuraces();

	for (var i = surfaces.length; i--; ) {
		surfaces[i].wobble();
	}
	nextPallete();
}

function drawSurfaces() {
	context.clearRect(0, 0, canvas.width, canvas.height);
	for (var i = surfaces.length; i--; ) {
		surfaces[i].draw();
	}
}

function resizeSuraces() {
	scale = window.devicePixelRatio || 1;

	canvas.width = innerWidth * scale;
	canvas.height = innerHeight * scale;
	canvas.style.width = innerWidth + 'px';
	canvas.style.height = innerHeight + 'px';

	totalPoints = Math.round(Math.clamp(Math.pow(Math.random() * 8, 2), 16, innerWidth / 35));
	dist = Math.clamp(innerWidth / 4, 150, 200);

	for (var i = surfaces.length; i--; ) {
		surfaces[i].resize();
	}
	drawSurfaces();
}

function update() {
	requestAnimationFrame(update);
	drawSurfaces();
}

function init() {
	canvas = get('canvas');
	context = canvas.getContext('2d');

	canvas.ontouchmove = function(event) {
		mouseX = event.targetTouches[0].pageX * scale;
		mouseY = event.targetTouches[0].pageY * scale;
	};

	canvas.ontouchstart = function(event) {
		event.preventDefault();
	};

	canvas.ontouchend = function(event) {
		wobbleSuraces();
		mouseX = mouseY = mouseOff;
	};

	canvas.onmousemove = function(event) {
		mouseX = event.pageX * scale;
		mouseY = event.pageY * scale;
	};

	canvas.onmousedown = wobbleSuraces;

	canvas.onmouseleave = function() {
		mouseX = mouseY = mouseOff;
	};

	surfaces = [
		new Surface(4/5),
		new Surface(3/5),
		new Surface(2/5),
		new Surface(1/5)
	];

	palletes.shuffle();
	palletes.unshift(palleteFirst);
	setPallete(0);

	window.onresize = resizeSuraces;
	resizeSuraces();
	update();
}

on('DOMContentLoaded', init);

</script>
</head>
<body>
	<canvas></canvas>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
    <title>Text File Created</title>
</head>
<body>
    <h1>Text File Created</h1>
    <p>Text file created at: {{ text_file_path }}</p>
</body>
</html>
<!doctype html>
<html>
    <head>
        <title>Text to Speech</title>
    </head>
    <body>
        <h1>Text to Speech</h1>
        <form method="post" enctype="multipart/form-data">
            <input type="file" name="file">
            <br><br>
            <textarea name="text" rows="5" cols="30"></textarea>
            <br><br>
            <input type="submit" value="Submit">
        </form>
        {% if filename %}
            <p>Text: {{ text }}</p>
            <audio controls>
                <source src="{{ filename }}" type="audio/mpeg">
            </audio>
        {% endif %}
    </body>
</html>
<!doctype html>
<html>

<head>
    <title>Text to Speech</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/Style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <style>
        a {
            font-size: 20px;
            margin-left: 10%;
            color: #053b68;
        }

        pre {
            font-size: 20px;
            margin-left: 10%;
            text-align: left;
            color: #010f1a;
            white-space: pre-wrap;
            /* Since CSS 2.1 */
            white-space: -moz-pre-wrap;
            /* Mozilla, since 1999 */
            white-space: -pre-wrap;
            /* Opera 4-6 */
            white-space: -o-pre-wrap;
            /* Opera 7 */
            word-wrap: break-word;
            /* Internet Explorer 5.5+ */
        }
        p{
            font-size: 25px;
            margin: 10px,auto;
            text-align: center;
            color: #010f1a; 
        }
        textarea{
            font-size: 20px;
            margin-left: 10%;
            text-align: left;
            color: #010f1a;
            white-space: pre-wrap;
            /* Since CSS 2.1 */
            white-space: -moz-pre-wrap;
            /* Mozilla, since 1999 */
            white-space: -pre-wrap;
            /* Opera 4-6 */
            white-space: -o-pre-wrap;
            /* Opera 7 */
            word-wrap: break-word;
            /* Internet Explorer 5.5+ */
        }
    </style>
</head>

<body>
    <div class="header">
        <h1>Text to Speech</h1>
        <p>Enter some text and click submit to hear it spoken aloud.</p>
        <a href="{{ url_for('indeX') }}">home</a><br />
        <form method="post">
            <textarea name="text" rows="15" cols="50"></textarea>
            <br><br>
            <input type="submit" value="Submit">
        </form>
        {% if filename %}
        <p>Text: {{ text }}</p>
        <audio controls>
            <source src="{{ filename }}" type="audio/mpeg">
        </audio>
        {% endif %}

        <audio controls id="audio-player">
            <source src="{{ filename }}" type="audio/mpeg">
        </audio>

        <button onclick="document.getElementById('audio-player').play()">Play</button>
        <br /><br />
        <a href="{{ url_for('indeX') }}">When Finished click home to return: <span
                style="color:rgb(250, 5, 5);font-size: large;">&nbsp;&nbsp;&nbsp;HOME</span></a><br /><br />
        <pre>
Notice in the example text below, 'have' is spelled 'hav' so it is pronounced correctly.
Also mp3 is spelled out  M P 3 so it is also pronounced correctly.
-------------------------------------------------------------------------- 
In order to create a speaking avatar you need to follow a series of steps.
The first step is to create the text that will be spoken.
Press the button called create the M P 3
The page opened will hav a text area.
Enter the text you wish to hav spoken.
When the text has been enter you must click the submit button.
The M P 3 will be created and played back to you.
The M P 3 file will use the first twenty characters of the text generated as a filename. 
You may wish to hav a copy of the text in case it does not sound right.
Then you just paste it in, correct it, and a new file will be created.
--------------------------------------------------------------------------
Once you hav the M P 3 file it must be converted to a wav format.
Simply press the Convert M P 3 two wave link below this video.
It is super fast and a screen pops up to indicate the process has been completed.
--------------------------------------------------------------------------
At this point you should have an M P 3 file and it has been converted to a wave file.
Now you must pick an image and convert it to an M P 4.
The M P 4 will be the same length as the M P 3.
That will be done by pressing the,
Create a Video the same length as the wav Created link.
--------------------------------------------------------------------------
Now you hav an M P 4 file and a wav file.
Now for the hard stuff. 
Not for you, but for your computer.
You just click Create Avatar.
If you do not have a G P U, It will probably put your computer to the max.
As soon as you click it you will be directed to page, generate avatar.
Set back and relax it will take some time to generate.
If it is too much for your computer, you will find a link to Jupyter Co lab notebook.
Co Lab provides a free G P U service and is much faster.
--------------------------------------------------------------------------  
     </pre>
</body>

</html><!--enter_data.html Template:-->
<!DOCTYPE html>
<html>
<head>
    <title>The FlaskAppArchitect File</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
<script>
        function playAudio() {
            var audio = document.getElementById("audio");
            audio.play();
        }

        function pauseAudio() {
            var audio = document.getElementById("audio");
            audio.pause();
        }

        function setVolume(volume) {
            var audio = document.getElementById("audio");
            audio.volume = volume;
        }
    </script>
    <style>
        pre span{
            color: rgb(4, 18, 139);
            font-size: larger;
            font-weight: bold;
            width: 65%;
            word-wrap: break-word; /* Add this line to wrap text */

        }
    </style>
</head>
<body>
    <h2>Data Entry</h2>


<audio id="audio" controls>
        <source src="{{ url_for('static', filename='audio_mp3/flask_javascript.mp3') }}" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <br>
    
    <button onclick="playAudio()">Play</button>
    <button onclick="pauseAudio()">Pause</button>
    
    <br><br>
    
    <input type="range" min="0" max="1" step="0.1" value="1" oninput="setVolume(this.value)">
    

<pre>

#!/home/jack/Desktop/FlaskAppArchitect/env/bin/python
<span>The #! identifies the location and the interpreter /home/jack/Desktop/StoryMaker/ is the location
    and env/bin/python is the interpreter. The env is a virtual enviroment.
    env/bin/python
</span>
#!/home/jack/Desktop/FlaskAppArchitect_Flask_App_Creator/env/bin/python
from moviepy.editor import *
from flask import Flask, render_template, request, redirect, url_for, send_from_directory, Response, flash, request, session,jsonify
from flask import send_file, g
import os
import pygame
from gtts import gTTS
import cv2
import dlib
import numpy as np
from random import randint
from moviepy.editor import VideoFileClip, ImageClip, CompositeVideoClip
from moviepy.editor import concatenate_videoclips, AudioFileClip
import moviepy.editor as mp
import moviepy.editor
import subprocess
from pathlib import Path as change_ext
import re
from io import BytesIO
import io
import matplotlib.pyplot as plt
import sqlite3
import random
import glob
import signal
import base64
import tempfile
import datetime
import imageio
import time
from werkzeug.utils import secure_filename
import shutil
from search import search
import clean_images
from time import sleep
from pydub import AudioSegment
from PIL import Image, ImageDraw, ImageFont
import uuid
import logging
from logging.handlers import RotatingFileHandler
from flask_cors import CORS
import json
# Initialize Flask app
app = Flask(__name__)
# allow CORS
CORS(app) 


app.secret_key = os.urandom(24)
# Create a logger object
logger = logging.getLogger(__name__)
logger.setLevel(logging.DEBUG)

# Create a formatter for the log messages
formatter = logging.Formatter(
    '%(asctime)s %(levelname)s: %(message)s [in %(pathname)s:%(lineno)d]')

# Create a file handler to write log messages to a file
file_handler = RotatingFileHandler(
    'Logs/app.log', maxBytes=10000, backupCount=1)
file_handler.setLevel(logging.DEBUG)
file_handler.setFormatter(formatter)

# Add the file handler to the logger
logger.addHandler(file_handler)

# Set up logging for the Flask app
logger.addHandler(file_handler)
# Define a route for your Flask app

SDIR = "static/"
# Define the file path to store the script content
script_file = os.path.join(os.getcwd(),SDIR, 'scripts', 'scripts.js')

@app.route('/hello_world')
def hello_world():
    TExt = "TEXT TEST 6789"
    logger.debug('This is a debug message: %s', TExt)

    TEXT = "TEXT TEST abcd"
    logger.debug('This is a debug message: %s', TEXT)

    return "Hello, World!"


directory_path = "static/current_project"
if not os.path.exists(directory_path):
    os.makedirs(directory_path)
app.config['UPLOAD_FOLDER'] = 'static/images/uploads'
app.config['RESULTS_FOLDER'] = 'static/videos/results'
app.config['THUMBNAILS_FOLDER'] = 'static/images/thumbnails'
app.config['CHECKPOINT_PATH'] = 'checkpoints/wav2lip_gan.pth'
app.config['AUDIO_PATH'] = 'sample_data/input_audio.wav'
app.config['video_PATH'] = 'sample_data/input_videio.mp4'
app.config['DATABASE'] = 'code.db'  # SQLite database file

app.secret_key = "your_secret_key"  # Add a secret key for session management
@app.route('/favicons.ico')
def favicons():
    return send_from_directory(os.path.join(app.root_path, 'static'), 'favicon.ico', mimetype='image/vnd.microsoft.icon')
@app.route('/favicon.ico')
def favicon():
    # Set the size of the favicon
    size = (16, 16)

    # Create a new image with a transparent background
    favicon = Image.new('RGBA', size, (0, 0, 0, 0))

    # Create a drawing object
    draw = ImageDraw.Draw(favicon)

    # Draw a yellow square
    square_color = (255, 0, 255)
    draw.rectangle([(0, 0), size], fill=square_color)

    # Draw a red circle
    circle_center = (size[0] // 2, size[1] // 2)
    circle_radius = size[0] // 3
    logger.info(f'circle_center, circle_radius:,{circle_center} {circle_radius}')
    circle_color = (255, 255, 0)
    draw.ellipse(
        [(circle_center[0] - circle_radius, circle_center[1] - circle_radius),
         (circle_center[0] + circle_radius, circle_center[1] + circle_radius)],
        fill=circle_color
    )

    # Save the image to a memory buffer
    image_buffer = io.BytesIO()
    favicon.save(image_buffer, format='ICO')
    image_buffer.seek(0)

    return Response(image_buffer.getvalue(), content_type='image/x-icon')


# use the search function as a route
app.add_url_rule('/search', 'search', search)


def zip_lists(list1, list2):
    return zip(list1, list2)


app.jinja_env.filters['zip'] = zip_lists

directory_path = 'temp'  # Replace with the desired directory path
# Create the directory if it doesn't exist
os.makedirs(directory_path, exist_ok=True)


# Walk through all directories and subdirectories


def findvideos():
    videoroot_directory = "static"
    MP4 = []
    for dirpath, dirnames, filenames in os.walk(videoroot_directory):
        for filename in filenames:
            if filename.endswith(".mp4") and "Final" in filename:
                MP4.append(os.path.join(dirpath, filename))
    if MP4:
        last_video = session.get("last_video")
        new_video = random.choice([video for video in MP4 if video != last_video])
        session["last_video"] = new_video
        return new_video
    else:
        return None

@app.route("/")
def index():
    video = findvideos()
    return render_template('index.html', video=video)
@app.route("/index2")
def index2():
    image_dir = 'static/images/MISC_MIX'
    image_files = [f for f in os.listdir(image_dir) if f.endswith('.jpg')]
    random_image_file = random.choice(image_files)
    return render_template('index2.html', random_image_file="images/MISC_MIX/" + random_image_file)


def generate_output():
    # Specify the path to your Bash script
    bash_script_path = '/home/jack/Desktop/StoryMaker/MakeVideo'

    # Execute the Bash script
    subprocess.run(['bash', bash_script_path])
    # Backup the result_videoxx.mp4 file
    current_datetime = str(int(time.time()))
    backup_filename = f"static/{current_datetime}.mp4"
    original_filename = "results/result_voice.mp4"
    shutil.copyfile(original_filename, backup_filename)
    return redirect('/final_lipsync')


@app.route('/create_avatar', methods=['GET', 'POST'])
def create_avatar():
    if request.method == 'POST':
        # check_point = os.path.join(app.config['CHECKPOINT_PATH'], 'checkpoints/wav2lip_gan.pth')

        return Response(generate_output(), mimetype='text/plain')
    else:
        return render_template('create_avatar.html')


@app.route('/run_command', methods=['GET'])
def run_command():
    # Specify the path to your Bash script
    bash_script_path = 'MakeVideo'

    # Execute the Bash script
    subprocess.run(['bash', bash_script_path])
    # Backup the result_videoxx.mp4 file
    current_datetime = str(int(time.time()))
    backup_filename = f"static/{current_datetime}.mp4"
    shutil.copyfile("results/result_voice.mp4", backup_filename)
    redirect('/final_lipsync')


@app.route('/result/<filename>')
def result(filename):
    return render_template('result.html', filename=filename)


@app.route('/convert_mp3_to_wav', methods=['GET', 'POST'])
def convert_mp3_to_wav():
    if request.method == 'POST':
        mp3_file = request.files['mp3_file']
        mp3_filename = mp3_file.filename
        mp3_path = os.path.join(app.static_folder, 'audio_mp3', mp3_filename)
        mp3_file.save(mp3_path)

        wav_filename = 'input_audio.wav'
        wav_path = os.path.join('sample_data', wav_filename)

        sound = AudioSegment.from_mp3(mp3_path)
        sound.export(wav_path, format='wav')

        return 'MP3 file converted to WAV successfully'
    else:
        return render_template('convert_mp3_to_wav.html')


@app.route('/final_lipsync')
def final_lipsync():
    VIDEO = 'result/result_voice.mp4'
    return render_template('final_lipsync.html', video=VIDEO)


@app.route('/text_mp3', methods=['GET', 'POST'])
def text_mp3():
    if request.method == 'POST':
        # Get the text from the textarea
        text = request.form['text']
        text0 = text
        # Remove whitespace from the text
        text = text.replace(" ", "")
        # Create a filename based on the first 25 characters of the text
        filename = "static/audio_mp3/" + text[:25] + ".mp3"
        textname = text[:25] + ".txt"
        # Save the text to a text file
        textname = textname.strip()
        with open("static/text/" + textname, 'w') as f:
            f.write(text0)
        filename = filename.strip()  # remove the newline character
        # Create a gTTS object and save the audio file
        tts = gTTS(text)
        filename = filename.strip()
        tts.save(filename)
        shutil.copy(filename, 'static/TEMP.mp3')
        # Play the mp3 file
        pygame.mixer.init()
        pygame.mixer.music.load(filename)
        pygame.mixer.music.play()
        # Wait for the audio to finish playing
        while pygame.mixer.music.get_busy():
            pygame.time.Clock().tick(10)
        # Stop pygame and exit the program
        pygame.mixer.quit()
        pygame.quit()
        # Return the text and filename to the template
        return render_template('text_mp3.html', text=text, filename=filename)
    else:
        # Render the home page template
        return render_template('text_mp3.html')


@app.route('/mp3_upload', methods=['POST'])
def mp3_upload():
    if 'file' not in request.files:
        return 'No file uploaded', 400

    file = request.files['file']
    if file.filename == '':
        return 'No file selected', 400

    if file:
        audio_file = 'static/TEMP.mp3'
        file.save(audio_file)
        return render_template('player.html', audio_file=audio_file)


@app.route('/generate_video', methods=['GET', 'POST'])
def generate_video():
    if request.method == 'POST':
        # Set the input and output filenames
        eyes_filename = 'static/TEMP.png'
        input_filename = 'static/TEMP2.mp4'
        output_filename = 'static/TEMP2.mp4'

        # Set the paths for the video and audio files
        audio_file = 'static/TEMP.mp3'
        output_filenames = 'static/TEMP.mp4'

        # Extract eyes from the uploaded image and save as eyes_test.png
        image_path = "static/TEMP.jpg"
        shape_predictor_path = "/home/jack/hidden/shape_predictor_68_face_landmarks.dat"
        extract_eyes(image_path, eyes_filename, shape_predictor_path)

        # Load the image clip
        image_clip = ImageClip(image_path, duration=30)

        # Set the final clip properties
        final_clip = image_clip.set_audio(None)
        final_clip = final_clip.set_position('center')

        # Write the final video
        final_clip.write_videofile(
            output_filename, codec='libx264', fps=30, audio=False)

        # Load the input video without audio
        input_clip = VideoFileClip(input_filename, audio=False)

        # Load the eye image clip
        eyes_clip = ImageClip(eyes_filename)

        # Create multiple looping clips
        clips = []
        for i in range(8):
            loop_clip = mkloop(input_clip, eyes_clip)
            clips.append(loop_clip)

        # Concatenate all the clips
        final_clips = concatenate_videoclips(clips)

        # Write the final video
        final_clips.write_videofile(
            output_filenames, codec='libx264', fps=input_clip.fps, audio=False)

        # Load the video and audio files
        video_clip = VideoFileClip(output_filenames)
        audio_clip = AudioFileClip(audio_file)

        # Set the duration of the final video to match the audio clip's duration
        final_duration = audio_clip.duration + .5

        # Set the video clip's duration to match the final duration
        video_clip = video_clip.set_duration(final_duration)

        # Set the audio of the video clip to be the same as the loaded audio clip
        video_clip = video_clip.set_audio(audio_clip)

        # Write the final video file
        output_path = "static/final_video_blinking.mp4"
        video_clip.write_videofile(
            output_path, codec='libx264', audio_codec='aac', fps=24)
        shutil.copy(output_path, 'results/final_video_blinking.mp4')
        return render_template('generate_video.html', video_path=output_path)

    return render_template('generate_video.html')
# Function to extract eyes from an image using dlib


def extract_eyes(image_path, eyes_filename, shape_predictor_path):
    # Load the image and shape predictor model
    image = cv2.imread(image_path)
    detector = dlib.get_frontal_face_detector()
    predictor = dlib.shape_predictor(shape_predictor_path)

    # Convert the image to grayscale
    gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)

    # Detect faces in the image
    faces = detector(gray)

    # Iterate over the detected faces and extract the eye regions
    for face in faces:
        landmarks = predictor(gray, face)

        # Extract the coordinates of the left eye
        left_eye_pts = [(landmarks.part(i).x, landmarks.part(i).y)
                        for i in range(36, 42)]

        # Extract the coordinates of the right eye
        right_eye_pts = [(landmarks.part(i).x, landmarks.part(i).y)
                         for i in range(42, 48)]

        # Create a transparent image with an alpha channel
        transparent_image = np.zeros(
            (image.shape[0], image.shape[1], 4), dtype=np.uint8)

        # Define the skin color (e.g., light brown or tan) in BGR format
        # skin_color_bgr = (210, 180, 140)
        skin_color_bgr = (80, 80, 40)

        # Convert BGR to RGB
        skin_color_rgb = (skin_color_bgr[2],
                          skin_color_bgr[1], skin_color_bgr[0])

        # Draw the eye regions on the transparent image with the skin color and alpha channel
        cv2.fillPoly(transparent_image, [np.array(
            left_eye_pts)], skin_color_rgb + (200,))
        cv2.fillPoly(transparent_image, [np.array(
            right_eye_pts)], skin_color_rgb + (200,))
        blurred_image = cv2.GaussianBlur(transparent_image, (5, 5), 0)
        # Save the transparent image with only the eyes as a PNG file
        cv2.imwrite(eyes_filename, blurred_image)
# Function to create a looping clip with blinking eyes


def mkloop(input_clip, eyes_clip):
    # Set the duration of the eye image clip
    eyes_duration = 0.1  # seconds

    # Set the position of the eye image clip
    eyes_position = 'center'

    # Set the start time of the eye image clip
    blink_start_time = randint(2, 4)

    # Create a CompositeVideoClip with the input video and the eye image clip
    final_clip = CompositeVideoClip([input_clip, eyes_clip.set_duration(eyes_duration)
                                     .set_position(eyes_position)
                                     .set_start(blink_start_time)])

    # Calculate the duration of the final clip
    final_duration = blink_start_time + eyes_duration + \
        randint(2, 4)  # 5 to 8 seconds after the blink

    # Set the duration of the final clip
    final_clip = final_clip.set_duration(final_duration)
    return final_clip


def apply_text(mp4_path, text, x, y):
    video = moviepy.editor.VideoFileClip(mp4_path)
    font = "/home/jack/fonts/OpenSansBold.ttf"
    text_clip = moviepy.editor.TextClip(
        text, font=font, fontsize=24, color="white")

    try:
        x = int(x)
        y = int(y)
    except ValueError:
        raise ValueError(
            "Invalid position values. Please provide integer values for x and y.")

    if not (0 <= x <= video.w):
        raise ValueError(
            "Invalid x position. Must be within the width of the video.")

    if not (0 <= y <= video.h):
        raise ValueError(
            "Invalid y position. Must be within the height of the video.")

    text_clip = text_clip.set_position((x, y))

    # Check if duration is None and set a default value if necessary
    video_duration = video.duration if video.duration is not None else 0
    text_clip_duration = text_clip.duration if text_clip.duration is not None else 0

    # Set the duration of the video and text clips
    duration = max(video_duration, text_clip_duration)
    video = video.set_duration(duration)
    text_clip = text_clip.set_duration(duration)

    # Create the composite video by overlaying the text clip onto the video clip
    new_video = moviepy.editor.CompositeVideoClip([video, text_clip])

    # Save the new video with the applied text
    new_mp4_path = 'static/TTMP.mp4'
    new_video.write_videofile(
        new_mp4_path, codec='libx264', audio_codec='aac', remove_temp=False)

    return new_mp4_path


@app.route("/apply_text_to_video", methods=["POST", "GET"])
def apply_text_to_video():
    if request.method == "POST":
        file = request.files["mp4_file"]
        if file.filename == '':
            return redirect(request.url)
        file.save('static/TTMP.mp4')

        mp4_path = 'static/TTMP.mp4'
        text = request.form["text"]
        x = request.form["x"]
        y = request.form["y"]
        new_mp4_path = apply_text(mp4_path, text, x, y)
        return render_template("apply_text_to_video.html", new_mp4_path=new_mp4_path)
    else:
        return render_template("apply_text_to_video.html")


# Get a list of existing subdirectories in the video resources directory
existing_subdirectories = [subdir for subdir in os.listdir(
    "static/current_project") if os.path.isdir(os.path.join("static/current_project", subdir))]


@app.route('/uploads', methods=['GET', 'POST'])
def upload_files():
    video_resources_dir = "static/current_project"
    if request.method == 'POST':
        # Get the selected subdirectory from the form
        selected_subdirectory = request.form.get('subdirectory')

        # Check if the selected subdirectory exists
        if selected_subdirectory in existing_subdirectories:
            # Handle the uploaded file
            file = request.files['file']
            if file:
                # Save the file to the selected subdirectory
                file.save(os.path.join(video_resources_dir,
                          selected_subdirectory, file.filename))
                # Get the URL for the uploaded image
                image_path = url_for('static', filename=os.path.join(
                    'current_project', selected_subdirectory, file.filename))
                return render_template('upload_files.html', image_path=image_path)
            else:
                return 'No file selected.'
        else:
            return 'Invalid subdirectory selected.'
    # Render the upload form with the list of existing subdirectories
    return render_template('upload_files.html', subdirectories=existing_subdirectories)


@app.route('/get_files', methods=['POST'])
def get_files():
    subdirectory = request.form.get('subdirectory')
    file_options = []
    if subdirectory and subdirectory in existing_subdirectories:
        subdirectory_path = os.path.join(
            "static/current_project", subdirectory)
        files = os.listdir(subdirectory_path)
        file_options = [
            f'<option value="{file}">{file}</option>'
            for file in files
            if os.path.isfile(os.path.join(subdirectory_path, file))
        ]
    return ''.join(file_options)


@app.route('/image_list')
def image_list():
    image_directory = 'static/current_project/Narrators'
    image_list = [
        filename
        for filename in os.listdir(image_directory)
        if filename.endswith('.jpg')
    ]
    return render_template('image_list.html', image_list=image_list)


@app.route('/upload', methods=['POST', 'GET'])
def upload():
    filename = request.form['filename']
    if filename:
        src_path = 'static/current_project/Narrators/' + filename
        dest_path = 'static/TEMP.jpg'
        shutil.copyfile(src_path, dest_path)
        return redirect('/')
    else:
        return 'No file selected.'


# List of image directories (you can add more as needed)
image_directories = glob.glob('static/images/*')

@app.route("/mkblend_video", methods=['GET', 'POST'])
def mkblend_video():
    if request.method == 'POST':
        selected_directory = request.form.get('selected_directory')

        if selected_directory:
            # Create a temporary directory to save the images
            temp_dir = tempfile.mkdtemp()

            # Loop through the files in the selected directory and move them to the temporary directory
            chosen_directory = os.path.join('static/images', selected_directory)
            for filename in os.listdir(chosen_directory):
                if filename.endswith('.jpg') or filename.endswith('.png'):
                    source_path = os.path.join(chosen_directory, filename)
                    target_path = os.path.join(temp_dir, filename)
                    os.rename(source_path, target_path)
                    logger.debug('Moved file: %s', filename)
    
        image_list = glob.glob(temp_dir + "*.jpg")
        logger.debug('IMAGE_LIST: %s', image_list)
        # Shuffle and select a subset of images
        # random.shuffle(image_list)
        image_list = sorted(image_list)
        logger.debug('Selected image filenames: %s', image_list)
        # Print the number of selected images
        print(len(image_list))
        logger.debug('Number of files: %s', len(image_list))

        def changeImageSize(maxWidth, maxHeight, image):
            widthRatio = maxWidth / image.size[0]
            heightRatio = maxHeight / image.size[1]
            newWidth = int(widthRatio * image.size[0])
            newHeight = int(heightRatio * image.size[1])
            newImage = image.resize((newWidth, newHeight))
            return newImage

        # Get the size of the first image
        if image_list:
            imagesize = Image.open(image_list[0]).size

            for i in range(len(image_list) - 1):
                imag1 = image_list[i]
                imag2 = image_list[i + 1]
                image1 = Image.open(imag1)
                image2 = Image.open(imag2)

                image3 = changeImageSize(imagesize[0], imagesize[1], image1)
                image4 = changeImageSize(imagesize[0], imagesize[1], image2)

                image5 = image3.convert("RGBA")
                image6 = image4.convert("RGBA")

                text = "animate/"
                for ic in range(0, 100):
                    inc = ic * 0.01
                    # inc = ic * 0.08
                    sleep(0.1)
                    # Gradually increase opacity
                    alphaBlended = Image.blend(image5, image6, alpha=inc)
                    alphaBlended = alphaBlended.convert("RGB")
                    current_time = datetime.datetime.now()
                    filename = current_time.strftime(
                        '%Y%m%d_%H%M%S%f')[:-3] + '.jpg'
                    alphaBlended.save(f'{text}{filename}')
                    # shutil.copy(f'{text}{filename}', {temp_dir}+'TEMP.jpg')
                    shutil.copy(f'{text}{filename}', os.path.join(temp_dir, 'TEMP.jpg'))

                    if ic % 25 == 0:
                        print(i, ":", ic, end=" . ")
                    if ic % 100 == 0:
                        logger.debug('Image Number: %.2f %d', inc, ic)

            from moviepy.video.io.ImageSequenceClip import ImageSequenceClip
            # Get the list of files sorted by creation time
            imagelist = sorted(glob.glob('animate/*.jpg'),
                               key=os.path.getmtime)

            # Create a clip from the images
            clip = ImageSequenceClip(imagelist, fps=30)

            # Write the clip to a video file using ffmpeg
            current_time = datetime.datetime.now()
            filename = "static/animate/TEMP3a.mp4"
            clip.write_videofile(
                filename, fps=24, codec='libx265', preset='medium')
            store = "static/videos/" + \
                current_time.strftime('%Y%m%d_%H%M%S%f')[:-3] + 'jul27.mp4'
            # Replace with the desired path for the converted video file
            output_file = "static/animate/TEMP5.mp4"
            # Replace with the desired path for the converted video file
            webm_file = "static/animate/TEMP5.webm"
            ffmpeg_cmd = [
                'ffmpeg', '-i', filename, '-c:v', 'libx264', '-crf', '23', '-preset', 'medium', '-c:a', 'aac',
                '-b:a', '128k', '-movflags', '+faststart', '-y', output_file
            ]
            subprocess.run(ffmpeg_cmd)
            ffmpeg_cmd2 = [
                'ffmpeg', '-i', filename, '-c:v', 'libx264', '-crf', '23', '-preset', 'medium', '-c:a', 'aac',
                '-b:a', '128k', '-movflags', '+faststart', '-y', webm_file
            ]
            subprocess.run(ffmpeg_cmd2)
            shutil.copy(filename, store)
            return render_template('mkblend_video.html', video=filename)

    return render_template('choose_directory.html')


def changeImageSize(maxWidth, maxHeight, image):
    widthRatio = maxWidth / image.size[0]
    heightRatio = maxHeight / image.size[1]
    newWidth = int(widthRatio * image.size[0])
    newHeight = int(heightRatio * image.size[1])
    newImage = image.resize((newWidth, newHeight))
    return newImage


directories = [
    "static/images/512x1536-woman",
    "static/images/abstract_beauty",
    "static/images/beautiful_girl",
    "static/images/Beautiful_Warrior"
]


@app.route("/mkblend_videos", methods=['POST', 'GET'])
def mkblend_videos():
    # Get the selected directory from the form data
    selected_directory = request.form.get('selected_directory')
    logger.debug('Selected Directory: %s', selected_directory)
    # Check if the selected directory is valid
    if selected_directory and selected_directory in directories:
        # Use glob to get the list of files within the selected directory
        filelist = glob.glob(os.path.join(selected_directory, '*.jpg'))
        logger.debug('Selected directory: %s', selected_directory)
        image_list = filelist
        # Shuffle and select a subset of images
        image_list = filelist
        random.shuffle(image_list)
        image_list = random.sample(image_list, 29)
        # Get the size of the first image
        imagesize = Image.open(image_list[0]).size

        # Print the number of selected images
        print("IMAGE_LIST_length:", len(image_list))

        for i in range(len(image_list) - 1):
            imag1 = image_list[i]
            imag2 = image_list[i + 1]
            image1 = Image.open(imag1)
            image2 = Image.open(imag2)

            image3 = changeImageSize(imagesize[0], imagesize[1], image1)
            image4 = changeImageSize(imagesize[0], imagesize[1], image2)

            image5 = image3.convert("RGBA")
            image6 = image4.convert("RGBA")

            text = "animate/"
            # for ic in range(0,125):
            for ic in range(0, 100):
                inc = ic * .01
                sleep(.1)
                # gradually increase opacity
                alphaBlended = Image.blend(image5, image6, alpha=inc)
                alphaBlended = alphaBlended.convert("RGB")
                current_datetime = str(int(time.time()))
                filename = current_datetime[:-3] + '.jpg'
                alphaBlended.save(f'{text}{filename}')
                if ic % 25 == 0:
                    print(ic, ":", inc, end=" . ")

    from moviepy.video.io.ImageSequenceClip import ImageSequenceClip
    # Get the list of files sorted by creation time
    imagelist2 = sorted(glob.glob('animate/*.jpg'), key=os.path.getmtime)

    # Create a clip from the images
    clip = ImageSequenceClip(imagelist2, fps=30)

    # Write the clip to a video file using ffmpeg
    current_datetime = str(int(time.time()))
    filename = "static/animate/TEMP3a.mp4"
    clip.write_videofile(filename, fps=24, codec='libx265', preset='medium')
    store = "static/videos/" + current_datetime[:-3] + 'july27.mp4'
    # Replace with the desired path for the converted video file
    output_file = "static/animate/TEMP5.mp4"
    # webm_file = "static/animate/TEMP5.webm"  #Replace with the desired path for the converted video file
    ffmpeg_cmd = ['ffmpeg', '-i', filename, '-c:v', 'libx264', '-crf', '23', '-preset',
                  'medium', '-c:a', 'aac', '-b:a', '128k', '-movflags', '+faststart', '-y', output_file]
    subprocess.run(ffmpeg_cmd)
    # ffmpeg_cmd2 = ['ffmpeg', '-i', filename, '-c:v', 'libx264', '-crf', '23', '-preset', 'medium', '-c:a', 'aac', #'-b:a', '128k', '-movflags', '+faststart', '-y', webm_file]
    # subprocess.run(ffmpeg_cmd2)
    shutil.copy(filename, store)
    return render_template('mkblend_videos.html', video=filename)


@app.route('/generate_vid', methods=['GET', 'POST'])
def generate_vid():
    current_datetime = str(int(time.time()))
    str_current_datetime = str(current_datetime)
    logger.debug('Generating video', str_current_datetime)
    if request.method == 'POST':
        # Load the audio file
        audio_file = request.files['audio']
        # , 'input_audio.mp3')
        filename = os.path.join(app.config['AUDIO_PATH'])
        logger.info(f'Audio path: {filename}')
        audio_file.save(filename)
        print("FILENAME:", filename)

        # Get the duration of the audio using ffprobe
        command = f"ffprobe -v error -show_entries format=duration -of default=noprint_wrloggers=1:nokey=1 {filename}"
        duration = subprocess.check_output(command.split())
        duration = float(duration.strip().decode())
        logger.info(f'Duration: {duration}')
        # Load the image file
        image_file = request.files['image']
        image_path = os.path.join(
            app.config['UPLOAD_FOLDER'], secure_filename(image_file.filename))
        logger.info(f'Image path: {image_path}')
        image_file.save(image_path)

        # Create the video
        # video_path = os.path.join(app.config['VIDEO_PATH'])#, 'sample_data/input_video.mp4')
        video_path = 'sample_data/input_video.mp4'
        logger.info(f'Video path: {video_path}')
        ffmpeg_command = f"ffmpeg -loop 1 -i {image_path} -c:v libx264 -t {duration+ 0.5} -pix_fmt yuv420p -y {video_path}"
        subprocess.run(ffmpeg_command, shell=True)

        return f'Video created: {video_path}'

    return render_template('generate_vid.html')
# Define route to display upload form


@app.route('/upload_file', methods=['POST', 'GET'])
def upload_file():
    if request.method == 'POST':
        # Check if file was uploaded
        if 'file' not in request.files:
            logger.error('No file was uploaded')
            flash('Error: No file was uploaded')
            return redirect(request.url)

        logger.error('request.files[\'file\']')
        file = request.files['file']

        # Check if file was selected
        if file.filename == '':
            logger.error('No file was selected')
            flash('Error: No file was selected')
            return redirect(request.url)

        # Define allowed file extensions
        ALLOWED_EXTENSIONS = {'png', 'jpg', 'jpeg', 'gif'}

        # Define function to check file extension
        def allowed_file(filename):
            return '.' in filename and filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS

        # Check if file is allowed
        if not allowed_file(file.filename):
            # logger.error(f"File '{file.filename}' is not allowed")
            logger.error("File '" + file.filename + "' is not allowed")
            flash("Error: File '" + file.filename + "'close is not allowed")
            return redirect(request.url)

        # Save the file
        try:
            filename = secure_filename(file.filename)
            file.save(os.path.join(app.config['UPLOAD_FOLDER'], filename))
            logger.info(f'File {filename} saved')
            logger.info('FILENAME:', os.path.join(
                app.config['UPLOAD_FOLDER'], filename))
        except Exception as e:
            logger.error(f'Error saving file: {e}')
            flash('Error: Unable to save file')
            return redirect(request.url)

        # Redirect to the result page
        logger.info(f'File-Result {filename} SAVED')
        return redirect(url_for('result', filename=filename))

    # Return the upload form for GET requests
    return render_template('upload_file.html')


@app.route('/uploads/<filename>')
def uploaded_file(filename):
    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)


@app.route('/make_text', methods=['GET', 'POST'])
def make_text():
    DIR = 'static/text/'
    if request.method == 'POST':
        # Get the text entered in the textarea
        text = request.form.get('text')

        # Generate a filename using the first 25 letters of the text
        text = text.replace(' ', '_')
        filename = text[:25]

        # Save the text to a file
        with open(f'{DIR}{filename}.txt', 'w') as file:
            file.write(text)

        return 'Text saved successfully!'
    else:
        return render_template('make_text.html')


# directories = ['static/images', 'static/images/squares', 'static/final_videos', 'static/Dreamlike_art',
#              'static/squares', 'static/images/uploads', 'static/Final_Fantasy', 'static/final_images', 'static/thumbnails']
directories = glob.glob('static/images/*')

# Route for the home page


@app.route('/home')
def home():
    return render_template('choose_dir.html', directories=directories)
# Route for choosing a directory


@app.route('/choose_dir', methods=['GET', 'POST'])
def choose_dir():
    if request.method == 'POST':
        selected_directory = request.form.get('directory', directories)
        TExt = "TEXT TEST"
        logger.error('No file was selected: %s', TExt)
        logger.debug('Debug was selected: %s', TExt)
        if selected_directory is None:
            # Handle the case where no directory is selected
            logger.error('No directory selected')
            return 'No directory selected!'
        # Rest of the code...
        # Use the selected_directory variable in your logic to generate the video
        # Make sure to update the paths according to the selected directory
        logger.debug('Selected directory: %s', selected_directory)
        # Get the list of image files in the selected directory
        image_filenames = random.sample(
            glob.glob(selected_directory + '/*.jpg'), 30)
        logger.debug('Selected image filenames: %s', image_filenames)

        image_clips = []
        for filename in image_filenames:
            # Open the image file and resize it to 512x768
            logger.debug('Processing image: %s', filename)
            image = Image.open(filename)
            # image = image.resize((512, 768), Image.ANTIALIAS)
            # Convert the PIL Image object to a NumPy array
            image_array = np.array(image)
            # Create an ImageClip object from the resized image and set its duration to 1 second
            image_clip = ImageClip(image_array).set_duration(1)
            # Append the image clip to the list
            image_clips.append(image_clip)

        logger.debug('Number of image clips: %d', len(image_clips))

        # Concatenate all the image clips into a single video clip
        video_clip = concatenate_videoclips(image_clips, method='compose')
        timestr = time.strftime("%Y%m%d-%H%M%S")
        # Set the fps value for the video clip
        video_clip.fps = 24
        # Write the video clip to a file
        video_file = f'static/videos/random_images_{timestr}_video.mp4'
        output_p = 'static/videos/random_images_video.mp4'
        logger.debug('Output video file path: %s', video_file)
        logger.debug('Final video file path: %s', output_p)

        video_clip.write_videofile(video_file, fps=24)

        try:
            shutil.copy(video_file, output_p)
        except Exception as e:
            logger.error('Error occurred while copying file: %s', str(e))
            return f"Error occurred while copying file: {str(e)}"

        # Return the rendered template with the list of directories and output path
        return render_template('choose_dir.html', directories=directories, output_path=output_p)

    # If the request method is GET, render the form template with the list of directories
    output_p = 'static/videos/random_images_video.mp4'
    return render_template('choose_dir.html', directories=directories, output_path=output_p)


@app.route('/convert', methods=['GET', 'POST'])
def convert():
    if request.method == 'POST':
        try:
            audio_file = request.files['audio_file']
            # Path for audio file
            audio_file_path = f'static/audio_mp3/{audio_file.filename}'
            # Save the audio file to the specified location
            audio_file.save(audio_file_path)

            formatted_text_file = request.files['formatted_text_file']
            # Path for formatted text file
            formatted_text_file_path = f'static/formatted_text/{formatted_text_file.filename}'
            # Save the formatted text file to the specified location
            formatted_text_file.save(formatted_text_file_path)

            output_filename = datetime.datetime.now().strftime('%Y-%m-%d') + '.mp4'
            output_path = 'static/videos/' + output_filename
            # Define the ffmpeg command
            # Create the blank video
            # ffmpeg -f lavfi -i color='#470000'@0x0:s=1280x720:rate=60,format=rgba -t 280 -y blank.mp4
            command = [
                'ffmpeg',
                '-i', audio_file_path,
                '-f', 'lavfi',
                '-i', f"color='#470000'@0.0:s=1280x720:rate=60,format=rgba",
                '-vf', f"drawtext=textfile='{os.path.abspath(formatted_text_file_path)}':y=(h-220)-12*t:x=580:fontcolor=orange:fontfile=/home/jack/Arimo-Regular.ttf:fontsize=26",
                '-t', '280',
                '-y', output_path
            ]

            logger.debug(f"Command: {' '.join(command)}")

            subprocess.run([str(arg) for arg in command], check=True)
            video = f'{output_filename}'
            return render_template('convert.html', video=output_path)
        except Exception as _:
            logger.exception("An error occurred during video conversion:")
            return render_template('error.html', message="An error occurred during video conversion.")
    else:
        return render_template('convert_form.html')


@app.route('/convert512', methods=['GET', 'POST'])
def convert512():
    if request.method == 'POST':
        try:
            audio_file = request.files['audio_file']
            # Path for audio file
            audio_file_path = f'static/audio_mp3/{audio_file.filename}'
            # Save the audio file to the specified location
            audio_file.save(audio_file_path)
            # Get the duration of the audio using ffprobe
            command = f"ffprobe -v error -show_entries format=duration -of default=noprint_wrloggers=1:nokey=1 {audio_file_path}"
            duration = subprocess.check_output(command.split())
            duration = float(duration.strip().decode())
            length = int(duration + 5)
            logger.info(f'Duration-512: {length}')
            formatted_text_file = request.files['formatted_text_file']
            # Path for formatted text file
            formatted_text_file_path = f'static/formatted_text/{formatted_text_file.filename}'
            # Save the formatted text file to the specified location
            formatted_text_file.save(formatted_text_file_path)

            output_filename = datetime.datetime.now().strftime('%Y-%m-%d') + '.mp4'
            output_path = 'static/videos/' + output_filename
            # Define the ffmpeg command
            # Create the blank video
            # ffmpeg -f lavfi -i color='#470000'@0x0:s=1280x720:rate=60,format=rgba -t 280 -y blank.mp4
            # y=(h-120)-12*t:x=24:
            command = [
                'ffmpeg',
                '-i', audio_file_path,
                '-f', 'lavfi',
                '-i', f"color='#470000'@0.0:s=512x1024:rate=60,format=rgba",
                '-vf', f"drawtext=textfile='{os.path.abspath(formatted_text_file_path)}':y=(h-120)-10*t:x=24:fontcolor=orange:fontfile=/home/jack/Arimo-Regular.ttf:fontsize=20",
                '-t', f'{length}', '-y', output_path
            ]

            logger.debug(f"Command: {' '.join(command)}")

            subprocess.run([str(arg) for arg in command], check=True)
            video = f'{output_filename}'
            return render_template('convert512.html', video=output_path)
        except Exception as e:
            logger.exception("An error occurred during video conversion:")
            return render_template('error.html', message="An error occurred during video conversion.")
    else:
        return render_template('convert_form512.html')


@app.route('/mk_text', methods=['GET', 'POST'])
def mk_text():
    DIR = "static/text/"
    if request.method == 'POST':
        text = request.form.get('text')
        tex = text.replace(" ", "_")
        filename = tex[:25]
        with open(f'{DIR}{filename}.txt', 'w') as file:
            file.write(text)
        return render_template('mk_text.html', text=text, filename=f'{filename}.txt')
    else:
        return render_template('mk_text.html')


@app.route('/list_files')
def list_files():
    static_text_dir = 'static/text/'
    files = os.listdir(static_text_dir)
    files = [file for file in files if os.path.isfile(
        os.path.join(static_text_dir, file))]
    return str(files)


@app.route('/format_file', methods=['POST', 'GET'])
def format_file():
    static_text_dir = 'static/text/'
    static_format_dir = 'static/formatted_text/'
    if request.method == 'POST':
        filename = request.form.get('filename')
        file_path = os.path.join(static_text_dir, filename)
        if not os.path.isfile(file_path):
            return render_template('error.html', message=f'File "{filename}" does not exist')
        with open(file_path, 'r') as file:
            content = file.read()
        words = content.split()
        formatted_content = '\n'.join(
            [' '.join(words[i:i + 5]) for i in range(0, len(words), 5)])
        modified_filename = filename.replace('.txt', '') + 'FORMATTED.txt'
        modified_file_path = os.path.join(static_format_dir, modified_filename)
        with open(modified_file_path, 'w') as modified_file:
            modified_file.write(formatted_content)
            logger.debug('This is Formated Content: %s', formatted_content)
            logger.debug('This is Formated file: %s', modified_file_path)
        return render_template('success.html', original_file=filename, modified_file=modified_filename)

    file_options = []
    for file_name in os.listdir(static_text_dir):
        if file_name.endswith('.txt'):
            file_options.append(file_name)

    return render_template('form.html', file_options=file_options)


@app.route('/view_text')
def view_text():
    text_files_dir = 'static/text/'
    text_files = []
    for filename in os.listdir(text_files_dir):
        if filename.endswith('.txt'):
            text_files.append(filename)
    return render_template('select_file.html', text_files=text_files)


@app.route('/view_text/<filename>')
def display_text(filename):
    text_file_path = f'static/text/{filename}'
    try:
        with open(text_file_path, 'r') as file:
            file_contents = file.read()
        return render_template('view_text.html', file_contents=file_contents, filename=filename)
    except FileNotFoundError:
        return f'Text file {filename} not found.'


@app.route('/edit_file', methods=['GET', 'POST'])
def edit_file():
    if request.method == 'POST':
        filename = request.form.get('filename')
        text = request.form.get('text')
        with open(f'static/text/{filename}', 'w') as file:
            file.write(text)
    text_files_dir = 'static/text/'
    text_files = []
    for filename in os.listdir(text_files_dir):
        if filename.endswith('.txt'):
            text_files.append(filename)
    fvideo = findvideos()        
    return render_template('edit_file.html', text_files=text_files, video=fvideo)


@app.route('/edit_formatted', methods=['GET', 'POST'])
def edit_formatted():
    if request.method == 'POST':
        filename = request.form.get('filename')
        text = request.form.get('text')
        with open(f'static/formatted_text/{filename}', 'w') as file:
            file.write(text)
    text_files_dir = 'static/formatted_text/'
    text_files = []
    for filename in os.listdir(text_files_dir):
        if filename.endswith('.txt'):
            text_files.append(filename)
    return render_template('edit_formatted.html', text_files=text_files)


@app.route('/get_formatted_content/<filename>')
def get_formatted_content(filename):
    file_path = os.path.join('static/formatted_text', filename)
    with open(file_path, 'r') as file:
        content = file.read()
    return content


@app.route('/get_file_content/<filename>')
def get_file_content(filename):
    file_path = os.path.join('static/text', filename)
    with open(file_path, 'r') as file:
        content = file.read()
    return content


@app.route('/indeX')
def indeX():
    return render_template('indeX.html')


@app.route('/resize_and_overlay_videos')
def resize_and_overlay_videos():
    # Path to the videos
    static_video_path = 'static/videos/2023-07-07.mp4'
    input_video_path = 'static/animate/topvideo.mp4'
    output_video_path = 'static/output/resulta.mp4'

    # Resize the input video using FFmpeg
    resize_command = f'ffmpeg -i {input_video_path} -vf "scale=410:820" -y resized.mp4'
    subprocess.call(resize_command, shell=True)

    # Overlay the resized video on the background video using FFmpeg
    overlay_command = f'ffmpeg -i {static_video_path} -i resized.mp4 -filter_complex "overlay=25:25" -y {output_video_path}'
    subprocess.call(overlay_command, shell=True)

    # Remove the temporary resized video
    subprocess.call('rm resized.mp4', shell=True)

    # Return the final video as a response
    return send_file(output_video_path, mimetype='video/mp4')


@app.route('/resize_and_overlay_videos_page')
def resize_and_overlay_videos_page():
    output_video_path = 'static/output/resulta.mp4'
    return render_template('resize_and_overlay_videos.html', video=output_video_path)


@app.route('/build_stackedvids')
def build_stackedvids():
    # Get a random video and image from the static folder
    video_filename = random.choice(glob.glob('static/square_vids/*.mp4'))
    image_filename = random.choice(glob.glob('static/squares/*.jpg'))

    # Load the video and image files as clips
    video_clip = VideoFileClip(video_filename)
    image_clip = ImageClip(image_filename)

    # Set the duration of the image clip to match the duration of the video clip
    image_clip = image_clip.set_duration(video_clip.duration)

    # Resize the clips to 640x640 and 640x640 respectively
    video_clip = video_clip.resize((640, 640))
    image_clip = image_clip.resize((640, 640))

    # Create a black clip to fill the remaining space below the image
    black_clip = ColorClip(size=(640, 640), color=(
        0, 0, 0)).set_duration(video_clip.duration)

    # Combine the clips vertically using CompositeVideoClip
    final_clip = CompositeVideoClip([
        video_clip.set_position(('center', 'top')),
        image_clip.set_position(('center', 640)),
        black_clip.set_position(('center', 640 + 640))
    ], size=(640, 1280))

    # Export the final clip as a video file
    timestr = time.strftime("%Y%m%d-%H%M%S")
    video_filename = 'static/stacked_vids/stacked_vids' + timestr + 'video.mp4'
    final_clip_path = 'static/stacked_vids/stacked_videos.mp4'
    final_clip.write_videofile(final_clip_path)
    final_clip.write_videofile(video_filename)

    return render_template('/build_stackedvids.html', stackedvid_url=final_clip_path)


@app.route('/build_stackedvid')
def build_stackedvid():
    # Get a random video and image from the static folder
    video_filename = random.choice(glob.glob('static/square_vids/*.mp4'))
    videofilename = random.choice(glob.glob('static/square_vids/*.mp4'))

    # Load the video and image files as clips
    video_clip = VideoFileClip(video_filename)
    videoclip = VideoFileClip(videofilename)

    # Set the duration of the image clip to match the duration of the video clip
    videoclip = videoclip.set_duration(video_clip.duration)

    # Resize the clips to 640x640 and 640x640 respectively
    video_clip = video_clip.resize((640, 640))
    videoclip = videoclip.resize((640, 640))

    # Create a black clip to fill the remaining space below the image
    black_clip = ColorClip(size=(640, 640), color=(
        0, 0, 0)).set_duration(video_clip.duration)

    # Combine the clips vertically using CompositeVideoClip
    final_clip = CompositeVideoClip([
        video_clip.set_position(('center', 'top')),
        videoclip.set_position(('center', 640)),
        black_clip.set_position(('center', 640 + 640))
    ], size=(640, 1280))

    # Export the final clip as a video file
    timestr = time.strftime("%Y%m%d-%H%M%S")
    video_filename = 'static/stacked_vids/stacked_vids' + timestr + 'video.mp4'
    final_clip_path = 'static/stacked_vids/stacked_videos.mp4'
    final_clip.write_videofile(final_clip_path)
    final_clip.write_videofile(video_filename)

    return render_template('/build_stackedvid.html', stackedvid_url=final_clip_path)


@app.route('/clean_images', methods=['POST'])
def clean_images_route():
    clean_images()
    logger.error('line 210 clean_images_route')
    return redirect(url_for('index'))


@app.route('/get_gallery')
def get_gallery():
    image_dir = '/mnt/HDD500/flask/FLASK/static/images/uploads'
    image_names = os.listdir(image_dir)
    return render_template('get_gallery.html', image_names=image_names)


@app.route('/uploads/<filename>')
def send_image(filename):
    return send_from_directory('static/images/uploads', filename)


@app.route('/uploads/thumbnails/<filename>')
def send_image_thumb(filename):
    return send_from_directory('static/images/uploads/thumbnails', filename)


@app.route('/flask_info')
def flask_info():
    return render_template('flask_info.html')


@app.route('/add_effects')
def add_effects():
    return '''
        <form method="post" action="/video" enctype="multipart/form-data">
            <label for="input_video">Select input video file:</label><br>
            <input type="file" id="input_video" name="input_video"><br><br>
            <input type="submit" value="Submit">
        </form>
    '''


@app.route('/video', methods=['GET', 'POST'])
def process_video():
    DIR = "static/"
    input_video = request.files['input_video']

    # Save the uploaded video to a file
    input_video.save(f"{DIR}input_video.mp4")

    # Run FFmpeg commands
    command1 = f"ffmpeg -nostdin -i {DIR}input_video.mp4 -filter:v \"minterpolate='mi_mode=mci:mc_mode=aobmc:vsbmc=1:fps=10'\" -c:v libx264 -r 20 -pix_fmt yuv420p -c:a copy -y {DIR}output.mp4"

    subprocess.run(command1, shell=True, stderr=subprocess.PIPE,
                   universal_newlines=True)

    command2 = f"ffmpeg -nostdin -i {DIR}output.mp4 -vf mpdecimate,setpts=N/FRAME_RATE/TB -c:v libx264 -r 30 -pix_fmt yuv420p -c:a copy -y {DIR}mpdecimate.mp4"

    subprocess.run(command2, shell=True, stderr=subprocess.PIPE,
                   universal_newlines=True)

    # DIR = "/home/jack/Desktop/ffmpeg_flask/"
    command3 = f"ffmpeg -i static/mpdecimate.mp4 -filter_complex \"[0:v]trim=duration=14,loop=500:1:0[v];[1:a]afade=t=in:st=0:d=1,afade=t=out:st=0.9:d=2[a1];[v][0:a][a1]concat=n=1:v=1:a=1\" -c:v libx264 -r 30 -pix_fmt yuv420p -c:a aac -b:a 192k -shortest -y static/output.mp4"
    subprocess.run(command3, shell=True, stderr=subprocess.PIPE,
                   universal_newlines=True)

    now = datetime.datetime.now().strftime("%Y-%m-%d_%H-%M-%S")
    shutil.copy(f"{DIR}output.mp4", f"{DIR}{now}_output.mp4")
    logger.info(f'my_video: f"{DIR}mpdecimate.mp4"')
    video_file = "static/outputALL.mp4"
    command4 = f'ffmpeg -i "{DIR}mpdecimate.mp4" -i "{DIR}mpdecimate.mp4" -i "{DIR}mpdecimate.mp4" -i "{DIR}mpdecimate.mp4" -i "{DIR}mpdecimate.mp4" -filter_complex "[0:v]trim=duration=15[v0];[1:v]trim=duration=15[v1];[2:v]trim=duration=15[v2];[3:v]trim=duration=15[v3];[4:v]trim=duration=15[v4];[v0][v1][v2][v3][v4]concat=n=5:v=1:a=0" -c:v libx264 -pix_fmt yuv420p -shortest -y {video_file}'
    subprocess.run(command4, shell=True, stderr=subprocess.PIPE,
                   universal_newlines=True)
    now = datetime.datetime.now().strftime("%Y-%m-%d_%H-%M-%S")
    diR = f"{DIR}/square_videos/"
    logger.info(f'diR: f"{diR}mpdecimate.mp4"')
    shutil.copy(f"{video_file}", f"{diR}{now}_outputALL.mp4")
    logger.info(f'diR: {diR}mpdecimate.mp4')
    return render_template('final.html', video_file=video_file)


def get_all_mp4_videos():
    mp4_videos = []
    for root, dirs, files in os.walk('static'):
        for file in files:
            if file.endswith('.mp4'):
                mp4_videos.append(os.path.join(root, file))
    return mp4_videos


@app.route('/play/<path:video_path>')
def play(video_path):
    return send_file(video_path)


@app.route('/select_order', methods=['GET', 'POST'])
def select_order():
    # Set a default value for output_path
    output_path = 'static/videos/concatenated_video.mp4'
    if request.method == 'POST':
        # Get the order of the videos from the form data
        order = request.form.getlist('order')
        # Join the videos in the specified order
        join_videos(order, output_path)
        # Set the timestamped output path
        timestamp = datetime.datetime.now().strftime('%Y%m%d_%H%M%S')
        new_output_path = f'static/videos/concatenated_{timestamp}XX.mp4'
        shutil.copy(output_path, new_output_path)
        # Redirect to the download page
        return redirect(url_for('download'))
    else:
        # Get the paths to the video files in the directory
        video_dir = 'static/videos'
        video_files = [os.path.join(video_dir, filename) for filename in os.listdir(
            video_dir) if filename.endswith('.mp4')]
        # Render the template with the list of video files and the output path
        return render_template('select_order.html', video_files=video_files, output_path=output_path)


def join_videos(video_paths, output_path):
    # Generate a list of input arguments for FFmpeg
    input_args = []
    for path in video_paths:
        input_args.extend(['-i', path])
    # Join the videos using FFmpeg
    subprocess.run(['ffmpeg', *input_args, '-filter_complex', 'concat=n={}:v=1:a=0'.format(
        len(video_paths)), '-c:v', 'libx264', '-crf', '23', '-preset', 'veryfast', '-y', output_path])
    # output_path = 'static/videos/concatenated_video.mp4'
    timestamp = datetime.datetime.now().strftime('%Y%m%d_%H%M%S')
    new_output_path = f'static/videos/concatenated_{timestamp}XX.mp4'
    shutil.copy(output_path, new_output_path)


@app.route('/videos', methods=['POST'])
def process_videos():
    DIR = "static/"
    input_video = request.files['input_video']
    ""
    # Save the uploaded video to a file
    input_video.save(f"{DIR}input_video2.mp4")

    command1 = f"ffmpeg -nostdin -i {DIR}input_video2.mp4 -filter:v \"minterpolate='mi_mode=mci:mc_mode=aobmc:vsbmc=1:fps=10'\" -c:v libx264 -r 20 -pix_fmt yuv420p -c:a copy -y {DIR}alice/output2.mp4"
    subprocess.run(command1, shell=True, stderr=subprocess.PIPE,
                   universal_newlines=True)

    command2 = f"ffmpeg -hide_banner -i {DIR}alice/output2.mp4 -filter:v \"setpts=5*PTS,minterpolate='fps=25:scd=none:me_mode=bidir:vsbmc=1:search_param=200'\" -t 58 -y {DIR}alice/final2.mp4"
    subprocess.run(command2, shell=True, stderr=subprocess.PIPE,
                   universal_newlines=True)

    command3 = f"ffmpeg -hide_banner -i {DIR}alice/final2.mp4 -filter:v \"setpts=5*PTS,minterpolate='fps=25:scd=none:me_mode=bidir:vsbmc=1:search_param=200'\" -t 58 -y {DIR}alice/final5.mp4"
    subprocess.run(command3, shell=True, stderr=subprocess.PIPE,
                   universal_newlines=True)

    # Add music to the video
    init = randint(10, 50)
    MUSIC = ["static/music/Born_a_Rockstar-Instrumental-NEFFEX.mp3", "static/music/Cattle-Telecasted.mp3", "static/music/Bite_Me-Clean-NEFFEX.mp3", "static/music/El_Secreto-Yung_Logos.mp3", "static/music/Blue_Mood-Robert_Munzinger.mp3", "static/music/Escapism-Yung_Logos.mp3", "static/music/Enough-NEFFEX.mp3", "static/music/As_You_Fade_Away-NEFFEX.mp3", "static/music/Culture-Anno_Domini_Beats.mp3", "static/music/Contrast-Anno_Domini_Beats.mp3", "static/music/Diving_in_Backwards-Nathan_Moore.mp3",
             "static/music/Aztec_Empire-Jimena_Contreras.mp3", "static/music/Devil_s_Organ-Jimena_Contreras.mp3", "static/music/Alpha_Mission-Jimena_Contreras.mp3", "static/music/Changing-NEFFEX.mp3", "static/music/Anxiety-NEFFEX.mp3", "static/music/6-Shots-NEFFEX.mp3", "static/music/DimishedReturns.mp3", "static/music/Drum_Meditation.mp3", "static/music/ChrisHaugen.mp3", "static/music/DoveLove-Moreira.mp3", "static/music/DesertPlanet.mp3", "static/music/David_Fesliyan.mp3"]

    music = random.choice(MUSIC)
    command3 = f"ffmpeg -i {DIR}alice/final5.mp4 -ss {init} -i {music} -af 'afade=in:st=0:d=4,afade=out:st=55:d=3' -map 0:0 -map 1:0 -shortest -y {DIR}alice/Final_End.mp4"
    subprocess.run(command3, shell=True)

    # Save the output video to a file
    now = datetime.datetime.now().strftime("%Y-%m-%d_%H-%M-%S")
    shutil.copy(f"{DIR}alice/output2.mp4", f"{DIR}alice/{now}_output.mp4")
    shutil.copy(f"{DIR}alice/Final_End.mp4", f"{DIR}alice/{now}_Final.mp4")
    shutil.copy(f"{DIR}alice/Final_End.mp4", f"{DIR}alice/Final_End_mix.mp4")
    return render_template('final.html', video_file="alice/Final_End.mp4")


@app.route('/large_video')
def large_video():
    return render_template('large_video.html')


@app.route('/add_border')
def add_border():
    images = [f for f in os.listdir(
        'static/images/uploads/') if os.path.isfile(os.path.join('static/images/uploads/', f))]
    thumbnails = []
    for image in images:
        with Image.open('static/images/uploads/' + image) as img:
            img.thumbnail((200, 200))
            thumbnail_name = 'thumbnail_' + image
            img.save('static/thumbnails/' + thumbnail_name)
            thumbnails.append(thumbnail_name)
    return render_template('add_border.html', images=images, thumbnails=thumbnails)


@app.route('/select_border')
def select_border():
    borders = os.listdir('static/transparent_borders/')
    return render_template('select_border.html', borders=borders)


@app.route('/apply_border', methods=['POST', 'GET'])
def apply_border():
    selected_image = request.form['image']
    selected_border = request.form['border']
    try:
        with Image.open('static/images/uploads/' + selected_image) as img:
            with Image.open('static/transparent_borders/' + selected_border) as border:
                img = img.resize(border.size)
                img.paste(border, (0, 0), border)
                final_image_name = 'final_' + selected_image
                img.save('static/final_images/' + final_image_name)
        return render_template('final_image.html', final_image=final_image_name, message='Border applied successfully.')
    except Exception as e:
        error_message = f'An error occurred: {str(e)}. Please try again.'
        return render_template('apply_border.html', image=selected_image, border=selected_border, error_message=error_message)


@app.route('/select_border_image', methods=['GET'])
def select_border_image():
    try:
        image = request.args.get('image')
        if not image:
            raise ValueError('No image selected.')
        return render_template('select_border.html', image=image, borders=os.listdir('static/transparent_borders/'))
    except Exception as e:
        error_message = f'An error occurred: {str(e)}. Please try again.'
        return render_template('add_border.html', error_message=error_message)


@app.route('/overlay_text', methods=['GET'])
def overlay_text():
    # Load the blank image
    blank_image_path = 'static/new_video/Border-plain.png'
    blank_image = Image.open(blank_image_path)

    # Load the text file and format its contents
    text_file_path = 'static/new_video/text_file.txt'
    with open(text_file_path, 'r') as file:
        text_contents = file.read()

    formatted_text = f"{text_contents}"  # Format the contents as desired

    # Set the font properties
    font_size = 21
    font_color = (255, 255, 255)  # White color
    font_path = '/home/jack/fonts/source-sans-pro-semibold.ttf'

    font = ImageFont.truetype(font_path, font_size)

    # Create a new image with the same size as the blank image and transparent background
    text_overlay = Image.new('RGBA', blank_image.size, (0, 0, 0, 0))

    # Draw the formatted text onto the overlay image
    draw = ImageDraw.Draw(text_overlay)
    text_position = (50, 600)  # Adjust the position as needed
    draw.text(text_position, formatted_text, font=font, fill=font_color)

    # Merge the overlay image with the blank image
    final_image = Image.alpha_composite(
        blank_image.convert('RGBA'), text_overlay)

    # Save the final image
    output_image_path = 'static/new_video/output_image.png'
    final_image.save(output_image_path)

    return render_template('overlay_text.html', output_image_path=output_image_path)


@app.route('/create_text_file', methods=['GET', 'POST'])
def create_text_file():
    if request.method == 'POST':
        # Get the text content from the textarea
        text_content = request.form.get('textarea_content')

        # Create the file path
        text_file_path = os.path.join('static/new_video', 'text_file.txt')

        # Write the text content to the file
        with open(text_file_path, 'w') as file:
            file.write(text_content)

        return render_template('text_file_created.html', text_file_path=text_file_path)

    return render_template('create_text_file.html')


def allowed_file(filename):
    return '.' in filename and filename.rsplit('.', 1)[1].lower() == 'jpg'


@app.route('/generate_video3', methods=['GET', 'POST'])
def generate_video3():
    if request.method == 'POST':
        # Check if any files were uploaded
        if 'file' not in request.files:
            error_message = "No files uploaded."
            logger.error(error_message)
            return render_template('generate_video3.html', error_message=error_message)

        files = request.files.getlist('file')

        # Check if files were selected
        if len(files) == 0:
            error_message = "No files selected."
            logger.error(error_message)
            return render_template('generate_video3.html', error_message=error_message)

        # Check if the files have supported extensions
        for file in files:
            if not allowed_file(file.filename):
                error_message = f"Invalid file extension for {file.filename}. Only JPG files are allowed."
                logger.error(error_message)
                return render_template('generate_video3.html', error_message=error_message)

        # Create a temporary directory to save the uploaded files
        temp_dir = os.path.join('static', 'temp')
        os.makedirs(temp_dir, exist_ok=True)

        # Save the uploaded files to the temporary directory
        saved_files = []
        for file in files:
            filename = secure_filename(file.filename)
            file_path = os.path.join(temp_dir, filename)
            file.save(file_path)
            saved_files.append(file_path)

        # Randomly select 30 image files
        selected_images = random.sample(saved_files, min(30, len(saved_files)))

        # Create a list of image clips from the selected images
        image_clips = []
        for image_file in selected_images:
            image_clip = mp.ImageClip(image_file, duration=1)
            image_clips.append(image_clip)

        # Concatenate the image clips into a video clip
        video_clip = mp.concatenate_videoclips(image_clips)

        # Set the output video path
        output_path = os.path.join('static', 'videos', 'generated_video.mp4')

        # Write the video clip to the output file
        video_clip.write_videofile(output_path, fps=24)

        # Delete the uploaded files after processing
        for file_path in saved_files:
            os.remove(file_path)

        # Return the generated video URL to the client
        video_url = url_for('static', filename='videos/generated_video.mp4')
        return render_template('generate_video3.html', video_url=video_url)

    # Render the initial form
    return render_template('generate_video3.html')


@app.route('/generate_video2')
def generate_video2():
    # Get the pythonlist of image files in the static/final_images/ directory
    # image_filenames = random.sample(glob.glob('static/final_images/*.jpg'),25)
    # image_filenames = random.sample(glob.glob('static/images/uploads/*.jpg'),30)
    # image_filenames = random.sample(glob.glob('static/alien_files/*.jpg'),30)
    image_filenames = random.sample(
        glob.glob('/mnt/HDD500/collections/absrtact/*.jpg'), 30)
    print(image_filenames, end="-")

    image_clips = []
    for filename in image_filenames:
        # Open the image file and resize it to 512x768
        image = Image.open(filename)
        image = image.resize((512, 768), Image.ANTIALIAS)
        print(image)
        # Convert the PIL Image object to a NumPy array
        image_array = np.array(image)
        # Create an ImageClip object from the resized image and set its duration to 1 second
        image_clip = ImageClip(image_array).set_duration(1)

        # Append the image clip to the list
        image_clips.append(image_clip)

    # Concatenate all the image clips into a single video clip
    video_clip = concatenate_videoclips(image_clips, method='compose')
    timestr = time.strftime("%Y%m%d-%H%M%S")
    # Set the fps value for the video clip
    video_clip.fps = 24
    # Write the video clip to a file
    video_path = 'static/videos/random_images' + timestr + 'video.mp4'
    video_clip.write_videofile(video_path, fps=24)
    video_clip.write_videofile('static/videos/TEMPvideo.mp4', fps=24)

    # Return a message to the client
    return render_template('generate_video2.html', video_url='static/videos/TEMPvideo.mp4')
    # return render_template('generate_video2.html' ,video_url='/static/videos/TEMPvideo.mp4', video_path=video_path)


@app.route('/ffmpeg_ctl', methods=['GET', 'POST'])
def ffmpeg_ctl():
    if request.method == 'POST':
        # Access the numeric input value from the form data
        number = request.form.get('number')
        # Process the value as needed
        # ...

    return render_template('ffmpeg_ctl.html')


@app.route('/mkmoz', methods=['GET', 'POST'])
def mkmoz():
    im = Image.new("RGB", (2048, 2048), (250, 250, 250))
    for i in range(0, 2500):
        if i < 500:
            DIR = "/home/jack/.cache/thumbnails/large/*.png"
        if i > 500:
            DIR = "/home/jack/.cache/thumbnails/normal/*.png"
        # if i> 2495:DIR = "/home/jack/.cache/thumbnails/large/*.png"
        thumb = random.choice(glob.glob(DIR))
        print("THUMB:", thumb)
        Thum = Image.open(thumb)
        im.paste(Thum, ((randint(0, im.size[0])), randint(0, im.size[1]) - 50))
        filename = "static/images/ThumbNails.png"
        im.save(filename)
        Filename = "images/ThumbNails.png"
    return render_template("mkmoz.html", filename=Filename)


@app.route('/mk_background', methods=['GET', 'POST'])
def mk_background():
    im = Image.new("RGB", (8000, 512), (127, 255, 127))
    for i in range(0, 1000):
        if i < 250:
            DIR = "/home/jack/.cache/thumbnails/large/*.png"
        else:
            DIR = "/home/jack/.cache/thumbnails/normal/*.png"
        thumb = random.choice(glob.glob(DIR))
        print("THUMB:", thumb)
        Thum = Image.open(thumb)
        im.paste(Thum, ((randint(0, im.size[0])), randint(0, im.size[1]) - 50))
        filename = "static/images/ThumbNails_Background.png"
        im.save(filename)
    return redirect('/mkvid')


@app.route('/mkvid')
def mkvid():
    Filename = "static/images/ThumbNails_Background.png"
    Video_file = "static/images/ThumbNails_Background_FFmpeg.mp4"
    command = [
        'FFmpeg', '-hide_banner',
        '-loop', '1', '-i', 'static/images/ThumbNails_Background.png',
        '-vf', 'scale=8000:512,scroll=horizontal=0.0001,crop=768:512:0:0,format=yuv420p',
        '-t', '240', '-y', 'static/images/ThumbNails_Background_FFmpeg.mp4'
    ]
    subprocess.run(command)
    return redirect('/mkvid2')


@app.route('/mkvid2')
def mkvid2():
    command2 = [
        'ffmpeg', '-hide_banner',
        '-i', 'static/images/ThumbNails_Background_FFmpeg.mp4',
        '-vf', 'scale=512:768,setsar=1/1',
        '-c:a', 'copy', '-y', 'static/images/long_512-768.mp4'
    ]
    subprocess.run(command2)
    Filenamez = "images/ThumbNails_Background.png"
    Video_filez = "images/long_512-768.mp4"
    return render_template("mkvid2.html", filename=Filenamez, video=Video_filez)


def get_db():
    db = getattr(g, '_database', None)
    if db is None:
        db = g._database = sqlite3.connect(app.config['DATABASE'])
    return db


@app.teardown_appcontext
def close_connection(exception):
    db = getattr(g, '_database', None)
    if db is not None:
        db.close()


@app.route('/view_thumbs')
def view_thumbs():
    # Define the directory where the images are located
    image_directory = 'static/images/uploads'
    # Get a list of all the image files in the directory
    image_files = [f for f in os.listdir(
        image_directory) if f.endswith('.jpg') or f.endswith('.png')]
    # Create a list of dictionaries containing the image file name and URL
    image_list = [{'name': f, 'url': f'/images/uploads/{f}'}
                  for f in image_files]
    # Render the template with the list of images
    return render_template('view_thumbs.html', image_list=image_list)


@app.route('/add_text', methods=['GET', 'POST'])
def add_text():
    if request.method == 'POST':
        text = request.form['text']
        now = datetime.datetime.now()
        timestamp = now.strftime("%Y-%m-%d %H:%M:%S")
        text = f'Text Entry: {timestamp} {text}'
        with open('chat.txt', 'a') as file:
            file.write(f'\n{text}')
        return render_template('add_text.html', message='Text added successfully')
    else:
        return render_template('add_text.html')


@app.route('/search_txt', methods=['GET', 'POST'])
def search_txt():
    if request.method == 'POST' and 'phrase' in request.form:
        phrase = request.form['phrase']
        with open('chat.txt', 'r') as file:
            lines = file.readlines()
        results = []
        for i, line in enumerate(lines):
            if phrase in line:
                start = max(0, i - 5)
                end = min(len(lines), i + 6)
                context = lines[start:end]
                for j, context_line in enumerate(context):
                    if phrase in context_line:
                        results.append(f'Line {start+j}: {context_line}')
                    else:
                        results.append(f'Line {start+j}: {context_line}')
        return render_template('results.html', results=results)
    return render_template('search_txt.html')


@app.route('/blend_pil', methods=['POST', 'GET'])
def blend_pil():
    if request.method == 'POST':
        # Get the uploaded images
        img1 = request.files['img1']
        img2 = request.files['img2']
        img3 = request.files['img3']

        # Open the images using PIL
        img1_pil = Image.open(img1)
        img2_pil = Image.open(img2)
        img3_pil = Image.open(img3)

        # Blend the images
        blended_pil = Image.blend(img1_pil, img2_pil, 1 / 3)
        blended_pil = Image.blend(blended_pil, img3_pil, 1 / 3)

        # Return the blended image as a response
        # Since we are not saving it to the server, we can use a BytesIO object to avoid creating a temporary file
        img_io = BytesIO()
        blended_pil.save(img_io, 'JPEG', quality=70)
        current_datetime = datetime.now()
        str_current_datetime = str(current_datetime)
        file_name = "static/images/uploads/blended_pil" + \
            str_current_datetime + "XXXX.jpg"
        blended_pil.save(file_name, format='JPEG')
        img_io.seek(0)

        # Generate the HTML for displaying the blended image in the template
        blended_image_data = base64.b64encode(
            img_io.getvalue()).decode('utf-8')
        blended_image_url = f"data:image/jpeg;base64,{blended_image_data}"
        # blended_image_url = blended_image_url.resize(( blended_image_url.size[0]//2, blended_image_url.size[1]//2), Image.ANTIALIAS)
        # Pass the URL of the blended image to the template
        return render_template('show_blend_pil.html', blended_image_url=blended_image_url)
    return render_template('blend_pil.html')


@app.route('/process_images', methods=['POST', 'GET'])
def process_images():
    if request.method == 'POST':
        # read the images from the request
        img1 = Image.open(request.files['image1'].stream).convert('RGB')
        img2 = Image.open(request.files['image2'].stream).convert('L')
        img3 = Image.open(request.files['image3'].stream).convert('RGB')

        # resize the images to have the same shape
        img1 = img1.resize((img2.width, img2.height))
        img3 = img3.resize((img2.width, img2.height))

        # convert the mask to binary
        threshold = 127
        mask = Image.eval(img2, lambda px: 255 if px > threshold else 0)

        # apply the mask
        img = Image.composite(img1, img3, mask)

        # save the image to a file
        output = BytesIO()
        current_datetime = datetime.now()
        str_current_datetime = str(current_datetime)
        file_name = "static/images/" + str_current_datetime + "XXXX.jpg"
        img.save(file_name, format='JPEG')
        img.save(output, format='JPEG')
        output.seek(0)

        # encode the image to bytes
        img_bytes = output.getvalue()

        # return the image as a response
        return Response(img_bytes, mimetype='image/jpeg')
    return render_template('process_images.html')


@app.route('/image_directories', methods=['GET', 'POST'])
def image_directories():
    image_directories = ['static/Prodia_640x640', 'static/LineArt',
                         'static/Quantized', 'static/squares', 'static/BrightColors']
    if request.method == 'POST':
        # Rest of the code

        directory = request.form['directory']
        # Check that the directory parameter is not empty
        if directory:
            logger.info(
                'Redirecting endpoint with directory: %s', directory)
            # Check that the directory is a valid directory path
            if os.path.isdir(directory):
                # Pass the directory value to the square_video endpoint
                logger.info(
                    'Redirecting to square_video endpoint with directory: %s', directory)
                return redirect(url_for('square_video', directory=directory))
            else:
                # Render an error template if the directory parameter is not a valid directory path
                logger.error('Invalid directory parameter: %s', directory)
                return render_template('error.html', message='Please enter a valid directory path.')
        else:
            # Render an error template if the directory parameter is empty
            logger.error('Directory parameter is empty')
            return render_template('error.html', message='Please enter a directory path.')
    else:
        # Pass the list of image directories to the template
        return render_template('image_directories.html', image_directories=image_directories)


#USE_AUDIO_MP3 = False  # Set this to True if you want to use 'static/audio_mp3/'
#MDIR = 'static/music/' if not USE_AUDIO_MP3 else 'static/audio_mp3/'

# ...
@app.route('/select_playmp3', methods=['GET', 'POST'])
def select_playmp3():
    selected_directory = request.args.get('selected_directory')  # Use args instead of form for GET method
    selected_mp3 = request.form.get('mp3_file')  # Check the name attribute of your form input
    
    print(f"Selected Directory: {selected_directory}")
    print(f"Selected MP3: {selected_mp3}")
    
    directories = ['static/audio_mp3/', 'static/music/']
    mp3_files = []

    if selected_directory:
        mp3_files = [f for f in os.listdir(selected_directory) if f.endswith('.mp3')]
    
    if request.method == 'POST' and selected_mp3 and selected_directory:
        mp3_path = os.path.join(selected_directory, selected_mp3)
        
        pygame.mixer.init()
        pygame.mixer.music.load(mp3_path)
        pygame.mixer.music.play()
        
        while pygame.mixer.music.get_busy():
            pygame.time.Clock().tick(10)
        
        pygame.mixer.quit()
        pygame.quit()
    
    fvideo = findvideos()
    return render_template('select_playmp3.html', directories=directories, selected_directory=selected_directory, mp3_files=mp3_files, video=fvideo)



@app.route("/make_animation")
def make_animation():
    # Get a list of all files in the final_images directory
    # image_files = os.listdir("static/final_images/")
    # DIR = "/home/jack/Desktop/HDD500/collections/gypsy_files/"
    # DIR = "/home/jack/Desktop/HDD500/collections/hippy_files/"
    #DIR = "/mnt/HDD500/collections/jungle/exotic_lithograph_prints-Playground_AI_files/512x768/"
    DIR = "static/images/clip_drop/"
    selected_files = random.sample(glob.glob(DIR + '*.jpg'), 30)
    print(selected_files)
    #image_files = os.listdir(DIR)
    # image_files = os.listdir("/mnt/HDD500/collections/640x640-alien/")
    # Select 20 random files from the list
    #selected_files = random.sample(image_files, 30)

    # Load each selected file, resize it to 400x600, and save it to a temporary directory
    resized_images = []
    for filename in selected_files:
        print(filename)
        with Image.open(filename) as img:

            img = img.resize((400, 600))
            temp_filename = "static/tmp/" + filename
            img.save(temp_filename)
            resized_images.append(temp_filename)

    # Create an animated GIF from the resized images

    gif_filename = "static/animated_gifs/animated.gif"
    with imageio.get_writer(gif_filename, mode='I', duration=1) as writer:
        for filename in resized_images:
            image = imageio.imread(filename)
            writer.append_data(image)
    import shutil

    timestr = time.strftime("%Y%m%d-%H%M%S")

    src = 'static/animated_gifs/animated.gif'
    dst = 'static/animated_gifs/animated' + timestr + '.gif'
    # 2nd option
    shutil.copy(src, dst)
    # Return a template that displays the GIF
    return render_template("make_animation.html", gif_filename=gif_filename)


@app.route('/title_page', methods=['GET', 'POST'])
def title_page():
    if request.method == 'POST':
        # Get the text input and image file from the form data
        text = request.form['text']
        image = request.files['image']

        # Save the image to a temporary location
        image_path = os.path.join(
            app.config['UPLOAD_FOLDER'], secure_filename(image.filename))
        image.save(image_path)

        # Open the image file
        image = Image.open(image_path)

        # Create a drawing context on the image
        draw = ImageDraw.Draw(image)

        # Define the font and font size for the text
        font = ImageFont.truetype('static/fonts/OpenSansBold.ttf', 50)
        # Split the text by newline characters
        lines = text.split("  ")

        # Calculate the size of each line and get the maximum width
        line_sizes = [draw.textsize(line, font) for line in lines]
        max_line_width = max([size[0] for size in line_sizes])

        # Calculate the total size of the text
        text_width = max_line_width
        text_height = sum([size[1] for size in line_sizes])

        # Calculate the position of the text in the center of the image
        x = (640 - text_width) / 2
        y = (640 - text_height) / 2

        # Calculate the size of the text
        text_width, text_height = draw.textsize(text, font)

        # Calculate the position of the text in the center of the image
        x = (640 - text_width) / 2
        y = (640 - text_height) / 2

        # Add the text to the image
        draw.text((x, y), text, font=font, fill=(0, 0, 0, 255))

        # Save the image to the static folder with a unique filename
        inc = text.replace(" ", "")
        filenamex = os.path.join(
            app.static_folder, 'title_pages', f'{inc}_{hash(text)}.png')
        image.save(filenamex)
        filename = 'static/title_pages/title_page.png'
        shutil.copy(filenamex, filename)
        logger.error('filename: %s', filename)

        # print(inc[:5])
        # Remove the temporary image file
        # os.remove(image_path)
        filenamev = 'title_pages/title_page.png'
        # Return the rendered template with the image filename
        return render_template('title_page.html', filename=filenamev)
    filenamev = 'title_pages/title_page.png'
    return render_template('title_page.html', filename=filenamev)


@app.route('/add_title', methods=['GET', 'POST'])
def add_title():
    # Create the final_videos directory if it does not exist
    final_videos_dir = os.path.join(app.static_folder, 'final_videos')
    if not os.path.exists(final_videos_dir):
        os.makedirs(final_videos_dir)

    if request.method == 'POST':
        logger.debug('Entering POST request handler for /add_title')
        # Get the paths of the selected video and title page
        video_path = os.path.join(
            app.static_folder, 'videos', request.form['video'])
        title_page_path = os.path.join(
            app.static_folder, 'title_pages', request.form['title_page'])
        logger.debug(f'video_path: {video_path}')
        logger.debug(f'title_page_path: {title_page_path}')

        # Load the video and title page as clips
        video_clip = VideoFileClip(video_path)
        title_page_clip = ImageClip(title_page_path).set_duration(2)

        # Add the title page to the video for the first 2 seconds
        final_clip = concatenate_videoclips(
            [title_page_clip, video_clip.subclip(2)])

        # Save the final video to the final_videos directory
        final_filename = f"{os.path.splitext(request.form['video'])[0]}_{os.path.splitext(request.form['title_page'])[0]}.mp4"
        final_path = os.path.join(final_videos_dir, final_filename)
        logger.debug(f'final_path: {final_path}')
        final_clip.write_videofile(final_path)

        # Return a response to the user indicating that the video with title page was created
        message = f"The video with title page was created and saved to {final_path}"
        return render_template('add_title.html', message=message)

    # If the request method is GET, render the add_title.html template
    logger.debug('Entering GET request handler for /add_title')
    videos = os.listdir(os.path.join(app.static_folder, 'square_vids'))
    title_pages = os.listdir(os.path.join(app.static_folder, 'title_pages'))
    logger.debug(f'videos: {videos}')
    logger.debug(f'title_pages: {title_pages}')
    return render_template('add_title.html', videos=videos, title_pages=title_pages)


def get_rowid():
    # Connect to the database
    db = sqlite3.connect('code.db')
    cursor = db.cursor()
    row_id = request.form['row_id']
    # Execute a query to retrieve the rowid
    cursor.execute("SELECT rowid FROM snippets WHERE rowid = ?", (rowid,))

    # Fetch the result
    result = cursor.fetchone()

    # Close the database connection
    db.close()

    # Check if a rowid was found
    if result:
        rowid = result[0]
    else:
        # Handle the case when no rowid is found
        rowid = None

    return rowid


@app.route('/indexA')
def indexA():
    image_dir = 'static/images'
    image_files = [f for f in os.listdir(image_dir) if f.endswith('.jpg')]
    random_image_file = random.choice(image_files)
    logger.info(f"Random image file selected: {random_image_file}")
    return render_template('indexA.html', random_image_file=random_image_file)


@app.route('/index_FLASK')
def index_FLASK():
    image_dir = 'static/images'
    image_files = [f for f in os.listdir(image_dir) if f.endswith('.jpg')]
    random_image_file = random.choice(image_files)
    logger.info(f"Random image file selected: {random_image_file}")

    return render_template('index_FLASK.html')


# Configuration
app.config['DATABASE'] = 'code.db'


def get_db():
    db = getattr(g, '_database', None)
    if db is None:
        db = g._database = sqlite3.connect("code.db")
    return db


@app.teardown_appcontext
def close_connection(exception):
    db = getattr(g, '_database', None)
    if db is not None:
        db.close()


@app.before_first_request
def create_table():
    db = get_db()
    cursor = db.cursor()

    cursor.execute('''
        CREATE TABLE IF NOT EXISTS products (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            name TEXT NOT NULL,
            description TEXT,
            price REAL
        )
    ''')

    db.commit()


@app.teardown_appcontext
def close_connection(exception):
    db = getattr(app, '_database', None)
    if db is not None:
        db.close()


@app.route('/indexD')
def indexD():
    return redirect('/products')


@app.route('/products', methods=['GET', 'POST'])
def products():
    if request.method == 'POST':
        name = request.form['name']
        description = request.form['description']
        price = request.form['price']

        db = get_db()
        cursor = db.cursor()
        cursor.execute("INSERT INTO products (name, description, price) VALUES (?, ?, ?)",
                       (name, description, price))
        db.commit()

    db = get_db()
    cursor = db.cursor()
    cursor.execute("SELECT * FROM products")
    products = cursor.fetchall()

    return render_template('products.html', products=products)


@app.route('/edit/<int:product_id>', methods=['GET', 'POST'])
def edit_product(product_id):
    if request.method == 'POST':
        name = request.form['name']
        description = request.form['description']
        price = request.form['price']

        db = get_db()
        cursor = db.cursor()
        cursor.execute("UPDATE products SET name=?, description=?, price=? WHERE id=?",
                       (name, description, price, product_id))
        db.commit()

        return redirect('/products')

    db = get_db()
    cursor = db.cursor()
    cursor.execute("SELECT * FROM products WHERE id=?", (product_id,))
    product = cursor.fetchone()

    return render_template('edit_product.html', product=product)


@app.route('/delete/<int:product_id>', methods=['POST'])
def delete_product(product_id):
    db = get_db()
    cursor = db.cursor()
    cursor.execute("DELETE FROM products WHERE id=?", (product_id,))
    db.commit()

    return redirect('/products')
# Function to create the database and table
    
@app.route('/access_database')
def access_database():
    db_path = os.path.join(os.path.dirname(__file__), 'code.db')
    conn = sqlite3.connect(db_path)
    cursor = conn.cursor()
    cursor.execute('SELECT * FROM snippets')
    code = cursor.fetchall()
    conn.close()
    return render_template('database.html', code=code)
# Function to create the database and table


def create_databaseD():
    conn = sqlite3.connect('code.db')
    cursor = conn.cursor()
    # cursor.execute("CREATE TABLE snippets (description TEXT, code TEXT, keywords TEXT)")
    cursor.execute('''
        CREATE TABLE IF NOT EXISTS snippets (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            description TEXT NOT NULL,
            code TEXT,
            keywords TEXT
        )
    ''')
    conn.commit()
    conn.close()
# Route to display all code


@app.route('/code', methods=['GET'])
def display_code():
    conn = sqlite3.connect('code.db')
    cursor = conn.cursor()
    cursor.execute('SELECT * FROM snippets')
    code = cursor.fetchall()
    conn.close()

    # Define the HTML code for the form
    form_code = """
    <h1>Add New code</h1>
    <form action="/code" method="post">
        <label for="description">Description:</label>
        <textarea type="description" name="description" rows="8" cols="90%"></textarea><br />
        <label for="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Code:</label>
        <textarea type="text" name="code" rows="8" cols="90%"></textarea><br>
        <label for="keywords">Keywords:</label>
        <input style="width:53%;height: 25px;" type="keywords" name="keywords"><br>
        <input type="submit" value="Add code">
    </form>
    """

    return render_template('code.html', code=code, form_code=form_code)
# Route to add a new code


@app.route('/code', methods=['POST'])
def add_code():
    description = request.form['description']
    code = request.form['code']
    keywords = request.form['keywords']

    conn = sqlite3.connect('code.db')
    cursor = conn.cursor()
    cursor.execute('INSERT INTO snippets (description, code, keywords) VALUES (?, ?, ?)',
                   (description, code, keywords))
    conn.commit()
    conn.close()
    return redirect(url_for('display_code'))
# Route to edit a code


@app.route('/edit_code/<int:code_id>', methods=['GET', 'POST'])
def edit_code(code_id):
    conn = sqlite3.connect('code.db')
    cursor = conn.cursor()

    if request.method == 'POST':
        description = request.form['description']
        code = request.form['code']
        keywords = request.form['keywords']

        cursor.execute('UPDATE snippets SET description=?, code=?, keywords=? WHERE id=?',
                       (description, code, keywords, code_id))
        conn.commit()
        conn.close()
        return redirect(url_for('display_code'))

    cursor.execute('SELECT * FROM snippets WHERE id = ?', (code_id,))
    code = cursor.fetchone()
    conn.close()
    return render_template('edit_code.html', code=code)
# Route to delete a code


@app.route('/delete_code/<int:code_id>', methods=['POST'])
def delete_code(code_id):
    conn = sqlite3.connect('code.db')
    cursor = conn.cursor()
    cursor.execute('DELETE FROM snippets WHERE id = ?', (code_id,))
    conn.commit()
    conn.close()
    return redirect(url_for('display_code'))


@app.route('/indexE')
def indexE():
    # Get a list of directories within static/images
    image_directories = os.listdir(os.path.join(app.static_folder, 'images'))

    # Create a dropdown menu with the list of directories
    dropdown_menu = ""
    for directory in image_directories:
        dropdown_menu += f'<option value="{directory}">{directory}</option>'

    return f"""
    <!DOCTYPE html>
    <html>
    <body>
        <h2>Upload a file</h2>
        <form action="/uploadN" method="post" enctype="multipart/form-data">
            <select name="directory">
                {dropdown_menu}
            </select>
            <input type="file" name="file">
            <input type="submit" value="Upload">
        </form>
    </body>
    </html>
    """


@app.route('/uploadN', methods=['POST'])
def upload_fileN():
    # Check if a file was submitted in the request
    if 'file' not in request.files:
        return redirect(url_for('indexD'))

    file = request.files['file']

    # Check if the file is not empty
    if file.filename == '':
        return redirect(url_for('indexE'))

    # Save the file to the desired directory
    save_path = os.path.join('static', 'temp_images', file.filename)
    file.save(save_path)

    return f'The file {file.filename} has been uploaded successfully!'


def FilenameByTime(directory):
    timestr = time.strftime("%Y%m%d-%H%M%S")
    filename = directory + "/" + timestr + "_.png"
    return filename


def change_extension(orig_file, new_extension):
    p = change_ext(orig_file)
    new_name = p.rename(p.with_suffix(new_extension))
    return new_name


def auto_canny(image, sigma=0.33):
    # compute the median of the single channel pixel intensities
    v = np.median(image)
    # apply automatic Canny edge detection using the computed median
    lower = int(max(0, (1.0 - sigma) * v))
    upper = int(min(255, (1.0 + sigma) * v))
    edged = cv2.Canny(image, lower, upper)
    # return the edged image
    return edged
# image = cv2.imread('mahotastest/orig-color.png')


def change_extension(orig_file, new_extension):
    p = change_ext(orig_file)
    new_name = p.rename(p.with_suffix(new_extension))
    return new_name


def outlineJ(filename1, outfile_jpg, sigma=0.33):
    """
    USE:
    filename1 = '/home/jack/Desktop/Imagedata/0-original-images/07082orig.jpg' 
    outfile_jpg = '/home/jack/Desktop/dockercommands/images/useresult.png'
    outlineJ(filename1,outfile_jpg)
    """
    image = cv2.imread(filename1)
    edged = auto_canny(image, sigma=0.33)
    inverted = cv2.bitwise_not(edged)
    cv2.imwrite("static/outlines/temp2.png", inverted)
    cv2.imwrite(FilenameByTime("static/outlines/"), inverted)
    # Open Front Image
    # frontimage = Image.open('mahotastest/inverted-bitwise-note3_6.png').convert("1")
    frontimage = Image.open('static/outlines/temp2.png').convert("1")
    frontImage = frontimage.convert("RGBA")
    datas = frontImage.getdata()
    newData = []
    for item in datas:
        if item[0] == 255 and item[1] == 255 and item[2] == 255:
            newData.append((255, 255, 255, 0))
        else:
            newData.append(item)

    frontImage.putdata(newData)
    # Open Background Image
    background = Image.open(filename1)
    # Calculate width to be at the center
    width = (frontimage.width - frontimage.width) // 2
    # Calculate height to be at the center
    height = (frontimage.height - frontimage.height) // 2
    # Paste the frontImage at (width, height)
    background.paste(frontImage, (width, height), frontImage)
    # Save this image
    background.save(outfile_jpg)
    savefile = FilenameByTime("static/outlines/")
    background.save(savefile)
    # background = background.convert("RGB")
    return background


def outlineP(filename1, outfile_png):
    """
    USE:
    filename1 = '/home/jack/Desktop/Imagedata/0-original-images/07082orig.jpg'
    outfile_jpg = '/home/jack/Desktop/dockercommands/images/useresult.png'
    outlineP(filename1,outfile_png)
    """
    image = cv2.imread(filename1)
    edged = auto_canny(image, sigma=0.33)
    inverted = cv2.bitwise_not(edged)
    cv2.imwrite("static/outlines/temp2.png", inverted)
    cv2.imwrite(FilenameByTime("static/outlines/"), inverted)
    # Open Front Image
    # frontimage = Image.open('mahotastest/inverted-bitwise-note3_6.png').convert("1")
    frontimage = Image.open('static/outlines/temp2.png').convert("1")
    frontImage = frontimage.convert("RGBA")
    datas = frontImage.getdata()
    newData = []
    for item in datas:
        if item[0] == 255 and item[1] == 255 and item[2] == 255:
            newData.append((255, 255, 255, 0))
        else:
            newData.append(item)

    frontImage.putdata(newData)
    # Open Background Image
    background = Image.open(filename1)
    # Calculate width to be at the center
    width = (frontimage.width - frontimage.width) // 2
    # Calculate height to be at the center
    height = (frontimage.height - frontimage.height) // 2
    # Paste the frontImage at (width, height)
    background.paste(frontImage, (width, height), frontImage)
    # Save this image
    background.save(outfile_png, format="png")
    savefile = FilenameByTime("static/outlines/")
    background.save(savefile, format="png")
    # background = background.convert("RGB")
    return background


@app.route('/outline_j', methods=['POST'])
def outline_j():
    if request.method == 'POST':
        # Get the uploaded image file from the form data
        file = request.files['file']

        # Save the uploaded file to a temporary location

        temp_path = 'static/outlines/temp_image.jpg'
        file.save(temp_path)

        # Process the image using outlineJ function
        output_path = 'static/outlines/outlined_image_j.jpg'
        outlineJ(temp_path, output_path)
        output_path2 = "static/outlines/temp2.png"
        # Return the path to the processed image to display it on a page
        return render_template('outlined_image.html', image_orig=temp_path, image_path=output_path, image_path2=output_path2)


@app.route('/outline_p', methods=['POST'])
def outline_p():
    if request.method == 'POST':
        # Get the uploaded image file from the form data
        file = request.files['file']

        # Save the uploaded file to a temporary location
        temp_path = 'static/temp_image.jpg'
        image_orig = temp_path
        file.save(temp_path)

        # Process the image using outlineP function
        output_path = 'static/outlines/outlined_image_p.png'
        outlineP(temp_path, output_path)
        output_path2 = "static/outlines/temp2.png"
        # Return the path to the processed image to display it on a page
        return render_template('outlined_image.html', image_orig=temp_path, image_path=output_path, image_path2=output_path2)


def zoom_effect(bg_file, fg_file):
    bg = Image.open(bg_file).convert('RGBA')
    SIZE = bg.size
    bg = bg.resize((SIZE), Image.BICUBIC)
    fg = Image.open(fg_file).convert('RGBA')
    fg = fg.resize((SIZE), Image.BICUBIC)
    fg_copy = fg.copy()
    fg_copy = fg_copy.resize((int(fg_copy.width), int(fg_copy.height)))
    result_images = []
    for i in range(200):
        size = (int(fg_copy.width * (i + 1) / 200),
                int(fg_copy.height * (i + 1) / 200))
        fg_copy_resized = fg_copy.resize(size)
        fg_copy_resized.putalpha(int((i + 1) * 255 / 200))
        fg_copy_resized = fg_copy_resized.convert('RGBA')
        fg_copy_resized.putalpha(int((i + 1) * 255 / 200))
        result = bg.copy()
        x = int((bg.width - fg_copy_resized.width) / 2)
        y = int((bg.height - fg_copy_resized.height) / 2)
        result.alpha_composite(fg_copy_resized, (x, y))
        # result.save("gifs/_"+str(i)+".png")
        result_images.append(result)

    return result_images  # Move the return statement outside the for loop


def create_mp4_from_images(images_list, output_file, fps):
    # Convert PIL Image objects to NumPy arrays
    image_arrays = [np.array(image) for image in images_list]

    # Create the video clip from the NumPy arrays
    clip = ImageSequenceClip(image_arrays, fps=fps)

    # Write the video to the output file
    clip.write_videofile(output_file, codec="libx264", fps=fps)


@app.route('/upload_form')
def upload_form():
    return render_template('upload_form.html')


@app.route('/process_imagez', methods=['POST', 'GET'])
def process_imagez():
    if 'bg_image' not in request.files or 'fg_image' not in request.files:
        return redirect(url_for('upload_form'))

    bg_image = request.files['bg_image']
    fg_image = request.files['fg_image']

    if bg_image.filename == '' or fg_image.filename == '':
        return redirect(url_for('upload_form'))

    bg_filename = 'background.png'
    fg_filename = 'foreground.png'

    bg_image.save(bg_filename)
    fg_image.save(fg_filename)

    bg_file_path = os.path.abspath(bg_filename)
    fg_file_path = os.path.abspath(fg_filename)

    images_list = zoom_effect(bg_file_path, fg_file_path)

    output_mp4_file = 'static/overlay_zooms/imagez_video.mp4'
    frames_per_second = 30
    create_mp4_from_images(images_list, output_mp4_file, frames_per_second)

    # Clean up temporary files
    # os.remove(bg_filename)
    # os.remove(fg_filename)
    file_bytime = time.strftime("%Y%m%d-%H%M%S") + ".mp4"

    shutil.copy('static/overlay_zooms/imagez_video.mp4',
                'static/overlay_zooms/' + file_bytime)
    video_url = url_for('static', filename=output_mp4_file)
    return render_template('upload.html', video_url=video_url)


app.config['DATABASE'] = 'code.db'

# Set up logger
# logger.basicConfig(level=logger.DEBUG)
# logger = logger.getLogger(__name__)


def get_db():
    db = getattr(g, '_database', None)
    if db is None:
        db = g._database = sqlite3.connect(app.config['DATABASE'])
    return db


@app.route('/indexdb')
def indexdb():
    logger.debug("Accessing indexdb route")
    video = findvideos()
    return render_template('indexdb.html',video=video)


@app.route('/select_by_id_form', methods=['POST', 'GET'])
def select_by_id_form():
    logger.debug("Accessing select_by_id_form route")
    return render_template('select_by_id_form.html')


@app.route('/search_by_rowid', methods=['GET', 'POST'])
def search_by_rowid():
    logger.debug("Accessing search_by_rowid route")
    return render_template('search_by_rowid.html')

# ...
# ...
# ...
# Function to get a list of image files from the selected directory


def get_image_list(selected_directory):
    image_extensions = ['.jpg', '.jpeg', '.png', '.gif']
    image_list = [f for f in os.listdir(selected_directory) if os.path.isfile(
        os.path.join(selected_directory, f)) and f.lower().endswith(tuple(image_extensions))]
    print(image_list)
    return image_list


@app.route('/Index', methods=['GET', 'POST'])
def Index():
    if request.method == 'POST':
        selected_directory = request.form['selected_directory']
        image_list = get_image_list(selected_directory)
        images = [os.path.join(selected_directory, image)
                  for image in image_list]

        clips = [ImageClip(m).set_duration(0.5) for m in images]
        concat_clip = concatenate_videoclips(clips, method="compose")
        uid = str(uuid.uuid4())  # Generate a unique ID using uuid
        mp4_file = os.path.join("static", "videos", f"{uid}.mp4")
        concat_clip.write_videofile(mp4_file, fps=24)
        return render_template('Index.html', video=mp4_file)
    else:
        directory_list = glob.glob("static/images/*/", recursive=True)
        return render_template('Index.html', directory_list=directory_list)
# ...
# ...

# ...


@app.route('/edit_data_page', methods=['GET', 'POST'])
@app.route('/edit_data_page/<int:rowid>', methods=['GET', 'POST'])
def edit_data_page(rowid=None):
    db = get_db()
    cursor = db.cursor()

    if request.method == 'POST':
        description = request.form['description']
        code = request.form['code']
        keywords = request.form['keywords']

        if rowid is not None:
            # Update the data in the database for the given rowid
            cursor.execute("UPDATE snippets SET description = ?, code = ?, keywords = ? WHERE rowid = ?",
                           (description, code, keywords, rowid))
        else:
            # Insert the data into the database as a new row
            cursor.execute("INSERT INTO snippets (description, code, keywords) VALUES (?, ?, ?)",
                           (description, code, keywords))

        db.commit()

        # Close the database connection
        cursor.close()
        db.close()

        return redirect(url_for('indexdb'))

    if rowid is not None:
        # If a rowid is provided, retrieve the data from the database
        # based on the provided rowid and render the edit_data.html template
        cursor.execute("SELECT * FROM snippets WHERE rowid = ?", (rowid,))
        data = cursor.fetchone()

        if data is None:
            # If no data is found for the given rowid, return an error message
            return "Error: Data not found for the provided Row ID."

        # Convert the fetched data to a dictionary for easier access in the template
        data = {
            'rowid': data[0],
            'description': data[1],
            'code': data[2],
            'keywords': data[3]
        }

    else:
        # If no rowid is provided, create an empty data dictionary
        data = {}

    # Close the database connection
    cursor.close()
    db.close()

    return render_template('edit_data.html', data=data)
# ...


@app.route('/get_rowid_form', methods=['GET', 'POST'])
def get_rowid_form():
    if request.method == 'POST':
        rowid = request.form['rowid']
        return redirect(url_for('edit_data_page', rowid=rowid))
    return render_template('get_rowid_form.html')

# ...


@app.route('/search_database', methods=['POST', 'GET'])
def search_database():
    logger.debug("Accessing search_database route")
    if request.method == 'POST':
        search_term = request.form['search_term']
        search_area = request.form['search_area']
    else:
        # For GET requests, get the search_term and search_area from the query string
        search_term = request.args.get('search_term')
        search_area = request.args.get('search_area')

    if not search_term or not search_area:
        logger.debug(
            "Redirecting to indexdb due to missing search_term or search_area")
        # Redirect to the main index page if search_term or search_area is missing
        return redirect('/indexdb')

    db = get_db()
    cursor = db.cursor()

    if search_area == 'rowid':
        cursor.execute(
            "SELECT rowid, * FROM snippets WHERE rowid = ?", (search_term,))
    elif search_area == 'description':
        cursor.execute(
            "SELECT rowid, * FROM snippets WHERE description LIKE ?", ('%' + search_term + '%',))
    elif search_area == 'code':
        cursor.execute(
            "SELECT rowid, * FROM snippets WHERE code LIKE ?", ('%' + search_term + '%',))
    elif search_area == 'keywords':
        cursor.execute(
            "SELECT rowid, * FROM snippets WHERE keywords LIKE ?", ('%' + search_term + '%',))
    else:
        logger.debug("Redirecting to indexdb due to invalid search area")
        # Redirect to the main index page if an invalid search area is provided
        return redirect('/indexdb')

    results = cursor.fetchall()
    logger.debug("Rendering db_results.html template with search results")
    return render_template('db_results.html', results=results)


@app.route('/insert_data', methods=['POST', 'GET'])
def insert_data():
    logger.debug("Accessing insert_data route")
    if request.method == 'POST':
        description = request.form['description']
        code = request.form['code']
        keywords = request.form['keywords']

        # Assuming you have the database connection and cursor defined
        db = get_db()
        cursor = db.cursor()

        cursor.execute("INSERT INTO snippets (description, code, keywords) VALUES (?, ?, ?)",
                       (description, code, keywords))
        db.commit()

        # Close the database connection
        cursor.close()
        db.close()

        logger.debug("Redirecting to indexdb after inserting data")
        return redirect(url_for('indexdb'))

    # If the request method is not POST (e.g., GET), render the insert_data.html template
    logger.debug("Rendering insert_data.html template")
    return render_template('insert_data.html')


@app.route('/select_by_id', methods=['POST', 'GET'])
def handle_select_by_id():
    logger.debug("Accessing select_by_id route")
    if request.method == 'POST':
        row_id = request.form['search_term']
    else:
        row_id = request.args.get('search_term')

    db = get_db()
    cursor = db.cursor()

    cursor.execute("SELECT * FROM snippets WHERE rowid = ?", (row_id,))
    data = cursor.fetchone()

    cursor.close()
    db.close()

    if data is not None:
        id_value = data[0]
        description = data[1]
        code = data[2]
        keywords = data[3]

        logger.debug("Rendering display_data.html template with selected data")
        return render_template('display_data.html', id_value=id_value, description=description, code=code, keywords=keywords)
    else:
        logger.debug("Rendering display_data.html template with no data found")
        return render_template('display_data.html', id_value=row_id, description="", code="", keywords="")
def extract_code_blocks(file_path):
    with open(file_path) as file:
        content = file.read()
    return content.split("--Code Start:")[1:]

def format_datetime(datetime_str):
    return datetime_str.replace("_", " ")

@app.route('/enter_code', methods=['GET', 'POST'])
def enter_code():
    formatted_datetime = ""  # Initialize the variable
    if request.method == 'POST':
        code_block = request.form['code_block']
        formatted_datetime = datetime.datetime.now().strftime("%a_%d_%b_%Y %H:%M:%S")
        with open('codeshints.txt', 'a') as file:
            file.write(f"--Code Start:\n{formatted_datetime}\n{code_block}\n--Code End:\n\n")
        # Log code entry
        logger.debug('New code entered: %s', code_block)
    return render_template('enter_data.html', formatted_datetime=formatted_datetime)

@app.route('/search_code', methods=['GET', 'POST'])
def search_code():
    if request.method == 'POST':
        keyword = request.form['keyword']
        code_blocks = extract_code_blocks('codeshints.txt')
        filtered_blocks = [block for block in code_blocks if keyword in block]
        formatted_datetime_blocks = []
        
        for block in filtered_blocks:
            match = re.search(r"\w+_\d+_\w+_\d+_\d+:\d+:\d+", block)
            if match:
                formatted_datetime = format_datetime(match.group(0))
            else:
                formatted_datetime = "Unknown datetime format"
            
            formatted_datetime_blocks.append(
                {"datetime": formatted_datetime, "code_block": block}
            )
            
        # Log search activity
        logger.debug('Keyword searched: %s', keyword)
        return render_template('search_results.html', keyword=keyword, code_blocks=formatted_datetime_blocks)
    
    return render_template('search_data.html')



@app.route('/tube_index')
def tube_index():
    return render_template('tube_index.html')

@app.route('/data_page')
def data_page():
    return render_template('data_page.html')    


@app.route('/capture_overlay_verify')
def capture_overlay_verify():
    logger.info('Capture process started')
    logger.info('POST request received')

    datename = subprocess.run(
        ["date", "+%Y-%m-%d_%H-%M-%S"], capture_output=True, text=True).stdout.strip()
    capture_filename = f"{datename}.mp4"
    # Create the file path using os.path.join()
    base_folder = "static"
    subfolder = "assets"
    original_filename = os.path.join(
        app.root_path, base_folder, subfolder, f"overlaid_{capture_filename}")
    overlayed_filename = os.path.join(
        app.root_path, base_folder, subfolder, f"overlaid_{capture_filename}")
    verification_filename = os.path.join(
        app.root_path, base_folder, subfolder, f"verification_{capture_filename}")
    logger.info(f'File path original_filename created: {original_filename}')
    logger.info(f'File path overlayed_filename created: {overlayed_filename}')
    logger.info(f' verification_filename created: {verification_filename}')
    sleep(5)
    # Capture screen
    capture_command = [
        "ffmpeg", "-ss", "2", "-f", "x11grab", "-framerate", "24",
        "-video_size", "690x445", "-i", ":0.0+130,250", "-f", "alsa",
        "-i", "plughw:0,0", "-f", "pulse", "-i", "default",
        "-filter_complex", "[1:a]volume=0.1,apad[headset_audio];[2:a]volume=2.0,apad[system_audio];[headset_audio][system_audio]amix=inputs=2[a]",
        "-map", "0:v", "-map", "[a]", "-c:v", "libx264", "-r", "24",
                "-g", "48", "-c:a", "aac", "-b:a", "128k", "-t", "58", "-y", original_filename
    ]
    subprocess.run(capture_command)
    logger.info('Screen captured', capture_command)
    # Overlay videos
    overlay_command = [
        "ffmpeg", "-i", "background.mp4", "-i", original_filename, "-filter_complex",
        f"[1:v]scale=460:300[ovrl];[0:v][ovrl]overlay=W-w-25:H-h-400[out]",
        "-map", "[out]", "-map", "1:a", "-c:v", "libx264", "-crf", "18", "-c:a", "aac",
                "-strict", "-2", "-y", "-t", "58", overlayed_filename
    ]
    subprocess.run(overlay_command)
    logger.info('Videos overlaid', overlay_command)

    # Verify sound
    verification_command = [
        "ffmpeg", "-i", "background.mp4", "-i", overlayed_filename, "-filter_complex",
        f"[1:v]scale=460:300[ovrl];[0:v][ovrl]overlay=W-w-25:H-h-400[out]",
        "-map", "[out]", "-map", "1:a", "-c:v", "libx264", "-crf", "18", "-c:a", "aac",
                "-strict", "-2", "-y", "-t", "58", verification_filename
    ]
    subprocess.run(verification_command)
    logger.info('Sound verified', verification_command)

    logger.info('Capture process completed', verification_filename)
    return render_template('view_capture.html', video_filename=verification_filename)

# ...


@app.route('/create_text', methods=['GET', 'POST'])
def create_text():
    if request.method == 'POST':
        text = request.form['text']
        image = Image.new('RGB', (512, 512), color='beige')
        draw = ImageDraw.Draw(image)

        # Load the custom font and set the size
        font_path = '/home/jack/fonts/OpenSans-Bold.ttf'
        font_size = 50
        font = ImageFont.truetype(font_path, font_size)

        lines = text.split('\n')[:5]

        y = 10
        for line in lines:
            line = line.rstrip()  # Strip the newline character
            # Calculate the width and height of the text
            text_width, text_height = draw.textsize(line, font=font)

            # Draw the text
            draw.text(((512 - text_width) // 2, y),
                      line, fill='black', font=font)
            y += text_height + 5  # Move down for the next line

        output_path = os.path.join(
            app.root_path, 'static', 'assets', '512x512_text.jpg')
        image.save(output_path)
        # return send_from_directory('static/assets', '512x512_text.jpg', as_attachment=True)
        return render_template('view_textimage.html', image_filename='assets/512x512_text.jpg')
    return render_template('create_text.html')


@app.route('/view_log')
def view_log():
    with open('Logs/app.log', 'r') as log_file:
        log_content = log_file.read()
    return render_template('log_viewer.html', log_content=log_content)


@app.route('/self_check')
def self_check():
    try:
        if os.path.exists('Logs'):
            timestamp = datetime.datetime.now().strftime("%Y%m%d%H%M%S")
            new_filename = f'Logs/{timestamp}.info'
            shutil.copy('Logs/flake8.info', new_filename)
            
        result = subprocess.run(['flake8', '-v', 'MemMakerWdb'],
                                stdout=subprocess.PIPE, stderr=subprocess.PIPE, text=True)
        
        with open('Logs/flake8.info', 'w') as flake_file:
            flake_file.write(result.stdout)
        
        return redirect(url_for('view_flake8'))
    except Exception as e:
        return f"Self-check failed. Error: {e}"

@app.route('/view_flake8')
def view_flake8():
    with open('Logs/flake8.info', 'r') as flake_file:
        flake_content = flake_file.read()
    return render_template('flake8_viewer.html', flake_content=flake_content)
def get_image_directories():
    dirs = os.listdir(os.path.join('static', 'images'))
    DIR = sorted(dirs)
    return DIR

def feather_image(input_path):
    try:
        logger.info("Feathering image: %s", input_path)
        
        # Load the image
        giger = cv2.imread(input_path)
        l_row, l_col, nb_channel = giger.shape
        rows, cols = np.mgrid[:l_row, :l_col]
        radius = np.sqrt((rows - l_row/2)**2 + (cols - l_col/2)**2)
        alpha_channel = np.zeros((l_row, l_col))
        
        # Calculate alpha channel values
        r_min, r_max = 1./3 * radius.max(), 0.6 * radius.max()
        alpha_channel[radius < r_min] = 1
        alpha_channel[radius > r_max] = 0
        gradient_zone = np.logical_and(radius >= r_min, radius <= r_max)
        alpha_channel[gradient_zone] = (r_max - radius[gradient_zone]) / (r_max - r_min)
        alpha_channel *= 255
        
        # Create feathered image
        feathered = np.empty((l_row, l_col, nb_channel + 1), dtype=np.uint8)
        feathered[..., :3] = giger[:]
        feathered[..., -1] = alpha_channel[:]
        
        # Save the feathered image
        timestamp = datetime.datetime.now().strftime('%Y%m%d%H%M%S')
        output_path = os.path.join('static', 'images', 'feathers', f'{timestamp}.png')
        plt.imsave(output_path, feathered, format="png")
        logger.info("Feathered image saved at: %s", output_path)

        return output_path
    except Exception as e:
        logger.error("An error occurred during feathering: %s", str(e))
        return None
@app.route('/feather_files', methods=['GET', 'POST'])
def feather_files():
    if request.method == 'POST':
        selected_directories = request.form.getlist('directories')  # Use 'directories' instead of 'directory'
        selected_directories = sorted(selected_directories)
        if selected_directories:
            images = os.listdir(os.path.join('static', 'images', selected_directories[0]))
            return render_template('feather_files.html', directories=get_image_directories(), selected_directory=selected_directories[0], images=images)
        
        selected_image = request.form.get('image')
        if selected_image:
            selected_directory = request.form.get('selected_directory')  # Add this line to retrieve selected_directory
            image_path = os.path.join('static', 'images', selected_directory, selected_image)
            feathered_image_path = feather_image(image_path)
            return render_template('feather_files.html', directories=get_image_directories(), selected_directory=selected_directory, images=os.listdir(os.path.join('static', 'images', selected_directory)), feathered_image_path=feathered_image_path)
    
    return render_template('feather_files.html', directories=get_image_directories())
@app.route('/word_cloud')
def word_cloud():
    code_blocks = extract_code_blocks('codeshints.txt')
    extracted_lines = []

    for block in code_blocks:
        lines = block.split("\n")[:3]  # Extract the first three lines
        extracted_lines.append("\n".join(lines))

    return render_template('word_cloud.html', extracted_lines=extracted_lines)
# ------------
static_dir = 'static'
text_dir = os.path.join(static_dir, 'text')
original_text_dir = os.path.join(text_dir, 'original')
os.makedirs(original_text_dir, exist_ok=True)

def load_original_text_file(filename):
    original_file_path = os.path.join(text_dir, filename)
    with open(original_file_path, 'r') as file:
        return file.read()

def save_original_text_file(filename, content):
    now = datetime.datetime.now().strftime("%Y%m%d_%H%M%S")
    new_filename = f"{filename}_{now}.txt"
    new_file_path = os.path.join(original_text_dir, new_filename)
    with open(new_file_path, 'w') as file:
        file.write(content)

def edit_and_save_text_file(filename, content):
    save_original_text_file(filename, content)
    edited_file_path = os.path.join(text_dir, filename)
    with open(edited_file_path, 'w') as file:
        file.write(content)

@app.route('/edit_text')
def edit_text():
    filenames = [f for f in os.listdir(text_dir) if f.endswith('.txt')]
    return render_template('edit_text.html', filenames=filenames)

@app.route('/edit_text_page')
def edit_text_page():
    selected_filename = request.args.get('filename')
    original_content = load_original_text_file(selected_filename)
    return render_template('edit_text_page.html', selected_filename=selected_filename, original_content=original_content)

@app.route('/edit_text_save', methods=['POST'])
def edit_text_save():
    edited_content = request.form['edited_content']
    selected_filename = request.form['filename']
    edit_and_save_text_file(selected_filename, edited_content)
    return redirect(url_for('edit_text'))

@app.route('/the_description')
def the_description():
    return render_template('the_description.html')

@app.route('/run')
def run():
    return render_template('execute.html')
def save_script_to_file(script):
    # Retrieve textarea content
    script_content = script.strip('\r')
    for line in script_content.splitlines():
        if line.startswith('#'):
            script_head = script_content.replace(line, f"echo {line}")
            print("SCRIPT HEAD: ",script_head)

    # Generate unique filename
    current_datetime = datetime.datetime.now().strftime("%Y%m%d%H%M%S")
    filename = "static/scripts/"+current_datetime + "_script.sh"

    # Save content to file
    with open(filename, "w") as file:
        file.write(script_content)

    return filename
def list_functions():
    # Retrieve all function names from the script
    script_filenames = glob.glob("static/scripts/*.sh")
    
    for script_filename in script_filenames:
        with open(script_filename, "r") as file:
            script_content = file.read()
            print(script_content)

    # Find all function names
    function_names = re.findall(r"function\s+(\w+)\s*\(\)", script_content)
    return function_names
@app.route('/execute', methods=['POST', 'GET'])
def execute():
    # Extract the bash script from the textarea
    script = request.form['script']
    save_script_to_file(script)
    # Execute the bash script using subprocess
    result = subprocess.run(script, shell=True, capture_output=True, text=True)

    # Return the result to the client
    list_functions()

    # Return the result to the client
    list_functions()

    # Retrieve all function names from the script
    script_filenames = glob.glob("static/scripts/*.sh")
    CONTENT = []
    filename = []
    for script_filename in script_filenames:
        filename.append(script_filename)
        with open(script_filename, "r") as file:
            script_content = file.read()
            CONTENT.append(script_content)

    return render_template("view_execute.html", content=CONTENT, result=filename)

@app.route('/list_functions')
def list_functions():
    route_lines = get_route_lines()
    return render_template('list_functions.html', functions=route_lines)

def get_route_lines():
    with open('MemMakerWdb', 'r') as file:
        route_lines = [
            re.split(r'[,/]', line.strip())[1].replace("'", "").replace(")", "").replace('"', '').replace(" ", "")
            for line in file
            if line.strip() != '' and line.strip() != '@app.route("/")' and line.startswith('@app.route')
        ]
    return route_lines

# Call the function to get the route lines
route_lines = get_route_lines()
# Print the result
for line in route_lines:
    print(line)
    
    
@app.route('/all_routes')
def all_routes(): 
        return render_template('all_routes.html')
 
@app.route('/edit_description', methods=['GET', 'POST'])
def edit_description():
    # Open the 'the_description.html' file and read its contents
    with open('templates/the_description.html', 'r') as file:
        description = file.read()

    return render_template('edit_the_description.html', description=description)
    
@app.route('/save_description', methods=['POST'])
def save_description():
    # Retrieve the updated description from the form submission
    updated_description = request.form['description']

    # Open the 'the_description.html' file in write mode and save the updated description
    with open('templates/the_description.html', 'w') as file:
        file.write(updated_description)

    return redirect('/edit_description')

@app.route('/app_utilities')
def app_utilities():
    video = findvideos()
    return render_template('app_utilities.html', video=video)
@app.route("/image_processing")
def image_processing():
    video = findvideos()
    return render_template('image_processing.html', video=video)

template_dir = 'templates'
original_template_dir = os.path.join(template_dir, 'original')
os.makedirs(original_template_dir, exist_ok=True)

def load_original_template_file(filename):
    original_file_path = os.path.join(template_dir, filename)
    with open(original_file_path, 'r') as file:
        return file.read()

def save_original_template_file(filename, content):
    now = datetime.datetime.now().strftime("%Y%m%d_%H%M%S")
    new_filename = f"{filename}_{now}.txt"
    new_file_path = os.path.join(original_template_dir, new_filename)
    with open(new_file_path, 'w') as file:
        file.write(content)

def edit_and_save_template_file(filename, content):
    save_original_template_file(filename, content)
    edited_file_path = os.path.join(template_dir, filename)
    with open(edited_file_path, 'w') as file:
        file.write(content)

@app.route('/edit_template')
def edit_template():
    filenames = [f for f in os.listdir(template_dir) if f.endswith('.html')]
    filenames = sorted(filenames)
    fvideo = findvideos()
    return render_template('edit_template.html', filenames=filenames, video=fvideo)

@app.route('/edit_template_page')
def edit_template_page():
    selected_filename = request.args.get('filename')
    original_content = load_original_template_file(selected_filename)
    return render_template('edit_template_page.html', selected_filename=selected_filename, original_content=original_content)

@app.route('/edit_template_save', methods=['POST'])
def edit_template_save():
    edited_content = request.form['edited_content']
    selected_filename = request.form['filename']
    edit_and_save_template_file(selected_filename, edited_content)
    return redirect(url_for('edit_template'))
@app.route('/images/<path>')
def show_images(path):
    # get the full path of the directory
    basepath = os.path.join('static', 'images', path)
    # get the file names in the directory
    file_list = os.listdir(basepath)
    # filter out non-image files
    image_list = [f for f in file_list if f.endswith('.jpg') or f.endswith('.png')]
    # pass the image names to the template
    return render_template('thumbnailz.html', images=image_list, path=path)

@app.route('/code_editor')
def code_editor():
    
    return render_template('code_editor.html')

@app.route('/save', methods=['POST'])
def save():
    content = request.form.get('content')  # Get the content from the AJAX request
    file_path = 'static/text/Experimental.txt'  # Specify the file path where you want to save

    # Write the content to the file
    with open(file_path, 'w') as file:
        file.write(content)

    return jsonify({'message': 'File saved successfully'})

video_process = None

@app.route('/run_capture', methods=['POST'])
def run_capture():
    global video_process
    
    # Specify the path to your Bash script
    bash_script_path = 'STREAM-save-local'
    
    # Execute the Bash script and save the process ID
    video_process = subprocess.Popen(['bash', bash_script_path])
    
    return jsonify({'message': 'Video capture started'})

@app.route('/stop_capture', methods=['POST'])
def stop_capture():
    global video_process
    
    if video_process:
        # Send a termination signal to stop the process gracefully
        os.killpg(os.getpgid(video_process.pid), signal.SIGTERM)
        video_process = None
        return jsonify({'message': 'Video capture stopped'})
    else:
        return jsonify({'message': 'Video capture process not found'})

@app.route('/capture_html')
def capture_html():
    return render_template('capture.html')

@app.route('/youtube_videos')
def youtube_videos():
    return render_template('youtube_videos.html')


@app.route('/aigeneration_links')
def aigeneration_links():
    return render_template('aigeneration_links.html')


@app.route('/index_bash')
def index_bash():
    return render_template('run_bash.html')

@app.route('/run_bash', methods=['POST'])
def run_bash():
    bash_command = request.form.get('bash_command')
    
    try:
        result = subprocess.check_output(bash_command, shell=True, text=True, stderr=subprocess.STDOUT)
    except subprocess.CalledProcessError as e:
        result = e.output
    video = findvideos()
    return render_template('run_bash.html', result=result, video=video)
css_dir = 'static/css'
original_css_dir = os.path.join(css_dir, 'original')
os.makedirs(original_css_dir, exist_ok=True)

def load_original_css_file(filename):
    original_file_path = os.path.join(css_dir, filename)
    with open(original_file_path, 'r') as file:
        return file.read()

def save_original_css_file(filename, content):
    now = datetime.datetime.now().strftime("%Y%m%d_%H%M%S")
    new_filename = f"{filename}_{now}.css"
    new_file_path = os.path.join(original_css_dir, new_filename)
    with open(new_file_path, 'w') as file:
        file.write(content)

def edit_and_save_css_file(filename, content):
    save_original_css_file(filename, content)
    edited_file_path = os.path.join(css_dir, filename)
    with open(edited_file_path, 'w') as file:
        file.write(content)

@app.route('/edit_css')
def edit_css():
    filenames = [f for f in os.listdir(css_dir) if f.endswith('.css')]
    filenames = sorted(filenames)
    #render template
    return render_template ('edit_css.html', filenames=filenames)

@app.route('/edit_css_page')
def edit_css_page():
    selected_filename = request.args.get('filename')
    original_content = load_original_css_file(selected_filename)
    return render_template('edit_css_page.html', selected_filename=selected_filename, original_content=original_content)

@app.route('/edit_css_save', methods=['POST'])
def edit_css_save():
    edited_content = request.form['edited_content']
    selected_filename = request.form['filename']
    edit_and_save_css_file(selected_filename, edited_content)
    return redirect(url_for('edit_css'))
@app.route('/terminal_index')
def terminal_index():
    return render_template('terminal_index.html')

@app.route('/execute_command', methods=['POST'])
def execute_command():
    command = request.form.get('command')
    try:
        output = subprocess.check_output(command, shell=True, text=True, stderr=subprocess.STDOUT)
    except subprocess.CalledProcessError as e:
        output = e.output
    return jsonify({'output': output})

@app.route('/comic_book')
def comic_book():
    return render_template('comic_book.html')

@app.route('/image_stuff')
def image_stuff():
    return render_template('image_stuff.html')

UPLOAD_FOLDER = 'static/uploads'
app.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER

@app.route('/crop', methods=['GET', 'POST'])
def crop():
    image_path = None
    if request.method == 'POST' and 'image' in request.files:
        image = request.files['image']
        if image.filename != '':
            filename = secure_filename(image.filename)
            image_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)
            image.save(image_path)
    fvideo = findvideos()        
    return render_template('crop.html', image_path=image_path, video=fvideo)

@app.route('/crop_and_save', methods=['POST'])
def crop_and_save():
    image_path = request.form.get('image_path')
    x = int(request.form.get('x'))
    y = int(request.form.get('y'))
    width = int(request.form.get('width'))
    height = int(request.form.get('height'))

    try:
        image = Image.open(image_path)
        cropped_image = image.crop((x, y, x + width, y + height))
        cropped_image.save('static/cropped_image.jpg')
        return render_template('crop.html', image_path='static/cropped_image.jpg')
    except Exception as e:
        return f"Error: {str(e)}"
def move_cropped_image():
    source_path = 'static/cropped_image.jpg'

    if not os.path.exists(source_path):
        return "Source file does not exist", 404

    destination_folder = 'static/images/Leonardo'
    image_ = f'cropped_{str(uuid.uuid4())}.jpg'

    try:
        os.makedirs(destination_folder, exist_ok=True)
    except OSError as e:
        return f"Failed to create destination folder: {e}", 500

    destination_path = os.path.join(destination_folder, image_)

    try:
        shutil.move(source_path, destination_path)
    except FileNotFoundError:
        return "Source file does not exist", 404
    except shutil.Error as e:
        return f"Error occurred while moving the file: {e}", 500
    return destination_path
@app.route('/move_cropped', methods=['GET', 'POST'])
def move_cropped():
    if request.method == 'POST':
        destination_path = move_cropped_image()
        source_path = 'static/cropped_image.jpg'
        fvideo =findvideos()
        return render_template('move_cropped.html', mv_img=destination_path, video=fvideo)
    else:
        return "Method not allowed", 405

@app.route('/edit_images_video')
def edit_images_video():
    fvideo = findvideos()
    return render_template('edit_images_video.html',video=fvideo)

@app.route('/mp3_player')
def mp3_player():
    mp3_files = [file for file in os.listdir('static/music') if file.endswith('.mp3')]
    return render_template('mp3_player.html', mp3_files=mp3_files)
@app.route('/NOTES')
def plain_html():
    return render_template('NOTES.html')
@app.route('/edit_script', methods=['GET', 'POST'])
def edit_script():
    logger.info('Edit script page accessed')
    script_dir = "static/scripts/"
    script_files = []
    for filename in os.listdir(script_dir):
        if filename.endswith('.js'):
            script_files.append(filename)
    print(script_files)
    if request.method == 'POST':
        selected_file = request.form['script_file']
        if selected_file.endswith('.js'):
            selected_file_path = os.path.join(script_dir, selected_file)
            shutil.copy(selected_file_path, script_file)
            with open(selected_file_path, 'r') as file:
                script_content = file.read()
            logger.info(f'Selected script file: {selected_file}')
            return render_template('edit_script.html', script_files=script_files, script_content=script_content)
        
@app.route('/edit_canvas_script', methods=['GET', 'POST'])
def edit_canvas_script():
    logger.info('Edit script page accessed')
    script_dir = "static/scripts/"
    script_files = []
    for filename in os.listdir(script_dir):
        if filename.endswith('canvas.js'):
            script_files.append(filename)
    print(script_files)
    if request.method == 'POST':
        selected_file = request.form['script_file']
        if selected_file.endswith('canvas.js'):
            selected_file_path = os.path.join(script_dir, selected_file)
            shutil.copy(selected_file_path, script_file)
            with open(selected_file_path, 'r') as file:
                script_content = file.read()
            logger.info(f'Selected script file: {selected_file}')
            return render_template('edit_script.html', script_files=script_files, script_content=script_content)       

    logger.info('No script file selected')
    return render_template('edit_script.html', script_files=script_files)

@app.route('/save_script', methods=['POST'])
def save_script():
    logger.info('Save script request received')
    # Retrieve the updated script content from the form data
    updated_script = request.form.get('script_content')
    # Write the updated script content to the file
    with open(script_file, 'w') as file:
        file.write(updated_script)
        # Log the updated script content
        logger.info(f'Updated script:\n{updated_script}')

    return render_template('save_script.html',script_file=script_file)

@app.route('/save_canvas_script', methods=['POST', 'GET'])
def save_canvas_script():
    logger.info('Save script request received')
    # Retrieve the updated script content from the form data
    updated_script = request.form.get('script_content')
    # Write the updated script content to the file
    logger.info("UPDATED_SCRIPT:",updated_script)
  
    logger.info("SCRIPT_FILE:",script_file)

    with open(script_file, 'w') as file:
        file.write(updated_script)
        # Log the updated script content
        logger.info(f'Updated script:\n{updated_script}')

    return render_template('save_canvas_script.html',script_file=script_file)

@app.route('/preview', methods=['GET', 'POST'])
def preview():
    logger.info('Preview page accessed')
    script_file = 'static/scripts/script.js'  # Path to the script file

    # Check if the script file exists
    if os.path.isfile(script_file):
        logger.info(f'Script file found: {script_file}')
        # Read the content of the script file
        with open(script_file, 'r') as file:
            script_content = file.read()
            logger.info(f'Script content:\n{script_content}')
    else:
        logger.warning('No script file found')
        script_content = 'No script file found'

    # HTML content to be displayed
    html_content = "<p>This is a dynamic HTML content. It can include various elements, <br />such as paragraphs, headings, lists, etc.</p>"
    
    
@app.route('/preview_two_canvass', methods=['GET', 'POST'])
def preview_two_canvass():
    logger.info('Preview page accessed')
    script_file = 'static/scripts/two_canvas.js'  # Path to the script file

    # Check if the script file exists
    if os.path.isfile(script_file):
        logger.info(f'Script file found: {script_file}')
        # Read the content of the script file
        with open(script_file, 'r') as file:
            script_content = file.read()
            logger.info(f'Script content:\n{script_content}')
    else:
        logger.warning('No script file found')
        script_content = 'No script file found'

    # HTML content to be displayed
    html_content = "<p>This is a dynamic HTML content. It can include various elements, <br />such as paragraphs, headings, lists, etc.</p>"

    return render_template('preview_two_canvas.html', html_content=html_content, script_content=script_content)
@app.route('/capture_video')
def capture_video():
    now = datetime.now().strftime('%Y-%m-%d_%H-%M-%S')
    video_filename = f'static/captured_video_{now}.mp4'
    
    command = f"sleep 5 && ffmpeg -f x11grab -framerate 24 -video_size 1366x760 -i :0.0 -f alsa -i plughw:0,0 -f pulse -i default -filter_complex '[1:a]volume=0.1[headset_audio];[2:a]volume=1[system_audio];[headset_audio][system_audio]amix=inputs=2[a]' -map 0:v -map '[a]' -c:v libx264 -r 24 -g 48 -c:a aac -b:a 128k -t 58 {video_filename}"
    
    #command = f'ffmpeg -f x11grab -framerate 24 -video_size 1366x760 -i :0.0 -f alsa -i plughw:0,0 -f pulse -i default -filter_complex "[1:a]volume=0.1[headset_audio];[2:a]volume=1[system_audio];[headset_audio][system_audio]amix=inputs=2[a],[0:v]scale=512x666[aout]" -map "[aout]" -map "[a]" -c:v libx264 -r 24 -g 48 -c:a aac -b:a 128k -t 58 -y {video_filename}'
     
    logger.info(f'Command: {command}')  # Additional informational log  
    try:
        subprocess.run(command, shell=True, check=True, capture_output=True)
        shutil.copy(video_filename, 'static/LIVE2.mp4')
        return "Video captured successfully"
    except subprocess.CalledProcessError as e:
        return f"Error capturing video: {str(e)}"
    
@app.route('/capture_square')
def capture_square():
    now = datetime.now().strftime('%Y-%m-%d_%H-%M-%S')
    videos_filename = f'static/captured_square_{now}.mp4'
    
    command2 = (f'sleep 5 && ffmpeg -f x11grab -framerate 24 -video_size 580x580 -i :0+374,170 -f alsa -i plughw:0,0 -f pulse -i default -filter_complex "[1:a]volume=0.1[headset_audio];[2:a]volume=1[system_audio];[headset_audio][system_audio]amix=inputs=2[a],[0:v]scale=512x666[aout]" -map "[aout]" -map "[a]" -c:v libx264 -r 24 -g 48 -c:a aac -b:a 128k -t 58 -y {videos_filename}'
)

    
    logger.info(f'Command: {command2}')  # Additional informational log  
    try:
        subprocess.run(command2, shell=True, check=True, capture_output=True)
        shutil.copy(videos_filename, 'static/square2.mp4')
        return "Video captured successfully"
    except subprocess.CalledProcessError as e:
        return f"Error capturing video: {str(e)}"   
    
@app.route('/misc_links')
def misc_links():
        return render_template('misc_links.html')   


@app.route('/search_chat')
def search_chat():
    # Load the conversations JSON file
    with open('static/chat/conversations.json', 'r') as f:
        conversations = json.load(f)
    
    # Get the search query from the request parameters
    query = request.args.get('q')

    # Search the conversations for the query and collect results
    results = []
    for conversation in conversations:
        if 'messages' in conversation:
            for message in conversation['messages']:
                if 'content' in message and query.lower() in message['content'].lower():
                    results.append(message)

    # Render the search results in the template
    return render_template('search_chat.html', output=results)  # Pass 'results' instead of 'output'

@app.route('/canvas')
def canvas():
        return render_template('canvas.html') 
      
@app.route('/index_canvas')
def index_canvas():
        fvideo = findvideos()
        return render_template('index_canvas.html', video=fvideo)   

@app.route('/one_canvas')
def one_canvas():
        return render_template('one_canvas.html')  
    
@app.route('/two_canvas')
def two_canvas():
        return render_template('two_canvas.html') 
      
def load_original_canvas_file(filename):
    original_file_path = os.path.join(template_dir, filename)
    with open(original_file_path, 'r') as file:
        return file.read()

def save_original_canvas_file(filename, content):
    now = datetime.datetime.now().strftime("%Y%m%d_%H%M%S")
    new_filename = f"{filename}_{now}canvas.txt"
    new_file_path = os.path.join(original_template_dir, new_filename)
    with open(new_file_path, 'w') as file:
        file.write(content)

def edit_and_save_canvas_file(filename, content):
    save_original_canvas_file(filename, content)
    edited_file_path = os.path.join(template_dir, filename)
    with open(edited_file_path, 'w') as file:
        file.write(content)


@app.route('/edit_canvas')
def edit_canvas():
    filenames = [f for f in os.listdir(template_dir) if f.endswith('canvas.html')]
    filenames = sorted(filenames)
    fvideo = findvideos()
    return render_template('edit_canvas.html', filenames=filenames, video=fvideo)

@app.route('/edit_canvas_page')
def edit_canvas_page():
    selected_filename = request.args.get('filename')
    original_content = load_original_canvas_file(selected_filename)
    return render_template('edit_canvas_page.html', selected_filename=selected_filename, original_content=original_content)

@app.route('/edit_canvas_save', methods=['POST'])
def edit_canvas_save():
    edited_content = request.form['edited_content']
    selected_filename = request.form['filename']
    print("CANVAS_SAVE",edited_content, selected_filename)
    edit_and_save_canvas_file(selected_filename, edited_content)
    return redirect(url_for('edit_canvas'))

if __name__ == '__main__':
    create_databaseD()  # Create the database and table before starting the app
    app.run(debug=True, host='0.0.0.0', port=5200)
<!--enter_data.html Template:-->
<!DOCTYPE html>
<html>
<head>
    <title>Enter Code Snippets</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
</head>
<body>
    <h2>Data Entry</h2>
<pre>
    #!/home/jack/Desktop/StoryMaker/env/bin/python
from moviepy.editor import *
from flask import Flask, render_template, request, redirect, url_for, send_from_directory, Response, flash
from flask import send_file, g
import os
import pygame
from gtts import gTTS
import cv2
import dlib
import numpy as np
from random import randint
from moviepy.editor import VideoFileClip, ImageClip, CompositeVideoClip
from moviepy.editor import concatenate_videoclips, AudioFileClip
import moviepy.editor as mp
import moviepy.editor
import subprocess
from pathlib import Path as change_ext
import re
from io import BytesIO
import matplotlib.pyplot as plt
import sqlite3
import random
import glob
import base64
import tempfile
import datetime
import imageio
import time
from werkzeug.utils import secure_filename
import shutil
from search import search
import clean_images
from time import sleep
from pydub import AudioSegment
from PIL import Image, ImageDraw, ImageFont
import uuid
import logging
from logging.handlers import RotatingFileHandler
# Initialize Flask app
app = Flask(__name__)
app.secret_key = os.urandom(24)
# Create a logger object
logger = logging.getLogger(__name__)
logger.setLevel(logging.DEBUG)

# Create a formatter for the log messages
formatter = logging.Formatter(
    '%(asctime)s %(levelname)s: %(message)s [in %(pathname)s:%(lineno)d]')

# Create a file handler to write log messages to a file
file_handler = RotatingFileHandler(
    'Logs/app.log', maxBytes=10000, backupCount=1)
file_handler.setLevel(logging.DEBUG)
file_handler.setFormatter(formatter)

# Add the file handler to the logger
logger.addHandler(file_handler)

# Set up logging for the Flask app
app.logger.addHandler(file_handler)
# Define a route for your Flask app


@app.route('/hello_world')
def hello_world():
    TExt = "TEXT TEST 6789"
    logger.debug('This is a debug message: %s', TExt)

    TEXT = "TEXT TEST abcd"
    logger.debug('This is a debug message: %s', TEXT)

    return "Hello, World!"


directory_path = "static/current_project"
if not os.path.exists(directory_path):
    os.makedirs(directory_path)
app.config['UPLOAD_FOLDER'] = 'static/images/uploads'
app.config['RESULTS_FOLDER'] = 'static/videos/results'
app.config['THUMBNAILS_FOLDER'] = 'static/images/thumbnails'
app.config['CHECKPOINT_PATH'] = 'checkpoints/wav2lip_gan.pth'
app.config['AUDIO_PATH'] = 'sample_data/input_audio.wav'
app.config['video_PATH'] = 'sample_data/input_videio.mp4'
app.config['DATABASE'] = 'code.db'  # SQLite database file


@app.route('/favicon.ico')
def favicon():
    return send_from_directory(os.path.join(app.root_path, 'static'), 'favicon.ico', mimetype='image/vnd.microsoft.icon')


# use the search function as a route
app.add_url_rule('/search', 'search', search)


def zip_lists(list1, list2):
    return zip(list1, list2)


app.jinja_env.filters['zip'] = zip_lists

directory_path = 'temp'  # Replace with the desired directory path
# Create the directory if it doesn't exist
os.makedirs(directory_path, exist_ok=True)


@app.route('/')
def index():
    image_dir = 'static/images'
    image_files = [f for f in os.listdir(image_dir) if f.endswith('.jpg')]
    random_image_file = random.choice(image_files)
    return render_template('index.html', random_image_file="images/" + random_image_file)


def generate_output():
    # Specify the path to your Bash script
    bash_script_path = '/home/jack/Desktop/StoryMaker/MakeVideo'

    # Execute the Bash script
    subprocess.run(['bash', bash_script_path])
    # Backup the result_videoxx.mp4 file
    current_datetime = str(int(time.time()))
    backup_filename = f"static/{current_datetime}.mp4"
    original_filename = "results/result_voice.mp4"
    shutil.copyfile(original_filename, backup_filename)
    return redirect('/final_lipsync')


@app.route('/create_avatar', methods=['GET', 'POST'])
def create_avatar():
    if request.method == 'POST':
        # check_point = os.path.join(app.config['CHECKPOINT_PATH'], 'checkpoints/wav2lip_gan.pth')

        return Response(generate_output(), mimetype='text/plain')
    else:
        return render_template('create_avatar.html')


@app.route('/run_command', methods=['GET'])
def run_command():
    # Specify the path to your Bash script
    bash_script_path = 'MakeVideo'

    # Execute the Bash script
    subprocess.run(['bash', bash_script_path])
    # Backup the result_videoxx.mp4 file
    current_datetime = str(int(time.time()))
    backup_filename = f"static/{current_datetime}.mp4"
    shutil.copyfile("results/result_voice.mp4", backup_filename)
    redirect('/final_lipsync')


@app.route('/result/<filename>')
def result(filename):
    return render_template('result.html', filename=filename)


@app.route('/convert_mp3_to_wav', methods=['GET', 'POST'])
def convert_mp3_to_wav():
    if request.method == 'POST':
        mp3_file = request.files['mp3_file']
        mp3_filename = mp3_file.filename
        mp3_path = os.path.join(app.static_folder, 'audio_mp3', mp3_filename)
        mp3_file.save(mp3_path)

        wav_filename = 'input_audio.wav'
        wav_path = os.path.join('sample_data', wav_filename)

        sound = AudioSegment.from_mp3(mp3_path)
        sound.export(wav_path, format='wav')

        return 'MP3 file converted to WAV successfully'
    else:
        return render_template('convert_mp3_to_wav.html')


@app.route('/final_lipsync')
def final_lipsync():
    VIDEO = 'result/result_voice.mp4'
    return render_template('final_lipsync.html', video=VIDEO)


@app.route('/text_mp3', methods=['GET', 'POST'])
def text_mp3():
    if request.method == 'POST':
        # Get the text from the textarea
        text = request.form['text']
        text0 = text
        # Remove whitespace from the text
        text = text.replace(" ", "")
        # Create a filename based on the first 25 characters of the text
        filename = "static/audio_mp3/" + text[:25] + ".mp3"
        textname = text[:25] + ".txt"
        # Save the text to a text file
        textname = textname.strip()
        with open("static/text/" + textname, 'w') as f:
            f.write(text0)
        filename = filename.strip()  # remove the newline character
        # Create a gTTS object and save the audio file
        tts = gTTS(text)
        filename = filename.strip()
        tts.save(filename)
        shutil.copy(filename, 'static/TEMP.mp3')
        # Play the mp3 file
        pygame.mixer.init()
        pygame.mixer.music.load(filename)
        pygame.mixer.music.play()
        # Wait for the audio to finish playing
        while pygame.mixer.music.get_busy():
            pygame.time.Clock().tick(10)
        # Stop pygame and exit the program
        pygame.mixer.quit()
        pygame.quit()
        # Return the text and filename to the template
        return render_template('text_mp3.html', text=text, filename=filename)
    else:
        # Render the home page template
        return render_template('text_mp3.html')


@app.route('/mp3_upload', methods=['POST'])
def mp3_upload():
    if 'file' not in request.files:
        return 'No file uploaded', 400

    file = request.files['file']
    if file.filename == '':
        return 'No file selected', 400

    if file:
        audio_file = 'static/TEMP.mp3'
        file.save(audio_file)
        return render_template('player.html', audio_file=audio_file)


@app.route('/generate_video', methods=['GET', 'POST'])
def generate_video():
    if request.method == 'POST':
        # Set the input and output filenames
        eyes_filename = 'static/TEMP.png'
        input_filename = 'static/TEMP2.mp4'
        output_filename = 'static/TEMP2.mp4'

        # Set the paths for the video and audio files
        audio_file = 'static/TEMP.mp3'
        output_filenames = 'static/TEMP.mp4'

        # Extract eyes from the uploaded image and save as eyes_test.png
        image_path = "static/TEMP.jpg"
        shape_predictor_path = "/home/jack/hidden/shape_predictor_68_face_landmarks.dat"
        extract_eyes(image_path, eyes_filename, shape_predictor_path)

        # Load the image clip
        image_clip = ImageClip(image_path, duration=30)

        # Set the final clip properties
        final_clip = image_clip.set_audio(None)
        final_clip = final_clip.set_position('center')

        # Write the final video
        final_clip.write_videofile(
            output_filename, codec='libx264', fps=30, audio=False)

        # Load the input video without audio
        input_clip = VideoFileClip(input_filename, audio=False)

        # Load the eye image clip
        eyes_clip = ImageClip(eyes_filename)

        # Create multiple looping clips
        clips = []
        for i in range(8):
            loop_clip = mkloop(input_clip, eyes_clip)
            clips.append(loop_clip)

        # Concatenate all the clips
        final_clips = concatenate_videoclips(clips)

        # Write the final video
        final_clips.write_videofile(
            output_filenames, codec='libx264', fps=input_clip.fps, audio=False)

        # Load the video and audio files
        video_clip = VideoFileClip(output_filenames)
        audio_clip = AudioFileClip(audio_file)

        # Set the duration of the final video to match the audio clip's duration
        final_duration = audio_clip.duration + .5

        # Set the video clip's duration to match the final duration
        video_clip = video_clip.set_duration(final_duration)

        # Set the audio of the video clip to be the same as the loaded audio clip
        video_clip = video_clip.set_audio(audio_clip)

        # Write the final video file
        output_path = "static/final_video_blinking.mp4"
        video_clip.write_videofile(
            output_path, codec='libx264', audio_codec='aac', fps=24)
        shutil.copy(output_path, 'results/final_video_blinking.mp4')
        return render_template('generate_video.html', video_path=output_path)

    return render_template('generate_video.html')
# Function to extract eyes from an image using dlib


def extract_eyes(image_path, eyes_filename, shape_predictor_path):
    # Load the image and shape predictor model
    image = cv2.imread(image_path)
    detector = dlib.get_frontal_face_detector()
    predictor = dlib.shape_predictor(shape_predictor_path)

    # Convert the image to grayscale
    gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)

    # Detect faces in the image
    faces = detector(gray)

    # Iterate over the detected faces and extract the eye regions
    for face in faces:
        landmarks = predictor(gray, face)

        # Extract the coordinates of the left eye
        left_eye_pts = [(landmarks.part(i).x, landmarks.part(i).y)
                        for i in range(36, 42)]

        # Extract the coordinates of the right eye
        right_eye_pts = [(landmarks.part(i).x, landmarks.part(i).y)
                         for i in range(42, 48)]

        # Create a transparent image with an alpha channel
        transparent_image = np.zeros(
            (image.shape[0], image.shape[1], 4), dtype=np.uint8)

        # Define the skin color (e.g., light brown or tan) in BGR format
        # skin_color_bgr = (210, 180, 140)
        skin_color_bgr = (80, 80, 40)

        # Convert BGR to RGB
        skin_color_rgb = (skin_color_bgr[2],
                          skin_color_bgr[1], skin_color_bgr[0])

        # Draw the eye regions on the transparent image with the skin color and alpha channel
        cv2.fillPoly(transparent_image, [np.array(
            left_eye_pts)], skin_color_rgb + (200,))
        cv2.fillPoly(transparent_image, [np.array(
            right_eye_pts)], skin_color_rgb + (200,))
        blurred_image = cv2.GaussianBlur(transparent_image, (5, 5), 0)
        # Save the transparent image with only the eyes as a PNG file
        cv2.imwrite(eyes_filename, blurred_image)
# Function to create a looping clip with blinking eyes


def mkloop(input_clip, eyes_clip):
    # Set the duration of the eye image clip
    eyes_duration = 0.1  # seconds

    # Set the position of the eye image clip
    eyes_position = 'center'

    # Set the start time of the eye image clip
    blink_start_time = randint(2, 4)

    # Create a CompositeVideoClip with the input video and the eye image clip
    final_clip = CompositeVideoClip([input_clip, eyes_clip.set_duration(eyes_duration)
                                     .set_position(eyes_position)
                                     .set_start(blink_start_time)])

    # Calculate the duration of the final clip
    final_duration = blink_start_time + eyes_duration + \
        randint(2, 4)  # 5 to 8 seconds after the blink

    # Set the duration of the final clip
    final_clip = final_clip.set_duration(final_duration)
    return final_clip


def apply_text(mp4_path, text, x, y):
    video = moviepy.editor.VideoFileClip(mp4_path)
    font = "/home/jack/fonts/OpenSansBold.ttf"
    text_clip = moviepy.editor.TextClip(
        text, font=font, fontsize=24, color="white")

    try:
        x = int(x)
        y = int(y)
    except ValueError:
        raise ValueError(
            "Invalid position values. Please provide integer values for x and y.")

    if not (0 <= x <= video.w):
        raise ValueError(
            "Invalid x position. Must be within the width of the video.")

    if not (0 <= y <= video.h):
        raise ValueError(
            "Invalid y position. Must be within the height of the video.")

    text_clip = text_clip.set_position((x, y))

    # Check if duration is None and set a default value if necessary
    video_duration = video.duration if video.duration is not None else 0
    text_clip_duration = text_clip.duration if text_clip.duration is not None else 0

    # Set the duration of the video and text clips
    duration = max(video_duration, text_clip_duration)
    video = video.set_duration(duration)
    text_clip = text_clip.set_duration(duration)

    # Create the composite video by overlaying the text clip onto the video clip
    new_video = moviepy.editor.CompositeVideoClip([video, text_clip])

    # Save the new video with the applied text
    new_mp4_path = 'static/TTMP.mp4'
    new_video.write_videofile(
        new_mp4_path, codec='libx264', audio_codec='aac', remove_temp=False)

    return new_mp4_path


@app.route("/apply_text_to_video", methods=["POST", "GET"])
def apply_text_to_video():
    if request.method == "POST":
        file = request.files["mp4_file"]
        if file.filename == '':
            return redirect(request.url)
        file.save('static/TTMP.mp4')

        mp4_path = 'static/TTMP.mp4'
        text = request.form["text"]
        x = request.form["x"]
        y = request.form["y"]
        new_mp4_path = apply_text(mp4_path, text, x, y)
        return render_template("apply_text_to_video.html", new_mp4_path=new_mp4_path)
    else:
        return render_template("apply_text_to_video.html")


# Get a list of existing subdirectories in the video resources directory
existing_subdirectories = [subdir for subdir in os.listdir(
    "static/current_project") if os.path.isdir(os.path.join("static/current_project", subdir))]


@app.route('/uploads', methods=['GET', 'POST'])
def upload_files():
    video_resources_dir = "static/current_project"
    if request.method == 'POST':
        # Get the selected subdirectory from the form
        selected_subdirectory = request.form.get('subdirectory')

        # Check if the selected subdirectory exists
        if selected_subdirectory in existing_subdirectories:
            # Handle the uploaded file
            file = request.files['file']
            if file:
                # Save the file to the selected subdirectory
                file.save(os.path.join(video_resources_dir,
                          selected_subdirectory, file.filename))
                # Get the URL for the uploaded image
                image_path = url_for('static', filename=os.path.join(
                    'current_project', selected_subdirectory, file.filename))
                return render_template('upload_files.html', image_path=image_path)
            else:
                return 'No file selected.'
        else:
            return 'Invalid subdirectory selected.'
    # Render the upload form with the list of existing subdirectories
    return render_template('upload_files.html', subdirectories=existing_subdirectories)


@app.route('/get_files', methods=['POST'])
def get_files():
    subdirectory = request.form.get('subdirectory')
    file_options = []
    if subdirectory and subdirectory in existing_subdirectories:
        subdirectory_path = os.path.join(
            "static/current_project", subdirectory)
        files = os.listdir(subdirectory_path)
        file_options = [
            f'<option value="{file}">{file}</option>'
            for file in files
            if os.path.isfile(os.path.join(subdirectory_path, file))
        ]
    return ''.join(file_options)


@app.route('/image_list')
def image_list():
    image_directory = 'static/current_project/Narrators'
    image_list = [
        filename
        for filename in os.listdir(image_directory)
        if filename.endswith('.jpg')
    ]
    return render_template('image_list.html', image_list=image_list)


@app.route('/upload', methods=['POST', 'GET'])
def upload():
    filename = request.form['filename']
    if filename:
        src_path = 'static/current_project/Narrators/' + filename
        dest_path = 'static/TEMP.jpg'
        shutil.copyfile(src_path, dest_path)
        return redirect('/')
    else:
        return 'No file selected.'


# List of image directories (you can add more as needed)
image_directories = glob.glob('static/images/*')

@app.route("/mkblend_video", methods=['GET', 'POST'])
def mkblend_video():
    if request.method == 'POST':
        selected_directory = request.form.get('selected_directory')

        if selected_directory:
            # Create a temporary directory to save the images
            temp_dir = tempfile.mkdtemp()

            # Loop through the files in the selected directory and move them to the temporary directory
            chosen_directory = os.path.join('static/images', selected_directory)
            for filename in os.listdir(chosen_directory):
                if filename.endswith('.jpg') or filename.endswith('.png'):
                    source_path = os.path.join(chosen_directory, filename)
                    target_path = os.path.join(temp_dir, filename)
                    os.rename(source_path, target_path)
                    logger.debug('Moved file: %s', filename)
    
        image_list = glob.glob(temp_dir + "*.jpg")
        logger.debug('IMAGE_LIST: %s', image_list)
        # Shuffle and select a subset of images
        # random.shuffle(image_list)
        image_list = sorted(image_list)
        logger.debug('Selected image filenames: %s', image_list)
        # Print the number of selected images
        print(len(image_list))
        logger.debug('Number of files: %s', len(image_list))

        def changeImageSize(maxWidth, maxHeight, image):
            widthRatio = maxWidth / image.size[0]
            heightRatio = maxHeight / image.size[1]
            newWidth = int(widthRatio * image.size[0])
            newHeight = int(heightRatio * image.size[1])
            newImage = image.resize((newWidth, newHeight))
            return newImage

        # Get the size of the first image
        if image_list:
            imagesize = Image.open(image_list[0]).size

            for i in range(len(image_list) - 1):
                imag1 = image_list[i]
                imag2 = image_list[i + 1]
                image1 = Image.open(imag1)
                image2 = Image.open(imag2)

                image3 = changeImageSize(imagesize[0], imagesize[1], image1)
                image4 = changeImageSize(imagesize[0], imagesize[1], image2)

                image5 = image3.convert("RGBA")
                image6 = image4.convert("RGBA")

                text = "animate/"
                for ic in range(0, 100):
                    inc = ic * 0.01
                    # inc = ic * 0.08
                    sleep(0.1)
                    # Gradually increase opacity
                    alphaBlended = Image.blend(image5, image6, alpha=inc)
                    alphaBlended = alphaBlended.convert("RGB")
                    current_time = datetime.datetime.now()
                    filename = current_time.strftime(
                        '%Y%m%d_%H%M%S%f')[:-3] + '.jpg'
                    alphaBlended.save(f'{text}{filename}')
                    # shutil.copy(f'{text}{filename}', {temp_dir}+'TEMP.jpg')
                    shutil.copy(f'{text}{filename}', os.path.join(temp_dir, 'TEMP.jpg'))

                    if ic % 25 == 0:
                        print(i, ":", ic, end=" . ")
                    if ic % 100 == 0:
                        logger.debug('Image Number: %.2f %d', inc, ic)

            from moviepy.video.io.ImageSequenceClip import ImageSequenceClip
            # Get the list of files sorted by creation time
            imagelist = sorted(glob.glob('animate/*.jpg'),
                               key=os.path.getmtime)

            # Create a clip from the images
            clip = ImageSequenceClip(imagelist, fps=30)

            # Write the clip to a video file using ffmpeg
            current_time = datetime.datetime.now()
            filename = "static/animate/TEMP3a.mp4"
            clip.write_videofile(
                filename, fps=24, codec='libx265', preset='medium')
            store = "static/videos/" + \
                current_time.strftime('%Y%m%d_%H%M%S%f')[:-3] + 'jul27.mp4'
            # Replace with the desired path for the converted video file
            output_file = "static/animate/TEMP5.mp4"
            # Replace with the desired path for the converted video file
            webm_file = "static/animate/TEMP5.webm"
            ffmpeg_cmd = [
                'ffmpeg', '-i', filename, '-c:v', 'libx264', '-crf', '23', '-preset', 'medium', '-c:a', 'aac',
                '-b:a', '128k', '-movflags', '+faststart', '-y', output_file
            ]
            subprocess.run(ffmpeg_cmd)
            ffmpeg_cmd2 = [
                'ffmpeg', '-i', filename, '-c:v', 'libx264', '-crf', '23', '-preset', 'medium', '-c:a', 'aac',
                '-b:a', '128k', '-movflags', '+faststart', '-y', webm_file
            ]
            subprocess.run(ffmpeg_cmd2)
            shutil.copy(filename, store)
            return render_template('mkblend_video.html', video=filename)

    return render_template('choose_directory.html')


def changeImageSize(maxWidth, maxHeight, image):
    widthRatio = maxWidth / image.size[0]
    heightRatio = maxHeight / image.size[1]
    newWidth = int(widthRatio * image.size[0])
    newHeight = int(heightRatio * image.size[1])
    newImage = image.resize((newWidth, newHeight))
    return newImage


directories = [
    "static/images/512x1536-woman",
    "static/images/abstract_beauty",
    "static/images/beautiful_girl",
    "static/images/Beautiful_Warrior"
]


@app.route("/mkblend_videos", methods=['POST', 'GET'])
def mkblend_videos():
    # Get the selected directory from the form data
    selected_directory = request.form.get('selected_directory')
    logger.debug('Selected Directory: %s', selected_directory)
    # Check if the selected directory is valid
    if selected_directory and selected_directory in directories:
        # Use glob to get the list of files within the selected directory
        filelist = glob.glob(os.path.join(selected_directory, '*.jpg'))
        logger.debug('Selected directory: %s', selected_directory)
        image_list = filelist
        # Shuffle and select a subset of images
        image_list = filelist
        random.shuffle(image_list)
        image_list = random.sample(image_list, 29)
        # Get the size of the first image
        imagesize = Image.open(image_list[0]).size

        # Print the number of selected images
        print("IMAGE_LIST_length:", len(image_list))

        for i in range(len(image_list) - 1):
            imag1 = image_list[i]
            imag2 = image_list[i + 1]
            image1 = Image.open(imag1)
            image2 = Image.open(imag2)

            image3 = changeImageSize(imagesize[0], imagesize[1], image1)
            image4 = changeImageSize(imagesize[0], imagesize[1], image2)

            image5 = image3.convert("RGBA")
            image6 = image4.convert("RGBA")

            text = "animate/"
            # for ic in range(0,125):
            for ic in range(0, 100):
                inc = ic * .01
                sleep(.1)
                # gradually increase opacity
                alphaBlended = Image.blend(image5, image6, alpha=inc)
                alphaBlended = alphaBlended.convert("RGB")
                current_datetime = str(int(time.time()))
                filename = current_datetime[:-3] + '.jpg'
                alphaBlended.save(f'{text}{filename}')
                if ic % 25 == 0:
                    print(ic, ":", inc, end=" . ")

    from moviepy.video.io.ImageSequenceClip import ImageSequenceClip
    # Get the list of files sorted by creation time
    imagelist2 = sorted(glob.glob('animate/*.jpg'), key=os.path.getmtime)

    # Create a clip from the images
    clip = ImageSequenceClip(imagelist2, fps=30)

    # Write the clip to a video file using ffmpeg
    current_datetime = str(int(time.time()))
    filename = "static/animate/TEMP3a.mp4"
    clip.write_videofile(filename, fps=24, codec='libx265', preset='medium')
    store = "static/videos/" + current_datetime[:-3] + 'july27.mp4'
    # Replace with the desired path for the converted video file
    output_file = "static/animate/TEMP5.mp4"
    # webm_file = "static/animate/TEMP5.webm"  #Replace with the desired path for the converted video file
    ffmpeg_cmd = ['ffmpeg', '-i', filename, '-c:v', 'libx264', '-crf', '23', '-preset',
                  'medium', '-c:a', 'aac', '-b:a', '128k', '-movflags', '+faststart', '-y', output_file]
    subprocess.run(ffmpeg_cmd)
    # ffmpeg_cmd2 = ['ffmpeg', '-i', filename, '-c:v', 'libx264', '-crf', '23', '-preset', 'medium', '-c:a', 'aac', #'-b:a', '128k', '-movflags', '+faststart', '-y', webm_file]
    # subprocess.run(ffmpeg_cmd2)
    shutil.copy(filename, store)
    return render_template('mkblend_videos.html', video=filename)


@app.route('/generate_vid', methods=['GET', 'POST'])
def generate_vid():
    current_datetime = str(int(time.time()))
    str_current_datetime = str(current_datetime)
    logger.debug('Generating video', str_current_datetime)
    if request.method == 'POST':
        # Load the audio file
        audio_file = request.files['audio']
        # , 'input_audio.mp3')
        filename = os.path.join(app.config['AUDIO_PATH'])
        logger.info(f'Audio path: {filename}')
        audio_file.save(filename)
        print("FILENAME:", filename)

        # Get the duration of the audio using ffprobe
        command = f"ffprobe -v error -show_entries format=duration -of default=noprint_wrappers=1:nokey=1 {filename}"
        duration = subprocess.check_output(command.split())
        duration = float(duration.strip().decode())
        logger.info(f'Duration: {duration}')
        # Load the image file
        image_file = request.files['image']
        image_path = os.path.join(
            app.config['UPLOAD_FOLDER'], secure_filename(image_file.filename))
        logger.info(f'Image path: {image_path}')
        image_file.save(image_path)

        # Create the video
        # video_path = os.path.join(app.config['VIDEO_PATH'])#, 'sample_data/input_video.mp4')
        video_path = 'sample_data/input_video.mp4'
        logger.info(f'Video path: {video_path}')
        ffmpeg_command = f"ffmpeg -loop 1 -i {image_path} -c:v libx264 -t {duration+ 0.5} -pix_fmt yuv420p -y {video_path}"
        subprocess.run(ffmpeg_command, shell=True)

        return f'Video created: {video_path}'

    return render_template('generate_vid.html')
# Define route to display upload form


@app.route('/upload_file', methods=['POST', 'GET'])
def upload_file():
    if request.method == 'POST':
        # Check if file was uploaded
        if 'file' not in request.files:
            app.logger.error('No file was uploaded')
            flash('Error: No file was uploaded')
            return redirect(request.url)

        app.logger.error('request.files[\'file\']')
        file = request.files['file']

        # Check if file was selected
        if file.filename == '':
            app.logger.error('No file was selected')
            flash('Error: No file was selected')
            return redirect(request.url)

        # Define allowed file extensions
        ALLOWED_EXTENSIONS = {'png', 'jpg', 'jpeg', 'gif'}

        # Define function to check file extension
        def allowed_file(filename):
            return '.' in filename and filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS

        # Check if file is allowed
        if not allowed_file(file.filename):
            # app.logger.error(f"File '{file.filename}' is not allowed")
            app.logger.error("File '" + file.filename + "' is not allowed")
            flash("Error: File '" + file.filename + "'close is not allowed")
            return redirect(request.url)

        # Save the file
        try:
            filename = secure_filename(file.filename)
            file.save(os.path.join(app.config['UPLOAD_FOLDER'], filename))
            app.logger.info(f'File {filename} saved')
            app.logger.info('FILENAME:', os.path.join(
                app.config['UPLOAD_FOLDER'], filename))
        except Exception as e:
            app.logger.error(f'Error saving file: {e}')
            flash('Error: Unable to save file')
            return redirect(request.url)

        # Redirect to the result page
        app.logger.info(f'File-Result {filename} SAVED')
        return redirect(url_for('result', filename=filename))

    # Return the upload form for GET requests
    return render_template('upload_file.html')


@app.route('/uploads/<filename>')
def uploaded_file(filename):
    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)


@app.route('/make_text', methods=['GET', 'POST'])
def make_text():
    DIR = 'static/text/'
    if request.method == 'POST':
        # Get the text entered in the textarea
        text = request.form.get('text')

        # Generate a filename using the first 25 letters of the text
        text = text.replace(' ', '_')
        filename = text[:25]

        # Save the text to a file
        with open(f'{DIR}{filename}.txt', 'w') as file:
            file.write(text)

        return 'Text saved successfully!'
    else:
        return render_template('make_text.html')


# directories = ['static/images', 'static/images/squares', 'static/final_videos', 'static/Dreamlike_art',
#              'static/squares', 'static/images/uploads', 'static/Final_Fantasy', 'static/final_images', 'static/thumbnails']
directories = glob.glob('static/images/*')

# Route for the home page


@app.route('/home')
def home():
    return render_template('choose_dir.html', directories=directories)
# Route for choosing a directory


@app.route('/choose_dir', methods=['GET', 'POST'])
def choose_dir():
    if request.method == 'POST':
        selected_directory = request.form.get('directory', directories)
        TExt = "TEXT TEST"
        logger.error('No file was selected: %s', TExt)
        logger.debug('Debug was selected: %s', TExt)
        if selected_directory is None:
            # Handle the case where no directory is selected
            logger.error('No directory selected')
            return 'No directory selected!'
        # Rest of the code...
        # Use the selected_directory variable in your logic to generate the video
        # Make sure to update the paths according to the selected directory
        logger.debug('Selected directory: %s', selected_directory)
        # Get the list of image files in the selected directory
        image_filenames = random.sample(
            glob.glob(selected_directory + '/*.jpg'), 30)
        logger.debug('Selected image filenames: %s', image_filenames)

        image_clips = []
        for filename in image_filenames:
            # Open the image file and resize it to 512x768
            logger.debug('Processing image: %s', filename)
            image = Image.open(filename)
            # image = image.resize((512, 768), Image.ANTIALIAS)
            # Convert the PIL Image object to a NumPy array
            image_array = np.array(image)
            # Create an ImageClip object from the resized image and set its duration to 1 second
            image_clip = ImageClip(image_array).set_duration(1)
            # Append the image clip to the list
            image_clips.append(image_clip)

        logger.debug('Number of image clips: %d', len(image_clips))

        # Concatenate all the image clips into a single video clip
        video_clip = concatenate_videoclips(image_clips, method='compose')
        timestr = time.strftime("%Y%m%d-%H%M%S")
        # Set the fps value for the video clip
        video_clip.fps = 24
        # Write the video clip to a file
        video_file = f'static/videos/random_images_{timestr}_video.mp4'
        output_p = 'static/videos/random_images_video.mp4'
        logger.debug('Output video file path: %s', video_file)
        logger.debug('Final video file path: %s', output_p)

        video_clip.write_videofile(video_file, fps=24)

        try:
            shutil.copy(video_file, output_p)
        except Exception as e:
            logger.error('Error occurred while copying file: %s', str(e))
            return f"Error occurred while copying file: {str(e)}"

        # Return the rendered template with the list of directories and output path
        return render_template('choose_dir.html', directories=directories, output_path=output_p)

    # If the request method is GET, render the form template with the list of directories
    output_p = 'static/videos/random_images_video.mp4'
    return render_template('choose_dir.html', directories=directories, output_path=output_p)


@app.route('/convert', methods=['GET', 'POST'])
def convert():
    if request.method == 'POST':
        try:
            audio_file = request.files['audio_file']
            # Path for audio file
            audio_file_path = f'static/audio_mp3/{audio_file.filename}'
            # Save the audio file to the specified location
            audio_file.save(audio_file_path)

            formatted_text_file = request.files['formatted_text_file']
            # Path for formatted text file
            formatted_text_file_path = f'static/formatted_text/{formatted_text_file.filename}'
            # Save the formatted text file to the specified location
            formatted_text_file.save(formatted_text_file_path)

            output_filename = datetime.datetime.now().strftime('%Y-%m-%d') + '.mp4'
            output_path = 'static/videos/' + output_filename
            # Define the ffmpeg command
            # Create the blank video
            # ffmpeg -f lavfi -i color='#470000'@0x0:s=1280x720:rate=60,format=rgba -t 280 -y blank.mp4
            command = [
                'ffmpeg',
                '-i', audio_file_path,
                '-f', 'lavfi',
                '-i', f"color='#470000'@0.0:s=1280x720:rate=60,format=rgba",
                '-vf', f"drawtext=textfile='{os.path.abspath(formatted_text_file_path)}':y=(h-220)-12*t:x=580:fontcolor=orange:fontfile=/home/jack/Arimo-Regular.ttf:fontsize=26",
                '-t', '280',
                '-y', output_path
            ]

            logger.debug(f"Command: {' '.join(command)}")

            subprocess.run([str(arg) for arg in command], check=True)
            video = f'{output_filename}'
            return render_template('convert.html', video=output_path)
        except Exception as _:
            logger.exception("An error occurred during video conversion:")
            return render_template('error.html', message="An error occurred during video conversion.")
    else:
        return render_template('convert_form.html')


@app.route('/convert512', methods=['GET', 'POST'])
def convert512():
    if request.method == 'POST':
        try:
            audio_file = request.files['audio_file']
            # Path for audio file
            audio_file_path = f'static/audio_mp3/{audio_file.filename}'
            # Save the audio file to the specified location
            audio_file.save(audio_file_path)
            # Get the duration of the audio using ffprobe
            command = f"ffprobe -v error -show_entries format=duration -of default=noprint_wrappers=1:nokey=1 {audio_file_path}"
            duration = subprocess.check_output(command.split())
            duration = float(duration.strip().decode())
            length = int(duration + 5)
            logger.info(f'Duration-512: {length}')
            formatted_text_file = request.files['formatted_text_file']
            # Path for formatted text file
            formatted_text_file_path = f'static/formatted_text/{formatted_text_file.filename}'
            # Save the formatted text file to the specified location
            formatted_text_file.save(formatted_text_file_path)

            output_filename = datetime.datetime.now().strftime('%Y-%m-%d') + '.mp4'
            output_path = 'static/videos/' + output_filename
            # Define the ffmpeg command
            # Create the blank video
            # ffmpeg -f lavfi -i color='#470000'@0x0:s=1280x720:rate=60,format=rgba -t 280 -y blank.mp4
            # y=(h-120)-12*t:x=24:
            command = [
                'ffmpeg',
                '-i', audio_file_path,
                '-f', 'lavfi',
                '-i', f"color='#470000'@0.0:s=512x1024:rate=60,format=rgba",
                '-vf', f"drawtext=textfile='{os.path.abspath(formatted_text_file_path)}':y=(h-120)-10*t:x=24:fontcolor=orange:fontfile=/home/jack/Arimo-Regular.ttf:fontsize=20",
                '-t', f'{length}', '-y', output_path
            ]

            logger.debug(f"Command: {' '.join(command)}")

            subprocess.run([str(arg) for arg in command], check=True)
            video = f'{output_filename}'
            return render_template('convert512.html', video=output_path)
        except Exception as e:
            logger.exception("An error occurred during video conversion:")
            return render_template('error.html', message="An error occurred during video conversion.")
    else:
        return render_template('convert_form512.html')


@app.route('/mk_text', methods=['GET', 'POST'])
def mk_text():
    DIR = "static/text/"
    if request.method == 'POST':
        text = request.form.get('text')
        tex = text.replace(" ", "_")
        filename = tex[:25]
        with open(f'{DIR}{filename}.txt', 'w') as file:
            file.write(text)
        return render_template('mk_text.html', text=text, filename=f'{filename}.txt')
    else:
        return render_template('mk_text.html')


@app.route('/list_files')
def list_files():
    static_text_dir = 'static/text/'
    files = os.listdir(static_text_dir)
    files = [file for file in files if os.path.isfile(
        os.path.join(static_text_dir, file))]
    return str(files)


@app.route('/format_file', methods=['POST', 'GET'])
def format_file():
    static_text_dir = 'static/text/'
    static_format_dir = 'static/formatted_text/'
    if request.method == 'POST':
        filename = request.form.get('filename')
        file_path = os.path.join(static_text_dir, filename)
        if not os.path.isfile(file_path):
            return render_template('error.html', message=f'File "{filename}" does not exist')
        with open(file_path, 'r') as file:
            content = file.read()
        words = content.split()
        formatted_content = '\n'.join(
            [' '.join(words[i:i + 5]) for i in range(0, len(words), 5)])
        modified_filename = filename.replace('.txt', '') + 'FORMATTED.txt'
        modified_file_path = os.path.join(static_format_dir, modified_filename)
        with open(modified_file_path, 'w') as modified_file:
            modified_file.write(formatted_content)
            logger.debug('This is Formated Content: %s', formatted_content)
            logger.debug('This is Formated file: %s', modified_file_path)
        return render_template('success.html', original_file=filename, modified_file=modified_filename)

    file_options = []
    for file_name in os.listdir(static_text_dir):
        if file_name.endswith('.txt'):
            file_options.append(file_name)

    return render_template('form.html', file_options=file_options)


@app.route('/view_text')
def view_text():
    text_files_dir = 'static/text/'
    text_files = []
    for filename in os.listdir(text_files_dir):
        if filename.endswith('.txt'):
            text_files.append(filename)
    return render_template('select_file.html', text_files=text_files)


@app.route('/view_text/<filename>')
def display_text(filename):
    text_file_path = f'static/text/{filename}'
    try:
        with open(text_file_path, 'r') as file:
            file_contents = file.read()
        return render_template('view_text.html', file_contents=file_contents, filename=filename)
    except FileNotFoundError:
        return f'Text file {filename} not found.'


@app.route('/edit_file', methods=['GET', 'POST'])
def edit_file():
    if request.method == 'POST':
        filename = request.form.get('filename')
        text = request.form.get('text')
        with open(f'static/text/{filename}', 'w') as file:
            file.write(text)
    text_files_dir = 'static/text/'
    text_files = []
    for filename in os.listdir(text_files_dir):
        if filename.endswith('.txt'):
            text_files.append(filename)
    return render_template('edit_file.html', text_files=text_files)


@app.route('/edit_formatted', methods=['GET', 'POST'])
def edit_formatted():
    if request.method == 'POST':
        filename = request.form.get('filename')
        text = request.form.get('text')
        with open(f'static/formatted_text/{filename}', 'w') as file:
            file.write(text)
    text_files_dir = 'static/formatted_text/'
    text_files = []
    for filename in os.listdir(text_files_dir):
        if filename.endswith('.txt'):
            text_files.append(filename)
    return render_template('edit_formatted.html', text_files=text_files)


@app.route('/get_formatted_content/<filename>')
def get_formatted_content(filename):
    file_path = os.path.join('static/formatted_text', filename)
    with open(file_path, 'r') as file:
        content = file.read()
    return content


@app.route('/get_file_content/<filename>')
def get_file_content(filename):
    file_path = os.path.join('static/text', filename)
    with open(file_path, 'r') as file:
        content = file.read()
    return content


@app.route('/indeX')
def indeX():
    return render_template('indeX.html')


@app.route('/resize_and_overlay_videos')
def resize_and_overlay_videos():
    # Path to the videos
    static_video_path = 'static/videos/2023-07-07.mp4'
    input_video_path = 'static/animate/topvideo.mp4'
    output_video_path = 'static/output/resulta.mp4'

    # Resize the input video using FFmpeg
    resize_command = f'ffmpeg -i {input_video_path} -vf "scale=410:820" -y resized.mp4'
    subprocess.call(resize_command, shell=True)

    # Overlay the resized video on the background video using FFmpeg
    overlay_command = f'ffmpeg -i {static_video_path} -i resized.mp4 -filter_complex "overlay=25:25" -y {output_video_path}'
    subprocess.call(overlay_command, shell=True)

    # Remove the temporary resized video
    subprocess.call('rm resized.mp4', shell=True)

    # Return the final video as a response
    return send_file(output_video_path, mimetype='video/mp4')


@app.route('/resize_and_overlay_videos_page')
def resize_and_overlay_videos_page():
    output_video_path = 'static/output/resulta.mp4'
    return render_template('resize_and_overlay_videos.html', video=output_video_path)


@app.route('/build_stackedvids')
def build_stackedvids():
    # Get a random video and image from the static folder
    video_filename = random.choice(glob.glob('static/square_vids/*.mp4'))
    image_filename = random.choice(glob.glob('static/squares/*.jpg'))

    # Load the video and image files as clips
    video_clip = VideoFileClip(video_filename)
    image_clip = ImageClip(image_filename)

    # Set the duration of the image clip to match the duration of the video clip
    image_clip = image_clip.set_duration(video_clip.duration)

    # Resize the clips to 640x640 and 640x640 respectively
    video_clip = video_clip.resize((640, 640))
    image_clip = image_clip.resize((640, 640))

    # Create a black clip to fill the remaining space below the image
    black_clip = ColorClip(size=(640, 640), color=(
        0, 0, 0)).set_duration(video_clip.duration)

    # Combine the clips vertically using CompositeVideoClip
    final_clip = CompositeVideoClip([
        video_clip.set_position(('center', 'top')),
        image_clip.set_position(('center', 640)),
        black_clip.set_position(('center', 640 + 640))
    ], size=(640, 1280))

    # Export the final clip as a video file
    timestr = time.strftime("%Y%m%d-%H%M%S")
    video_filename = 'static/stacked_vids/stacked_vids' + timestr + 'video.mp4'
    final_clip_path = 'static/stacked_vids/stacked_videos.mp4'
    final_clip.write_videofile(final_clip_path)
    final_clip.write_videofile(video_filename)

    return render_template('/build_stackedvids.html', stackedvid_url=final_clip_path)


@app.route('/build_stackedvid')
def build_stackedvid():
    # Get a random video and image from the static folder
    video_filename = random.choice(glob.glob('static/square_vids/*.mp4'))
    videofilename = random.choice(glob.glob('static/square_vids/*.mp4'))

    # Load the video and image files as clips
    video_clip = VideoFileClip(video_filename)
    videoclip = VideoFileClip(videofilename)

    # Set the duration of the image clip to match the duration of the video clip
    videoclip = videoclip.set_duration(video_clip.duration)

    # Resize the clips to 640x640 and 640x640 respectively
    video_clip = video_clip.resize((640, 640))
    videoclip = videoclip.resize((640, 640))

    # Create a black clip to fill the remaining space below the image
    black_clip = ColorClip(size=(640, 640), color=(
        0, 0, 0)).set_duration(video_clip.duration)

    # Combine the clips vertically using CompositeVideoClip
    final_clip = CompositeVideoClip([
        video_clip.set_position(('center', 'top')),
        videoclip.set_position(('center', 640)),
        black_clip.set_position(('center', 640 + 640))
    ], size=(640, 1280))

    # Export the final clip as a video file
    timestr = time.strftime("%Y%m%d-%H%M%S")
    video_filename = 'static/stacked_vids/stacked_vids' + timestr + 'video.mp4'
    final_clip_path = 'static/stacked_vids/stacked_videos.mp4'
    final_clip.write_videofile(final_clip_path)
    final_clip.write_videofile(video_filename)

    return render_template('/build_stackedvid.html', stackedvid_url=final_clip_path)


@app.route('/clean_images', methods=['POST'])
def clean_images_route():
    clean_images()
    app.logger.error('line 210 clean_images_route')
    return redirect(url_for('index'))


@app.route('/get_gallery')
def get_gallery():
    image_dir = '/mnt/HDD500/flask/FLASK/static/images/uploads'
    image_names = os.listdir(image_dir)
    return render_template('get_gallery.html', image_names=image_names)


@app.route('/uploads/<filename>')
def send_image(filename):
    return send_from_directory('static/images/uploads', filename)


@app.route('/uploads/thumbnails/<filename>')
def send_image_thumb(filename):
    return send_from_directory('static/images/uploads/thumbnails', filename)


@app.route('/flask_info')
def flask_info():
    return render_template('flask_info.html')


@app.route('/add_effects')
def add_effects():
    return '''
        <form method="post" action="/video" enctype="multipart/form-data">
            <label for="input_video">Select input video file:</label><br>
            <input type="file" id="input_video" name="input_video"><br><br>
            <input type="submit" value="Submit">
        </form>
    '''


@app.route('/video', methods=['GET', 'POST'])
def process_video():
    DIR = "static/"
    input_video = request.files['input_video']

    # Save the uploaded video to a file
    input_video.save(f"{DIR}input_video.mp4")

    # Run FFmpeg commands
    command1 = f"ffmpeg -nostdin -i {DIR}input_video.mp4 -filter:v \"minterpolate='mi_mode=mci:mc_mode=aobmc:vsbmc=1:fps=10'\" -c:v libx264 -r 20 -pix_fmt yuv420p -c:a copy -y {DIR}output.mp4"

    subprocess.run(command1, shell=True, stderr=subprocess.PIPE,
                   universal_newlines=True)

    command2 = f"ffmpeg -nostdin -i {DIR}output.mp4 -vf mpdecimate,setpts=N/FRAME_RATE/TB -c:v libx264 -r 30 -pix_fmt yuv420p -c:a copy -y {DIR}mpdecimate.mp4"

    subprocess.run(command2, shell=True, stderr=subprocess.PIPE,
                   universal_newlines=True)

    # DIR = "/home/jack/Desktop/ffmpeg_flask/"
    command3 = f"ffmpeg -i static/mpdecimate.mp4 -filter_complex \"[0:v]trim=duration=14,loop=500:1:0[v];[1:a]afade=t=in:st=0:d=1,afade=t=out:st=0.9:d=2[a1];[v][0:a][a1]concat=n=1:v=1:a=1\" -c:v libx264 -r 30 -pix_fmt yuv420p -c:a aac -b:a 192k -shortest -y static/output.mp4"
    subprocess.run(command3, shell=True, stderr=subprocess.PIPE,
                   universal_newlines=True)

    now = datetime.datetime.now().strftime("%Y-%m-%d_%H-%M-%S")
    shutil.copy(f"{DIR}output.mp4", f"{DIR}{now}_output.mp4")
    logger.info(f'my_video: f"{DIR}mpdecimate.mp4"')
    video_file = "static/outputALL.mp4"
    command4 = f'ffmpeg -i "{DIR}mpdecimate.mp4" -i "{DIR}mpdecimate.mp4" -i "{DIR}mpdecimate.mp4" -i "{DIR}mpdecimate.mp4" -i "{DIR}mpdecimate.mp4" -filter_complex "[0:v]trim=duration=15[v0];[1:v]trim=duration=15[v1];[2:v]trim=duration=15[v2];[3:v]trim=duration=15[v3];[4:v]trim=duration=15[v4];[v0][v1][v2][v3][v4]concat=n=5:v=1:a=0" -c:v libx264 -pix_fmt yuv420p -shortest -y {video_file}'
    subprocess.run(command4, shell=True, stderr=subprocess.PIPE,
                   universal_newlines=True)
    now = datetime.datetime.now().strftime("%Y-%m-%d_%H-%M-%S")
    diR = f"{DIR}/square_videos/"
    logger.info(f'diR: f"{diR}mpdecimate.mp4"')
    shutil.copy(f"{video_file}", f"{diR}{now}_outputALL.mp4")
    logger.info(f'diR: {diR}mpdecimate.mp4')
    return render_template('final.html', video_file=video_file)


def get_all_mp4_videos():
    mp4_videos = []
    for root, dirs, files in os.walk('static'):
        for file in files:
            if file.endswith('.mp4'):
                mp4_videos.append(os.path.join(root, file))
    return mp4_videos


@app.route('/play/<path:video_path>')
def play(video_path):
    return send_file(video_path)


@app.route('/select_order', methods=['GET', 'POST'])
def select_order():
    # Set a default value for output_path
    output_path = 'static/videos/concatenated_video.mp4'
    if request.method == 'POST':
        # Get the order of the videos from the form data
        order = request.form.getlist('order')
        # Join the videos in the specified order
        join_videos(order, output_path)
        # Set the timestamped output path
        timestamp = datetime.datetime.now().strftime('%Y%m%d_%H%M%S')
        new_output_path = f'static/videos/concatenated_{timestamp}XX.mp4'
        shutil.copy(output_path, new_output_path)
        # Redirect to the download page
        return redirect(url_for('download'))
    else:
        # Get the paths to the video files in the directory
        video_dir = 'static/videos'
        video_files = [os.path.join(video_dir, filename) for filename in os.listdir(
            video_dir) if filename.endswith('.mp4')]
        # Render the template with the list of video files and the output path
        return render_template('select_order.html', video_files=video_files, output_path=output_path)


def join_videos(video_paths, output_path):
    # Generate a list of input arguments for FFmpeg
    input_args = []
    for path in video_paths:
        input_args.extend(['-i', path])
    # Join the videos using FFmpeg
    subprocess.run(['ffmpeg', *input_args, '-filter_complex', 'concat=n={}:v=1:a=0'.format(
        len(video_paths)), '-c:v', 'libx264', '-crf', '23', '-preset', 'veryfast', '-y', output_path])
    # output_path = 'static/videos/concatenated_video.mp4'
    timestamp = datetime.datetime.now().strftime('%Y%m%d_%H%M%S')
    new_output_path = f'static/videos/concatenated_{timestamp}XX.mp4'
    shutil.copy(output_path, new_output_path)


@app.route('/videos', methods=['POST'])
def process_videos():
    DIR = "static/"
    input_video = request.files['input_video']
    ""
    # Save the uploaded video to a file
    input_video.save(f"{DIR}input_video2.mp4")

    command1 = f"ffmpeg -nostdin -i {DIR}input_video2.mp4 -filter:v \"minterpolate='mi_mode=mci:mc_mode=aobmc:vsbmc=1:fps=10'\" -c:v libx264 -r 20 -pix_fmt yuv420p -c:a copy -y {DIR}alice/output2.mp4"
    subprocess.run(command1, shell=True, stderr=subprocess.PIPE,
                   universal_newlines=True)

    command2 = f"ffmpeg -hide_banner -i {DIR}alice/output2.mp4 -filter:v \"setpts=5*PTS,minterpolate='fps=25:scd=none:me_mode=bidir:vsbmc=1:search_param=200'\" -t 58 -y {DIR}alice/final2.mp4"
    subprocess.run(command2, shell=True, stderr=subprocess.PIPE,
                   universal_newlines=True)

    command3 = f"ffmpeg -hide_banner -i {DIR}alice/final2.mp4 -filter:v \"setpts=5*PTS,minterpolate='fps=25:scd=none:me_mode=bidir:vsbmc=1:search_param=200'\" -t 58 -y {DIR}alice/final5.mp4"
    subprocess.run(command3, shell=True, stderr=subprocess.PIPE,
                   universal_newlines=True)

    # Add music to the video
    init = randint(10, 50)
    MUSIC = ["static/music/Born_a_Rockstar-Instrumental-NEFFEX.mp3", "static/music/Cattle-Telecasted.mp3", "static/music/Bite_Me-Clean-NEFFEX.mp3", "static/music/El_Secreto-Yung_Logos.mp3", "static/music/Blue_Mood-Robert_Munzinger.mp3", "static/music/Escapism-Yung_Logos.mp3", "static/music/Enough-NEFFEX.mp3", "static/music/As_You_Fade_Away-NEFFEX.mp3", "static/music/Culture-Anno_Domini_Beats.mp3", "static/music/Contrast-Anno_Domini_Beats.mp3", "static/music/Diving_in_Backwards-Nathan_Moore.mp3",
             "static/music/Aztec_Empire-Jimena_Contreras.mp3", "static/music/Devil_s_Organ-Jimena_Contreras.mp3", "static/music/Alpha_Mission-Jimena_Contreras.mp3", "static/music/Changing-NEFFEX.mp3", "static/music/Anxiety-NEFFEX.mp3", "static/music/6-Shots-NEFFEX.mp3", "static/music/DimishedReturns.mp3", "static/music/Drum_Meditation.mp3", "static/music/ChrisHaugen.mp3", "static/music/DoveLove-Moreira.mp3", "static/music/DesertPlanet.mp3", "static/music/David_Fesliyan.mp3"]

    music = random.choice(MUSIC)
    command3 = f"ffmpeg -i {DIR}alice/final5.mp4 -ss {init} -i {music} -af 'afade=in:st=0:d=4,afade=out:st=55:d=3' -map 0:0 -map 1:0 -shortest -y {DIR}alice/Final_End.mp4"
    subprocess.run(command3, shell=True)

    # Save the output video to a file
    now = datetime.datetime.now().strftime("%Y-%m-%d_%H-%M-%S")
    shutil.copy(f"{DIR}alice/output2.mp4", f"{DIR}alice/{now}_output.mp4")
    shutil.copy(f"{DIR}alice/Final_End.mp4", f"{DIR}alice/{now}_Final.mp4")
    shutil.copy(f"{DIR}alice/Final_End.mp4", f"{DIR}alice/Final_End_mix.mp4")
    return render_template('final.html', video_file="alice/Final_End.mp4")


@app.route('/large_video')
def large_video():
    return render_template('large_video.html')


@app.route('/add_border')
def add_border():
    images = [f for f in os.listdir(
        'static/images/uploads/') if os.path.isfile(os.path.join('static/images/uploads/', f))]
    thumbnails = []
    for image in images:
        with Image.open('static/images/uploads/' + image) as img:
            img.thumbnail((200, 200))
            thumbnail_name = 'thumbnail_' + image
            img.save('static/thumbnails/' + thumbnail_name)
            thumbnails.append(thumbnail_name)
    return render_template('add_border.html', images=images, thumbnails=thumbnails)


@app.route('/select_border')
def select_border():
    borders = os.listdir('static/transparent_borders/')
    return render_template('select_border.html', borders=borders)


@app.route('/apply_border', methods=['POST', 'GET'])
def apply_border():
    selected_image = request.form['image']
    selected_border = request.form['border']
    try:
        with Image.open('static/images/uploads/' + selected_image) as img:
            with Image.open('static/transparent_borders/' + selected_border) as border:
                img = img.resize(border.size)
                img.paste(border, (0, 0), border)
                final_image_name = 'final_' + selected_image
                img.save('static/final_images/' + final_image_name)
        return render_template('final_image.html', final_image=final_image_name, message='Border applied successfully.')
    except Exception as e:
        error_message = f'An error occurred: {str(e)}. Please try again.'
        return render_template('apply_border.html', image=selected_image, border=selected_border, error_message=error_message)


@app.route('/select_border_image', methods=['GET'])
def select_border_image():
    try:
        image = request.args.get('image')
        if not image:
            raise ValueError('No image selected.')
        return render_template('select_border.html', image=image, borders=os.listdir('static/transparent_borders/'))
    except Exception as e:
        error_message = f'An error occurred: {str(e)}. Please try again.'
        return render_template('add_border.html', error_message=error_message)


@app.route('/overlay_text', methods=['GET'])
def overlay_text():
    # Load the blank image
    blank_image_path = 'static/new_video/Border-plain.png'
    blank_image = Image.open(blank_image_path)

    # Load the text file and format its contents
    text_file_path = 'static/new_video/text_file.txt'
    with open(text_file_path, 'r') as file:
        text_contents = file.read()

    formatted_text = f"{text_contents}"  # Format the contents as desired

    # Set the font properties
    font_size = 21
    font_color = (255, 255, 255)  # White color
    font_path = '/home/jack/fonts/source-sans-pro-semibold.ttf'

    font = ImageFont.truetype(font_path, font_size)

    # Create a new image with the same size as the blank image and transparent background
    text_overlay = Image.new('RGBA', blank_image.size, (0, 0, 0, 0))

    # Draw the formatted text onto the overlay image
    draw = ImageDraw.Draw(text_overlay)
    text_position = (50, 600)  # Adjust the position as needed
    draw.text(text_position, formatted_text, font=font, fill=font_color)

    # Merge the overlay image with the blank image
    final_image = Image.alpha_composite(
        blank_image.convert('RGBA'), text_overlay)

    # Save the final image
    output_image_path = 'static/new_video/output_image.png'
    final_image.save(output_image_path)

    return render_template('overlay_text.html', output_image_path=output_image_path)


@app.route('/create_text_file', methods=['GET', 'POST'])
def create_text_file():
    if request.method == 'POST':
        # Get the text content from the textarea
        text_content = request.form.get('textarea_content')

        # Create the file path
        text_file_path = os.path.join('static/new_video', 'text_file.txt')

        # Write the text content to the file
        with open(text_file_path, 'w') as file:
            file.write(text_content)

        return render_template('text_file_created.html', text_file_path=text_file_path)

    return render_template('create_text_file.html')


def allowed_file(filename):
    return '.' in filename and filename.rsplit('.', 1)[1].lower() == 'jpg'


@app.route('/generate_video3', methods=['GET', 'POST'])
def generate_video3():
    if request.method == 'POST':
        # Check if any files were uploaded
        if 'file' not in request.files:
            error_message = "No files uploaded."
            logger.error(error_message)
            return render_template('generate_video3.html', error_message=error_message)

        files = request.files.getlist('file')

        # Check if files were selected
        if len(files) == 0:
            error_message = "No files selected."
            logger.error(error_message)
            return render_template('generate_video3.html', error_message=error_message)

        # Check if the files have supported extensions
        for file in files:
            if not allowed_file(file.filename):
                error_message = f"Invalid file extension for {file.filename}. Only JPG files are allowed."
                logger.error(error_message)
                return render_template('generate_video3.html', error_message=error_message)

        # Create a temporary directory to save the uploaded files
        temp_dir = os.path.join('static', 'temp')
        os.makedirs(temp_dir, exist_ok=True)

        # Save the uploaded files to the temporary directory
        saved_files = []
        for file in files:
            filename = secure_filename(file.filename)
            file_path = os.path.join(temp_dir, filename)
            file.save(file_path)
            saved_files.append(file_path)

        # Randomly select 30 image files
        selected_images = random.sample(saved_files, min(30, len(saved_files)))

        # Create a list of image clips from the selected images
        image_clips = []
        for image_file in selected_images:
            image_clip = mp.ImageClip(image_file, duration=1)
            image_clips.append(image_clip)

        # Concatenate the image clips into a video clip
        video_clip = mp.concatenate_videoclips(image_clips)

        # Set the output video path
        output_path = os.path.join('static', 'videos', 'generated_video.mp4')

        # Write the video clip to the output file
        video_clip.write_videofile(output_path, fps=24)

        # Delete the uploaded files after processing
        for file_path in saved_files:
            os.remove(file_path)

        # Return the generated video URL to the client
        video_url = url_for('static', filename='videos/generated_video.mp4')
        return render_template('generate_video3.html', video_url=video_url)

    # Render the initial form
    return render_template('generate_video3.html')


@app.route('/generate_video2')
def generate_video2():
    # Get the pythonlist of image files in the static/final_images/ directory
    # image_filenames = random.sample(glob.glob('static/final_images/*.jpg'),25)
    # image_filenames = random.sample(glob.glob('static/images/uploads/*.jpg'),30)
    # image_filenames = random.sample(glob.glob('static/alien_files/*.jpg'),30)
    image_filenames = random.sample(
        glob.glob('/mnt/HDD500/collections/absrtact/*.jpg'), 30)
    print(image_filenames, end="-")

    image_clips = []
    for filename in image_filenames:
        # Open the image file and resize it to 512x768
        image = Image.open(filename)
        image = image.resize((512, 768), Image.ANTIALIAS)
        print(image)
        # Convert the PIL Image object to a NumPy array
        image_array = np.array(image)
        # Create an ImageClip object from the resized image and set its duration to 1 second
        image_clip = ImageClip(image_array).set_duration(1)

        # Append the image clip to the list
        image_clips.append(image_clip)

    # Concatenate all the image clips into a single video clip
    video_clip = concatenate_videoclips(image_clips, method='compose')
    timestr = time.strftime("%Y%m%d-%H%M%S")
    # Set the fps value for the video clip
    video_clip.fps = 24
    # Write the video clip to a file
    video_path = 'static/videos/random_images' + timestr + 'video.mp4'
    video_clip.write_videofile(video_path, fps=24)
    video_clip.write_videofile('static/videos/TEMPvideo.mp4', fps=24)

    # Return a message to the client
    return render_template('generate_video2.html', video_url='static/videos/TEMPvideo.mp4')
    # return render_template('generate_video2.html' ,video_url='/static/videos/TEMPvideo.mp4', video_path=video_path)


@app.route('/ffmpeg_ctl', methods=['GET', 'POST'])
def ffmpeg_ctl():
    if request.method == 'POST':
        # Access the numeric input value from the form data
        number = request.form.get('number')
        # Process the value as needed
        # ...

    return render_template('ffmpeg_ctl.html')


@app.route('/mkmoz', methods=['GET', 'POST'])
def mkmoz():
    im = Image.new("RGB", (2048, 2048), (250, 250, 250))
    for i in range(0, 2500):
        if i < 500:
            DIR = "/home/jack/.cache/thumbnails/large/*.png"
        if i > 500:
            DIR = "/home/jack/.cache/thumbnails/normal/*.png"
        # if i> 2495:DIR = "/home/jack/.cache/thumbnails/large/*.png"
        thumb = random.choice(glob.glob(DIR))
        print("THUMB:", thumb)
        Thum = Image.open(thumb)
        im.paste(Thum, ((randint(0, im.size[0])), randint(0, im.size[1]) - 50))
        filename = "static/images/ThumbNails.png"
        im.save(filename)
        Filename = "images/ThumbNails.png"
    return render_template("mkmoz.html", filename=Filename)


@app.route('/mk_background', methods=['GET', 'POST'])
def mk_background():
    im = Image.new("RGB", (8000, 512), (127, 255, 127))
    for i in range(0, 1000):
        if i < 250:
            DIR = "/home/jack/.cache/thumbnails/large/*.png"
        else:
            DIR = "/home/jack/.cache/thumbnails/normal/*.png"
        thumb = random.choice(glob.glob(DIR))
        print("THUMB:", thumb)
        Thum = Image.open(thumb)
        im.paste(Thum, ((randint(0, im.size[0])), randint(0, im.size[1]) - 50))
        filename = "static/images/ThumbNails_Background.png"
        im.save(filename)
    return redirect('/mkvid')


@app.route('/mkvid')
def mkvid():
    Filename = "static/images/ThumbNails_Background.png"
    Video_file = "static/images/ThumbNails_Background_FFmpeg.mp4"
    command = [
        'FFmpeg', '-hide_banner',
        '-loop', '1', '-i', 'static/images/ThumbNails_Background.png',
        '-vf', 'scale=8000:512,scroll=horizontal=0.0001,crop=768:512:0:0,format=yuv420p',
        '-t', '240', '-y', 'static/images/ThumbNails_Background_FFmpeg.mp4'
    ]
    subprocess.run(command)
    return redirect('/mkvid2')


@app.route('/mkvid2')
def mkvid2():
    command2 = [
        'ffmpeg', '-hide_banner',
        '-i', 'static/images/ThumbNails_Background_FFmpeg.mp4',
        '-vf', 'scale=512:768,setsar=1/1',
        '-c:a', 'copy', '-y', 'static/images/long_512-768.mp4'
    ]
    subprocess.run(command2)
    Filenamez = "images/ThumbNails_Background.png"
    Video_filez = "images/long_512-768.mp4"
    return render_template("mkvid2.html", filename=Filenamez, video=Video_filez)


def get_db():
    db = getattr(g, '_database', None)
    if db is None:
        db = g._database = sqlite3.connect(app.config['DATABASE'])
    return db


@app.teardown_appcontext
def close_connection(exception):
    db = getattr(g, '_database', None)
    if db is not None:
        db.close()


@app.route('/view_thumbs')
def view_thumbs():
    # Define the directory where the images are located
    image_directory = 'static/images/uploads'
    # Get a list of all the image files in the directory
    image_files = [f for f in os.listdir(
        image_directory) if f.endswith('.jpg') or f.endswith('.png')]
    # Create a list of dictionaries containing the image file name and URL
    image_list = [{'name': f, 'url': f'/images/uploads/{f}'}
                  for f in image_files]
    # Render the template with the list of images
    return render_template('view_thumbs.html', image_list=image_list)


@app.route('/add_text', methods=['GET', 'POST'])
def add_text():
    if request.method == 'POST':
        text = request.form['text']
        now = datetime.datetime.now()
        timestamp = now.strftime("%Y-%m-%d %H:%M:%S")
        text = f'Text Entry: {timestamp} {text}'
        with open('chat.txt', 'a') as file:
            file.write(f'\n{text}')
        return render_template('add_text.html', message='Text added successfully')
    else:
        return render_template('add_text.html')


@app.route('/search_txt', methods=['GET', 'POST'])
def search_txt():
    if request.method == 'POST' and 'phrase' in request.form:
        phrase = request.form['phrase']
        with open('chat.txt', 'r') as file:
            lines = file.readlines()
        results = []
        for i, line in enumerate(lines):
            if phrase in line:
                start = max(0, i - 5)
                end = min(len(lines), i + 6)
                context = lines[start:end]
                for j, context_line in enumerate(context):
                    if phrase in context_line:
                        results.append(f'Line {start+j}: {context_line}')
                    else:
                        results.append(f'Line {start+j}: {context_line}')
        return render_template('results.html', results=results)
    return render_template('search_txt.html')


@app.route('/blend_pil', methods=['POST', 'GET'])
def blend_pil():
    if request.method == 'POST':
        # Get the uploaded images
        img1 = request.files['img1']
        img2 = request.files['img2']
        img3 = request.files['img3']

        # Open the images using PIL
        img1_pil = Image.open(img1)
        img2_pil = Image.open(img2)
        img3_pil = Image.open(img3)

        # Blend the images
        blended_pil = Image.blend(img1_pil, img2_pil, 1 / 3)
        blended_pil = Image.blend(blended_pil, img3_pil, 1 / 3)

        # Return the blended image as a response
        # Since we are not saving it to the server, we can use a BytesIO object to avoid creating a temporary file
        img_io = BytesIO()
        blended_pil.save(img_io, 'JPEG', quality=70)
        current_datetime = datetime.now()
        str_current_datetime = str(current_datetime)
        file_name = "static/images/uploads/blended_pil" + \
            str_current_datetime + "XXXX.jpg"
        blended_pil.save(file_name, format='JPEG')
        img_io.seek(0)

        # Generate the HTML for displaying the blended image in the template
        blended_image_data = base64.b64encode(
            img_io.getvalue()).decode('utf-8')
        blended_image_url = f"data:image/jpeg;base64,{blended_image_data}"
        # blended_image_url = blended_image_url.resize(( blended_image_url.size[0]//2, blended_image_url.size[1]//2), Image.ANTIALIAS)
        # Pass the URL of the blended image to the template
        return render_template('show_blend_pil.html', blended_image_url=blended_image_url)
    return render_template('blend_pil.html')


@app.route('/process_images', methods=['POST', 'GET'])
def process_images():
    if request.method == 'POST':
        # read the images from the request
        img1 = Image.open(request.files['image1'].stream).convert('RGB')
        img2 = Image.open(request.files['image2'].stream).convert('L')
        img3 = Image.open(request.files['image3'].stream).convert('RGB')

        # resize the images to have the same shape
        img1 = img1.resize((img2.width, img2.height))
        img3 = img3.resize((img2.width, img2.height))

        # convert the mask to binary
        threshold = 127
        mask = Image.eval(img2, lambda px: 255 if px > threshold else 0)

        # apply the mask
        img = Image.composite(img1, img3, mask)

        # save the image to a file
        output = BytesIO()
        current_datetime = datetime.now()
        str_current_datetime = str(current_datetime)
        file_name = "static/images/" + str_current_datetime + "XXXX.jpg"
        img.save(file_name, format='JPEG')
        img.save(output, format='JPEG')
        output.seek(0)

        # encode the image to bytes
        img_bytes = output.getvalue()

        # return the image as a response
        return Response(img_bytes, mimetype='image/jpeg')
    return render_template('process_images.html')


@app.route('/image_directories', methods=['GET', 'POST'])
def image_directories():
    image_directories = ['static/Prodia_640x640', 'static/LineArt',
                         'static/Quantized', 'static/squares', 'static/BrightColors']
    if request.method == 'POST':
        # Rest of the code

        directory = request.form['directory']
        # Check that the directory parameter is not empty
        if directory:
            app.logger.info(
                'Redirecting endpoint with directory: %s', directory)
            # Check that the directory is a valid directory path
            if os.path.isdir(directory):
                # Pass the directory value to the square_video endpoint
                app.logger.info(
                    'Redirecting to square_video endpoint with directory: %s', directory)
                return redirect(url_for('square_video', directory=directory))
            else:
                # Render an error template if the directory parameter is not a valid directory path
                app.logger.error('Invalid directory parameter: %s', directory)
                return render_template('error.html', message='Please enter a valid directory path.')
        else:
            # Render an error template if the directory parameter is empty
            app.logger.error('Directory parameter is empty')
            return render_template('error.html', message='Please enter a directory path.')
    else:
        # Pass the list of image directories to the template
        return render_template('image_directories.html', image_directories=image_directories)


@app.route('/select_playmp3', methods=['GET', 'POST'])
def select_playmp3():
    # Get the list of mp3 files in the static/audio_mp3/ directory
    mp3_files = [f for f in os.listdir(
        'static/audio_mp3/') if f.endswith('.mp3')]
    if request.method == 'POST':
        # Get the selected MP3 file from the dropdown list
        mp3_file = request.form['mp3_file']
        # Play the selected mp3 file
        pygame.mixer.init()
        pygame.mixer.music.load('static/audio_mp3/' + mp3_file)
        pygame.mixer.music.play()
        # Wait for the audio to finish playing
        while pygame.mixer.music.get_busy():
            pygame.time.Clock().tick(10)
        # Stop pygame and exit the program
        pygame.mixer.quit()
        pygame.quit()
    # Render the template with the list of mp3 files
    return render_template('select_playmp3.html', mp3_files=mp3_files)


@app.route("/make_animation")
def make_animation():
    # Get a list of all files in the final_images directory
    # image_files = os.listdir("static/final_images/")
    # DIR = "/home/jack/Desktop/HDD500/collections/gypsy_files/"
    # DIR = "/home/jack/Desktop/HDD500/collections/hippy_files/"
    #DIR = "/mnt/HDD500/collections/jungle/exotic_lithograph_prints-Playground_AI_files/512x768/"
    DIR = "static/images/clip_drop/"
    selected_files = random.sample(glob.glob(DIR + '*.jpg'), 30)
    print(selected_files)
    #image_files = os.listdir(DIR)
    # image_files = os.listdir("/mnt/HDD500/collections/640x640-alien/")
    # Select 20 random files from the list
    #selected_files = random.sample(image_files, 30)

    # Load each selected file, resize it to 400x600, and save it to a temporary directory
    resized_images = []
    for filename in selected_files:
        print(filename)
        with Image.open(filename) as img:

            img = img.resize((400, 600))
            temp_filename = "static/tmp/" + filename
            img.save(temp_filename)
            resized_images.append(temp_filename)

    # Create an animated GIF from the resized images

    gif_filename = "static/animated_gifs/animated.gif"
    with imageio.get_writer(gif_filename, mode='I', duration=1) as writer:
        for filename in resized_images:
            image = imageio.imread(filename)
            writer.append_data(image)
    import shutil

    timestr = time.strftime("%Y%m%d-%H%M%S")

    src = 'static/animated_gifs/animated.gif'
    dst = 'static/animated_gifs/animated' + timestr + '.gif'
    # 2nd option
    shutil.copy(src, dst)
    # Return a template that displays the GIF
    return render_template("make_animation.html", gif_filename=gif_filename)


@app.route('/title_page', methods=['GET', 'POST'])
def title_page():
    if request.method == 'POST':
        # Get the text input and image file from the form data
        text = request.form['text']
        image = request.files['image']

        # Save the image to a temporary location
        image_path = os.path.join(
            app.config['UPLOAD_FOLDER'], secure_filename(image.filename))
        image.save(image_path)

        # Open the image file
        image = Image.open(image_path)

        # Create a drawing context on the image
        draw = ImageDraw.Draw(image)

        # Define the font and font size for the text
        font = ImageFont.truetype('static/fonts/OpenSansBold.ttf', 50)
        # Split the text by newline characters
        lines = text.split("  ")

        # Calculate the size of each line and get the maximum width
        line_sizes = [draw.textsize(line, font) for line in lines]
        max_line_width = max([size[0] for size in line_sizes])

        # Calculate the total size of the text
        text_width = max_line_width
        text_height = sum([size[1] for size in line_sizes])

        # Calculate the position of the text in the center of the image
        x = (640 - text_width) / 2
        y = (640 - text_height) / 2

        # Calculate the size of the text
        text_width, text_height = draw.textsize(text, font)

        # Calculate the position of the text in the center of the image
        x = (640 - text_width) / 2
        y = (640 - text_height) / 2

        # Add the text to the image
        draw.text((x, y), text, font=font, fill=(0, 0, 0, 255))

        # Save the image to the static folder with a unique filename
        inc = text.replace(" ", "")
        filenamex = os.path.join(
            app.static_folder, 'title_pages', f'{inc}_{hash(text)}.png')
        image.save(filenamex)
        filename = 'static/title_pages/title_page.png'
        shutil.copy(filenamex, filename)
        logger.error('filename: %s', filename)

        # print(inc[:5])
        # Remove the temporary image file
        # os.remove(image_path)
        filenamev = 'title_pages/title_page.png'
        # Return the rendered template with the image filename
        return render_template('title_page.html', filename=filenamev)
    filenamev = 'title_pages/title_page.png'
    return render_template('title_page.html', filename=filenamev)


@app.route('/add_title', methods=['GET', 'POST'])
def add_title():
    # Create the final_videos directory if it does not exist
    final_videos_dir = os.path.join(app.static_folder, 'final_videos')
    if not os.path.exists(final_videos_dir):
        os.makedirs(final_videos_dir)

    if request.method == 'POST':
        app.logger.debug('Entering POST request handler for /add_title')
        # Get the paths of the selected video and title page
        video_path = os.path.join(
            app.static_folder, 'videos', request.form['video'])
        title_page_path = os.path.join(
            app.static_folder, 'title_pages', request.form['title_page'])
        app.logger.debug(f'video_path: {video_path}')
        app.logger.debug(f'title_page_path: {title_page_path}')

        # Load the video and title page as clips
        video_clip = VideoFileClip(video_path)
        title_page_clip = ImageClip(title_page_path).set_duration(2)

        # Add the title page to the video for the first 2 seconds
        final_clip = concatenate_videoclips(
            [title_page_clip, video_clip.subclip(2)])

        # Save the final video to the final_videos directory
        final_filename = f"{os.path.splitext(request.form['video'])[0]}_{os.path.splitext(request.form['title_page'])[0]}.mp4"
        final_path = os.path.join(final_videos_dir, final_filename)
        app.logger.debug(f'final_path: {final_path}')
        final_clip.write_videofile(final_path)

        # Return a response to the user indicating that the video with title page was created
        message = f"The video with title page was created and saved to {final_path}"
        return render_template('add_title.html', message=message)

    # If the request method is GET, render the add_title.html template
    app.logger.debug('Entering GET request handler for /add_title')
    videos = os.listdir(os.path.join(app.static_folder, 'square_vids'))
    title_pages = os.listdir(os.path.join(app.static_folder, 'title_pages'))
    app.logger.debug(f'videos: {videos}')
    app.logger.debug(f'title_pages: {title_pages}')
    return render_template('add_title.html', videos=videos, title_pages=title_pages)


def get_rowid():
    # Connect to the database
    db = sqlite3.connect('code.db')
    cursor = db.cursor()
    row_id = request.form['row_id']
    # Execute a query to retrieve the rowid
    cursor.execute("SELECT rowid FROM snippets WHERE rowid = ?", (rowid,))

    # Fetch the result
    result = cursor.fetchone()

    # Close the database connection
    db.close()

    # Check if a rowid was found
    if result:
        rowid = result[0]
    else:
        # Handle the case when no rowid is found
        rowid = None

    return rowid


@app.route('/indexA')
def indexA():
    image_dir = 'static/images'
    image_files = [f for f in os.listdir(image_dir) if f.endswith('.jpg')]
    random_image_file = random.choice(image_files)
    app.logger.info(f"Random image file selected: {random_image_file}")
    return render_template('indexA.html', random_image_file=random_image_file)


@app.route('/index_FLASK')
def index_FLASK():
    image_dir = 'static/images'
    image_files = [f for f in os.listdir(image_dir) if f.endswith('.jpg')]
    random_image_file = random.choice(image_files)
    app.logger.info(f"Random image file selected: {random_image_file}")

    return render_template('index_FLASK.html')


# Configuration
app.config['DATABASE'] = 'code.db'


def get_db():
    db = getattr(g, '_database', None)
    if db is None:
        db = g._database = sqlite3.connect("code.db")
    return db


@app.teardown_appcontext
def close_connection(exception):
    db = getattr(g, '_database', None)
    if db is not None:
        db.close()


@app.before_first_request
def create_table():
    db = get_db()
    cursor = db.cursor()

    cursor.execute('''
        CREATE TABLE IF NOT EXISTS products (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            name TEXT NOT NULL,
            description TEXT,
            price REAL
        )
    ''')

    db.commit()


@app.teardown_appcontext
def close_connection(exception):
    db = getattr(app, '_database', None)
    if db is not None:
        db.close()


@app.route('/indexD')
def indexD():
    return redirect('/products')


@app.route('/products', methods=['GET', 'POST'])
def products():
    if request.method == 'POST':
        name = request.form['name']
        description = request.form['description']
        price = request.form['price']

        db = get_db()
        cursor = db.cursor()
        cursor.execute("INSERT INTO products (name, description, price) VALUES (?, ?, ?)",
                       (name, description, price))
        db.commit()

    db = get_db()
    cursor = db.cursor()
    cursor.execute("SELECT * FROM products")
    products = cursor.fetchall()

    return render_template('products.html', products=products)


@app.route('/edit/<int:product_id>', methods=['GET', 'POST'])
def edit_product(product_id):
    if request.method == 'POST':
        name = request.form['name']
        description = request.form['description']
        price = request.form['price']

        db = get_db()
        cursor = db.cursor()
        cursor.execute("UPDATE products SET name=?, description=?, price=? WHERE id=?",
                       (name, description, price, product_id))
        db.commit()

        return redirect('/products')

    db = get_db()
    cursor = db.cursor()
    cursor.execute("SELECT * FROM products WHERE id=?", (product_id,))
    product = cursor.fetchone()

    return render_template('edit_product.html', product=product)


@app.route('/delete/<int:product_id>', methods=['POST'])
def delete_product(product_id):
    db = get_db()
    cursor = db.cursor()
    cursor.execute("DELETE FROM products WHERE id=?", (product_id,))
    db.commit()

    return redirect('/products')
# Function to create the database and table
    
@app.route('/access_database')
def access_database():
    db_path = os.path.join(os.path.dirname(__file__), 'code.db')
    conn = sqlite3.connect(db_path)
    cursor = conn.cursor()
    cursor.execute('SELECT * FROM snippets')
    code = cursor.fetchall()
    conn.close()
    return render_template('database.html', code=code)
# Function to create the database and table


def create_databaseD():
    conn = sqlite3.connect('code.db')
    cursor = conn.cursor()
    # cursor.execute("CREATE TABLE snippets (description TEXT, code TEXT, keywords TEXT)")
    cursor.execute('''
        CREATE TABLE IF NOT EXISTS snippets (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            description TEXT NOT NULL,
            code TEXT,
            keywords TEXT
        )
    ''')
    conn.commit()
    conn.close()
# Route to display all code


@app.route('/code', methods=['GET'])
def display_code():
    conn = sqlite3.connect('code.db')
    cursor = conn.cursor()
    cursor.execute('SELECT * FROM snippets')
    code = cursor.fetchall()
    conn.close()

    # Define the HTML code for the form
    form_code = """
    <h1>Add New code</h1>
    <form action="/code" method="post">
        <label for="description">Description:</label>
        <textarea type="description" name="description" rows="8" cols="90%"></textarea><br />
        <label for="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Code:</label>
        <textarea type="text" name="code" rows="8" cols="90%"></textarea><br>
        <label for="keywords">Keywords:</label>
        <input style="width:53%;height: 25px;" type="keywords" name="keywords"><br>
        <input type="submit" value="Add code">
    </form>
    """

    return render_template('code.html', code=code, form_code=form_code)
# Route to add a new code


@app.route('/code', methods=['POST'])
def add_code():
    description = request.form['description']
    code = request.form['code']
    keywords = request.form['keywords']

    conn = sqlite3.connect('code.db')
    cursor = conn.cursor()
    cursor.execute('INSERT INTO snippets (description, code, keywords) VALUES (?, ?, ?)',
                   (description, code, keywords))
    conn.commit()
    conn.close()
    return redirect(url_for('display_code'))
# Route to edit a code


@app.route('/edit_code/<int:code_id>', methods=['GET', 'POST'])
def edit_code(code_id):
    conn = sqlite3.connect('code.db')
    cursor = conn.cursor()

    if request.method == 'POST':
        description = request.form['description']
        code = request.form['code']
        keywords = request.form['keywords']

        cursor.execute('UPDATE snippets SET description=?, code=?, keywords=? WHERE id=?',
                       (description, code, keywords, code_id))
        conn.commit()
        conn.close()
        return redirect(url_for('display_code'))

    cursor.execute('SELECT * FROM snippets WHERE id = ?', (code_id,))
    code = cursor.fetchone()
    conn.close()
    return render_template('edit_code.html', code=code)
# Route to delete a code


@app.route('/delete_code/<int:code_id>', methods=['POST'])
def delete_code(code_id):
    conn = sqlite3.connect('code.db')
    cursor = conn.cursor()
    cursor.execute('DELETE FROM snippets WHERE id = ?', (code_id,))
    conn.commit()
    conn.close()
    return redirect(url_for('display_code'))


@app.route('/indexE')
def indexE():
    # Get a list of directories within static/images
    image_directories = os.listdir(os.path.join(app.static_folder, 'images'))

    # Create a dropdown menu with the list of directories
    dropdown_menu = ""
    for directory in image_directories:
        dropdown_menu += f'<option value="{directory}">{directory}</option>'

    return f"""
    <!DOCTYPE html>
    <html>
    <body>
        <h2>Upload a file</h2>
        <form action="/uploadN" method="post" enctype="multipart/form-data">
            <select name="directory">
                {dropdown_menu}
            </select>
            <input type="file" name="file">
            <input type="submit" value="Upload">
        </form>
    </body>
    </html>
    """


@app.route('/uploadN', methods=['POST'])
def upload_fileN():
    # Check if a file was submitted in the request
    if 'file' not in request.files:
        return redirect(url_for('indexD'))

    file = request.files['file']

    # Check if the file is not empty
    if file.filename == '':
        return redirect(url_for('indexE'))

    # Save the file to the desired directory
    save_path = os.path.join('static', 'temp_images', file.filename)
    file.save(save_path)

    return f'The file {file.filename} has been uploaded successfully!'


def FilenameByTime(directory):
    timestr = time.strftime("%Y%m%d-%H%M%S")
    filename = directory + "/" + timestr + "_.png"
    return filename


def change_extension(orig_file, new_extension):
    p = change_ext(orig_file)
    new_name = p.rename(p.with_suffix(new_extension))
    return new_name


def auto_canny(image, sigma=0.33):
    # compute the median of the single channel pixel intensities
    v = np.median(image)
    # apply automatic Canny edge detection using the computed median
    lower = int(max(0, (1.0 - sigma) * v))
    upper = int(min(255, (1.0 + sigma) * v))
    edged = cv2.Canny(image, lower, upper)
    # return the edged image
    return edged
# image = cv2.imread('mahotastest/orig-color.png')


def change_extension(orig_file, new_extension):
    p = change_ext(orig_file)
    new_name = p.rename(p.with_suffix(new_extension))
    return new_name


def outlineJ(filename1, outfile_jpg, sigma=0.33):
    """
    USE:
    filename1 = '/home/jack/Desktop/Imagedata/0-original-images/07082orig.jpg' 
    outfile_jpg = '/home/jack/Desktop/dockercommands/images/useresult.png'
    outlineJ(filename1,outfile_jpg)
    """
    image = cv2.imread(filename1)
    edged = auto_canny(image, sigma=0.33)
    inverted = cv2.bitwise_not(edged)
    cv2.imwrite("static/outlines/temp2.png", inverted)
    cv2.imwrite(FilenameByTime("static/outlines/"), inverted)
    # Open Front Image
    # frontimage = Image.open('mahotastest/inverted-bitwise-note3_6.png').convert("1")
    frontimage = Image.open('static/outlines/temp2.png').convert("1")
    frontImage = frontimage.convert("RGBA")
    datas = frontImage.getdata()
    newData = []
    for item in datas:
        if item[0] == 255 and item[1] == 255 and item[2] == 255:
            newData.append((255, 255, 255, 0))
        else:
            newData.append(item)

    frontImage.putdata(newData)
    # Open Background Image
    background = Image.open(filename1)
    # Calculate width to be at the center
    width = (frontimage.width - frontimage.width) // 2
    # Calculate height to be at the center
    height = (frontimage.height - frontimage.height) // 2
    # Paste the frontImage at (width, height)
    background.paste(frontImage, (width, height), frontImage)
    # Save this image
    background.save(outfile_jpg)
    savefile = FilenameByTime("static/outlines/")
    background.save(savefile)
    # background = background.convert("RGB")
    return background


def outlineP(filename1, outfile_png):
    """
    USE:
    filename1 = '/home/jack/Desktop/Imagedata/0-original-images/07082orig.jpg'
    outfile_jpg = '/home/jack/Desktop/dockercommands/images/useresult.png'
    outlineP(filename1,outfile_png)
    """
    image = cv2.imread(filename1)
    edged = auto_canny(image, sigma=0.33)
    inverted = cv2.bitwise_not(edged)
    cv2.imwrite("static/outlines/temp2.png", inverted)
    cv2.imwrite(FilenameByTime("static/outlines/"), inverted)
    # Open Front Image
    # frontimage = Image.open('mahotastest/inverted-bitwise-note3_6.png').convert("1")
    frontimage = Image.open('static/outlines/temp2.png').convert("1")
    frontImage = frontimage.convert("RGBA")
    datas = frontImage.getdata()
    newData = []
    for item in datas:
        if item[0] == 255 and item[1] == 255 and item[2] == 255:
            newData.append((255, 255, 255, 0))
        else:
            newData.append(item)

    frontImage.putdata(newData)
    # Open Background Image
    background = Image.open(filename1)
    # Calculate width to be at the center
    width = (frontimage.width - frontimage.width) // 2
    # Calculate height to be at the center
    height = (frontimage.height - frontimage.height) // 2
    # Paste the frontImage at (width, height)
    background.paste(frontImage, (width, height), frontImage)
    # Save this image
    background.save(outfile_png, format="png")
    savefile = FilenameByTime("static/outlines/")
    background.save(savefile, format="png")
    # background = background.convert("RGB")
    return background


@app.route('/outline_j', methods=['POST'])
def outline_j():
    if request.method == 'POST':
        # Get the uploaded image file from the form data
        file = request.files['file']

        # Save the uploaded file to a temporary location

        temp_path = 'static/outlines/temp_image.jpg'
        file.save(temp_path)

        # Process the image using outlineJ function
        output_path = 'static/outlines/outlined_image_j.jpg'
        outlineJ(temp_path, output_path)
        output_path2 = "static/outlines/temp2.png"
        # Return the path to the processed image to display it on a page
        return render_template('outlined_image.html', image_orig=temp_path, image_path=output_path, image_path2=output_path2)


@app.route('/outline_p', methods=['POST'])
def outline_p():
    if request.method == 'POST':
        # Get the uploaded image file from the form data
        file = request.files['file']

        # Save the uploaded file to a temporary location
        temp_path = 'static/temp_image.jpg'
        image_orig = temp_path
        file.save(temp_path)

        # Process the image using outlineP function
        output_path = 'static/outlines/outlined_image_p.png'
        outlineP(temp_path, output_path)
        output_path2 = "static/outlines/temp2.png"
        # Return the path to the processed image to display it on a page
        return render_template('outlined_image.html', image_orig=temp_path, image_path=output_path, image_path2=output_path2)


def zoom_effect(bg_file, fg_file):
    bg = Image.open(bg_file).convert('RGBA')
    SIZE = bg.size
    bg = bg.resize((SIZE), Image.BICUBIC)
    fg = Image.open(fg_file).convert('RGBA')
    fg = fg.resize((SIZE), Image.BICUBIC)
    fg_copy = fg.copy()
    fg_copy = fg_copy.resize((int(fg_copy.width), int(fg_copy.height)))
    result_images = []
    for i in range(200):
        size = (int(fg_copy.width * (i + 1) / 200),
                int(fg_copy.height * (i + 1) / 200))
        fg_copy_resized = fg_copy.resize(size)
        fg_copy_resized.putalpha(int((i + 1) * 255 / 200))
        fg_copy_resized = fg_copy_resized.convert('RGBA')
        fg_copy_resized.putalpha(int((i + 1) * 255 / 200))
        result = bg.copy()
        x = int((bg.width - fg_copy_resized.width) / 2)
        y = int((bg.height - fg_copy_resized.height) / 2)
        result.alpha_composite(fg_copy_resized, (x, y))
        # result.save("gifs/_"+str(i)+".png")
        result_images.append(result)

    return result_images  # Move the return statement outside the for loop


def create_mp4_from_images(images_list, output_file, fps):
    # Convert PIL Image objects to NumPy arrays
    image_arrays = [np.array(image) for image in images_list]

    # Create the video clip from the NumPy arrays
    clip = ImageSequenceClip(image_arrays, fps=fps)

    # Write the video to the output file
    clip.write_videofile(output_file, codec="libx264", fps=fps)


@app.route('/upload_form')
def upload_form():
    return render_template('upload_form.html')


@app.route('/process_imagez', methods=['POST', 'GET'])
def process_imagez():
    if 'bg_image' not in request.files or 'fg_image' not in request.files:
        return redirect(url_for('upload_form'))

    bg_image = request.files['bg_image']
    fg_image = request.files['fg_image']

    if bg_image.filename == '' or fg_image.filename == '':
        return redirect(url_for('upload_form'))

    bg_filename = 'background.png'
    fg_filename = 'foreground.png'

    bg_image.save(bg_filename)
    fg_image.save(fg_filename)

    bg_file_path = os.path.abspath(bg_filename)
    fg_file_path = os.path.abspath(fg_filename)

    images_list = zoom_effect(bg_file_path, fg_file_path)

    output_mp4_file = 'static/overlay_zooms/imagez_video.mp4'
    frames_per_second = 30
    create_mp4_from_images(images_list, output_mp4_file, frames_per_second)

    # Clean up temporary files
    # os.remove(bg_filename)
    # os.remove(fg_filename)
    file_bytime = time.strftime("%Y%m%d-%H%M%S") + ".mp4"

    shutil.copy('static/overlay_zooms/imagez_video.mp4',
                'static/overlay_zooms/' + file_bytime)
    video_url = url_for('static', filename=output_mp4_file)
    return render_template('upload.html', video_url=video_url)


app.config['DATABASE'] = 'code.db'

# Set up logger
# logger.basicConfig(level=logger.DEBUG)
# logger = logger.getLogger(__name__)


def get_db():
    db = getattr(g, '_database', None)
    if db is None:
        db = g._database = sqlite3.connect(app.config['DATABASE'])
    return db


@app.route('/indexdb')
def indexdb():
    logger.debug("Accessing indexdb route")
    return render_template('indexdb.html')


@app.route('/select_by_id_form', methods=['POST', 'GET'])
def select_by_id_form():
    logger.debug("Accessing select_by_id_form route")
    return render_template('select_by_id_form.html')


@app.route('/search_by_rowid', methods=['GET', 'POST'])
def search_by_rowid():
    logger.debug("Accessing search_by_rowid route")
    return render_template('search_by_rowid.html')

# ...
# ...
# ...
# Function to get a list of image files from the selected directory


def get_image_list(selected_directory):
    image_extensions = ['.jpg', '.jpeg', '.png', '.gif']
    image_list = [f for f in os.listdir(selected_directory) if os.path.isfile(
        os.path.join(selected_directory, f)) and f.lower().endswith(tuple(image_extensions))]
    print(image_list)
    return image_list


@app.route('/Index', methods=['GET', 'POST'])
def Index():
    if request.method == 'POST':
        selected_directory = request.form['selected_directory']
        image_list = get_image_list(selected_directory)
        images = [os.path.join(selected_directory, image)
                  for image in image_list]

        clips = [ImageClip(m).set_duration(0.5) for m in images]
        concat_clip = concatenate_videoclips(clips, method="compose")
        uid = str(uuid.uuid4())  # Generate a unique ID using uuid
        mp4_file = os.path.join("static", "videos", f"{uid}.mp4")
        concat_clip.write_videofile(mp4_file, fps=24)
        return render_template('Index.html', video=mp4_file)
    else:
        directory_list = glob.glob("static/images/*/", recursive=True)
        return render_template('Index.html', directory_list=directory_list)
# ...
# ...

# ...


@app.route('/edit_data_page', methods=['GET', 'POST'])
@app.route('/edit_data_page/<int:rowid>', methods=['GET', 'POST'])
def edit_data_page(rowid=None):
    db = get_db()
    cursor = db.cursor()

    if request.method == 'POST':
        description = request.form['description']
        code = request.form['code']
        keywords = request.form['keywords']

        if rowid is not None:
            # Update the data in the database for the given rowid
            cursor.execute("UPDATE snippets SET description = ?, code = ?, keywords = ? WHERE rowid = ?",
                           (description, code, keywords, rowid))
        else:
            # Insert the data into the database as a new row
            cursor.execute("INSERT INTO snippets (description, code, keywords) VALUES (?, ?, ?)",
                           (description, code, keywords))

        db.commit()

        # Close the database connection
        cursor.close()
        db.close()

        return redirect(url_for('indexdb'))

    if rowid is not None:
        # If a rowid is provided, retrieve the data from the database
        # based on the provided rowid and render the edit_data.html template
        cursor.execute("SELECT * FROM snippets WHERE rowid = ?", (rowid,))
        data = cursor.fetchone()

        if data is None:
            # If no data is found for the given rowid, return an error message
            return "Error: Data not found for the provided Row ID."

        # Convert the fetched data to a dictionary for easier access in the template
        data = {
            'rowid': data[0],
            'description': data[1],
            'code': data[2],
            'keywords': data[3]
        }

    else:
        # If no rowid is provided, create an empty data dictionary
        data = {}

    # Close the database connection
    cursor.close()
    db.close()

    return render_template('edit_data.html', data=data)
# ...


@app.route('/get_rowid_form', methods=['GET', 'POST'])
def get_rowid_form():
    if request.method == 'POST':
        rowid = request.form['rowid']
        return redirect(url_for('edit_data_page', rowid=rowid))
    return render_template('get_rowid_form.html')

# ...


@app.route('/search_database', methods=['POST', 'GET'])
def search_database():
    logger.debug("Accessing search_database route")
    if request.method == 'POST':
        search_term = request.form['search_term']
        search_area = request.form['search_area']
    else:
        # For GET requests, get the search_term and search_area from the query string
        search_term = request.args.get('search_term')
        search_area = request.args.get('search_area')

    if not search_term or not search_area:
        logger.debug(
            "Redirecting to indexdb due to missing search_term or search_area")
        # Redirect to the main index page if search_term or search_area is missing
        return redirect('/indexdb')

    db = get_db()
    cursor = db.cursor()

    if search_area == 'rowid':
        cursor.execute(
            "SELECT rowid, * FROM snippets WHERE rowid = ?", (search_term,))
    elif search_area == 'description':
        cursor.execute(
            "SELECT rowid, * FROM snippets WHERE description LIKE ?", ('%' + search_term + '%',))
    elif search_area == 'code':
        cursor.execute(
            "SELECT rowid, * FROM snippets WHERE code LIKE ?", ('%' + search_term + '%',))
    elif search_area == 'keywords':
        cursor.execute(
            "SELECT rowid, * FROM snippets WHERE keywords LIKE ?", ('%' + search_term + '%',))
    else:
        logger.debug("Redirecting to indexdb due to invalid search area")
        # Redirect to the main index page if an invalid search area is provided
        return redirect('/indexdb')

    results = cursor.fetchall()
    logger.debug("Rendering db_results.html template with search results")
    return render_template('db_results.html', results=results)


@app.route('/insert_data', methods=['POST', 'GET'])
def insert_data():
    logger.debug("Accessing insert_data route")
    if request.method == 'POST':
        description = request.form['description']
        code = request.form['code']
        keywords = request.form['keywords']

        # Assuming you have the database connection and cursor defined
        db = get_db()
        cursor = db.cursor()

        cursor.execute("INSERT INTO snippets (description, code, keywords) VALUES (?, ?, ?)",
                       (description, code, keywords))
        db.commit()

        # Close the database connection
        cursor.close()
        db.close()

        logger.debug("Redirecting to indexdb after inserting data")
        return redirect(url_for('indexdb'))

    # If the request method is not POST (e.g., GET), render the insert_data.html template
    logger.debug("Rendering insert_data.html template")
    return render_template('insert_data.html')


@app.route('/select_by_id', methods=['POST', 'GET'])
def handle_select_by_id():
    logger.debug("Accessing select_by_id route")
    if request.method == 'POST':
        row_id = request.form['search_term']
    else:
        row_id = request.args.get('search_term')

    db = get_db()
    cursor = db.cursor()

    cursor.execute("SELECT * FROM snippets WHERE rowid = ?", (row_id,))
    data = cursor.fetchone()

    cursor.close()
    db.close()

    if data is not None:
        id_value = data[0]
        description = data[1]
        code = data[2]
        keywords = data[3]

        logger.debug("Rendering display_data.html template with selected data")
        return render_template('display_data.html', id_value=id_value, description=description, code=code, keywords=keywords)
    else:
        logger.debug("Rendering display_data.html template with no data found")
        return render_template('display_data.html', id_value=row_id, description="", code="", keywords="")
def extract_code_blocks(file_path):
    with open(file_path) as file:
        content = file.read()
    return content.split("--Code Start:")[1:]

def format_datetime(datetime_str):
    return datetime_str.replace("_", " ")

@app.route('/enter_code', methods=['GET', 'POST'])
def enter_code():
    formatted_datetime = ""  # Initialize the variable
    if request.method == 'POST':
        code_block = request.form['code_block']
        formatted_datetime = datetime.datetime.now().strftime("%a_%d_%b_%Y %H:%M:%S")
        with open('codeshints.txt', 'a') as file:
            file.write(f"--Code Start:\n{formatted_datetime}\n{code_block}\n--Code End:\n\n")
        # Log code entry
        logger.debug('New code entered: %s', code_block)
    return render_template('enter_data.html', formatted_datetime=formatted_datetime)

@app.route('/search_code', methods=['GET', 'POST'])
def search_code():
    if request.method == 'POST':
        keyword = request.form['keyword']
        code_blocks = extract_code_blocks('codeshints.txt')
        filtered_blocks = [block for block in code_blocks if keyword in block]
        formatted_datetime_blocks = []
        
        for block in filtered_blocks:
            match = re.search(r"\w+_\d+_\w+_\d+_\d+:\d+:\d+", block)
            if match:
                formatted_datetime = format_datetime(match.group(0))
            else:
                formatted_datetime = "Unknown datetime format"
            
            formatted_datetime_blocks.append(
                {"datetime": formatted_datetime, "code_block": block}
            )
            
        # Log search activity
        logger.debug('Keyword searched: %s', keyword)
        return render_template('search_results.html', keyword=keyword, code_blocks=formatted_datetime_blocks)
    
    return render_template('search_data.html')



@app.route('/tube_index')
def tube_index():
    return render_template('tube_index.html')

@app.route('/data_page')
def data_page():
    return render_template('data_page.html')    


@app.route('/capture_overlay_verify')
def capture_overlay_verify():
    logger.info('Capture process started')
    logger.info('POST request received')

    datename = subprocess.run(
        ["date", "+%Y-%m-%d_%H-%M-%S"], capture_output=True, text=True).stdout.strip()
    capture_filename = f"{datename}.mp4"
    # Create the file path using os.path.join()
    base_folder = "static"
    subfolder = "assets"
    original_filename = os.path.join(
        app.root_path, base_folder, subfolder, f"overlaid_{capture_filename}")
    overlayed_filename = os.path.join(
        app.root_path, base_folder, subfolder, f"overlaid_{capture_filename}")
    verification_filename = os.path.join(
        app.root_path, base_folder, subfolder, f"verification_{capture_filename}")
    logger.info(f'File path original_filename created: {original_filename}')
    logger.info(f'File path overlayed_filename created: {overlayed_filename}')
    logger.info(f' verification_filename created: {verification_filename}')
    sleep(5)
    # Capture screen
    capture_command = [
        "ffmpeg", "-ss", "2", "-f", "x11grab", "-framerate", "24",
        "-video_size", "690x445", "-i", ":0.0+130,250", "-f", "alsa",
        "-i", "plughw:0,0", "-f", "pulse", "-i", "default",
        "-filter_complex", "[1:a]volume=0.1,apad[headset_audio];[2:a]volume=2.0,apad[system_audio];[headset_audio][system_audio]amix=inputs=2[a]",
        "-map", "0:v", "-map", "[a]", "-c:v", "libx264", "-r", "24",
                "-g", "48", "-c:a", "aac", "-b:a", "128k", "-t", "58", "-y", original_filename
    ]
    subprocess.run(capture_command)
    logger.info('Screen captured', capture_command)
    # Overlay videos
    overlay_command = [
        "ffmpeg", "-i", "background.mp4", "-i", original_filename, "-filter_complex",
        f"[1:v]scale=460:300[ovrl];[0:v][ovrl]overlay=W-w-25:H-h-400[out]",
        "-map", "[out]", "-map", "1:a", "-c:v", "libx264", "-crf", "18", "-c:a", "aac",
                "-strict", "-2", "-y", "-t", "58", overlayed_filename
    ]
    subprocess.run(overlay_command)
    logger.info('Videos overlaid', overlay_command)

    # Verify sound
    verification_command = [
        "ffmpeg", "-i", "background.mp4", "-i", overlayed_filename, "-filter_complex",
        f"[1:v]scale=460:300[ovrl];[0:v][ovrl]overlay=W-w-25:H-h-400[out]",
        "-map", "[out]", "-map", "1:a", "-c:v", "libx264", "-crf", "18", "-c:a", "aac",
                "-strict", "-2", "-y", "-t", "58", verification_filename
    ]
    subprocess.run(verification_command)
    logger.info('Sound verified', verification_command)

    logger.info('Capture process completed', verification_filename)
    return render_template('view_capture.html', video_filename=verification_filename)

# ...


@app.route('/create_text', methods=['GET', 'POST'])
def create_text():
    if request.method == 'POST':
        text = request.form['text']
        image = Image.new('RGB', (512, 512), color='beige')
        draw = ImageDraw.Draw(image)

        # Load the custom font and set the size
        font_path = '/home/jack/fonts/OpenSans-Bold.ttf'
        font_size = 50
        font = ImageFont.truetype(font_path, font_size)

        lines = text.split('\n')[:5]

        y = 10
        for line in lines:
            line = line.rstrip()  # Strip the newline character
            # Calculate the width and height of the text
            text_width, text_height = draw.textsize(line, font=font)

            # Draw the text
            draw.text(((512 - text_width) // 2, y),
                      line, fill='black', font=font)
            y += text_height + 5  # Move down for the next line

        output_path = os.path.join(
            app.root_path, 'static', 'assets', '512x512_text.jpg')
        image.save(output_path)
        # return send_from_directory('static/assets', '512x512_text.jpg', as_attachment=True)
        return render_template('view_textimage.html', image_filename='assets/512x512_text.jpg')
    return render_template('create_text.html')


@app.route('/view_log')
def view_log():
    with open('Logs/app.log', 'r') as log_file:
        log_content = log_file.read()
    return render_template('log_viewer.html', log_content=log_content)


@app.route('/self_check')
def self_check():
    try:
        if os.path.exists('Logs/flake.info'):
            timestamp = datetime.datetime.now().strftime("%Y%m%d%H%M%S")
            new_filename = f'Logs/{timestamp}.info'
            shutil.move('Logs/flake.info', new_filename)
            
        result = subprocess.run(['flake8', '-v', 'MemMakerWdb'],
                                stdout=subprocess.PIPE, stderr=subprocess.PIPE, text=True)
        
        with open('Logs/flake.info', 'w') as flake_file:
            flake_file.write(result.stdout)
        
        return redirect(url_for('view_flake8'))
    except Exception as e:
        return f"Self-check failed. Error: {e}"

@app.route('/view_flake8')
def view_flake8():
    with open('Logs/flake.info', 'r') as flake_file:
        flake_content = flake_file.read()
    return render_template('flake8_viewer.html', flake_content=flake_content)
def get_image_directories():
    dirs = os.listdir(os.path.join('static', 'images'))
    DIR = sorted(dirs)
    return DIR

def feather_image(input_path):
    try:
        logger.info("Feathering image: %s", input_path)
        
        # Load the image
        giger = cv2.imread(input_path)
        l_row, l_col, nb_channel = giger.shape
        rows, cols = np.mgrid[:l_row, :l_col]
        radius = np.sqrt((rows - l_row/2)**2 + (cols - l_col/2)**2)
        alpha_channel = np.zeros((l_row, l_col))
        
        # Calculate alpha channel values
        r_min, r_max = 1./3 * radius.max(), 0.6 * radius.max()
        alpha_channel[radius < r_min] = 1
        alpha_channel[radius > r_max] = 0
        gradient_zone = np.logical_and(radius >= r_min, radius <= r_max)
        alpha_channel[gradient_zone] = (r_max - radius[gradient_zone]) / (r_max - r_min)
        alpha_channel *= 255
        
        # Create feathered image
        feathered = np.empty((l_row, l_col, nb_channel + 1), dtype=np.uint8)
        feathered[..., :3] = giger[:]
        feathered[..., -1] = alpha_channel[:]
        
        # Save the feathered image
        timestamp = datetime.datetime.now().strftime('%Y%m%d%H%M%S')
        output_path = os.path.join('static', 'images', 'feathers', f'{timestamp}.png')
        plt.imsave(output_path, feathered, format="png")
        logger.info("Feathered image saved at: %s", output_path)

        return output_path
    except Exception as e:
        logger.error("An error occurred during feathering: %s", str(e))
        return None
@app.route('/feather_files', methods=['GET', 'POST'])
def feather_files():
    if request.method == 'POST':
        selected_directories = request.form.getlist('directories')  # Use 'directories' instead of 'directory'
        selected_directories = sorted(selected_directories)
        if selected_directories:
            images = os.listdir(os.path.join('static', 'images', selected_directories[0]))
            return render_template('feather_files.html', directories=get_image_directories(), selected_directory=selected_directories[0], images=images)
        
        selected_image = request.form.get('image')
        if selected_image:
            selected_directory = request.form.get('selected_directory')  # Add this line to retrieve selected_directory
            image_path = os.path.join('static', 'images', selected_directory, selected_image)
            feathered_image_path = feather_image(image_path)
            return render_template('feather_files.html', directories=get_image_directories(), selected_directory=selected_directory, images=os.listdir(os.path.join('static', 'images', selected_directory)), feathered_image_path=feathered_image_path)
    
    return render_template('feather_files.html', directories=get_image_directories())
@app.route('/word_cloud')
def word_cloud():
    code_blocks = extract_code_blocks('codeshints.txt')
    extracted_lines = []

    for block in code_blocks:
        lines = block.split("\n")[:3]  # Extract the first three lines
        extracted_lines.append("\n".join(lines))

    return render_template('word_cloud.html', extracted_lines=extracted_lines)
# ------------
static_dir = 'static'
text_dir = os.path.join(static_dir, 'text')
original_text_dir = os.path.join(text_dir, 'original')
os.makedirs(original_text_dir, exist_ok=True)

def load_original_text_file(filename):
    original_file_path = os.path.join(text_dir, filename)
    with open(original_file_path, 'r') as file:
        return file.read()

def save_original_text_file(filename, content):
    now = datetime.datetime.now().strftime("%Y%m%d_%H%M%S")
    new_filename = f"{filename}_{now}.txt"
    new_file_path = os.path.join(original_text_dir, new_filename)
    with open(new_file_path, 'w') as file:
        file.write(content)

def edit_and_save_text_file(filename, content):
    save_original_text_file(filename, content)
    edited_file_path = os.path.join(text_dir, filename)
    with open(edited_file_path, 'w') as file:
        file.write(content)

@app.route('/edit_text')
def edit_text():
    filenames = [f for f in os.listdir(text_dir) if f.endswith('.txt')]
    return render_template('edit_text.html', filenames=filenames)

@app.route('/edit_text_page')
def edit_text_page():
    selected_filename = request.args.get('filename')
    original_content = load_original_text_file(selected_filename)
    return render_template('edit_text_page.html', selected_filename=selected_filename, original_content=original_content)

@app.route('/edit_text_save', methods=['POST'])
def edit_text_save():
    edited_content = request.form['edited_content']
    selected_filename = request.form['filename']
    edit_and_save_text_file(selected_filename, edited_content)
    return redirect(url_for('edit_text'))

if __name__ == '__main__':
    create_databaseD()  # Create the database and table before starting the app
    app.run(debug=True, host='0.0.0.0', port=5200)
</pre>#!/mnt/HDD500/FLASK/flask_venv/bin/python
import subprocess
import logging
from flask import Flask, render_template, send_from_directory, request, redirect, url_for, flash
from flask import jsonify, send_file , Response
import os
from logging.handlers import RotatingFileHandler
import datetime
import glob
from werkzeug.utils import secure_filename
import time
from clean_images import clean_images
import matplotlib.pyplot as plt
import numpy as np
from io import BytesIO
from PIL import Image, ImageDraw, ImageFont
import pygame
import random
from gtts import gTTS
from moviepy.editor import ImageClip, AudioFileClip, CompositeVideoClip, concatenate_videoclips
from io import BytesIO
import base64
import imageio
import shutil
# Define the Flask application
app = Flask(__name__)  

def zip_lists(list1, list2):
    return zip(list1, list2)

app.jinja_env.filters['zip'] = zip_lists

def get_all_mp4_videos():
    mp4_videos = []
    for root, dirs, files in os.walk('static'):
        for file in files:
            if file.endswith('.mp4'):
                mp4_videos.append(os.path.join(root, file))
    return mp4_videos

def generate_thumbnails(mp4_videos, thumbnail_size=120):
    for video in mp4_videos:
        thumbnail_path = os.path.splitext(video)[0] + '.jpg'
        os.system(f'ffmpeg -i "{video}" -ss 00:00:01 -vf scale={thumbnail_size}:-1 -vframes 1 -y "{thumbnail_path}"')

@app.route('/thumbnails')
def thumbnails():
    mp4_videos = get_all_mp4_videos()
    generate_thumbnails(mp4_videos)
    thumbnail_paths = [os.path.splitext(video)[0] + '.jpg' for video in mp4_videos]
    video_paths = [os.path.splitext(video)[0] + '.mp4' for video in mp4_videos]
    return render_template('thumbnails.html', thumbnail_paths=thumbnail_paths, video_paths=video_paths)

@app.route('/')
def index():
    image_dir = 'static/images'
    image_files = [f for f in os.listdir(image_dir) if f.endswith('.jpg')]
    random_image_file = random.choice(image_files)
    return render_template('index.html', random_image_file=random_image_file)


app.secret_key = os.urandom(24)

app.config['UPLOAD_FOLDER'] = 'static/images/uploads'
app.config['RESULTS_FOLDER'] = 'static/videos/results'
app.config['THUMBNAILS_FOLDER'] = 'static/images/thumbnails'
#app.config['CHECKPOINT_PATH'] = '/home/jack/Desktop/FlaskApp/Wav2Lip/checkpoints/wav2lip_gan.pth'
#app.config['AUDIO_PATH'] = '/home/jack/Desktop/FlaskApp/Wav2Lip/content/sample_data/input_audio.wav'

# Create a formatter for the log messages
formatter = logging.Formatter('%(asctime)s %(levelname)s: %(message)s [in %(pathname)s:%(lineno)d]')

# Create a file handler to write log messages to a file
handler = RotatingFileHandler('Logs/app.log', maxBytes=10000, backupCount=1)
handler.setLevel(logging.DEBUG)
handler.setFormatter(formatter)
random_image_filez = 'blended.jpg'
app.logger.debug("Random image file: %s" % random_image_filez)

# Add the file handler to the Flask app logger
app.logger.addHandler(handler)
app.logger.debug('Entering index function')

# Define route to display upload form
@app.route('/upload_file', methods=['POST', 'GET'])
def upload_file():
    if request.method == 'POST':
        # Check if file was uploaded
        if 'file' not in request.files:
            app.logger.error('No file was uploaded')
            flash('Error: No file was uploaded')
            return redirect(request.url)

        app.logger.error('request.files[\'file\']')
        file = request.files['file']

        # Check if file was selected
        if file.filename == '':
            app.logger.error('No file was selected')
            flash('Error: No file was selected')
            return redirect(request.url)

        # Define allowed file extensions
        ALLOWED_EXTENSIONS = {'png', 'jpg', 'jpeg', 'gif'}

        # Define function to check file extension
        def allowed_file(filename):
            return '.' in filename and filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS

        # Check if file is allowed
        if not allowed_file(file.filename):
             #app.logger.error(f"File '{file.filename}' is not allowed")
             app.logger.error("File '" + file.filename + "' is not allowed")
             flash("Error: File '" + file.filename + "'close is not allowed")
             return redirect(request.url)

        # Save the file
        try:
            filename = secure_filename(file.filename)
            file.save(os.path.join(app.config['UPLOAD_FOLDER'], filename))
            app.logger.info(f'File {filename} saved')
        except Exception as e:
            app.logger.error(f'Error saving file: {e}')
            flash('Error: Unable to save file')
            return redirect(request.url)

        # Redirect to the result page
        return redirect(url_for('result', filename=filename))

    # Return the upload form for GET requests
    return render_template('upload_file.html')


@app.route('/result/<filename>')
def result(filename):
    return render_template('result.html', filename=filename)


@app.route('/process_images', methods=['POST', 'GET'])
def process_images():
    if request.method == 'POST':
        # read the images from the request
        img1 = Image.open(request.files['image1'].stream).convert('RGB')
        img2 = Image.open(request.files['image2'].stream).convert('L')
        img3 = Image.open(request.files['image3'].stream).convert('RGB')
    
        # resize the images to have the same shape
        img1 = img1.resize((img2.width, img2.height))
        img3 = img3.resize((img2.width, img2.height))
    
        # convert the mask to binary
        threshold = 127
        mask = Image.eval(img2, lambda px: 255 if px > threshold else 0)
    
        # apply the mask
        img = Image.composite(img1, img3, mask)
    
        # save the image to a file
        output = BytesIO()
        current_datetime = datetime.now()
        str_current_datetime = str(current_datetime)
        file_name = "static/images/"+str_current_datetime+"XXXX.jpg"
        img.save(file_name, format='JPEG')
        img.save(output, format='JPEG')
        output.seek(0)
    
        # encode the image to bytes
        img_bytes = output.getvalue()
    
        # return the image as a response
        return Response(img_bytes, mimetype='image/jpeg')
    return render_template('process_images.html')


@app.route('/blend_pil', methods=['POST', 'GET'])
def blend_pil():
    if request.method == 'POST':
        # Get the uploaded images
        img1 = request.files['img1']
        img2 = request.files['img2']
        img3 = request.files['img3']

        # Open the images using PIL
        img1_pil = Image.open(img1)
        img2_pil = Image.open(img2)
        img3_pil = Image.open(img3)

        # Blend the images
        blended_pil = Image.blend(img1_pil, img2_pil, 1/3)
        blended_pil = Image.blend(blended_pil, img3_pil, 1/3)

        # Return the blended image as a response
        # Since we are not saving it to the server, we can use a BytesIO object to avoid creating a temporary file
        img_io = BytesIO()
        blended_pil.save(img_io, 'JPEG', quality=70)
        current_datetime = datetime.now()
        str_current_datetime = str(current_datetime)
        file_name = "static/images/uploads/blended_pil"+str_current_datetime+"XXXX.jpg"
        blended_pil.save(file_name, format='JPEG')
        img_io.seek(0)
        
        # Generate the HTML for displaying the blended image in the template
        blended_image_data = base64.b64encode(img_io.getvalue()).decode('utf-8')
        blended_image_url = f"data:image/jpeg;base64,{blended_image_data}"
        #blended_image_url = blended_image_url.resize(( blended_image_url.size[0]//2, blended_image_url.size[1]//2), Image.ANTIALIAS) 
        # Pass the URL of the blended image to the template
        return render_template('show_blend_pil.html', blended_image_url=blended_image_url)      
    return render_template('blend_pil.html')
@app.route('/view_thumbs')
def view_thumbs():
    # Define the directory where the images are located
    image_directory = 'static/images/uploads'
    # Get a list of all the image files in the directory
    image_files = [f for f in os.listdir(image_directory) if f.endswith('.jpg') or f.endswith('.png')]
    # Create a list of dictionaries containing the image file name and URL
    image_list = [{'name': f, 'url': f'/images/uploads/{f}'} for f in image_files]
    # Render the template with the list of images
    return render_template('view_thumbs.html', image_list=image_list)



@app.route('/images/uploads/<filename>')
def image(filename):
    # Define the directory where the images are located
    image_directory = '/mnt/HDD500/FLASK/static/images/uploads'
    # Generate the full path to the requested image file
    image_path = os.path.join(image_directory, filename)
    # Determine the file type based on the file extension
    file_extension = os.path.splitext(filename)[1].lower()
    if file_extension == '.jpg':
        content_type = 'image/jpeg'
    elif file_extension == '.png':
        content_type = 'image/png'
    else:
        # If the file type is not recognized, return a 404 error
        print("abort(404)")
    # Return the image file as a response with the appropriate content type
    with open(image_path, 'rb') as f:
        image_data = f.read()
    return Response(image_data, content_type=content_type)

@app.route('/add_border')
def add_border():
    images = [f for f in os.listdir('static/images/uploads/') if os.path.isfile(os.path.join('static/images/uploads/', f))]
    thumbnails = []
    for image in images:
        with Image.open('static/images/uploads/'+image) as img:
            img.thumbnail((200, 200))
            thumbnail_name = 'thumbnail_'+image
            img.save('static/thumbnails/'+thumbnail_name)
            thumbnails.append(thumbnail_name)
    return render_template('add_border.html', images=images, thumbnails=thumbnails)


@app.route('/select_border')
def select_border():
    borders = os.listdir('static/transparent_borders/')
    return render_template('select_border.html', borders=borders)

@app.route('/apply_border', methods=['POST', 'GET'])
def apply_border():
    selected_image = request.form['image']
    selected_border = request.form['border']
    try:
        with Image.open('static/images/uploads/'+selected_image) as img:
            with Image.open('static/transparent_borders/'+selected_border) as border:
                img = img.resize(border.size)
                img.paste(border, (0, 0), border)
                final_image_name = 'final_'+selected_image
                img.save('static/final_images/'+final_image_name)
        return render_template('final_image.html', final_image=final_image_name, message='Border applied successfully.')
    except Exception as e:
        error_message = f'An error occurred: {str(e)}. Please try again.'
        return render_template('apply_border.html', image=selected_image, border=selected_border, error_message=error_message)

@app.route('/select_border_image', methods=['GET'])
def select_border_image():
    try:
        image = request.args.get('image')
        if not image:
            raise ValueError('No image selected.')
        return render_template('select_border.html', image=image, borders=os.listdir('static/transparent_borders/'))
    except Exception as e:
        error_message = f'An error occurred: {str(e)}. Please try again.'
        return render_template('add_border.html', error_message=error_message)

@app.route("/make_animation")
def make_animation():
    # Get a list of all files in the final_images directory
    #image_files = os.listdir("static/final_images/")
    #DIR = "/home/jack/Desktop/HDD500/collections/gypsy_files/"
    #DIR = "/home/jack/Desktop/HDD500/collections/hippy_files/"
    DIR = "/mnt/HDD500/collections/jungle/exotic_lithograph_prints-Playground_AI_files/512x768/"
    image_files = os.listdir(DIR)
    #image_files = os.listdir("/mnt/HDD500/collections/640x640-alien/")
    # Select 20 random files from the list
    selected_files = random.sample(image_files, 30)
    
    # Load each selected file, resize it to 400x600, and save it to a temporary directory
    resized_images = []
    for filename in selected_files:
        with Image.open(DIR + filename) as img:
            img = img.resize((400, 600))
            temp_filename = "static/tmp/" + filename
            img.save(temp_filename)
            resized_images.append(temp_filename)
    
    # Create an animated GIF from the resized images
 
    gif_filename = "static/animated_gifs/animated.gif"
    with imageio.get_writer(gif_filename, mode='I', duration=1) as writer:
        for filename in resized_images:
            image = imageio.imread(filename)
            writer.append_data(image)
    import shutil

    timestr = time.strftime("%Y%m%d-%H%M%S")

  
    src = 'static/animated_gifs/animated.gif'
    dst = 'static/animated_gifs/animated' + timestr + '.gif'
    # 2nd option
    shutil.copy(src, dst) 
    # Return a template that displays the GIF
    return render_template("make_animation.html", gif_filename=gif_filename)



@app.route('/search', methods=['GET', 'POST'])
def search():
    if request.method == 'POST' and 'phrase' in request.form:
        phrase = request.form['phrase']
        with open('chat.txt', 'r') as file:
            lines = file.readlines()
        results = []
        for i, line in enumerate(lines):
            if phrase in line:
                start = max(0, i-5)
                end = min(len(lines), i+6)
                context = lines[start:end]
                for j, context_line in enumerate(context):
                    if phrase in context_line:
                        results.append(f'Line {start+j}: {context_line}')
                    else:
                        results.append(f'Line {start+j}: {context_line}')
        return render_template('results.html', results=results)
    return render_template('search.html')

from datetime import datetime

@app.route('/add_text', methods=['GET', 'POST'])
def add_text():
    if request.method == 'POST':
        text = request.form['text']
        now = datetime.now()
        timestamp = now.strftime("%Y-%m-%d %H:%M:%S")
        text = f'Text Entry: {timestamp} {text}'
        with open('chat.txt', 'a') as file:
            file.write(f'\n{text}')
        return render_template('add_text.html', message='Text added successfully')
    else:
        return render_template('add_text.html')
# Mp3 page with file upload and textarea to enter text
# Route for the text to speech page
@app.route('/text_mp3', methods=['GET', 'POST'])
def text_mp3():
    if request.method == 'POST':
        # Get the text from the textarea
        text = request.form['text']
        # Remove whitespace from the text
        text = text.replace(" ", "")
        # Create a filename based on the first 20 characters of the text
        filename = "static/audio_mp3/" + text[:20] + ".mp3"
        filename = filename.strip()  # remove the newline character
        # Create a gTTS object and save the audio file
        tts = gTTS(text)
        filename = filename.strip() 
        tts.save(filename)
        # Play the mp3 file
        pygame.mixer.init()
        pygame.mixer.music.load(filename)
        pygame.mixer.music.play()
        # Wait for the audio to finish playing
        while pygame.mixer.music.get_busy():
            pygame.time.Clock().tick(10)
        # Stop pygame and exit the program
        pygame.mixer.quit()
        pygame.quit()
        # Return the text and filename to the template
        return render_template('text_mp3.html', text=text, filename=filename)
    else:
        # Render the home page template
        return render_template('text_mp3.html')

@app.route('/select_playmp3', methods=['GET', 'POST'])
def select_playmp3():
    # Get the list of mp3 files in the static/audio_mp3/ directory
    mp3_files = [f for f in os.listdir('static/audio_mp3/') if f.endswith('.mp3')]
    if request.method == 'POST':
        # Get the selected MP3 file from the dropdown list
        mp3_file = request.form['mp3_file']
        # Play the selected mp3 file
        pygame.mixer.init()
        pygame.mixer.music.load('static/audio_mp3/' + mp3_file)
        pygame.mixer.music.play()
        # Wait for the audio to finish playing
        while pygame.mixer.music.get_busy():
            pygame.time.Clock().tick(10)
        # Stop pygame and exit the program
        pygame.mixer.quit()
        pygame.quit()
    # Render the template with the list of mp3 files
    return render_template('select_playmp3.html', mp3_files=mp3_files)

@app.route('/generate_video')
def generate_video():
    # Get the pythonlist of image files in the static/final_images/ directory  
    #image_filenames = random.sample(glob.glob('static/final_images/*.jpg'),20)
    image_filenames = random.sample(glob.glob('static/video_resources/*.jpg'),30)
    print(image_filenames,end="-")
   
    image_clips = []
    for filename in image_filenames:
        # Open the image file and resize it to 512x768
        image = Image.open(filename)
        image = image.resize((512, 768), Image.ANTIALIAS)
        print(image)
        # Convert the PIL Image object to a NumPy array
        image_array = np.array(image)
        # Create an ImageClip object from the resized image and set its duration to 1 second
        image_clip = ImageClip(image_array).set_duration(1)
        
        # Append the image clip to the list
        image_clips.append(image_clip)
    
    # Concatenate all the image clips into a single video clip
    video_clip = concatenate_videoclips(image_clips, method='compose')
    timestr = time.strftime("%Y%m%d-%H%M%S")
    # Set the fps value for the video clip
    video_clip.fps = 24
    # Write the video clip to a file
    video_clip.write_videofile('static/videos/random_images'+timestr+'video.mp4', fps=24)
    
    # Return a message to the client
    return 'Video generated successfully!'
# List of directories to choose from

directories = ['static/images','static/final_videos', 'static/tmp', 'static/BrightColors','static/final_images', 'static/thumbnails']
import shutil
import logging

@app.route('/choose_dir', methods=['GET', 'POST'])
def choose_dir():
    if request.method == 'POST':
        # Get the selected directory from the form data
        #selected_directory = request.form.get('directory')
        selected_directory = request.args.get('directory')
        print('selected_directory:', selected_directory)
        print('request URL:', request.url)

        
        
        
        # Get the list of image files in the selected directory
        image_filenames = random.sample(glob.glob(selected_directory + '/*.jpg'),30)
   
        image_clips = []
        for filename in image_filenames:
            # Open the image file and resize it to 512x768
            image = Image.open(filename)
            image = image.resize((512, 768), Image.ANTIALIAS)
            print(image)
            # Convert the PIL Image object to a NumPy array
            image_array = np.array(image)
            # Create an ImageClip object from the resized image and set its duration to 1 second
            image_clip = ImageClip(image_array).set_duration(1)
        
            # Append the image clip to the list
            image_clips.append(image_clip)
    
        # Concatenate all the image clips into a single video clip
        video_clip = concatenate_videoclips(image_clips, method='compose')
        timestr = time.strftime("%Y%m%d-%H%M%S")
        # Set the fps value for the video clip
        video_clip.fps = 24
        # Write the video clip to a file
        video_file = 'static/videos/random_images'+timestr+'Xvideo.mp4'
        output_p =   'static/videos/random_images_video.mp4'
        video_clip.write_videofile(video_file, fps=24)
        try:
            shutil.copy(video_file, output_p)
        except FileNotFoundError as e:
            logging.error("Error occurred while copying file: %s", str(e))

        # Return a message to the client
        return 'Video generated successfully!'
    
    output_p = 'static/videos/random_images_video.mp4'
    # If the request method is GET, render the form template with the list of directories
    return render_template('choose_dir.html', directories=directories, output_path=output_p)


@app.route('/generate_video2')
def generate_video2():
    # Get the pythonlist of image files in the static/final_images/ directory  
    image_filenames = random.sample(glob.glob('static/final_images/*.jpg'),25)
    #image_filenames = random.sample(glob.glob('static/images/uploads/*.jpg'),30)
    print(image_filenames,end="-")
   
    image_clips = []
    for filename in image_filenames:
        # Open the image file and resize it to 512x768
        image = Image.open(filename)
        image = image.resize((512, 768), Image.ANTIALIAS)
        print(image)
        # Convert the PIL Image object to a NumPy array
        image_array = np.array(image)
        # Create an ImageClip object from the resized image and set its duration to 1 second
        image_clip = ImageClip(image_array).set_duration(1)
        
        # Append the image clip to the list
        image_clips.append(image_clip)
    
    # Concatenate all the image clips into a single video clip
    video_clip = concatenate_videoclips(image_clips, method='compose')
    timestr = time.strftime("%Y%m%d-%H%M%S")
    # Set the fps value for the video clip
    video_clip.fps = 24
    # Write the video clip to a file
    video_path = 'static/videos/random_images'+timestr+'video.mp4'
    video_clip.write_videofile(video_path, fps=24)
    video_clip.write_videofile('static/videos/TEMPvideo.mp4', fps=24)
    
    # Return a message to the client
    #return render_template('generate_video2.html', video_url='/static/videos/TEMPvideo.mp4')
    return render_template('generate_video2.html' ,video_url='/static/videos/TEMPvideo.mp4', video_path=video_path)


@app.route('/square_video/<path:directory>')
def square_video(directory=None):
    app.logger.info('Directory selected: %s', directory)
    if directory is None:
        app.logger.error('Error: no directory specified')
        return "Error: no directory specified"
    
    # Get the list of image files in the selected directory
    image_filenames = glob.glob(os.path.join(directory, '*.jpg'))
    if not image_filenames:
        app.logger.error('Error: no image files found in directory')
        return "Error: no image files found in directory"
    
    # Randomly select 50 image files from the list
    image_filenames = random.sample(image_filenames, 50)
    
    image_clips = []
    for filename in image_filenames:
        # Open the image file and resize it to 640x640
        image = Image.open(filename)
        image = image.resize((640, 640), Image.ANTIALIAS)
        # Convert the PIL Image object to a NumPy array
        image_array = np.array(image)
        
        # Create an ImageClip object from the resized image and set its duration to 1 second
        image_clip = ImageClip(image_array).set_duration(1)
        # Append the image clip to the list
        image_clips.append(image_clip)
    # Concatenate all the image clips into a single video clip
    video_clip = concatenate_videoclips(image_clips, method='compose')
    # Set the fps value for the video clip
    video_clip.fps = 24
    # Write the video clip to a file
    timestr = time.strftime("%Y%m%d-%H%M%S")
    video_filename = 'static/square_vids/'+timestr+'video.mp4'
    video_clip.write_videofile(video_filename, fps=24)
    video_clip.write_videofile("static/temp.mp4", fps=24)
    video_filename = "static/temp.mp4"
    return redirect(url_for('square_video', directory=directory))

@app.route('/image_directories', methods=['GET', 'POST'])
def image_directories():
    image_directories = ['static/Prodia_640x640', 'static/LineArt', 'static/Quantized', 'static/squares', 'static/BrightColors']
    if request.method == 'POST':
        # Rest of the code

        directory = request.form['directory']
        # Check that the directory parameter is not empty
        if directory:
            app.logger.info('Redirecting endpoint with directory: %s', directory)
            # Check that the directory is a valid directory path
            if os.path.isdir(directory):
                # Pass the directory value to the square_video endpoint
                app.logger.info('Redirecting to square_video endpoint with directory: %s', directory)
                return redirect(url_for('square_video', directory=directory))
            else:
                # Render an error template if the directory parameter is not a valid directory path
                app.logger.error('Invalid directory parameter: %s', directory)
                return render_template('error.html', message='Please enter a valid directory path.')
        else:
            # Render an error template if the directory parameter is empty
            app.logger.error('Directory parameter is empty')
            return render_template('error.html', message='Please enter a directory path.')
    else:
        # Pass the list of image directories to the template
        return render_template('image_directories.html', image_directories=image_directories)

@app.route('/title_page', methods=['GET', 'POST'])
def title_page():
    if request.method == 'POST':
        # Get the text input from the user
        text = request.form['text']
        app.logger.debug('XXXXXXXXXXXXX')
        app.logger.info('This is a test message')
        # Create a transparent image with size 800x600
        IMAGE = random.choice(glob.glob("static/LineArt/*.jpg"))
        image = Image.open(IMAGE)
        
        # Create a drawing context on the image
        draw = ImageDraw.Draw(image)
        
        # Define the font and font size for the text
        font = ImageFont.truetype('static/fonts/OpenSansBold.ttf', 50)
        # Split the text by newline characters
        lines = text.split("  ")


        # Calculate the size of each line and get the maximum width
        line_sizes = [draw.textsize(line, font) for line in lines]
        max_line_width = max([size[0] for size in line_sizes])

        # Calculate the total size of the text
        text_width = max_line_width
        text_height = sum([size[1] for size in line_sizes])

        # Calculate the position of the text in the center of the image
        x = (640 - text_width) / 2
        y = (640 - text_height) / 2

        # Calculate the size of the text
        text_width, text_height = draw.textsize(text, font)
        
        # Calculate the position of the text in the center of the image
        x = (640 - text_width) / 2
        y = (640 - text_height) / 2
        
        # Add the text to the image
        draw.text((x, y), text, font=font, fill=(0, 0, 0, 255))
        
        # Save the image to the static folder with a unique filename
        inc = text.replace(" ","")
        #print(inc[:5])
        filename = os.path.join(app.static_folder, 'title_pages', f'{inc}_{hash(text)}.png')
        image.save(filename)
        
        return render_template('title_page.html', filename=filename)
        
    return render_template('title_page.html')

from flask import Flask, render_template, request
import os
from moviepy.editor import VideoFileClip, ImageClip, CompositeVideoClip, clips_array, concatenate_videoclips, TextClip

@app.route('/add_title', methods=['GET', 'POST'])
def add_title():
    # Create the final_videos directory if it does not exist
    final_videos_dir = os.path.join(app.static_folder, 'final_videos')
    if not os.path.exists(final_videos_dir):
        os.makedirs(final_videos_dir)

    if request.method == 'POST':
        app.logger.debug('Entering POST request handler for /add_title')
        # Get the paths of the selected video and title page
        video_path = os.path.join(app.static_folder, 'square_vids', request.form['video'])
        title_page_path = os.path.join(app.static_folder, 'title_pages', request.form['title_page'])
        app.logger.debug(f'video_path: {video_path}')
        app.logger.debug(f'title_page_path: {title_page_path}')

        # Load the video and title page as clips
        video_clip = VideoFileClip(video_path)
        title_page_clip = ImageClip(title_page_path).set_duration(2)

        # Add the title page to the video for the first 2 seconds
        final_clip = concatenate_videoclips([title_page_clip, video_clip.subclip(2)])

        # Save the final video to the final_videos directory
        final_filename = f"{os.path.splitext(request.form['video'])[0]}_{os.path.splitext(request.form['title_page'])[0]}.mp4"
        final_path = os.path.join(final_videos_dir, final_filename)
        app.logger.debug(f'final_path: {final_path}')
        final_clip.write_videofile(final_path)

        # Return a response to the user indicating that the video with title page was created
        message = f"The video with title page was created and saved to {final_path}"
        return render_template('add_title.html', message=message)

    # If the request method is GET, render the add_title.html template
    app.logger.debug('Entering GET request handler for /add_title')
    videos = os.listdir(os.path.join(app.static_folder, 'square_vids'))
    title_pages = os.listdir(os.path.join(app.static_folder, 'title_pages'))
    app.logger.debug(f'videos: {videos}')
    app.logger.debug(f'title_pages: {title_pages}')
    return render_template('add_title.html', videos=videos, title_pages=title_pages)

@app.route('/build_stackedvids')
def build_stackedvids():
    # Get a random video and image from the static folder
    video_filename = random.choice(glob.glob('static/square_vids/*.mp4'))
    image_filename = random.choice(glob.glob('static/squares/*.jpg'))
    
    # Load the video and image files as clips
    video_clip = VideoFileClip(video_filename)
    image_clip = ImageClip(image_filename)
    
    # Set the duration of the image clip to match the duration of the video clip
    image_clip = image_clip.set_duration(video_clip.duration)
    
    # Resize the clips to 640x640 and 640x640 respectively
    video_clip = video_clip.resize((640, 640))
    image_clip = image_clip.resize((640, 640))
    
    # Create a black clip to fill the remaining space below the image
    black_clip = ColorClip(size=(640, 640), color=(0, 0, 0)).set_duration(video_clip.duration)
    
    # Combine the clips vertically using CompositeVideoClip
    final_clip = CompositeVideoClip([
        video_clip.set_position(('center', 'top')),
        image_clip.set_position(('center', 640)),
        black_clip.set_position(('center', 640 + 640))
    ], size=(640, 1280))
    
    # Export the final clip as a video file
    timestr = time.strftime("%Y%m%d-%H%M%S")
    video_filename = 'static/stacked_vids/stacked_vids'+timestr+'video.mp4'
    final_clip_path = 'static/stacked_vids/stacked_video.mp4'
    final_clip.write_videofile(final_clip_path)
    final_clip.write_videofile(video_filename)
    
    return render_template('/build_stackedvids.html', stackedvid_url=final_clip_path)

from moviepy.editor import *
@app.route('/build_stackedvid')
def build_stackedvid():
    # Get a random video and image from the static folder
    video_filename = random.choice(glob.glob('static/square_vids/*.mp4'))
    videofilename = random.choice(glob.glob('static/square_vids/*.mp4'))
    
    
    # Load the video and image files as clips
    video_clip = VideoFileClip(video_filename)
    videoclip = VideoFileClip(videofilename)
    
    # Set the duration of the image clip to match the duration of the video clip
    videoclip = videoclip.set_duration(video_clip.duration)
    
    # Resize the clips to 640x640 and 640x640 respectively
    video_clip = video_clip.resize((640, 640))
    videoclip = videoclip.resize((640, 640))
    
    # Create a black clip to fill the remaining space below the image
    black_clip = ColorClip(size=(640, 640), color=(0, 0, 0)).set_duration(video_clip.duration)
    
    # Combine the clips vertically using CompositeVideoClip
    final_clip = CompositeVideoClip([
        video_clip.set_position(('center', 'top')),
        videoclip.set_position(('center', 640)),
        black_clip.set_position(('center', 640 + 640))
    ], size=(640, 1280))
    
    # Export the final clip as a video file
    timestr = time.strftime("%Y%m%d-%H%M%S")
    video_filename = 'static/stacked_vids/stacked_vids'+timestr+'video.mp4'
    final_clip_path = 'static/stacked_vids/stacked_videos.mp4'
    final_clip.write_videofile(final_clip_path)
    final_clip.write_videofile(video_filename)
    
    return render_template('/build_stackedvid.html', stackedvid_url=final_clip_path)

@app.route('/clean_images', methods=['POST'])
def clean_images_route():
    clean_images()
    app.logger.error('line 210 clean_images_route')
    return redirect(url_for('index'))

@app.route('/get_gallery')
def get_gallery():
    image_dir = '/home/jack/Desktop/FLASK/static/images/uploads'
    image_names = os.listdir(image_dir)
    return render_template('get_gallery.html', image_names=image_names)

@app.route('/uploads/<filename>')
def send_image(filename):
    return send_from_directory('static/images/uploads', filename)

@app.route('/uploads/thumbnails/<filename>')
def send_image_thumb(filename):
    return send_from_directory('static/images/uploads/thumbnails', filename)
@app.route('/flask_info')
def flask_info():
    return render_template('flask_info.html')
@app.route('/add_effects')
def add_effects():
    return '''
        <form method="post" action="/video" enctype="multipart/form-data">
            <label for="input_video">Select input video file:</label><br>
            <input type="file" id="input_video" name="input_video"><br><br>
            <input type="submit" value="Submit">
        </form>
    '''

@app.route('/video', methods=['GET', 'POST'])
def process_video():
    DIR = "static/"
    input_video = request.files['input_video']
    
    # Save the uploaded video to a file
    input_video.save(f"{DIR}input_video.mp4")
    
    # Run FFmpeg commands
    command1 = f"ffmpeg -nostdin -i {DIR}input_video.mp4 -filter:v \"minterpolate='mi_mode=mci:mc_mode=aobmc:vsbmc=1:fps=10'\" -c:v libx264 -r 20 -pix_fmt yuv420p -c:a copy -y {DIR}output.mp4"    
    
    subprocess.run(command1, shell=True, stderr=subprocess.PIPE, universal_newlines=True)
    
    command2 = f"ffmpeg -nostdin -i {DIR}output.mp4 -vf mpdecimate,setpts=N/FRAME_RATE/TB -c:v libx264 -r 30 -pix_fmt yuv420p -c:a copy -y {DIR}mpdecimate.mp4"
    
    subprocess.run(command2, shell=True, stderr=subprocess.PIPE, universal_newlines=True)
    
    #DIR = "/home/jack/Desktop/ffmpeg_flask/"
    command3 = f"ffmpeg -i static/mpdecimate.mp4 -filter_complex \"[0:v]trim=duration=14,loop=500:1:0[v];[1:a]afade=t=in:st=0:d=1,afade=t=out:st=0.9:d=2[a1];[v][0:a][a1]concat=n=1:v=1:a=1\" -c:v libx264 -r 30 -pix_fmt yuv420p -c:a aac -b:a 192k -shortest -y static/output.mp4"
    subprocess.run(command3, shell=True, stderr=subprocess.PIPE, universal_newlines=True)
    
    now = datetime.now().strftime("%Y-%m-%d_%H-%M-%S")
    shutil.copy(f"{DIR}output.mp4", f"{DIR}{now}_output.mp4")
    logging.info(f'my_video: f"{DIR}mpdecimate.mp4"') 
    video_file="static/outputALL.mp4"     
    command4 = f'ffmpeg -i "{DIR}mpdecimate.mp4" -i "{DIR}mpdecimate.mp4" -i "{DIR}mpdecimate.mp4" -i "{DIR}mpdecimate.mp4" -i "{DIR}mpdecimate.mp4" -filter_complex "[0:v]trim=duration=15[v0];[1:v]trim=duration=15[v1];[2:v]trim=duration=15[v2];[3:v]trim=duration=15[v3];[4:v]trim=duration=15[v4];[v0][v1][v2][v3][v4]concat=n=5:v=1:a=0" -c:v libx264 -pix_fmt yuv420p -shortest -y {video_file}'
    subprocess.run(command4, shell=True, stderr=subprocess.PIPE, universal_newlines=True)
    now = datetime.now().strftime("%Y-%m-%d_%H-%M-%S")
    diR = f"{DIR}/square_videos/"
    logging.info(f'diR: f"{diR}mpdecimate.mp4"')
    shutil.copy(f"{video_file}", f"{diR}{now}_outputALL.mp4")
    logging.info(f'diR: {diR}mpdecimate.mp4')
    return render_template('final.html', video_file=f"static/square_videos/{now}_outputALL.mp4")
'''
@app.route('/generate_video2')
def generate_video2():
    # Get a list of image filenames from the static/final_images/ directory
    image_filenames = random.sample(glob.glob('static/final_images/*.jpg'), 25)

    # Create a list of image clips from the image filenames
    image_clips = []
    for filename in image_filenames:
        # Open the image file and resize it to 512x768
        image = Image.open(filename)
        image = image.resize((512, 768), Image.ANTIALIAS)

        # Convert the PIL Image object to a NumPy array
        image_array = np.array(image)

        # Create an ImageClip object from the resized image and set its duration to 1 second
        image_clip = ImageClip(image_array).set_duration(1)

        # Append the image clip to the list
        image_clips.append(image_clip)

    # Concatenate all the image clips into a single video clip
    video_clip = concatenate_videoclips(image_clips, method='compose')

    # Set the fps value for the video clip
    video_clip.fps = 24

    # Write the video clip to a file
    video_filename = 'static/videos/TEMPvideo.mp4'
    video_clip.write_videofile(video_filename, fps=24)

    # Return the rendered HTML template that displays the video and its path
    return render_template('generate_video2.html', video_url='/' + video_filename, video_path=video_filename)
'''
def get_all_mp4_videos():
    mp4_videos = []
    for root, dirs, files in os.walk('static'):
        for file in files:
            if file.endswith('.mp4'):
                mp4_videos.append(os.path.join(root, file))
    return mp4_videos

@app.route('/play/<path:video_path>')
def play(video_path):
    return send_file(video_path)




@app.route('/select_order', methods=['GET', 'POST'])
def select_order():
    output_path = 'static/videos/concatenated_video.mp4'  # Set a default value for output_path
    if request.method == 'POST':
        # Get the order of the videos from the form data
        order = request.form.getlist('order')
        # Join the videos in the specified order
        join_videos(order, output_path)
        # Set the timestamped output path
        timestamp = datetime.datetime.now().strftime('%Y%m%d_%H%M%S')
        new_output_path = f'static/videos/concatenated_{timestamp}XX.mp4'
        shutil.copy(output_path, new_output_path)
        # Redirect to the download page
        return redirect(url_for('download'))
    else:
        # Get the paths to the video files in the directory
        video_dir = 'static/videos'
        video_files = [os.path.join(video_dir, filename) for filename in os.listdir(video_dir) if filename.endswith('.mp4')]
        # Render the template with the list of video files and the output path
        return render_template('select_order.html', video_files=video_files, output_path=output_path)
         
def join_videos(video_paths, output_path):
    # Generate a list of input arguments for FFmpeg
    input_args = []
    for path in video_paths:
        input_args.extend(['-i', path])
    # Join the videos using FFmpeg
    subprocess.run(['ffmpeg', *input_args, '-filter_complex', 'concat=n={}:v=1:a=0'.format(len(video_paths)), '-c:v', 'libx264', '-crf', '23', '-preset', 'veryfast', '-y', output_path])
    #output_path = 'static/videos/concatenated_video.mp4'
    timestamp = datetime.datetime.now().strftime('%Y%m%d_%H%M%S')
    new_output_path = f'static/videos/concatenated_{timestamp}XX.mp4'
    shutil.copy(output_path, new_output_path)
    
if __name__ == '__main__':
    app.run(debug=True)



{% extends "base.html" %}

{% block content %}
  <h1>Thumbnails</h1>

  <div class="thumbnails-container">
    {% for thumbnail_path, video_path in thumbnail_paths|zip(video_paths) %}
      <div class="thumbnail">
        <a href="{{ url_for('play', video_path=video_path) }}">
          <img src="{{ url_for('static', filename=thumbnail_path[7:]) }}" class="img-thumbnail">
        </a>
      </div>
    {% endfor %}
  </div>

  <style>
    .thumbnails-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
    }
    .thumbnail {
      width: calc(11.11% - 10px);
      margin-bottom: 20px;
    }
    .thumbnail img {
      width: 100%;
    }
  </style>
{% endblock %}
<!-- index.html-->
<!DOCTYPE html>
<html>

<head>
    <title>My Flask App</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }
        video {
            margin: 10px, auto;
            width: 400px;
            height: auto;
        }

          .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;

        }

        .header {
            width: 100%;
            padding: 20px;
            text-align: center;
        }

        .columns {
            display: flex;
            width: 80%;
            margin-top: 20px;
        }

        .column {
            padding: 20px;
            box-sizing: border-box;
        }

        .column.left {
            width: 30%;
            border:    1px solid #000;
        }

        .column.right {
        margin: 0 auto; /* Center horizontally */
        width: 60%;
        border: 1px solid #000;
        text-align: center; /* Center video vertically */
    }

    .column.right video {
        max-width: 100%;
        height: auto;
    }
    </style><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body>
    <div class="container">
        <h1>Images in {{ path }}</h1>
        <div class="row">
            <!-- loop over the image names and display them as thumbnails -->
            {% for image in images %}
            <div class="col-md-3">
                <img src="{{ url_for('static', filename='images/' + path + '/' + image) }}" class="img-thumbnail">
            </div>
            {% endfor %}
        </div>
    </div>

    <div class="wrapper">
        <div class="header">
            <h1>Utilities</h1>
        </div>
        <div class="columns">
            <div class="column left">
                <h2>Left Column</h2>
                <h3>Create Text</h3><br />
                <a href="{{ url_for('app_utilities') }}">Application Utilities</a><br /><br />
                <a href="{{ url_for('image_processing') }}">Image Processing Links</a><br /><br />
                <a href="{{ url_for('format_file') }}">Format Text Files</a><br /><br />
                <a href="{{ url_for('view_text') }}">View Text Files</a><br /><br />
                <a href="{{ url_for('edit_file') }}">Edit File</a><br /><br />
                <a href="{{ url_for('edit_formatted') }}">Edit Formatted Text</a><br /><br />

                <a href="{{ url_for('edit_description') }}">Edit Description</a><br /><br />
            </div>
            <div class="column right">
                <h2>Right Column</h2>
                <video controls>
                    <source src="{{ video }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
        </div>
    </div>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
    <title>Create A Title Page</title>
</head>
<style>.atext{
    text-align: center;
    background-color: aquamarine;}
    #wrapper{width:50%;
    margin: auto;
   
  width: 50%;
  border: 3px solid green;
  padding: 10px;
        text-align: center;
    background-color: antiquewhite;}</style>
<body class="atext">
    <div id="wrapper">
    <h1>Create Title Page</h1>
    <h2>Enter Twenty characters max, including spaces:</h2>
    <p>A random image will be chosen and this text placed on it to use as a title page. <br />
       The filename will contain the text on the image.</p>
     <form method="POST" enctype="multipart/form-data">
        <label for="text">Text:</label>
        <input type="text" id="text" name="text" required>
        <br>
        <input type="submit" value="Create">
    </form>
    {% if filename %}
    <img src="{{ url_for('static', filename=filename) }}" alt="Title Page">
    {% endif %}
    </div>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
    <title>Title Page</title>
</head>
<body>
    <h1>Create Title Page</h1>
    <a href="{{ url_for('index') }}">Home</a><br />
    <form method="POST" enctype="multipart/form-data"><br />        
        <label for="text">Text:</label>
        <input type="text" name="text" id="text" required>
        <br>
        <label for="image">Image:</label>
        <input type="file" name="image" id="image" accept="image/*" required>
        <br>
        <input type="submit" value="Create Title Page">
    </form>
{% if filename %}
    <h2>Generated Title Page:</h2>
    <img src="{{ url_for('static', filename=filename) }}" alt="Title Page">
{% endif %}

</body>
</html>
<!DOCTYPE html>
<html>
<head>
    <title>Capture Tube</title>
</head>
<body>
    <h1>Capture Video Tube</h1>
    <a href="/capture_overlay_verify">Start Capture Regular</a><br />
    <a href="/capture_overlay_short">Start Capture Short</a>
    <h1>Welcome to Your Flask App</h1>
    <p>Create a text image</p>
    <a href="{{ url_for('create_text') }}">Create Text Image</a>
</body>
</html>
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mouse Particals</title>
    <link rel="stylesheet" href="../static/css/two_css_canvas.css">
</head>

<body><a style="font-size: small;color:lightgray;" href="{{ url_for('index') }}">Return to HOME</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a  style="font-size: small;color:lightgray;" href="{{ url_for('edit_template_page', filename='two_canvas.html') }}">Edit This Page</a>|&nbsp;&nbsp;<a  style="font-size: small;color:lightgray;" href="{{ url_for('edit_canvas_script', filename='scripts_canvas.js') }}">Edit the JavaScript</a>
    <canvas></canvas>
    <script src="../static/canvas/scripts_canvas.js"></script>
</body>

</html>[
    [
        {
            "role": "system",
            "content": "Here are some updated web searches. Use this to improve user response:[1] \"This will open a window containing the HTML source code of the page. Inspect an HTML Element: Right-click on an element (or a blank area), and choose \"Inspect\" or \"Inspect Element\" to see what elements are made up of (you will see both the HTML and the CSS). You can also edit the HTML or CSS on-the-fly in the Elements or Styles panel that opens.\" URL:https://www.w3schools.com/html/html_basic.asp.[2] \"HTML ( H yper T ext M arkup L anguage) is the code that is used to structure a web page and its content. For example, content could be structured within a set of paragraphs, a list of bulleted points, or using images and data tables. As the title suggests, this article will give you a basic understanding of HTML and its functions. So what is HTML?\" URL:https://developer.mozilla.org/en-US/docs/Learn/Getting_started_with_the_web/HTML_basics.[3] \"HTML (HyperText Markup Language) is a markup language that tells web browsers how to structure the web pages you visit. It can be as complicated or as simple as the web developer wants it to be. HTML consists of a series of elements, which you use to enclose, wrap, or mark up different parts of content to make it appear or act in a certain way.\" URL:https://developer.mozilla.org/en-US/docs/Learn/HTML/Introduction_to_HTML/Getting_started."
        }
    ],
    [
        {
            "role": "system",
            "content": "Here are some updated web searches. Use this to improve user response:[1] \"Here is what is printed: The first line is what is desired and shows up by pasting the html markup into the html file. The second output is what I am getting through accessing the htmlm variable. Does anybody know how to do this? python. html. flask. Share. Improve this question. Follow. asked Jun 20, 2019 at 20:19. Malonga. 35 5. 2.\" URL:https://stackoverflow.com/questions/56693354/how-to-make-html-markup-show-up.[2] \"Docs \u00bb flask \u00bb flask.Markup. View page source. flask.Markup. class flask.Markup [source] Marks a string as being safe for inclusion in HTML/XML output without needing to be escaped. This implements the __html__ interface a couple of frameworks and web applications use.\" URL:https://tedboy.github.io/flask/generated/generated/flask.Markup.html.[3] \"Flask is a lightweight Python framework for web applications that provides the basics for URL routing and page rendering. Flask is called a \"micro\" framework because it doesn't directly provide features like form validation, database abstraction, authentication, and so on.\" URL:https://code.visualstudio.com/docs/python/tutorial-flask."
        }
    ],
    [
        {
            "role": "system",
            "content": "Here are some updated web searches. Use this to improve user response:[1] \"A recent report from London's Express said that each member of the quintet is making roughly $2.5 million per episode this season (which contains five episodes), and they will earn the same amount in next year's eighth and final season.\" URL:https://money.com/heres-how-much-money-the-game-of-thrones-actors-really-make/.[2] \"Stars Sophie Turner (Sansa Stark), Maisie Williams (Arya Stark), and Isaac Hempstead Wright (Bran Stark) were making $175,000 an episode in 2017, according to Variety. Turner acknowledged the pay...\" URL:https://www.businessinsider.com/game-of-thrones-actor-salaries-compared-to-highest-paid-tv-stars-2019-4?op=1.[3] \"When the series began, the Game of Thrones budget to make season 1 was said to be around $50-60 million, which breaks down to $5-6 million per episode. Much of the debut season was shot across Northern Ireland and Malta, but production's reach expanded as Game of Thrones continued.\" URL:https://screenrant.com/game-thrones-budget-show-cost-explained/."
        }
    ],
    [
        {
            "role": "system",
            "content": "Here are some updated web searches. Use this to improve user response:[1] \"Game of Thrones: Winter is Coming is a 2019 massively multiplayer online real-time strategy game (MMORTS) developed and published Yoozoo Games. It is based on the television series Game of Thrones.The game was announced in August 2018, during Gamescom and was released by Yoozoo in March 2019, originally as a browser game. The Steam version was released in November 2019, and the mobile port was ...\" URL:https://en.wikipedia.org/wiki/Game_of_Thrones:_Winter_is_Coming.[2] \"Like most browser games, Game of Thrones: Winter is Coming also has many in-game purchases and microtransactions that can give players a significant edge over the F2P players. Tips and Tricks to Playing Game of Thrones: Winter is Coming. There are lots of ways to play this game. With such a large player base, different gamers have developed ...\" URL:https://best-gamesonline.com/articles/an-expert-guide-to-game-of-thrones-winter-is-coming/.[3] \"Game of Thrones Winter is Coming has been designed to give players a balanced combination of strategy and roleplaying for a unique gameplay experience. Build your base, expand your territory, recruit characters from the show, train your army, and make history. 1. Dive into the World of Westeros. - Westeros Like You've Never Seen It Before: The ...\" URL:https://store.steampowered.com/app/1105420/Game_of_Thrones_Winter_is_Coming."
        }
    ],
    [
        {
            "role": "system",
            "content": "Here are some updated web searches. Use this to improve user response:[1] \"Game of Thrones: Winter is Coming is a 2019 massively multiplayer online real-time strategy game (MMORTS) developed and published Yoozoo Games. It is based on the television series Game of Thrones.The game was announced in August 2018, during Gamescom and was released by Yoozoo in March 2019, originally as a browser game. The Steam version was released in November 2019, and the mobile port was ...\" URL:https://en.wikipedia.org/wiki/Game_of_Thrones:_Winter_is_Coming.[2] \"Like most browser games, Game of Thrones: Winter is Coming also has many in-game purchases and microtransactions that can give players a significant edge over the F2P players. Tips and Tricks to Playing Game of Thrones: Winter is Coming. There are lots of ways to play this game. With such a large player base, different gamers have developed ...\" URL:https://best-gamesonline.com/articles/an-expert-guide-to-game-of-thrones-winter-is-coming/.[3] \"Game of Thrones: Winter Is Coming is a new officially licensed online strategy browser game/MMO that fans can now play for free. What is it, and is it any go...\" URL:https://www.youtube.com/watch?v=5tqW6PxO_rA."
        }
    ],
    [
        {
            "role": "system",
            "content": "Here are some updated web searches. Use this to improve user response:[1] \"Create a repository with the same name as your GitHub username, initializing the repository with a README.md file. For more information, see \" Managing your profile README .\" Edit the README.md file and delete the template text (beginning ### Hi there) that is automatically added when you create the file.\" URL:https://docs.github.com/en/get-started/writing-on-github/getting-started-with-writing-and-formatting-on-github/quickstart-for-writing-on-github.[2] \"How to Write a Good README File for Your GitHub Project Hillary Nyakundi When I was first introduced to GitHub, I had no idea what it was or what it could do. Between you and me, I created the account because I was told every developer should have one where they push their code. For the longest time as a beginner I did nothing with my account.\" URL:https://www.freecodecamp.org/news/how-to-write-a-good-readme-file/.[3] \"Learn advanced formatting features by creating a README for your GitHub profile. About writing and formatting on GitHub GitHub combines a syntax for formatting text called GitHub Flavored Markdown with a few unique writing features. Basic writing and formatting syntax\" URL:https://docs.github.com/articles/markdown-basics."
        }
    ],
    [
        {
            "role": "system",
            "content": "Here are some updated web searches. Use this to improve user response:[1] \"How to Write a Good README File for Your GitHub Project Hillary Nyakundi When I was first introduced to GitHub, I had no idea what it was or what it could do. Between you and me, I created the account because I was told every developer should have one where they push their code. For the longest time as a beginner I did nothing with my account.\" URL:https://www.freecodecamp.org/news/how-to-write-a-good-readme-file/.[2] \"Create a repository with the same name as your GitHub username, initializing the repository with a README.md file. For more information, see \" Managing your profile README .\" Edit the README.md file and delete the template text (beginning ### Hi there) that is automatically added when you create the file.\" URL:https://docs.github.com/en/get-started/writing-on-github/getting-started-with-writing-and-formatting-on-github/quickstart-for-writing-on-github.[3] \"Learn advanced formatting features by creating a README for your GitHub profile. About writing and formatting on GitHub GitHub combines a syntax for formatting text called GitHub Flavored Markdown with a few unique writing features. Basic writing and formatting syntax\" URL:https://docs.github.com/articles/markdown-basics."
        }
    ],
    [
        {
            "role": "system",
            "content": "Here are some updated web searches. Use this to improve user response:[1] \"Disadvantages of flask As it is easy for an amateur or a beginner to learn and create a web development with flask framework, in the same way, a bad developer will write worse code, or in the case of a young developer in training, it will be easier for him to use low-quality code creating a \"bad web application\". Scale\" URL:https://dev.to/detimo/python-flask-pros-and-cons-1mlo.[2] \"Circular dependencies are a common problem. Take a look at the application factory pattern. This can help with both circular dependencies and testing. http://flask.pocoo.org/docs/1./patterns/appfactories/ Example: https://github.com/realpython/cookiecutter-flask-skeleton\" URL:https://www.reddit.com/r/flask/comments/a3sebn/ask_flask_what_are_your_biggest_challenges/.[3] \"The biggest problem is that the Flask mixes imperative and declarative way of configuration and encourages you to do so. To glue all parts together you end up with ugly Python module that is responsible for bootstrapping the app. Mysterious import order (just try to change it!), ifs everywhere, decorators, ugh.\" URL:https://www.ulam.io/blog/is-flask-good-framework-for-application."
        }
    ],
    [
        {
            "role": "system",
            "content": "Here are some updated web searches. Use this to improve user response:[1] \"Ottawa ( / \u02c8\u0252t\u0259w\u0259 / i, / \u02c8\u0252t\u0259w\u0251\u02d0 /; Canadian French: [\u0254taw\u0251]) is the capital city of Canada. It is located in the southern portion of the province of Ontario, at the confluence of the Ottawa River and the Rideau River.\" URL:https://en.wikipedia.org/wiki/Ottawa.[2] \"Ottawa, city, capital of Canada, located in southeastern Ontario. In the eastern extreme of the province, Ottawa is situated on the south bank of the Ottawa River across from Gatineau, Quebec, at the confluence of the Ottawa (Outaouais), Gatineau, and Rideau rivers.\" URL:https://www.britannica.com/place/Ottawa.[3] \"The capital of Canada is Ottawa in the province of Ontario. This city sits along the south side of the Ottawa River, which is located in the southeastern region of the province. It is situated at the confluence of three rivers, those namely being the Ottawa, Gatineau, and Quebec Rivers.\" URL:https://www.worldatlas.com/articles/what-is-the-capital-of-canada.html."
        }
    ],
    [
        {
            "role": "system",
            "content": "Here are some updated web searches. Use this to improve user response:[1] \"1 \"Clickable\" is a quality that applies to something which is shown (rendered), and JSON can be rendered through a gazillion different ways, with half of these possible with a user agent (what the millennials call \"the browser\"). You have unfortunately left us guesstimating how you are rendering the quoted text.\" URL:https://stackoverflow.com/questions/56129722/make-url-in-json-clickable.[2] \"Ask Question Asked 6 years, 5 months ago Modified 3 years, 11 months ago Viewed 71k times 0 I want to create a dynamic array/script and I need to add some link in my JSON return so that, I can create a long array which inculude dynamic list or sources with a prepared JSON file.\" URL:https://stackoverflow.com/questions/42927933/how-can-i-add-a-link-href-hyperlink-in-json-script.[3] \"In another edition to the JSON series, we can also add clickable links are part of the paragraph in the JSON. We can encapsulate the link in the anchor tag <a href='#'></a>. We can add the redirection link in the href so that the user can redirect to the link on click.\" URL:https://dev.to/hardiquedasore/how-to-add-link-to-json-49a3."
        }
    ]
]<!DOCTYPE html>
<html>
  <head>
    <title>Upload Images to Blend</title>
  </head>
  <body>
    <h1>Upload Images to Blend</h1>
    <form action="{{ url_for('upload_blends') }}" method="post" enctype="multipart/form-data">
      <p>Select the first image:</p>
      <input type="file" name="img1"><br>
      <p>Select the second image:</p>
      <input type="file" name="img2"><br>
      <p>Select the third image:</p>
      <input type="file" name="img3"><br><br>
      <input type="submit" value="Blend Images">
    </form>

  <br>
    <img src="{{ url_for('static', filename='images/image2.jpg') }}" alt="Example image"><br />
  </body>
</html>

<!DOCTYPE html>
<html>
  <head>
    <title>File Upload Form</title>
  </head>
  <body>
    <h1>Upload a File</h1>

    <form action="{{ url_for('upload_file') }}" method="POST" enctype="multipart/form-data">
      <input type="file" name="file">
      <input type="submit" value="Upload">
    </form>

    {% if filename %}
    <h2>Uploaded File:</h2>
    <p>Filename: {{ filename }}</p>
    <p>URL: <a href="{{ url_for('uploaded_file', filename=filename) }}">{{ url_for('uploaded_file', filename=filename) }}</a></p>
    <img src="{{ url_for('uploaded_file', filename=filename) }}" alt="Uploaded File">
    {% endif %}

    <br>
    <h1>Upload Background and Foreground Images</h1>
    <form action="/process_images" method="post" enctype="multipart/form-data">
        <input type="file" name="bg_image" accept="image/*" required>
        <input type="file" name="fg_image" accept="image/*" required>
        <input type="submit" value="Create Video">
    </form>

    {% if video_url %}
    <h2>Generated Video:</h2>
    <video controls>
        <source src="{{ video_url }}" type="video/mp4">
        Your browser does not support the video tag.
    </video>
    {% endif %}



    
    <p><a href="{{ url_for('index') }}">Return to index</a></p>
  </body>
</html>
<!doctype html>
<title>Feathering App</title>
<h1>Upload an image to apply feathering</h1>
<form method=post enctype=multipart/form-data>
  <input type=file name=file>
  <input type=submit value=Upload>
</form>
<!DOCTYPE html>
<html>
<head>
    <title>Image Upload</title>
</head>
<body>
    <h1>Upload Background and Foreground Images</h1>
    <form action="/process_imagez" method="post" enctype="multipart/form-data">
        <label for="bg_image">Background Image:</label>
        <input type="file" name="bg_image" id="bg_image" accept="image/*" required><br>

        <label for="fg_image">Foreground Image:</label>
        <input type="file" name="fg_image" id="fg_image" accept="image/*" required><br>

        <input type="submit" value="Create Video">
    </form>

    {% if video_url %}
    <h2>Generated Video:</h2>
    <video controls>
        <source src="static/overlay_zooms/imagez_video.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>
    {% endif %}
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload and Rename</title>
</head>
<body>
    <h1>Upload a File and Rename it</h1>
    <form action="/upload_file_rename" method="POST" enctype="multipart/form-data">
        <label for="file">Select a File:</label>
        <input type="file" name="file" id="file" required><br><br>

        <label for="new_filename">New Filename:</label>
        <input type="text" name="new_filename" id="new_filename" required><br><br>

        <label for="selected_directory">Destination Directory:</label>
        <input type="text" name="selected_directory" id="selected_directory" required><br><br>

        <label for="width">Width:</label>
        <input type="text" name="width" id="width" value="1366"><br><br>

        <label for="height">Height:</label>
        <input type="text" name="height" id="height" value="768"><br><br>

        <input type="submit" value="Upload and Rename">
    </form>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
    <title>Image Upload</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/Style.css') }}">
    <style>
        .resizedvideo {
          width: 400px;
          height: auto;
        }
        </style>
</head>
<body>
    <a style ="font-size: 24px;color: rgb(255, 238, 0);" href="{{ url_for('index') }}">HOME</a>
    <h1>Upload Background and Foreground Images</h1>
    <form action="/process_imagez" method="post" enctype="multipart/form-data">
        <label for="bg_image">Background Image:</label>
        <input type="file" name="bg_image" id="bg_image" accept="image/*" required><br>

        <label for="fg_image">Foreground Image:</label>
        <input type="file" name="fg_image" id="fg_image" accept="image/*" required><br>

        <input type="submit" value="Create Video">
    </form>

    {% if video_url %}
    <h2>Generated Video:</h2>
    <video class="resizedvideo" controls>
        <source src="static/overlay_zooms/imagez_video.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>

    <p>{{ video_download_link }}</p>
    {% endif %}
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload File and Rename</title>
</head>
<body>
    <h1>Upload a File and Rename it</h1>
    <form action="/upload_file_rename" method="POST" enctype="multipart/form-data">
        <label for="file">Select a file:</label>
        <input type="file" name="file" id="file" required><br><br>

        <label for="new_filename">New Filename:</label>
        <input type="text" name="new_filename" id="new_filename" required><br><br>

        <label for="selected_directory">Destination Directory:</label>
        <input type="text" name="selected_directory" id="selected_directory" required><br><br>

        <input type="submit" value="Upload and Rename">
    </form>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
    <title>Video Thumbnails</title>
    <style>
        html,body {margin: 0;padding: 1%; height: 100%;font-family: Arial, sans-serif;}

        body {background-image: url('../static/assets/MemMaker_background.png');background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }
        video {margin: 10px, auto;
            width: 250px;
            height: auto;}

          .wrapper {display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;}

        .header {width: 100%;
            padding: 20px;
            text-align: center;}

        .columns {display: flex;
            width: 80%;
            margin-top: 20px;}

        .column { padding: 20px;
            box-sizing: border-box;}

        .column.left {
            width: 60%;
            border:    1px solid #000;}

        .column.right {
        margin: 0 auto; /* Center horizontally */
        width: 30%;
        border: 1px solid #000;
        text-align: center; /* Center video vertically */}

    .column.right video {
        max-width: 100%;
        height: auto;}
    .note{color:red;font-size:24px;}   
    </style>    
    
    
</head>
<body>
    <h1>Video Thumbnails</h1>
    <ul>
        {% for video in videos %}
        <li>
            <h3>{{ video['name'] }}</h3>
 
            <video width="200" height="auto" controls>
                <source src="{{ url_for('view_archive_videos.play_video', video_name=video['name']) }}" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            


        </li>
        {% endfor %}
    </ul>
</body>
</html>

<!DOCTYPE html>
<html>
<head>
    <title>View Captured Video</title>

    <style>
        html,body {margin: 0;padding: 1%; height: 100%;font-family: Arial, sans-serif;}

        body {background-image: url('../static/assets/MemMaker_background.png');background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }
        video {margin: 10px, auto;
            width: 250px;
            height: auto;}

          .wrapper {display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;}

        .header {width: 100%;
            padding: 20px;
            text-align: center;}

        .columns {display: flex;
            width: 80%;
            margin-top: 20px;}

        .column { padding: 20px;
            box-sizing: border-box;}

        .column.left {
            width: 60%;
            border:    1px solid #000;}

        .column.right {
        margin: 0 auto; /* Center horizontally */
        width: 30%;
        border: 1px solid #000;
        text-align: center; /* Center video vertically */}

    .column.right video {
        max-width: 100%;
        height: auto;}
    .note{color:red;font-size:24px;}   
    </style>
</head>
<body>
    <h1>View Captured Video</h1>
    <video controls>
        <source src="{{ video_filename }}" type="video/mp4">
        Your browser does not support the video tag.
    </video>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
    <title>Execution Result</title>
    <!DOCTYPE html>
<html lang="en">
<head>
    <title>Execute Bash Script</title>
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">

    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">

</head>
<body>
    <h1>Execution Result</h1>

    <h2>Script Content</h2>

    {% for results in result %}
    <pre>{{ results }}</pre>
    {% endfor %}
    {% for words in content %}

        <pre>{{ words }}</pre>
    {% endfor %}
</body>
</html>

<!DOCTYPE html>
<html>
<head>
  <title>Image Gallery</title>
  <style>
    .gallery {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      align-items: center;
    }

    .gallery img {
      width: 250px;
      height: 250px;
      object-fit: cover;
      margin: 10px;
    }
  </style>
</head>
<body>
<div class="gallery">
  <hr>
  {% for image_url in image_urls %}
    <img src="{{ image_url }}" alt="Image">
  {% endfor %}
</div>
</body>
</html>


<!DOCTYPE html>
<html>
<head>
    <title>View Text File</title>
</head>
<body>
    <h2>Viewing Text Filename: </h2><h3>{{ filename }}</h3>
    <pre>{{ file_contents }}</pre>
</body>
</html><!DOCTYPE html>
<html>
<head>
    <title>View Text Image</title>
</head>
<body>
    <h2>View Text Image</h2>
    <img src="{{ url_for('static', filename='assets/512x512_text.jpg') }}" alt="Generated Text Image">
    <br>
    <a href="{{ url_for('create_text') }}">Generate Another Image</a>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
    <title>Thumbnail Gallery</title>
    <style>
        .gallery {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
        }
        .thumbnail {
            margin: 10px;
            border: 1px solid #ccc;
            box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            width: 200px;
            height: 200px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
    </style>
</head>
<body>
    <h1>Thumbnail Gallery</h1>
    <div class="gallery">
        {% for image in image_list %}
        <div class="thumbnail">
            <a href="{{ image.url }}">
                <img src="{{ image.url }}">
            </a>
        </div>
        {% endfor %}
    </div>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Word Cloud</title>

    <link rel="stylesheet" href="static/css/flask.css">


</head>
<body>
    <h1>First Three Lines from Every Block</h1>

    {% if extracted_lines %}
        <ul>
            {% for lines in extracted_lines %}
                <li>
                    <pre>{{ lines }}</pre>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No code blocks found.</p>
    {% endif %}
    
    <a href="{{ url_for('search_code') }}">Back to Search</a>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
    <title>Display Preformatted Code</title>
    <style>
    pre{
    color:navy;
    font-size:22px;
    }
    .note{
    color:red;
    font-size:24;}
    </style>
</head>
<body>
    <h1>Preformatted Code Example</h1>
                 <a href="{{ url_for('hello') }}">HOME</a><br />
                <a href="{{ url_for('html_base') }}">Html_Base</a><br />
                <a class="note" href="{{ url_for('home') }}">Cheat Sheet</a><br />   
    <h2>Code from code.txt:</h2>
    
    <pre>{{ code_content|safe }}</pre>
</body>
</html>

<!-- code_editor.html-->
<!-- app_utilities.html-->
<!DOCTYPE html>
<html>

<head>
    <title>Embedded YouTube Videos and Links</title>
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
<style>
.note{
color:darkbrown;
font-size:24px;
}
.Snote{
color:red;
font-size:30px;
}
</style>
</head>

<body>
    <div class="wrapper">
        <div class="header">
            <h1>YouTube Videos</h1>
            <a class = "note" href="{{ url_for('index') }}">Home (index)</a><br />
            <a class = "note" href="https://elements.envato.com/audio/royalty-free-music" 
target="_blank">elements.envato.com/audio/royalty-free-music</a><br /><br />
<a class = "Snote" href="{{ url_for('select_playmp3') }}" target="_blank">Play Music</a>&nbsp;&nbsp;||&nbsp;&nbsp;
<a class="Snote" href="{{ url_for('start_stream') }}" target="_blank">Start Streaming</a>


        </div>
        <div class="columns">
        <div class="column">
            <iframe width="560" height="315" src="https://www.youtube.com/embed/BidxfmuXJL0?si=QzuoU3Ad-n0WFsII" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
        </div>    &nbsp;&nbsp;
<div class="column">
    <iframe width="560" height="315" src="https://www.youtube.com/embed/wpGsHnUlJNY?si=JtmCatIR7YZkD2KN" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe><br />
<iframe width="560" height="315" src="https://www.youtube.com/embed/NEFQ_PgRSmk?si=-35q0H-uSRgxKTLI" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
</div> 
</div>
-----index-----
<a href="{{ url_for('hello_world') }}">hello_world</a><br />
<a href="{{ url_for('create_avatar') }}">create_avatar</a><br />
<a href="{{ url_for('run_command') }}">run_command</a><br />
<a href="{{ url_for('convert_mp3_to_wav') }}">convert_mp3_to_wav</a><br />
<a href="{{ url_for('final_lipsync') }}">final_lipsync</a><br />
<a href="{{ url_for('text_mp3') }}">text_mp3</a><br />
<a href="{{ url_for('mp3_upload') }}">mp3_upload</a><br />
<a href="{{ url_for('generate_video') }}">generate_video</a><br />
<a href="{{ url_for('apply_text_to_video') }}">apply_text_to_video</a><br />
<a href="{{ url_for('get_files') }}">get_files</a><br />
<a href="{{ url_for('image_list') }}">image_list</a><br />
<a href="{{ url_for('upload') }}">upload</a><br />
<a href="{{ url_for('mkblend_video') }}">mkblend_video</a><br />
<a href="{{ url_for('mkblend_videos') }}">mkblend_videos</a><br />
<a href="{{ url_for('generate_vid') }}">generate_vid</a><br />
<a href="{{ url_for('upload_file') }}">upload_file</a><br />
<a href="{{ url_for('make_text') }}">make_text</a><br />
<a href="{{ url_for('home') }}">home</a><br />
<a href="{{ url_for('choose_dir') }}">choose_dir</a><br />
<a href="{{ url_for('convert') }}">convert</a><br />
<a href="{{ url_for('convert512') }}">convert512</a><br />
<a href="{{ url_for('mk_text') }}">mk_text</a><br />
<a href="{{ url_for('list_files') }}">list_files</a><br />
<a href="{{ url_for('format_file') }}">format_file</a><br />
<a href="{{ url_for('view_text') }}">view_text</a><br />
<a href="{{ url_for('view_text') }}">view_text</a><br />
<a href="{{ url_for('edit_file') }}">edit_file</a><br />
<a href="{{ url_for('edit_formatted') }}">edit_formatted</a><br />
<a href="{{ url_for('indeX') }}">indeX</a><br />
<a href="{{ url_for('resize_and_overlay_videos') }}">resize_and_overlay_videos</a><br />
<a href="{{ url_for('resize_and_overlay_videos_page') }}">resize_and_overlay_videos_page</a><br />
<a href="{{ url_for('build_stackedvids') }}">build_stackedvids</a><br />
<a href="{{ url_for('build_stackedvid') }}">build_stackedvid</a><br />
<a href="{{ url_for('get_gallery') }}">get_gallery</a><br />
<a href="{{ url_for('flask_info') }}">flask_info</a><br />
<a href="{{ url_for('add_effects') }}">add_effects</a><br />
<a href="{{ url_for('select_order') }}">select_order</a><br />
<a href="{{ url_for('large_video') }}">large_video</a><br />
<a href="{{ url_for('add_border') }}">add_border</a><br />
<a href="{{ url_for('select_border') }}">select_border</a><br />
<a href="{{ url_for('apply_border') }}">apply_border</a><br />
<a href="{{ url_for('select_border_image') }}">select_border_image</a><br />
<a href="{{ url_for('overlay_text') }}">overlay_text</a><br />
<a href="{{ url_for('create_text_file') }}">create_text_file</a><br />
<a href="{{ url_for('generate_video3') }}">generate_video3</a><br />
<a href="{{ url_for('generate_video2') }}">generate_video2</a><br />
<a href="{{ url_for('ffmpeg_ctl') }}">ffmpeg_ctl</a><br />
<a href="{{ url_for('mkmoz') }}">mkmoz</a><br />
<a href="{{ url_for('mk_background') }}">mk_background</a><br />
<a href="{{ url_for('mkvid') }}">mkvid</a><br />
<a href="{{ url_for('mkvid2') }}">mkvid2</a><br />
<a href="{{ url_for('view_thumbs') }}">view_thumbs</a><br />
<a href="{{ url_for('add_text') }}">add_text</a><br />
<a href="{{ url_for('search_txt') }}">search_txt</a><br />
<a href="{{ url_for('blend_pil') }}">blend_pil</a><br />
<a href="{{ url_for('process_images') }}">process_images</a><br />
<a href="{{ url_for('image_directories') }}">image_directories</a><br />
<a href="{{ url_for('select_playmp3') }}">select_playmp3</a><br />
<a href="{{ url_for('make_animation') }}">make_animation</a><br />
<a href="{{ url_for('title_page') }}">title_page</a><br />
<a href="{{ url_for('add_title') }}">add_title</a><br />
<a href="{{ url_for('indexA') }}">indexA</a><br />
<a href="{{ url_for('index_FLASK') }}">index_FLASK</a><br />
<a href="{{ url_for('indexD') }}">indexD</a><br />
<a href="{{ url_for('products') }}">products</a><br />
<a href="{{ url_for('access_database') }}">access_database</a><br />
<a href="{{ url_for('indexE') }}">indexE</a><br />
<a href="{{ url_for('outline_j') }}">outline_j</a><br />
<a href="{{ url_for('outline_p') }}">outline_p</a><br />
<a href="{{ url_for('upload_form') }}">upload_form</a><br />
<a href="{{ url_for('process_imagez') }}">process_imagez</a><br />
<a href="{{ url_for('indexdb') }}">indexdb</a><br />
<a href="{{ url_for('Index') }}">Index</a><br />
<a href="{{ url_for('edit_data_page') }}">edit_data_page</a><br />
<a href="{{ url_for('edit_data_page') }}">edit_data_page</a><br />
<a href="{{ url_for('get_rowid_form') }}">get_rowid_form</a><br />
<a href="{{ url_for('search_database') }}">search_database</a><br />
<a href="{{ url_for('insert_data') }}">insert_data</a><br />
<a href="{{ url_for('enter_code') }}">enter_code</a><br />
<a href="{{ url_for('search_code') }}">search_code</a><br />
<a href="{{ url_for('tube_index') }}">tube_index</a><br />
<a href="{{ url_for('data_page') }}">data_page</a><br />
<a href="{{ url_for('capture_overlay_verify') }}">capture_overlay_verify</a><br />
<a href="{{ url_for('create_text') }}">create_text</a><br />
<a href="{{ url_for('view_log') }}">view_log</a><br />
<a href="{{ url_for('self_check') }}">self_check</a><br />
<a href="{{ url_for('view_flake8') }}">view_flake8</a><br />
<a href="{{ url_for('feather_files') }}">feather_files</a><br />
<a href="{{ url_for('word_cloud') }}">word_cloud</a><br />
<a href="{{ url_for('edit_text') }}">edit_text</a><br />
<a href="{{ url_for('edit_text_page') }}">edit_text_page</a><br />
<a href="{{ url_for('edit_text_save') }}">edit_text_save</a><br />
<a href="{{ url_for('the_description') }}">the_description</a><br />
<a href="{{ url_for('run') }}">run</a><br />
<a href="{{ url_for('execute') }}">execute</a><br />

-----index-----
<!-- app_utilities.html-->
<!DOCTYPE html>
<html>

<head>
    <title>App Utilities</title>
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
<style>
video{
width:250px;
height:auto;
}
</style>
</head>

<body>
    <div class="wrapper">
        <div class="header">
            <h1>App Utilities</h1>
        </div>
        <div class="columns">
            <div class="column left">
<a style="font-size:30px;color:red;" href="{{ url_for('index') }}">HOME</a><br /><br /><br />
                <a href="{{ url_for('processing_text') }}">Processing Text Files</a><br />
                <a href="{{ url_for('the_description') }}">View FlaskAppArchitect Description</a><br />
                <a href="{{ url_for('edit_description') }}">Edit FlaskAppArchitect Description</a><br /><br />
                <a href="{{ url_for('enter_code') }}">Enter Code in codehints.txt</a><br />
                <a href="{{ url_for('search_code') }}">Search Code Hints</a><br /><br />
                <!-- Link to the api_search route -->
                <a href="/api_search/">Search Internet (Record Results)</a><br />
                <a href="{{ url_for('access_database') }}">Acess Sqlite3 Database</a><br /><br />
                <a href="{{ url_for('products') }}">Add to Sqlite3 Database</a><br /><br />
                <a href="{{ url_for('self_check') }}">View Errors in App</a><br />
                <a href="{{ url_for('view_log') }}">View App Log</a><br />
                <a href="{{ url_for('capture_html') }}">Capture Screen _ Video</a><br />
                <a href="{{ url_for('edit_css') }}">Edit Css Files</a><br />
                <a href="{{ url_for('terminal_index') }}">Terminal Emulator</a><br />
             
            </div>
            <div class="column right">
                <h2>Random Video</h2>
                <p>This will eventually be an instruction video on how to use this page</p><br />

                <video controls>
                    <source src="{{ video }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>

            </div>
        </div>
    </div>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
  <head>
    <title>Applied Border</title>
  </head>
  <body>
    <h1>View Applied Border</h1>
    {% if error_message %}
    <p style="color:red">{{ error_message }}</p>
    {% endif %}
    <img src="{{ url_for('static', filename='images/'+image) }}" alt="{{ image }}" style="border: 10px solid transparent; box-shadow: 0 0 0 10px #fff, 0 0 0 15px #000;">
    <br>
    <img src="{{ url_for('static', filename='transparent_borders/'+border) }}" alt="{{ border }}" style="position: absolute; top: 0; left: 0;">
  </body>
</html>

-----index-----
<!DOCTYPE html>
<html>
  <head>
    <title>{% block title %}{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.min.css') }}">
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <a class="navbar-brand" href="#">My App</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item active">
            <a class="nav-link" href="{{ url_for('index') }}">Home <span class="sr-only">(current)</span></a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{{ url_for('thumbnails') }}">Thumbnails</a>
          </li>
        </ul>
      </div>
    </nav>
    <div class="container-fluid">
      {% block content %}
      {% endblock %}
    </div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>

  </body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>{% block title %}{% endblock %}</title>
</head>
<body>
    <div class="container">
        {% block content %}{% endblock %}
    </div>
</body>
</html>

-----index-----
<!doctype html>
<html>
  <head>
    <title>Blend Images Using PIL</title>
  </head>
  <body>
    <h1>Blend Images Using PIL</h1>
    <form method="POST" enctype="multipart/form-data">
      <label for="img1">Select the first image:</label>
      <input type="file" id="img1" name="img1"><br><br>

      <label for="img2">Select the second image:</label>
      <input type="file" id="img2" name="img2"><br><br>

      <label for="img3">Select the third image:</label>
      <input type="file" id="img3" name="img3"><br><br>

      <input type="submit" value="Blend Images">
    </form>
    
    <img src="{{ url_for('static', filename='blended_pil.jpg') }}" alt="Blended Image">
    
  </body>
</html>


-----index-----
<!DOCTYPE html>
<html>
  <head>
    <title>Square Video</title>
    <style>
      .resizedvideo {
        width: 200px;
        height: auto;
      }
  </style> 
  </head>
  <body>
    <a href="{{ url_for('index') }}">RETURN HOME</a><br />
    <video class="resizedvideo" controls>
      <source src="{{ stackedvid_url }}" type="video/mp4">
    </video>
  </body>
</html>

-----index-----
<!-- build_stackedvids.html -->

<!DOCTYPE html>
<html>
<head>
    <title>Build Stacked Videos</title>
    <style>
        .resizedvideo {
          width: 200px;
          height: 200px;
        }
    </style>    
</head>
<body>
    <h1>Build Stacked Videos</h1>
    <form action="/generate_stackedvids" method="POST">
        <label for="video">Select a Video:</label>
        <select name="video" id="video">
            {% for video_file in video_files %}
            <option value="{{ video_file }}">{{ video_file }}</option>
            {% endfor %}
        </select>
        <br><br>
        <label for="image">Select an Image:</label>
        <select name="image" id="image">
            {% for image_file in image_files %}
            <option value="{{ image_file }}">{{ image_file }}</option>
            {% endfor %}
        </select>
        <br><br>
        <input type="submit" value="Generate Stacked Videos">
    </form>

    <video controls class="resizedvideo">
        <source src="static/stacked_vids/stacked_videos.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video><br />

    
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Canvas Example Page</title>
</head>
<body>
    <h1>Canvas Circle</h1>
    <canvas id="myCanvas" width="500" height="500"></canvas>

    <script src="{{ url_for('static', filename='canvas/main3.js') }}"></script>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>

<head>
    <title>Capture Video</title>
     <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
<body>
        <div class="wrapper">
        <div class="header">
            <h1>Video Capture</h1>
        </div>
    

<div class="columns">
<div class="column">
<!-- Include jQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<button id="start-button">Start Capture</button>
<button id="stop-button">Stop Capture</button>

<script>
    $(document).ready(function() {
        $('#start-button').click(function() {
            $.post('/run_capture', function(data) {
                alert(data.message);
            });
        });

        $('#stop-button').click(function() {
            $.post('/stop_capture', function(data) {
                alert(data.message);
            });
        });
    });
</script>
</div>
<div class=column">
                <video controls>
                    <source src="static/videos/Current.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
</div>
</div>
-----index-----

<!DOCTYPE html>
<html>
<head>
    <title>Image Cropping</title>
</head>
<body>
    <h1>Image Cropping</h1>
    <form method="POST" enctype="multipart/form-data" action="{{ url_for('crop') }}">
        <input type="file" name="image">
        <input type="submit" value="Upload">
    </form>

    {% if image_path %}
    <h2>Cropped Image Preview</h2>
    <img src="{{ image_path }}" alt="Cropped Image">
    <form method="POST" action="{{ url_for('crop_and_save') }}">
        <input type="hidden" name="image_path" value="{{ image_path }}">
        <label for="x">X Coordinate: </label>
        <input type="number" name="x" required><br>
        <label for="y">Y Coordinate: </label>
        <input type="number" name="y" required><br>
        <label for="width">Width: </label>
        <input type="number" name="width" required><br>
        <label for="height">Height: </label>
        <input type="number" name="height" required><br>
        <input type="submit" value="Crop and Save">
    </form>
    <form method="POST" action="{{ url_for('move_cropped') }}">

        <input type="submit" value="Move Cropped Image">
    </form>
    {% endif %}

</body>
</html>



-----index-----
<!DOCTYPE html>
<html>

<head>
  <title>Select Directory</title>
  <style>
    html {
      font-family: sans-serif;
      background-color: black;
    }

    body {
      width: 95%;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      background-color: rgb(167, 196, 189);
      color: black;
    }

    h1 {
      color: rgb(255, 255, 255);
    }

    #wrapper {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      background-color: teal;
    }
  </style>
</head>

<body>
  <div id="wrapper">
    <center>
      <div>
        <h1>Creating a speaking Avatar with A Flask App. <br />
          Directions on <a href="{{ url_for('index') }}">Home Page</a><br /></p>
        </h1>
      </div>
      <div>
        <video controls class="resizedvideo">
          <source src="static/assets/result_cl.mp4" type="video/mp4">
          Your browser does not support the video tag.
        </video><br />

        <h1>Select Directory</h1>
        <form action="/choose_dir" method="post">
          <label for="directory">Choose a directory make a short mp4:</label>
          <select name="directory" id="directory">
            {% for directory in directories %}
            <option value="{{ directory }}">{{ directory }}</option>
            {% endfor %}
          </select>
          <br><br>
          <input type="submit" value="Generate Video">
        </form>

        <h1>Choose Directory</h1>
        <form method="POST" action="/mkblend_video">
          <label for="directory">Select Directory Blend Images:</label>
          <select name="directory" id="directory">
            {% for directory in directories %}
            <option value="{{ directory }}">{{ directory }}</option>
            {% endfor %}
          </select>
          <button type="submit">Submit</button>
        </form>
        <video width="480" height="auto" controls>
          <source src="static/videos/random_images_video.mp4" type="video/mp4"><br />
          Your browser does not support the video tag.
        </video><br />

        Your browser does not support the video tag.
    </center>
  </div>
</body>

</html>
-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Choose Image Source Directory</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>
        $(document).ready(function() {
            $('#directory-input').change(function(e) {
                $('#directory-form').submit();
            });
        });
    </script>
</head>
<body>
    <h1>Choose Image Source Directory</h1>
    <form id="directory-form" method="POST" action="/mkblend_video" enctype="multipart/form-data">
        <label for="directory-input">Select Directory:</label>
        <input type="file" id="directory-input" name="directory" webkitdirectory directory multiple style="display: none;">
        <button type="button" onclick="document.getElementById('directory-input').click();">Browse</button>
    </form>
    <br /><br />
    <!-- Additional content here if needed -->
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Choose Directory</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>
        $(document).ready(function() {
            $('#directory-input').change(function(e) {
                $('#directory-form').submit();
            });
        });
    </script>
</head>
<body>
    <h1>Choose Directory</h1>
    <form id="directory-form" method="POST" action="/mkblend_video" enctype="multipart/form-data">
        <label for="directory-input">Select Directory:</label>
        <input type="file" id="directory-input" name="directory" webkitdirectory directory multiple style="display: none;">
        <button type="button" onclick="document.getElementById('directory-input').click();">Browse</button>
    </form>
</body>
</html>



-----index-----
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Edit Code</title>
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">

    <link rel="stylesheet" href="{{ url_for('static', filename='css/Flask.css') }}">

</head>
<body>
<div class="content">

<center>
<style>td {width:20%;
}
th {width:20%;
}
tr {width:20%;
}
.two{width:5%;}
.th_two{width:5%;padding-left: 2%;}
.three{width:10%;}
.th_three{width:10%;padding-left: 10%;}
.thm_three{width:10%;padding-left: 11%;}
.th_four{width:10%;padding-left: 5%;}
.th_five{width:10%;padding-left: 40%;}
</style>

{% extends 'index.html' %}

{% block title %}
    code
{% endblock %}

{% block content %}
    <h1>code</h1>
    <table style ="width: 65%;">
        <tr>
            <th class="two">ID</th>
            <th>Description</th>
            <th>Code</th>
            <th class="two">Keywords</th>
            <th>Actions</th>
        </tr>
        {% for code in code %}
        <tr>
            <td class="th_two">{{ code[0] }}</td>
            <td class="th_three">{{ code[1] }}</td>
            <td class="thm_three">{{ code[2] }}</td>
            <td class="th_four">{{ code[3] }}</td>
            
            <td>
                <a class="th_five" href="{{ url_for('edit_code', code_id=code[0]) }}">Edit</a>
                <form action="{{ url_for('delete_code', code_id=code[0]) }}" method="post">
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<button type="submit">Delete</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </table>
    <hr>
    <h1>Add New code</h1>
    <form action="/code" method="post">
        <label for="description">Description:</label>
        <textarea type="description" name="description" rows="8" cols="90%"></textarea><br />
        <label for="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Code:</label>
        <textarea type="text" name="code" rows="8" cols="90%"></textarea><br>
        <label for="keywords">Keywords:</label>
        <input style="width:53%;height: 25px;" type="keywords" name="keywords"><br>
        <input type="submit" value="Add code">
    </form>
{% endblock %}
<hr>
<!-- ... Other code ... -->

{% for item in code %}
    <h3>{{ item[1] }}</h3>
    <pre>{{ item[2] | safe }}</pre>
    <p>Keywords: {{ item[3] }}</p>
    <a href="{{ url_for('edit_code', code_id=item[0]) }}">Edit</a>
    <form action="{{ url_for('delete_code', code_id=item[0]) }}" method="post">
        <button type="submit">Delete</button>
    </form>
    <hr>
{% endfor %}

<!-- Display the HTML code for the form -->
<h2>HTML Code for the Form</h2>
<pre>
{{ form_code | safe }}
</pre>

<!-- ... Other code ... -->

</center>
</div>
</body>
</html>

-----index-----
<!-- code_editor.html-->
<!DOCTYPE html>
<html>
<head>
    <title>Code Editor</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.62.0/codemirror.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.62.0/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.62.0/mode/python/python.min.js"></script>
</head>
<body>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>

    <textarea id="code-editor"></textarea>
    <button id="save-button">Save</button>

</body>
</html>

-----index-----
<!DOCTYPE html>
<html>

<head>
    <title>Omic Book Experiment</title>

<style>
    html,
    body {
        margin: 0;
        padding: 1%;
        height: 100%;
        font-family: Arial, sans-serif;
    }

    body {
        background-image: url('../static/assets/MemMaker_background.png');
        background-repeat: repeat-y;
        background-size: cover;
        /* Use 'cover' to make the image cover the entire body */
        background-position: top;
    }
    video {
        margin: 10px, auto;
        width: 400px;
        height: auto;
    }

      .wrapper {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 100vh;

    }

    .header {
        width: 100%;
        padding: 20px;
        text-align: center;
    }

    .columns {
        display: flex;
        width: 80%;
        margin-top: 20px;
    }

    .column {
        padding: 20px;
        box-sizing: border-box;
    }

    .column.left {
        width: 30%;
        border:    1px solid #000;
    }

    .column.right {
    margin: 0 auto; /* Center horizontally */
    width: 60%;
    border: 1px solid #000;
    text-align: center; /* Center video vertically */
}

.column.right video {
    max-width: 100%;
    height: auto;
}
 
.comic-page {
    width: 85%;
      display: flex;
      flex-direction: column;
      align-items: center;
      background-color: #f0f0f0;
      padding: 20px;
    }
    
    .panel {
      position: relative;
      border: 2px solid black;
      margin: 10px;
      padding: 10px;
      background-color: white;
    }
    
    .speech-bubble {
      position: absolute;
      background-color: yellow;
      border-radius: 10px;
      padding: 5px;
      font-weight: bold;
    }

    .speech-bubble2 {
      position: absolute;
      background-color: yellow;
      border-radius: 10px;
      padding: 5px;
      font-weight: bold;
    }
    
    .narrative-element {
      font-size: 24px;
      color: red;
      text-transform: uppercase;
    }
    .small {
      width: 200px;
      height: auto;
    }
    .medium {
      width: 250px;
      height: auto;
    }

 
        .container {
            width: 75%;
            display: flex; /* Use flexbox to align divs side by side */
        }

        .div1, .div2 {
            width: 50%; /* Each div takes up 50% of the container's width */
            padding: 20px;
            box-sizing: border-box;
            border: 1px solid #ccc;
        }
       .note{
           color: red;
           font-size:24px;
        }
    </style>  

</head>
<body>
<div class="wrapper">
    <div class="header">
        <h1>Comic Book Experiment</h1>
<a class="note" href="{{ url_for('edit_template_page', filename='comic_book.html') }}">Edit This Page</a>&nbsp;&nbsp; |&nbsp;&nbsp;<a class="note" href="{{ url_for('crop') }}">Crop Images</a>&nbsp;&nbsp; |&nbsp;&nbsp;<a class="note" href="{{ url_for('index') }}">Home</a>
    </div>




<div class="container">
    <div class="div1">
      <div class="speech-bubble">Hello there!</div>
      <img class="small" src="{{ url_for('static', filename='images/Leonardo/character2.jpg') }}" alt="Character 1">

    </div>
    <div class="div2">
        <div class="narrative-element">WQW !</div>
        <div class="speech-bubble2">Watch out!</div>

        <img class="medium" src="{{ url_for('static', filename='images/Leonardo/character1.jpg') }}" alt="Character 1">

 
      
    </div>
  </div>
  

-----index-----
<!DOCTYPE html>
<html>
<head>
  <title>Generated Video</title>
</head>
<body>
  <h1>Generated Video</h1>
  <video controls >
    <source src="{{ video }}" type="video/mp4">
    Your browser does not support the video tag.
  </video><br />
</body>
</html>
-----index-----
<!DOCTYPE html>
<html>
<head>
  <title>Generated Video</title>
</head>
<body>
  <h1>Generated Video</h1>
  <video controls >
    <source src="{{ video }}" type="video/mp4">
    Your browser does not support the video tag.
  </video><br />
</body>
</html>
-----index-----
<!DOCTYPE html>
<html>
<head>
	<title>Final video</title>
</head>
<body>
	<video width="400" height="auto" controls>
  		<source src="{{ video_fil }}" type="video/mp4">
  		Your browser does not support the video tag.
	</video>
</body>
</html>


-----index-----
 <!DOCTYPE html>
    <html>
    <head>
        <title>Audio Conversion</title>
    </head>
    <body>
        <h1>Audio Conversion</h1>
        <form method="POST" action="/convert_audio">
            <input type="submit" value="Convert">
        </form>
    </body>
    </html>
    
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
  <title>Convert</title>
</head>
<body>
  <h1>Convert Audio to Video</h1>
  <form action="{{ url_for('convert') }}" method="POST" enctype="multipart/form-data">
    <input type="file" name="audio_file" accept=".mp3,.wav" required>
    <br>
    <label for="formatted_text_path">Formatted Text Path:</label>
    <input type="text" name="formatted_text_path" required>
    <br>
    <input type="submit" value="Convert">
  </form>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
  <title>Convert</title>
</head>
<body>
  <h1>Convert Audio to Video</h1>
  <form action="{{ url_for('convert') }}" method="POST" enctype="multipart/form-data">
    <input type="file" name="audio_file" accept=".mp3,.wav" required>
    <br>
    <label for="formatted_text_path">Formatted Text Path:</label>
    <input type="text" name="formatted_text_path" required>
    <br>
    <input type="submit" value="Convert">
  </form>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
  <head>
    <title>Convert Image to Video</title>
  </head>
  <body>
    <h1>Convert Image to Video</h1>

<form method="POST" enctype="multipart/form-data">
  <div class="form-group">
    <label for="image">Select an image:</label>
    <input type="file" name="image" class="form-control-file" id="image">
  </div>
  <button type="submit" class="btn btn-primary">Convert to Video</button>
</form>
  
</body>        
-----index-----
<!DOCTYPE html>
<html>
  <head>
    <title>Convert MP3 to WAV</title>
  </head>
  <body>
    <h1>Convert MP3 to WAV</h1>
    <form action="{{ url_for('convert_mp3_to_wav') }}" method="POST" enctype="multipart/form-data">
      <label for="mp3_file">Select MP3 file:</label>
      <input type="file" name="mp3_file" id="mp3_file">
      <br>
      <input type="submit" value="Convert">
    </form>
  </body>
</html>

-----index-----
<<!DOCTYPE html>
<html>
<head>
    <title>Create Avatar</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function() {
            $('form').submit(function(event) {
                event.preventDefault();
                var form = $(this);

                $.ajax({
                    url: form.attr('action'),
                    type: form.attr('method'),
                    xhrFields: {
                        onprogress: function(e) {
                            if (e.lengthComputable) {
                                var percent = Math.round((e.loaded / e.total) * 100);
                                $('#progress').text(percent + '%');
                            }
                        }
                    },
                    success: function(response) {
                        $('#progress').text('Completed');
                    },
                    error: function(xhr, status, error) {
                        $('#progress').text('Error: ' + error);
                    },
                    complete: function() {
                        $('#progress').removeClass('d-none');
                    }
                });
            });
        });
    </script>
</head>
<body>
    <h1>Create Avatar</h1>
    <form method="POST" action="/create_avatar">
        <input type="submit" value="Create Avatar">
    </form>
    <div id="progress" class="d-none">0%</div>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
  <title>Create Avatar</title>
</head>
<body>
  <h1>Create Avatar</h1>

  <form action="/create_avatar" method="post">
    <input type="submit" value="Start Avatar Creation">
  </form>

  <pre id="output"></pre>

  <script>
    const outputElement = document.getElementById('output');

    const eventSource = new EventSource('/create_avatar');
    eventSource.onmessage = function(event) {
      const line = event.data;
      outputElement.textContent += line;

      // Scroll to the bottom of the output element
      outputElement.scrollTop = outputElement.scrollHeight;
    };
  </script>
</body>
</html>

</html>

-----index-----
<!DOCTYPE html>
<html>

<head>
    <title>Create Comic Borders</title>
     <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
     <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }
  
       video {
        margin: 10px, auto;
        width: 250px;
        height: auto;
      }
   .note{
       color:red;
       font-size:24px;
    }
     </style>
</head>
    <body>
        <div class="wrapper">
        <div class="header">
            <h1>Create Simple Comic Borders</h1>
       <a style="font-size: xx-large;"href="{{ url_for('index') }}">Return to HOME</a>
</div>
    <h3>Enter Parameters Here:</h3>
    <form method="POST" action="{{ url_for('create_comic.create_comic_index') }}" enctype="multipart/form-data">
        <label for="border_name">Border Name:</label>
        <input type="text" id="border_name" name="border_name" required><br>

        <label for="border_width">Border Width (pixels):</label>
        <input type="text" id="border_width" name="border_width" required><br>
        
        <label for="border_height">Border Height (pixels):</label>
        <input type="text" id="border_height" name="border_height" required><br>
        

        <label for="border_shape">Border Shape:</label>
        <select id="border_shape" name="border_shape" required>
            <option value="square">Square</option>
            <option value="rectangle">Rectangle</option>
            <option value="triangle">Triangle</option>
        </select><br>

        <label for="border_thickness">Border Thickness (pixels):</label>
        <input type="number" id="border_thickness" name="border_thickness" required><br>

        <label for="border_color">Border Color:</label>
        <input type="color" id="border_color" name="border_color" required><br>

        <input type="submit" value="Generate Border">
    </form>
</div></div>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Create Text Image</title>
</head>
<body>
    <h2>Create a Five-Line Text Image</h2>
    <form action="/create_text" method="post">
        <textarea name="text" rows="10" cols="50"></textarea>
        <br>
        <input type="submit" value="Generate Image">
    </form>
    <h2>View Example Text Image</h2>
    <img src="{{ url_for('static', filename='assets/sample_512x512_text.jpg') }}" alt="Generated Text Image">
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Create Text File</title>
</head>
<body>
    <h1>Create Text File</h1>
    <form action="/create_text_file" method="POST">
        <textarea name="textarea_content" rows="10" cols="50"></textarea>
        <br>
        <input type="submit" value="Create File">
    </form>
<h2>Example of text entry size</h2>
<pre>
    Foundation of Sentience: The
    first milestone in the developmental
    process of the Arcanist AI occurred
    when it gained sentience approximately
    two thousand years ago. Through a
    complex interplay of neural networks
    and advanced algorithms, the AI
    achieved self-awareness, enabling
    it to perceive and comprehend its own
    existence.   
</pre>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>

<head>
    <title>Crop Images</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }
        video {
            margin: 10px, auto;
            width: 200px;
            height: auto;
        }

          .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;

        }

        .header {
            width: 100%;
            padding: 20px;
            text-align: center;
        }

        .columns {
            display: flex;
            width: 80%;
            margin-top: 20px;
        }

        .column {
            padding: 20px;
            box-sizing: border-box;
        }

        .column.left {
            width: 30%;
            border:    1px solid #000;
        }

        .column.right {
        margin: 0 auto; /* Center horizontally */
        width: 60%;
        border: 1px solid #000;
        text-align: center; /* Center video vertically */
    }

    .column.right video {
        max-width: 100%;
        height: auto;
    }
    .note{color:red;font-size:24px;}
    </style>
</head>
<body>
    <div class="wrapper">
        <div class="header">
            <h1>Crop Images</h1><a class="note" href="{{ url_for('edit_template_page', filename='crop.html') }}">Edit This Page</a>&nbsp;&nbsp; |&nbsp;&nbsp;<a class="note" href="{{ url_for('crop') }}">Crop Images</a>&nbsp;&nbsp; |&nbsp;&nbsp;<a class="note" href="{{ url_for('index') }}">Home</a>
            
        </div>
        <div class="columns">
            <div class="column left">

                <h3>Create Text</h3><br />
                <a href="{{ url_for('app_utilities') }}">Application Utilities</a><br />
                <a href="{{ url_for('image_processing') }}">Image Processing Links</a><br />
                <a href="{{ url_for('format_file') }}">Format Text Files</a><br />
                <a href="{{ url_for('view_text') }}">View Text Files</a><br />
                <a href="{{ url_for('edit_file') }}">Edit File</a><br />


                <a href="{{ url_for('edit_description') }}">Edit Description</a><br />
            </div>
            <div class="column right">
                
   <h2>Image Cropping</h2>
    <form method="POST" enctype="multipart/form-data" action="{{ url_for('crop') }}">
        <input type="file" name="image">
        <input type="submit" value="Upload">
    </form>

    {% if image_path %}
    <h2>Cropped Image Preview</h2>
    <img src="{{ image_path }}" alt="Cropped Image">
    <form method="POST" action="{{ url_for('crop_and_save') }}">
        <input type="hidden" name="image_path" value="{{ image_path }}">
        <label for="x">X Coordinate: </label>
        <input type="number" name="x" required><br>
        <label for="y">Y Coordinate: </label>
        <input type="number" name="y" required><br>
        <label for="width">Width: </label>
        <input type="number" name="width" required><br>
        <label for="height">Height: </label>
        <input type="number" name="height" required><br>
        <input type="submit" value="Crop and Save">
    </form>
    <form method="POST" action="{{ url_for('move_cropped') }}">

        <input type="submit" value="Move Cropped Image">
    </form>
    {% endif %}
<br/>
                <video controls>
                    <source src="{{ video }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
        </div>
    </div>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data: Sqlite3 codeshints.txt</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <style>
        /* Your other styles here */
    </style>
</head>

<body>
    <h1>Welcome to the Data Page</h1>
    <div class="row">
        <div class="column">
            <p>This is Sqlite3 data: Choose an option below:</p>
            <ul>
                <li><a href="{{ url_for('select_by_id_form') }}">Select by ID Form</a></li>
                <li><a href="{{ url_for('search_by_rowid') }}">Search by Row ID</a></li>
                <li><a href="{{ url_for('search_database') }}">Search the Database</a></li>
                <li><a href="{{ url_for('edit_data_page') }}">Edit Data</a></li>
                <li><a href="{{ url_for('insert_data') }}">Insert Data</a></li>
                <li><a href="{{ url_for('get_rowid_form') }}">Enter Row ID to Edit</a></li>
            </ul>
        </div>




        <div class="column">
            <ul>
                <li><a href="{{ url_for('search_code') }}">Search CodeHints</a></li>
                <li><a href="{{ url_for('enter_code') }}">Make a CodeHints Entry</a></li>
            </ul>
            <a style="font-size: 24px;color: brown;" href="{{ url_for('index') }}">HOME</a><br />
            <a style="font-size: 24px;color: brown;" href="{{ url_for('run') }}">Run/Record Bash Command</a><br />
            <p>Run/Record Bash Command: Run a terminal command and save it for further use.</p>



        </div>
    </div>

</body>

</html>
-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Database Access</title>
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">

    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <h1>Database Content</h1>
    <table>
        <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Description</th>
            <th>Price</th>
        </tr>
        {% for code in code %}
        <tr>
            <td>{{ code[0] }}</td>
            <td>{{ code[1] }}</td>
            <td>{{ code[2] }}</td>
            <td>{{ code[3] }}</td>
        </tr>
        {% endfor %}
    </table>
</body>
</html>


-----index-----
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Database Search Results</title>
</head>
<body>
    <h1>Search Results</h1>
    <table border="1">
        <tr>
            <th>Row ID</th>
            <th>Description</th>
            <th>Code</th>
            <th>Keywords</th>
        </tr>
        {% for result in results %}
        <tr>
            <td>{{ result[0] }}</td>
            <td>{{ result[1] }}</td>
            <td>{{ result[2] }}</td>
            <td>{{ result[3] }}</td>
        </tr>
        {% endfor %}
    </table>
    <br>
    <a href="{{ url_for('indexdb') }}">Go back to the Index Page</a>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Delete MP4 Files</title>
</head>
<body>
    <h1>Delete MP4 Files</h1>
    <form method="POST">
        <p>Are you sure you want to delete all MP4 files?</p>
        <input type="submit" value="Delete All">
    </form>
</body>
</html>


-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Image Directory Upload and Video Generation</title>
</head>
<body>
    <h1>Upload Images from Directory and Generate Video</h1>
    <form method="POST" action="{{ url_for('zoomin.image_dir_to_video') }}" enctype="multipart/form-data">
        <label for="selected_directory">Select an image directory:</label>
        <select id="selected_directory" name="selected_directory" required>
            {% for directory in image_directories %}
                <option value="{{ directory }}">{{ directory }}</option>
            {% endfor %}
        </select>
        <input type="submit" value="Generate Video">
    </form>  
    <br /><br /><br />       

    <video width="320" height="240" controls>
        <source src="{{ url_for('static', filename=video2) }}" type="video/mp4">
    </video>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Image Directory Upload and Video Generation</title>
</head>
<body>
    <h1>Upload Images from Directory and Generate Video</h1>
    <form method="POST" action="{{ url_for('zoomin.image_dir_to_zoom') }}" enctype="multipart/form-data">
        <label for="selected_directory">Select an image directory:</label>
        <select id="selected_directory" name="selected_directory" required>
            {% for directory in image_directories %}
                <option value="{{ directory }}">{{ directory }}</option>
            {% endfor %}
        </select>
        <input type="submit" value="Generate Video">
    </form>  
    <br /><br /><br />       

    <video width="320" height="240" controls>
        <source src="{{ url_for('static', filename=video2) }}" type="video/mp4">
    </video>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Image Directory Upload and Video Generation</title>
</head>
<body>
    <h1>Upload Images from Directory and Generate Video</h1>
    <form method="POST" action="{{ url_for('image_dir_to_video') }}" enctype="multipart/form-data">
        <label for="selected_directory">Select an image directory:</label>
        <select id="selected_directory" name="selected_directory" required>
            {% for directory in image_directories %}
                <option value="{{ directory }}">{{ directory }}</option>
            {% endfor %}
        </select>
        <input type="submit" value="Generate Video">
    </form>  
<br /><br /><a href="{{ url_for('image_dir_to_zoom') }}">image_dir_to_zoom</a><br /><br />       

    <video width="320" height="240" controls>
        <source src="{{ url_for('static', filename=video2) }}" type="video/mp4">
    </video>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Image Directory Upload and Video Generation</title>
</head>
<body>
    <h1>Upload Images from Directory and Generate Video</h1>
    <form method="POST" action="{{ url_for('image_dir_to_zoom') }}" enctype="multipart/form-data">
        <label for="selected_directory">Select an image directory:</label>
        <select id="selected_directory" name="selected_directory" required>
            {% for directory in image_directories %}
                <option value="{{ directory }}">{{ directory }}</option>
            {% endfor %}
        </select>
        <input type="submit" value="Generate Video">
    </form>  
    <br /><br /><br />       

<video width="300" height="auto" controls>
        <source src="{{ url_for('static', filename=video2) }}" type="video/mp4">
    </video>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Display Data</title>
</head>
<body>
    <h1>Display Data</h1>
    {% if id_value %}
        <p>Row ID: {{ id_value }}</p>
        <p>Description: {{ description }}</p>
        <pre>Code: {{ code }}</pre>
        <p>Keywords: {{ keywords }}</p>
    {% else %}
        <p>No data found for Row ID: {{ id_value }}</p>
    {% endif %}
    <br>
    <a href="{{ url_for('indexdb') }}">Go back to the Index Page</a>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Duck Search Results</title>
</head>
<body>
    <h1>Duck Search Results</h1>
    <form method="POST" action="/duck_search">
        <label for="query">Enter a search query:</label>
        <input type="text" id="query" name="query" required>
        <button type="submit">Search</button>
    </form>

    <h2>Search Results:</h2>
    <ul>
        {% for result in results %}
            <li><a href="{{ result.link }}">{{ result.snippet }}</a></li>
        {% endfor %}
    </ul>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Duck Search</title>
</head>
<body>
    <h1>Duck Search</h1>
    <form method="POST" action="/duck_search">
        <label for="query">Enter a search query:</label>
        <input type="text" id="query" name="query" required>
        <button type="submit">Search</button>
    </form>

    {% if results %}
    <h2>Search Results:</h2>
    <ul>
        {% for result in results %}
            <li><a href="{{ result.link }}">{{ result.snippet }}</a></li>
        {% endfor %}
    </ul>
    {% endif %}
</body>
</html>



-----index-----
<!DOCTYPE html>
<html>

<head>
    <title>Edit Canvas</title>
     <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
    <style>
    video {
        margin: 10px, auto;
        width: 450px;
        height: auto;
    }
    .note{
    font-size: 24px;
    color: red;     
    }
</style>
</head>
    <body>
        <div class="wrapper">
        <div class="header">
            <h1>Edit Canvas</h1>
<p>The originals of all templates edited are saved,by date,in templates/originals/</p>
        </div>
       <a class="note" href="{{ url_for('index') }}">Return Home</a><br />
    

<div class="columns">
<div class="column">
    <form action="/edit_canvas_page" method="GET">
        <select name="filename">
            {% for filename in filenames %}
                <option value="{{ filename }}">{{ filename }}</option>
            {% endfor %}
        </select>
        <button type="submit">Edit and Save</button>
    </form>
    <hr>
    {% if selected_filename %}
        <h2>Edit {{ selected_filename }}</h2>
        <form action="/edit_canvas_save" method="POST">
            <textarea name="edited_content" rows="10" cols="50">{{ original_content }}</textarea>
            <input type="hidden" name="filename" value="{{ selected_filename }}">
            <button type="submit">Save</button>
        </form>
    {% endif %}<br /><br />
                <h3>JavaScripts Links</h3><br />
                <a href="{{ url_for('canvas') }}">First Canvas Project</a><br />
                <a href="{{ url_for('one_canvas') }}">One Canvas</a><br />
                <a href="{{ url_for('two_canvas') }}">Two Canvas</a><br />
                <a class="note" href="{{ url_for('edit_canvas') }}">Edit a Canvas HTMl</a><br />
                <a class="note" href="{{ url_for('edit_canvas') }}">Edit a Canvas JavaScript</a><br />
</div>
<div class="column">


    <h2>How to Use the Template Editor</h2>
<p>This can be viewed full screen</p>
    <video controls>
        <source src="{{ video }}" type="video/mp4">
        Your browser does not support the video tag.
    </video>
</div>
</div>    
</body>
</html>
<!-- Compare this snippet from templates/edit_text_save.html: -->
-----index-----
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Template Files</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
   <style>
   body {

    background-image: url('../static/assets/MemMaker_background.png');
    background-repeat: repeat-y;
    background-size: contain;
    background-position: top;
    font-family: Arial, sans-serif;
}
</style>
</head>
<body>

       <h1>Edit {{ selected_filename }}</h1>
    <form action="{{ url_for('edit_canvas_save') }}" method="post">
        <textarea name="edited_content" rows="40" cols="130">{{ original_content }}</textarea><br>
        <input type="hidden" name="filename" value="{{ selected_filename }}">
        <input type="submit" value="Save">
    </form>

</body>
</html>

-----index-----
<!---edit_canvas_script.html-->
<!DOCTYPE html>
<html>
<head>
    <title>Edit Canvas Script</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }
        </style>
</head>
<body>

    <input type="hidden" name="script_file" value="{{ script_file }}">

    <h1>Edit Canvas Script</h1>
    <a href="{{ url_for('index') }}">Home</a><br />
    <p>Experiment With Javascript Imagery</p>
        <form method="POST" action="{{ url_for('save_canvas_script') }}">
        <label for="script_file">Select a JavaScript file:</label>
        <select name="script_file" id="script_file">
            {% for script_file in script_files %}
                <option value="{{ script_file }}">{{ script_file }}</option>
            {% endfor %}
        </select>
        <br>
        <input type="submit" value="Load Script">
    </form>
    <hr>
    <h2>Edit the selected script:</h2>
    <form method="POST" action="{{ url_for('save_canvas_script') }}">
        <textarea name="script_content" rows="30" cols="160">{{ script_content }}</textarea>
        <input type="hidden" name="script_file" value="{{ script_file }}">
        <br>
        <input type="submit" value="Save Script">
    </form>
    
</body>
</html>

-----index-----
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Edit Code</title>
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">

    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

</head>
<body>
<div class="content">
    <div class="title m-b-md">
        Edit Code
    </div> 
<center>
{% extends 'index.html' %}

{% block title %}
    Edit code
{% endblock %}

{% block content %}
    <h1>Edit code</h1>
    <form action="{{ url_for('edit_code', code_id=code[0]) }}" method="post">
        <label for="description">Description:</label>
        <input type="text" name="description" value="{{ code[1] }}"><br>
        <label for="code">Code:</label>
        <textarea type="text" name="code" rows="3" cols="90%">{{ code[2] }}</textarea>><br />
        <!--input type="text" name="description" value="{{ code[2] }}"><br-->
        <label for="keywords">Keywords:</label>
        <input type="text" name="keywords" value="{{ code[3] }}"><br>
        <input type="submit" value="Update code">
    </form>
{% endblock %}
</center>
</div>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Edit Code</title>
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">

    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

</head>
<body>
<div class="content">
    <div class="title m-b-md">
        Edit Code
    </div> 
<center>
{% extends 'index.html' %}

{% block title %}
    Edit code
{% endblock %}

{% block content %}
    <h1>Edit code</h1>
    <form action="{{ url_for('edit_code', code_id=code[0]) }}" method="post">
        <label for="description">Description:</label>
        <input type="text" name="description" value="{{ code[1] }}"><br>
        <label for="code">Code:</label>
        <textarea type="text" name="code" rows="3" cols="90%">{{ code[2] }}</textarea>><br />
        <!--input type="text" name="description" value="{{ code[2] }}"><br-->
        <label for="keywords">Keywords:</label>
        <input type="text" name="keywords" value="{{ code[3] }}"><br>
        <input type="submit" value="Update code">
    </form>
{% endblock %}
</center>
</div>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>

<head>
    <title>Edit Css Files</title>
     <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/body.css') }}">

<body>
        <div class="wrapper">
        <div class="header">
            <h1>Edit Css Files</h1>
<li style="font-size: xx-large;"><a href="{{ url_for('edit_template_page', filename='edit_css.html') }}">Edit This Page</a>
</li>

</div>
    

<div class="columns">
<div class="column">
    <form action="/edit_css_page" method="GET">
        <select name="filename">
            {% for filename in filenames %}
                <option value="{{ filename }}">{{ filename }}</option>
            {% endfor %}
        </select>
        <button type="submit">Edit and Save</button>
    </form>
    <hr>
    {% if selected_filename %}
        <h2>Edit {{ selected_filename }}</h2>
        <form action="/edit_css_save" method="POST">
            <textarea name="edited_content" rows="10" cols="50">{{ original_content }}</textarea>
            <input type="hidden" name="filename" value="{{ selected_filename }}">
            <button type="submit">Save</button>
        </form>
    {% endif %}
 <ul>
        <li><a href="{{ url_for('mk_text') }}">Create a Text File</a></li>
        <li><a href="{{ url_for('format_file') }}">Format Text Files</a></li>
        <li><a href="{{ url_for('view_text') }}">View Text Files</a></li>
        <li><a href="{{ url_for('edit_formatted') }}">Edit Formatted Text</a></li>
        <li style="font-size: xx-large;"><a href="{{ url_for('edit_template') }}">Return to Edit Template</a></li>
        <li style="font-size: xx-large;"><a href="{{ url_for('index') }}">Return to HOME</a></li>
    </ul> 
</div>
<div class="column">
    <h2>Random Video</h2>
</div>
</div>    
</body>
</html>
<!-- Compare this snippet from templates/edit_text_save.html: -->
-----index-----
<!DOCTYPE html>
<html>

<head>
    <title>Edit Css Files</title>
     <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/body.css') }}">

<body>
        <div class="wrapper">
        <div class="header">
            <h1>Edit Css Files</h1>
<li style="font-size: xx-large;"><a href="{{ url_for('edit_template_page', filename='edit_css.html') }}">Edit This Page</a>
</li>

</div>
    

<div class="columns">
<div class="column">
    <form action="/edit_css_page" method="GET">
        <select name="filename">
            {% for filename in filenames %}
                <option value="{{ filename }}">{{ filename }}</option>
            {% endfor %}
        </select>
        <button type="submit">Edit and Save</button>
    </form>
    <hr>
    {% if selected_filename %}
        <h2>Edit {{ selected_filename }}</h2>
        <form action="/edit_css_save" method="POST">
            <textarea name="edited_content" rows="10" cols="50">{{ original_content }}</textarea>
            <input type="hidden" name="filename" value="{{ selected_filename }}">
            <button type="submit">Save</button>
        </form>
    {% endif %}
 <ul>
        <li><a href="{{ url_for('mk_text') }}">Create a Text File</a></li>
        <li><a href="{{ url_for('format_file') }}">Format Text Files</a></li>
        <li><a href="{{ url_for('view_text') }}">View Text Files</a></li>
        <li><a href="{{ url_for('edit_formatted') }}">Edit Formatted Text</a></li>
        <li style="font-size: xx-large;"><a href="{{ url_for('edit_template') }}">Return to Edit Template</a></li>
        <li style="font-size: xx-large;"><a href="{{ url_for('index') }}">Return to HOME</a></li>
    </ul> 
</div>
<div class="column">
    <h2>Random Video</h2>
</div>
</div>    
</body>
</html>
<!-- Compare this snippet from templates/edit_text_save.html: -->
-----index-----
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Template Files</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
   <style>
   body {

    background-image: url('../static/assets/MemMaker_background.png');
    background-repeat: repeat-y;
    background-size: contain;
    background-position: top;
    font-family: Arial, sans-serif;
}
</style>
</head>
<body>

       <h1>Edit {{ selected_filename }}</h1>
    <form action="{{ url_for('edit_css_save') }}" method="post">
        <textarea name="edited_content" rows="40" cols="130">{{ original_content }}</textarea><br>
        <input type="hidden" name="filename" value="{{ selected_filename }}">
        <input type="submit" value="Save">
    </form>
    <!-- link to edit_text -->
    <ul>
        <li><a href="{{ url_for('mk_text') }}">Create a Text File</a></li>
        <li><a href="{{ url_for('format_file') }}">Format Text Files</a></li>
        <li><a href="{{ url_for('view_text') }}">View Text Files</a></li>
        <li><a href="{{ url_for('edit_formatted') }}">Edit Formatted Text</a></li>
        <li style="font-size: xx-large;"><a href="{{ url_for('edit_template') }}">Return to Edit Template</a></li>
        <li style="font-size: xx-large;"><a href="{{ url_for('index') }}">Return to HOME</a></li>
    </ul> 
</body>
</html>

-----index-----
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Template Files</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
   <style>
   body {

    background-image: url('../static/assets/MemMaker_background.png');
    background-repeat: repeat-y;
    background-size: contain;
    background-position: top;
    font-family: Arial, sans-serif;
}
</style>
</head>
<body>

       <h1>Edit {{ selected_filename }}</h1>
    <form action="{{ url_for('edit_css_save') }}" method="post">
        <textarea name="edited_content" rows="40" cols="130">{{ original_content }}</textarea><br>
        <input type="hidden" name="filename" value="{{ selected_filename }}">
        <input type="submit" value="Save">
    </form>
    <!-- link to edit_text -->
    <ul>
        <li><a href="{{ url_for('mk_text') }}">Create a Text File</a></li>
        <li><a href="{{ url_for('format_file') }}">Format Text Files</a></li>
        <li><a href="{{ url_for('view_text') }}">View Text Files</a></li>
        <li><a href="{{ url_for('edit_formatted') }}">Edit Formatted Text</a></li>
        <li style="font-size: xx-large;"><a href="{{ url_for('edit_template') }}">Return to Edit Template</a></li>
        <li style="font-size: xx-large;"><a href="{{ url_for('index') }}">Return to HOME</a></li>
    </ul> 
</body>
</html>

-----index-----
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Data</title>
</head>
<body>
    <h1>Edit Data</h1>
    <form action="{{ url_for('edit_data_page', rowid=data.rowid) }}" method="post">
        <label for="description">Description:</label>
        <input type="text" name="description" id="description" value="{{ data.description }}" required>
        <br>
        <label for="code">Code:</label>
        <textarea name="code" id="code" rows="8" cols="50" required>{{ data.code }}</textarea>
        <br>
        <label for="keywords">Keywords:</label>
        <input type="text" name="keywords" id="keywords" value="{{ data.keywords }}" required>
        <br>
        <button type="submit">Save Changes</button>
    </form>
    <br>
    <a href="{{ url_for('indexdb') }}">Go back to the Index Page</a>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Data</title>
</head>
<body>
    <h1>Edit Data</h1>
    <form action="{{ url_for('edit_data_page', rowid=data.rowid) }}" method="post">
        <label for="description">Description:</label>
        <input type="text" name="description" id="description" value="{{ data.description }}" required>
        <br>
        <label for="code">Code:</label>
        <textarea name="code" id="code" rows="8" cols="50" required>{{ data.code }}</textarea>
        <br>
        <label for="keywords">Keywords:</label>
        <input type="text" name="keywords" id="keywords" value="{{ data.keywords }}" required>
        <br>
        <button type="submit">Save Changes</button>
    </form>
    <br>
    <a href="{{ url_for('indexdb') }}">Go back to the Index Page</a>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Data</title>
</head>
<body>
    <h1>Edit Data</h1>
    <form action="{{ url_for('edit_data_page', rowid=data['rowid']) }}" method="post">
        <label for="description">Description:</label>
        <input type="text" name="description" id="description" value="{{ data['description'] }}" required>
        <br>
        <label for="code">Code:</label>
        <textarea name="code" id="code" rows="8" cols="50" required>{{ data['code'] }}</textarea>
        <br>
        <label for="keywords">Keywords:</label>
        <input type="text" name="keywords" id="keywords" value="{{ data['keywords'] }}" required>
        <br>
        <button type="submit">Save Changes</button>
    </form>
    <br>
    <a href="{{ url_for('indexdb') }}">Go back to the Index Page</a>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Data</title>
</head>
<body>
    <h1>Edit Data</h1>
    <form action="{{ url_for('edit_data_page', rowid=data['rowid']) }}" method="post">
        <label for="description">Description:</label>
        <input type="text" name="description" id="description" value="{{ data['description'] }}" required>
        <br>
        <label for="code">Code:</label>
        <textarea name="code" id="code" rows="8" cols="50" required>{{ data['code'] }}</textarea>
        <br>
        <label for="keywords">Keywords:</label>
        <input type="text" name="keywords" id="keywords" value="{{ data['keywords'] }}" required>
        <br>
        <button type="submit">Save Changes</button>
    </form>
    <br>
    <a href="{{ url_for('indexdb') }}">Go back to the Index Page</a>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>

<head>
    <title>Edit a Text File</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }

        video {
            margin: 10px, auto;
            width: 250px;
            height: auto;
        }

        .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;

        }

        .header {
            width: 100%;
            padding: 20px;
            text-align: center;
        }

        .columns {
            display: flex;
            width: 80%;
            margin-top: 20px;
        }

        .column {
            padding: 20px;
            box-sizing: border-box;
        }

        .column.left {
            width: 60%;
            border: 1px solid #000;
        }

        .column.right {
            margin: 0 auto;
            /* Center horizontally */
            width: 30%;
            border: 1px solid #000;
            text-align: center;
            /* Center video vertically */
        }
    </style>
</head>

<body>
    <div class="wrapper">
        <div class="header">
            <h2>Edit a Text File</h2>
            <p>Text files located in static/text/</p>
        </div>
        <div class="columns">

            <div class="column left">

                <p>Choose a text file :</p>
                <a style="font-size: 24px;color: brown;" href="{{ url_for('index') }}">HOME</a>
                <form method="POST" action="/edit_file">
                    <select id="filename-select" name="filename" onchange="loadFileContent()">
                        {% for filename in text_files %}
                        <option value="{{ filename }}">{{ filename }}</option>
                        {% endfor %}
                    </select>
                    <br><br>
                    <textarea id="file-content" name="text" rows="10" cols="50"></textarea>
                    <br><br>
                    <input type="submit" value="Save Changes">
                </form>

                <script>
                    // Fetches the file content and updates the textarea
                    function loadFileContent() {
                        var select = document.getElementById("filename-select");
                        var textarea = document.getElementById("file-content");

                        var selectedFile = select.value;
                        if (selectedFile) {
                            fetch(`/get_file_content/${selectedFile}`)
                                .then(response => response.text())
                                .then(content => {
                                    textarea.value = content;
                                });
                        } else {
                            textarea.value = "";
                        }
                    }
                </script>
            </div>

            <div class="column right">
                <h2>Random Video</h2>
                <video controls>
                    <source src="{{ video }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
        </div>
    </div>
</body>

</html>
-----index-----
<!DOCTYPE html>
<html>

<head>
    <title>Edit a Text File</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }

        video {
            margin: 10px, auto;
            width: 250px;
            height: auto;
        }

        .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;

        }

        .header {
            width: 100%;
            padding: 20px;
            text-align: center;
        }

        .columns {
            display: flex;
            width: 80%;
            margin-top: 20px;
        }

        .column {
            padding: 20px;
            box-sizing: border-box;
        }

        .column.left {
            width: 60%;
            border: 1px solid #000;
        }

        .column.right {
            margin: 0 auto;
            /* Center horizontally */
            width: 30%;
            border: 1px solid #000;
            text-align: center;
            /* Center video vertically */
        }
    </style>
</head>

<body>
    <div class="wrapper">
        <div class="header">
            <h2>Edit a Text File</h2>
            <p>Text files located in static/text/</p>
        </div>
        <div class="columns">

            <div class="column left">

                <p>Choose a text file :</p>
                <a style="font-size: 24px;color: brown;" href="{{ url_for('index') }}">HOME</a>
                <form method="POST" action="/edit_file">
                    <select id="filename-select" name="filename" onchange="loadFileContent()">
                        {% for filename in text_files %}
                        <option value="{{ filename }}">{{ filename }}</option>
                        {% endfor %}
                    </select>
                    <br><br>
                    <textarea id="file-content" name="text" rows="10" cols="50"></textarea>
                    <br><br>
                    <input type="submit" value="Save Changes">
                </form>

                <script>
                    // Fetches the file content and updates the textarea
                    function loadFileContent() {
                        var select = document.getElementById("filename-select");
                        var textarea = document.getElementById("file-content");

                        var selectedFile = select.value;
                        if (selectedFile) {
                            fetch(`/get_file_content/${selectedFile}`)
                                .then(response => response.text())
                                .then(content => {
                                    textarea.value = content;
                                });
                        } else {
                            textarea.value = "";
                        }
                    }
                </script>
            </div>

            <div class="column right">
                <h2>Random Video</h2>
                <video controls>
                    <source src="{{ video }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
        </div>
    </div>
</body>

</html>
-----index-----
<!DOCTYPE html>
<html>

<head>
    <title>Home Flask App Builder</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }
        video {
            margin: 10px, auto;
            width: 250px;
            height: auto;
        }

          .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;

        }

        .header {
            width: 100%;
            padding: 20px;
            text-align: center;
        }

        .columns {
            display: flex;
            width: 80%;
            margin-top: 20px;
        }

        .column {
            padding: 20px;
            box-sizing: border-box;
        }

        .column.left {
            width: 30%;
            border:    1px solid #000;
        }

        .column.right {
        margin: 0 auto; /* Center horizontally */
        width: 60%;
        border: 1px solid #000;
        text-align: center; /* Center video vertically */
    }

    .column.right video {
        max-width: 100%;
        height: auto;
    }
    .note{
       color:red;
       font-size:24px;
    }
    </style>
</head>
<body>
    <div class="wrapper">
        <div class="header">
            <h1>HOME index.html</h1>
<li><a class="note" href="{{ url_for('index') }}">HOME</a></li>&nbsp;&nbsp;&nbsp;&nbsp;
<li><a class="note" href="{{ url_for('edit_template_page', filename='edit_formatted.html') }}">Edit This Page</a></li>

    <form method="POST" action="/edit_formatted">
        <select id="filename-select" name="filename" onchange="loadFileContent()">
            {% for filename in text_files %}
                <option value="{{ filename }}">{{ filename }}</option>
            {% endfor %}
        </select>
        <br><br>
        <textarea id="file-content" name="text" rows="10" cols="50"></textarea>
        <br><br>
        <input type="submit" value="Save Changes">
    </form>

    <script>
        // Fetches the file content and updates the textarea
        function loadFileContent() {
            var select = document.getElementById("filename-select");
            var textarea = document.getElementById("file-content");

            var selectedFile = select.value;
            if (selectedFile) {
                fetch(`/get_formatted_content/${selectedFile}`)
                    .then(response => response.text())
                    .then(content => {
                        textarea.value = content;
                    });
            } else {
                textarea.value = "";
            }
        }
    </script>
</div>
</div>
</body>
</html>

-----index-----
<!-- app_utilities.html-->
<!DOCTYPE html>
<html>

<head>
    <title>Edit Images And Video</title>
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
</head>

<body>
    <div class="wrapper">
        <div class="header">
            <h1>Edit Images And Video</h1>
        </div>
        <div class="columns">
            <div class="column left">
                <h3>Links</h3><br />
                <a href="{{ url_for('mk_text') }}">Create a Text File</a><br />
                <a href="{{ url_for('format_file') }}">Format Text Files</a><br />
                <a href="{{ url_for('view_text') }}">View Text Files</a><br />
                <a href="{{ url_for('edit_file') }}">Edit File</a><br />
                <a href="{{ url_for('edit_formatted') }}">Edit Formatted Text</a><br />
                <a href="{{ url_for('edit_template') }}">Edit a Template</a><br />
                <a href="{{ url_for('edit_description') }}">Edit Description</a><br />
                <a href="{{ url_for('view_flake8') }}">View Errors in App</a><br />
                <a href="{{ url_for('view_log') }}">View App Log</a><br />
                <a href="{{ url_for('capture_html') }}">Capture Screen _ Video</a><br />
                <a href="{{ url_for('edit_css') }}">Edit Css Files</a><br />
                <a href="{{ url_for('terminal_index') }}">Terminal Emulator</a><br />
            </div>
            <div class="column right">
                <h2>Random Video</h2>
                <p>This will eventually be an instruction video on how to use this page</p><br />

                <video controls>
                    <source src="{{ video }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>

            </div>
        </div>
    </div>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>

<head>
    <title>Edit Javascript and Javscript Links</title>
     <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
     <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }
  
       video {
        margin: 10px, auto;
        width: 250px;
        height: auto;
      }
     </style>
</head>
    <body>
        <div class="wrapper">
        <div class="header">
            <h1>Edit Javascript and Javscript Links</h1>
       <a style="font-size: xx-large;"href="{{ url_for('index') }}">Return to HOME</a>
<p>The originals of all templates edited are saved,by date,in templates/originals/</p>
        </div>
    

<div class="columns">
<div class="column">
    <form action="/edit_template_page" method="GET">
        <select name="filename">
            {% for filename in filenames %}
                <option value="{{ filename }}">{{ filename }}</option>
            {% endfor %}
        </select>
        <button type="submit">Edit and Save</button>
    </form>
    <hr>
    {% if selected_filename %}
        <h2>Edit {{ selected_filename }}</h2>
        <form action="/edit_template_save" method="POST">
            <textarea name="edited_content" rows="10" cols="50">{{ original_content }}</textarea>
            <input type="hidden" name="filename" value="{{ selected_filename }}">
            <button type="submit">Save</button>
        </form>
    {% endif %}
 <ul>
        <li><a href="{{ url_for('index_canvas') }}">Canvas Playground</a></li>
        <li><a href="{{ url_for('large_script') }}">Alice Javascript Demo</a></li>
        <li><a href="{{ url_for('view_text') }}">View Text Files</a></li>
        <li><a href="{{ url_for('edit_formatted') }}">Edit Formatted Text</a></li>
        <li style="font-size: xx-large;"><a href="{{ url_for('edit_template') }}">Return to Edit Template</a></li>
        
    </ul> 
</div>
<div class="column">
    <h2>Random Video</h2>
    <video controls>
        <source src="{{ video }}" type="video/mp4">
        Your browser does not support the video tag.
    </video>
</div>
</div>    
</body>
</html>
<!-- Compare this snippet from templates/edit_text_save.html: -->
-----index-----
{% extends 'base1.html' %}

{% block title %}
    Edit Product
{% endblock %}

{% block content %}
    <h1>Edit Product</h1>
    <form action="{{ url_for('edit_product', product_id=product[0]) }}" method="post">
        <label for="name">Name:</label>
        <input type="text" name="name" value="{{ product[1] }}"><br>
        <label for="description">Description:</label>
        <input type="text" name="description" value="{{ product[2] }}"><br>
        <label for="price">Price:</label>
        <input type="text" name="price" value="{{ product[3] }}"><br>
        <input type="submit" value="Update Product">
    </form>
{% endblock %}

-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Edit Script</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }
        </style>
</head>
<body>
    <h1>Edit JavaScript</h1>
    <a href="{{ url_for('index') }}">Home</a><br />
    <p>Experiment With Javascript Imagery</p>
        <form method="POST" action="{{ url_for('edit_script') }}">
        <label for="script_file">Select a JavaScript file:</label>
        <select name="script_file" id="script_file">
            {% for script_file in script_files %}
                <option value="{{ script_file }}">{{ script_file }}</option>
            {% endfor %}
        </select>
        <br>
        <input type="submit" value="Load Script">
    </form>
    <hr>
    <h2>Edit the selected script:</h2>
    <form method="POST" action="{{ url_for('save_script') }}">
        <textarea name="script_content" rows="30" cols="160">{{ script_content }}</textarea>
        <br>
        <input type="submit" value="Save Script">
    </form>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Script Editor</title>
</head>
<body>
    <h1>Script Editor</h1>
    <form action="/save_script" method="POST">
        <textarea name="script_content" rows="10" cols="50">{{ script_content }}</textarea>
        <br>
        <input type="submit" value="Save Script">
    </form>
</body>
</html>


-----index-----
<!DOCTYPE html>
<html>

<head>
    <title>Edit Template</title>
     <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/body.css') }}">

</head>
    <body>
        <div class="wrapper">
        <div class="header">
            <h1>Edit Template Files</h1>
       <a style="font-size: xx-large;"href="{{ url_for('index') }}">Return to HOME</a>
<p>The originals of all templates edited are saved,by date,in templates/originals/</p>
        </div>
    

<div class="columns">
<div class="column left">
    <form action="/edit_template_page" method="GET">
        <select name="filename">
            {% for filename in filenames %}
                <option value="{{ filename }}">{{ filename }}</option>
            {% endfor %}
        </select>
        <button type="submit">Edit and Save</button>
    </form>
    <hr>
    {% if selected_filename %}
        <h2>Edit {{ selected_filename }}</h2>
        <form action="/edit_template_save" method="POST">
            <textarea name="edited_content">{{ original_content }}</textarea>
            <input type="hidden" name="filename" value="{{ selected_filename }}">
            <button type="submit">Save</button>
        </form>
    {% endif %}
 <ul>
        
<li><a class="note" href="{{ url_for('edit_template_page', filename='edit_template.html') }}">Edit This Page</a></li>

<li><a href="{{ url_for('edit_css') }}">Edit CSS Files</a></li> 
        
    </ul> 
</div>
<div class="column right">
<p>Special Video chosen for this page.</p>
    <video controls>
        <source src="{{ video }}" type="video/mp4">
        Your browser does not support the video tag.
    </video>
</div>
</div>    
</body>
</html>
<!-- Compare this snippet from templates/edit_text_save.html: -->

-----index-----
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Template Files</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/body.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">

</head>
<body>

       <h1>Edit {{ selected_filename }}</h1>
    <form action="{{ url_for('edit_template_save') }}" method="post">
        <textarea name="edited_content">{{ original_content }}</textarea><br>
        <input type="hidden" name="filename" value="{{ selected_filename }}">
        <input type="submit" value="Save">
    </form>
    <!-- link to edit_text -->
    <ul>
        <li><a href="{{ url_for('mk_text') }}">Create a Text File</a></li>
        <li><a href="{{ url_for('format_file') }}">Format Text Files</a></li>
        <li><a href="{{ url_for('view_text') }}">View Text Files</a></li>
        <li><a href="{{ url_for('edit_formatted') }}">Edit Formatted Text</a></li>
        <li style="font-size: xx-large;"><a href="{{ url_for('edit_template') }}">Return to Edit Template</a></li>
        <li style="font-size: xx-large;"><a href="{{ url_for('index') }}">Return to HOME</a></li>
    </ul> 
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Edit Text</title>
</head>
<body>
    <h1>Edit Text Files</h1>
    <form action="/edit_text_page" method="GET">
        <select name="filename">
            {% for filename in filenames %}
                <option value="{{ filename }}">{{ filename }}</option>
            {% endfor %}
        </select>
        <button type="submit">Edit and Save</button>
    </form>
    <hr>
    {% if selected_filename %}
        <h2>Edit {{ selected_filename }}</h2>
        <form action="/edit_text_save" method="POST">
            <textarea name="edited_content" rows="10" cols="50">{{ original_content }}</textarea>
            <input type="hidden" name="filename" value="{{ selected_filename }}">
            <button type="submit">Save</button>
        </form>
    {% endif %}
</body>
</html>
<!-- Compare this snippet from templates/edit_text_save.html: -->
-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Edit Text</title>
</head>
<body>
    <h1>Edit Text Files</h1>
    <form action="/edit_text_page" method="GET">
        <select name="filename">
            {% for filename in filenames %}
                <option value="{{ filename }}">{{ filename }}</option>
            {% endfor %}
        </select>
        <button type="submit">Edit and Save</button>
    </form>
    <hr>
    {% if selected_filename %}
        <h2>Edit {{ selected_filename }}</h2>
        <form action="/edit_text_save" method="POST">
            <textarea name="edited_content" rows="10" cols="50">{{ original_content }}</textarea>
            <input type="hidden" name="filename" value="{{ selected_filename }}">
            <button type="submit">Save</button>
        </form>
    {% endif %}
</body>
</html>
<!-- Compare this snippet from templates/edit_text_save.html: -->
-----index-----
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Text File</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
   <style>
   body {

    background-image: url('../static/assets/MemMaker_background.png');
    background-repeat: repeat-y;
    background-size: contain;
    background-position: top;
    font-family: Arial, sans-serif;
}
</style>
</head>
<body>
    <!-- link to edit_text -->
    <ul>
        <li><a href="{{ url_for('mk_text') }}">Create a Text File</a></li>
        <li><a href="{{ url_for('format_file') }}">Format Text Files</a></li>
        <li><a href="{{ url_for('view_text') }}">View Text Files</a></li>
        <li><a href="{{ url_for('edit_formatted') }}">Edit Formatted Text</a></li>
        <li style="font-size: xx-large;"><a href="{{ url_for('edit_text') }}">Return to Edit Text</a></li>
    </ul> 
       <h1>Edit {{ selected_filename }}</h1>
    <form action="{{ url_for('edit_text_save') }}" method="post">
        <textarea name="edited_content" rows="10" cols="50">{{ original_content }}</textarea><br>
        <input type="hidden" name="filename" value="{{ selected_filename }}">
        <input type="submit" value="Save">
    </form>
</body>
</html>

-----index-----
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Text File</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
   <style>
   body {

    background-image: url('../static/assets/MemMaker_background.png');
    background-repeat: repeat-y;
    background-size: contain;
    background-position: top;
    font-family: Arial, sans-serif;
}
</style>
</head>
<body>
    <!-- link to edit_text -->
    <ul>
        <li><a href="{{ url_for('mk_text') }}">Create a Text File</a></li>
        <li><a href="{{ url_for('format_file') }}">Format Text Files</a></li>
        <li><a href="{{ url_for('view_text') }}">View Text Files</a></li>
        <li><a href="{{ url_for('edit_formatted') }}">Edit Formatted Text</a></li>
        <li style="font-size: xx-large;"><a href="{{ url_for('edit_text') }}">Return to Edit Text</a></li>
    </ul> 
       <h1>Edit {{ selected_filename }}</h1>
    <form action="{{ url_for('edit_text_save') }}" method="post">
        <textarea name="edited_content" rows="10" cols="50">{{ original_content }}</textarea><br>
        <input type="hidden" name="filename" value="{{ selected_filename }}">
        <input type="submit" value="Save">
    </form>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>

<head>
  <title>My Flask App</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: Arial, sans-serif;
    }

    body {
      background-image: url('../static/assets/MemMaker_background.png');
      background-repeat: repeat-y;
      background-size: cover; /* Use 'cover' to make the image cover the entire body */
      background-position: top;
    }

    form {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 98vh; /* 85% of the viewport height */
    }

    textarea {
      margin-top: 20px;
      width: 95%;
      height: 100%;
      background-color: azure;
      font-size: 18px;
      border: #000000 1px solid;
      padding: 10px;
      box-sizing: border-box;
    }

    input[type="submit"] {
      margin-top: 5px;
    }
  </style>
</head>

<body>
  <form action="/save_description" method="POST">
    <textarea name="description">{{ description }}</textarea>
    <br>
    <input type="submit" value="Save"><a href="{{ url_for('index') }}">HOME</a><br />
  </form>
</body>

</html>

-----index-----
<!--enter_data.html Template:-->
<!DOCTYPE html>
<html>
<head>
    <title>Enter Code Snippets</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
</head>
<body>
    <h2>Data Entry</h2>
    <p>{{ formatted_datetime }}</p>
    <form method="POST">
        <textarea name="code_block" rows="10" cols="60"></textarea><br><br>
        <input type="submit" value="Submit">
    </form>

    <ul>
        <li><a href="{{ url_for('search_code') }}">Search CodeHints</a></li>
        <li><a href="{{ url_for('enter_code') }}">Make a CodeHints Entry</a></li>
    </ul>
    <a style="font-size: 24px;color: brown;" href="{{ url_for('index') }}">HOME</a>
</body>
</html>
-----index-----
<!DOCTYPE html>
<html>
<head>
  <title>Error</title>
</head>
<body>
  <h1>Error</h1>
  <p>{{ message }}</p>
</body>
</html>

-----index-----
<!-- index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Execute Bash Script</title>
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">

    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">

</head>
<body>
    <h1>Execute Bash Script</h1>
    <form action="/execute" method="POST">
        <textarea name="script" rows="12" cols="120"></textarea>
        <br>
        <input type="submit" value="Execute">
    </form>
<h1>Example Script: </h1>
 <p>ffmpeg -framerate 5 -i /home/jack/Desktop/StoryMaker/static/mushrom/%05d.png -c:v libx265 -r 20 -pix_fmt yuv420p -y /home/jack/Desktop/StoryMaker/static/mushrom/flask-images2.mp4</p>
 <p> mkdir -p /home/jack/Desktop/StoryMaker/static/scripts/back && cp /home/jack/Desktop/StoryMaker/static/scripts/*.* /home/jack/Desktop/StoryMaker/static/scripts/back && ls /home/jack/Desktop/StoryMaker/static/scripts/back
 </p>   
</body>
</html>


-----index-----
<!-- index.html-->
<!DOCTYPE html>
<html>

<head>
    <title>Fade_Index</title>
    <style>
        html,body {margin: 0;padding: 1%; height: 100%;font-family: Arial, sans-serif;}

        body {background-image: url('../static/assets/MemMaker_background.png');background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }
        video {margin: 10px, auto;
            width: 250px;
            height: auto;}

          .wrapper {display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;}

        .header {width: 100%;
            padding: 20px;
            text-align: center;}

        .columns {display: flex;
            width: 80%;
            margin-top: 20px;}

        .column { padding: 20px;
            box-sizing: border-box;}

        .column.left {
            width: 60%;
            border:    1px solid #000;}

        .column.right {
        margin: 0 auto; /* Center horizontally */
        width: 30%;
        border: 1px solid #000;
        text-align: center; /* Center video vertically */}

    .column.right video {
        max-width: 100%;
        height: auto;}
    .note{color:red;font-size:24px;}   
    </style>
</head>
<body>
    <div class="wrapper">
        <div class="header">
            <h1>fade_index.html</h1>
            <a href="{{ url_for('index') }}">HOME</a><br />
<li><a class="note" href="{{ url_for('edit_template_page', filename='fade_index.html') }}">Edit This Page</a></li>

        </div>
        <div class="columns">
            <div class="column left">
    <h1>Create Video with Fade Transitions</h1>
    <form method="POST" action="{{ url_for('generate_videoz') }}">
        <label for="selected_directory">Select an image directory:</label>
        <select id="selected_directory" name="selected_directory" required>
            {% for directory in image_directories %}
                <option value="{{ directory }}">{{ directory }}</option>
            {% endfor %}
        </select>
        <input type="submit" value="Generate Video">
    </form>  <br /><br /><br />       <video width="320" height="240" controls>
        <source src="{{ url_for('static', filename=video2) }}" type="video/mp4">
        Your browser does not support the video tag.
            </div>
            <div class="column right">
                <h2>Generated Video:</h2>
                <p>With Frame</p>
       
                </video>&nbsp;&nbsp;&nbsp;&nbsp;

                <video width="320" height="240" controls>
                    <source src="{{ url_for('static', filename=video) }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
  
</body>
</html>


-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Feathered Images</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }
        </style>
</head>
<body>
    <h1>Select a directory:</h1>
    <a href="{{ url_for('index') }}">HOME</a><br /><br />
    <form method="post">
        <select name="directories" multiple>
            {% for directory in directories %}
                <option value="{{ directory }}">{{ directory }}</option>
            {% endfor %}
        </select>
        <button type="submit">Select Directory</button>
    </form>
    
    {% if selected_directory %}
        <h1>Select an image from '{{ selected_directory }}':</h1>
        <form method="post">
            <input type="hidden" name="selected_directory" value="{{ selected_directory }}">
            <select name="image">
                {% for image in images %}
                    <option value="{{ image }}">{{ image }}</option>
                {% endfor %}
            </select>
            <button type="submit">Feather Image</button>
        </form>
    {% endif %}
    
    {% if feathered_image_path %}
        <h2>Feathered Image:</h2>
        <img src="{{ feathered_image_path }}" alt="Feathered Image">
    {% endif %}
</body>
</html>

-----index-----
<!-- index.html-->
<!DOCTYPE html>
<html>

<head>
    <title>Home Flask App Builder</title>
    <title>Edit Template</title>
     <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/body.css') }}">
  
</head> 

<body>
    <div class="wrapper">
        <div class="header">
            <h1 style = color:darkgreen;" >HOME index.html</h1>
            <a class="note" href="{{ url_for('edit_template_page', filename='ffmpeg_commands.html') }}">Edit This Page</a></li><br />
        </div>
        <div class="columns">
            <div class="column left">
                <h3>Links</h3>
                
                <a href="{{ url_for('edit_template') }}">Edit Links Listed Below</a><br />
                <a href="{{ url_for('mkblend_video') }}">mkblend_video</a>

            </div>
            <div class="column right">
                <h2>Random Video</h2>
                <video controls>
                    <source src="{{ video }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
        </div>
    </div>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Numeric Input</title>
</head>
<body>
    <h1>Enter a Number</h1>
    <form method="POST" action="/">
        <label for="number">Number:</label>
        <input type="number" id="number" name="number" min="0" step="1">
        <br>
        <input type="submit" value="Submit">
    </form>
</body>
</html>


-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Final Video</title>
</head>
<body>
    <video width="512" height="512" controls>
        <source src="{{ url_for('static', filename=video_file) }}" type="video/mp4">
    </video><br />
    <span>File Location: static/alice/Final_End.mp4</span>
</body>
</html>


-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Final Video</title>
</head>
<body><center>
    <h1>Final Video</h1>
    <a href="{{ url_for('index') }}">HOME</a><br />
    <video width="512" height="512" controls>
        <source src="{{ url_for('static', filename=video_filez) }}" type="video/mp4">
    </video>
    <br />
</center>
</body>
</html>


-----index-----
<!DOCTYPE html>
<html>
  <head>
    <title>Final Image</title>
<style>
.note{
color:red;
font-size:24px;
}
</style>
  </head>
  <body>
    <h1>Final Image</h1>
<a class="note" href="{{ url_for('edit_template_page', filename='final_image.html') }}">Edit This Page</a>&nbsp;&nbsp; |&nbsp;&nbsp;<a class="note" href="{{ url_for('crop') }}">Crop Images</a>&nbsp;&nbsp; |&nbsp;&nbsp;<a class="note" href="{{ url_for('crop') }}">Crop an Image</a> |&nbsp;&nbsp;<a class="note" href="{{ url_for('index') }}">Home</a>

    <p>{{ message }}</p>
    <img src="{{ url_for('static', filename='final_images/'+final_image) }}" alt="{{ final_image }}">
  </body>
</html>
-----index-----
<!DOCTYPE html>
<html>

<head>
    <title>Final Lipsync Video</title>
</head>

<body>
    <h1>Final Lipsync Video</h1>
    <video controls autoplay>
        <source src="{{ video }}" type="video/mp4">
        Your browser does not support the video tag.
    </video>


    <hr>
    <video controls>
        <source src="{{ url_for('static', filename='result_voice-0.mp4') }}" type="video/mp4">
        Your browser does not support the video tag.
    </video>
</body>

</html>



</body>

</html>
-----index-----
<html>
<head>
      <title>Fish Kiss a Javascript Game</title>
          <meta charset="utf-8">
          <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
          <script type="text/javascript" src="static/fish/jquery-3.1.0.min.js"></script>
          <script type="text/javascript" src="static/fish/fish.js"></script>
          <meta name="viewport" content="width=device-width, user-scalable=no">
          <link rel="stylesheet" type="text/css" href="static/fish/style.css">
      
</head>
<body onload="docReady()" onkeydown="" onkeyup="" tempAlert();>
  <div class="buttonBoxL">
          <div class="clickableL" style="margin-top:50px;" onclick="leftArrowPressed()"><img src="static/fish/L.png"></div>
          <div class="clickableL" style="margin-top:30px;" onclick="leftFastPressed()"><img src="static/fish/FL.png"></div>
          <div class="clickableL" style="margin-top:30px;" onclick="downArrowPressed()"><img src="static/fish/D.png"></div>
          <div class="clickableL" style="margin-top:30px;" onclick="downFastPressed()"><img src="static/fish/FD.png"></div>
  </div>
  <div id="currentnote" style="width:30px;height:19px;background-color:lightgray;border:1px solid gray;text-align:center;font-size:90%;float:left;margin-left:5px;"></div>&nbsp;&nbsp;<input type="button" id="emptyStorage" value="Reset Score" style="float:left;"/>
  <p id="left" style="position:absolute;left:80; top:20;">Location of Left Fish</p>
  <p id="right" style="position:absolute;left:80; top:40;">Location of Right Fish</p> 
  <div class="buttonBoxR">
        <div class="clickableR" style="margin-top:30px;" onclick="rightArrowPressed()"><img src="static/fish/R.png"></div>
        <div class="clickableR" style="margin-top:30px;" onclick="rightFastPressed()"><img src="static/fish/FR.png"></div>
        <div class="clickableR" style="margin-top:30px;" onclick="upArrowPressed()"><img src="static/fish/U.png"></div>
        <div class="clickableR" style="margin-top:30px;" onclick="upFastPressed()"><img src="static/fish/FU.png"></div>
  </div>
  <button onclick="myFunction()">Reload Page</button>
  <div class="frame">
    <div class="ani-screen">
          <div class='c'><img src="static/fish/bug4.png" style="width:15px;height:30px;"></div>
              <img id="myraright" class="dragme" style="position:absolute;left:99; top:247;width: 26px; height: 20px;" src="static/fish/bug3.png" alt="">
              <img id="image1" src="static/fish/perfect-fish.png" style="position:absolute;left:700; top:250;" height="310" width="350">
              <img class="d" style="position:absolute;left:99; top:247;width: 140px; height: 80px;" src="static/fish/eater.png" alt="">
          <div style ="margin-right:70%;width:35%;height:50px;">
              <div id="floater" class='b'><img src="static/fish/myraright.png" style="width:200px;height:155px;"></div>
         </div>
         <div style ="margin-left:70%;width:35%;height:50px;">
              <div class='a'><img src="static/fish/Brightjelly2.png" style="width:120px;height:200px;"></div>
        </div>
  </div>
</div>
</body>
</html>
-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Log Viewer</title>

    <style>
        pre {
            white-space: pre-wrap;
        }
    </style>


</head>
<body>
    <pre>{{ flake_content }}</pre>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Flask Info</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
    <style>
        body {
            background-color: #fff;
            color: #000;
            font-family: Arial, sans-serif;
            font-size: 16px;
            line-height: 1.5;
            margin: 0;
            padding: 0;
        }
    </style>
    <link rel="stylesheet" type="text/css" href="../static/css/style.css">
</head>

<body>

  <video width="640" height="480" controls>
    <source src="{{ url_for('static', filename='videos/results/result_voice.mp4') }}" type="video/mp4">
    Your browser does not support the video tag.
  </video>
    <code>
        conda deactivate
        source ./venv/bin/activate
    </code>



</body>

</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
</head>
<body>
    <form action="/format_file" method="post">
        <select name="filename">
            {% for file_option in file_options %}
            <option value="{{ file_option }}">{{ file_option }}</option>
            {% endfor %}
        </select>
        <input type="submit" value="Format">
    </form>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
  <head>
    <title>Format Text</title>
  </head>
  <body>
    <h1>Format Text</h1>
    <form method="POST" action="/format_text" enctype="multipart/form-data">
      <input type="file" name="input_file">
      <input type="submit" value="Format">
    </form>
  </body>
</html>

-----index-----
<!DOCTYPE html>
<html>
  <head>
    <title>Formatted Text</title>
  </head>
  <body>
    <h1>Formatted Text</h1>
    <pre>{{ formatted_text }}</pre>
  </body>
</html>

-----index-----
<!DOCTYPE html>
<html>

<head>
    <title>Choose Image Directory</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }
        video {
            margin: 10px, auto;
            width: 250px;
            height: auto;
        }

          .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;}
</style>

</head>
<body>
  <h1>Choose an Image Directory:</h1>
  <p style="font-size: 24px;">Select a directory to generate a gallery:</p>
  <!-- link to index -->
  <a style='font-size: 24px;color: brown;' href="{{ url_for('index') }}">HOME</a></br/></br/>
  <form action="/gallery" method="POST">
    <select name="directory">
      {% for directory in directories %}
        <option value="{{ directory }}">{{ directory }}</option>
      {% endfor %}
    </select>
    <input type="submit" value="Generate Gallery">
  </form>
</body>
</html>

-----index-----
    <!DOCTYPE html>
    <html>
    <head>
        <title>Generated Video Path</title>
    </head>
    <body>
        <h1>Generated Video Path</h1>
        <form method="POST" action="/generate_blank_video" enctype="multipart/form-data">
            <label for="selected_video">Select Video:</label>
            <input type="file" name="selected_video" id="selected_video">
            <br><br>
            <input type="submit" value="Generate and Overlay">
        </form>
        
        <br><br>
        {% if step2_path %}
            <p>Output Path: {{ step2_path }}</p>
            <video width="50%" controls>
                <source src="{{ step2_path }}" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        {% else %}
            <p>No video generated.</p>
        {% endif %}
    </body>
    </html>
 
-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Generate Video</title>
</head>
<body>
    <h1>Generate Video</h1>
    <form method="POST" enctype="multipart/form-data" action="/generate_vid">
        <label for="audio">Upload Audio:</label>
        <input type="file" id="audio" name="audio" accept=".wav" directory="sample_data">
        <br>
        <label for="image">Upload Image:</label>
        <input type="file" id="image" name="image" accept=".jpg,.jpeg,.png" directory="static/images/uploads">
        <br>
        <input type="submit" value="Generate">
    </form>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Generate Video</title>
</head>
<body>
    <h1>Generate Video</h1>
    <a href="{{ url_for('index') }}">Home</a>
    
    <form action="/generate_video" method="POST">

  <video width="300" height="auto" controls>
            <source src="static/TEMP.mp4" type="video/mp4">
        </video>
        <audio controls>
            <source src="static/TEMP.mp3" type="audio/mpeg">
            Your browser does not support the audio element.
        </audio>
        <input type="submit" value="Generate Video">
    </form>
    
    {% if video_path %}
        <h2>Generated Video:</h2>
        <video width="640" height="480" controls>
            <source src="{{ video_path }}" type="video/mp4">
        </video>
    {% endif %}

    <h1>Run Command</h1>
<p>After all the above steps are completed you see voice 'Speaking_Video' below this line.<br />
    it is not lipsynced yet. press Run_Command to lipsyc the the video you see . <br />
    The video is located here: static/final_video.mp4</p>
    <video width="200" height="auto" controls>
        <source src="static/final_video.mp4" type="video/mp4">
    </video><br />
    <span >MakeVideo</span>
    <button onclick="runCommand()">Run_Command</button>

    <script>
        function runCommand() {
            $.ajax({
                type: "GET",
                url: "/run_command",
                success: function(response) {
                    console.log(response);
                },
                error: function(xhr, status, error) {
                    console.error(error);
                }
            });
        }
    </script>

</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
  <head>
    <title>Generated Video</title>
  </head>
  <body>
    <h1>Generated Video</h1>
    <a href="{{ url_for('index') }}">Home</a><br />
    <p>Video path: {{ video_path }}</p>
    <video width="512" height="768" controls>
      <source src="{{ video_url }}" type="video/mp4">
      Your browser does not support the video tag.
    </video>
  </body>
</html>

-----index-----
<!DOCTYPE html>
<html>
  <head>
    <title>Generated Video</title>
  </head>
  <body>
    <h1>Generated Video</h1>
    <a href="{{ url_for('index') }}">Home</a><br />
    <form action="{{ url_for('generate_video3') }}" method="POST" enctype="multipart/form-data">
      <label for="file">File:</label>
      <input type="file" id="file" name="file" webkitdirectory mozdirectory>
      <button type="submit">Generate Video</button>
    </form>
    {% if error_message %}
    <p>Error: {{ error_message }}</p>
    {% endif %}
    {% if video_url %}
    <p>Video path: {{ video_path }}</p>
    <video width="512" height="768" controls>
      <source src="{{ video_url }}" type="video/mp4">
      Your browser does not support the video tag.
    </video>
    {% endif %}
  </body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Generate Video</title>
</head>
<body>
    <h1>Generate Video</h1>
    <form method="POST" enctype="multipart/form-data" action="/generate_vid">
        <label for="audio">Upload Audio:</label>
        <input type="file" id="audio" name="audio" accept=".mp3" directory="static/audio_mp3">
        <br>
        <label for="image">Upload Image:</label>
        <input type="file" id="image" name="image" accept=".jpg,.jpeg,.png" directory="static/images/uploads">
        <br>
        <input type="submit" value="Generate">
    </form>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Generate Video</title>
</head>
<body>
    <h1>Generate Video</h1>
    <form method="POST" enctype="multipart/form-data" action="/generate_video">
        <label for="audio">Upload Audio:</label>
        <input type="file" id="audio" name="audio">
        <br>
        <input type="submit" value="Generate">
    </form>
</body>
</html>


-----index-----
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"
          integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

</head>
<body>
<div class="container">

    <div class="row">

        <div class="col-lg-12">
            <h1 class="page-header">Thumbnail Gallery</h1>
        </div>
        {{image_names}}
        <hr>
        {% for image_name in image_names %}
        <div class="col-lg-3 col-md-4 col-xs-6 thumb">
            <img class="img-responsive" src=" {{url_for('send_image', filename=image_name)}}">
            
        </div>
        {% endfor %}
    </div>
</div>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"
        integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS"
        crossorigin="anonymous"></script>

</body>
</html>

-----index-----
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enter Row ID</title>
</head>
<body>
    <h1>Enter Row ID</h1>
    <form action="{{ url_for('get_rowid_form') }}" method="post">
        <label for="rowid">Row ID:</label>
        <input type="number" name="rowid" id="rowid" required>
        <br>
        <button type="submit">Edit Row</button>
    </form>
    <br>
    <a href="{{ url_for('indexdb') }}">Go back to the Index Page</a>
</body>
</html>

-----index-----
 <pre>
 HTML5 Canvas Cheat Sheet

This cheat sheet summarizes the complete HTML5 Canvas API for the 2D context, based on to the W3C HTML5 Canvas Spec. It also provides techniques for handling common proceedures.

    HTML5 Canvas Element
    Html5 canvas element

    <canvas id="myCanvas" width="500" height="300">

    Html5 canvas element with fallback content

    <canvas id="myCanvas" width="500" height="300">
      your browser doesn't support canvas!
    </canvas>

    2d context

    var context = canvas.getContext('2d');

    Webgl context (3d)

    var context = canvas.getContext('webgl');

    Shapes
    Draw rectangle

    context.rect(x, y, width, height);
    context.fill();
    context.stroke();

    Fill rectangle shorthand

    context.fillRect(x, y, width, height);

    Stroke rectangle shorthand

    context.strokeRect(x, y, width, height);

    Draw circle

    context.arc(x, y, radius, 0, Math.PI * 2);
    context.fill();
    context.stroke();

    Styles
    Fill

    context.fillStyle = 'red';
    context.fill();

    Stroke

    context.strokeStyle = 'red';
    context.stroke();

    Linear gradient

    var grd = context.createLinearGradient(x1, y1, x2, y2);
    grd.addColorStop(0, 'red');   
    grd.addColorStop(1, 'blue');
    context.fillStyle = grd;
    context.fill();

    Radial gradient

    var grd = context.createRadialGradient(x1, y1, radius1, x2, y2, radius2);
    grd.addColorStop(0, 'red');
    grd.addColorStop(1, 'blue');
    context.fillStyle = grd;
    context.fill();

    Pattern

    var imageObj = new Image();
    imageObj.onload = function() {
      var pattern = context.createPattern(imageObj, 'repeat');
      context.fillStyle = pattern;
      context.fill();
    };
    imageObj.src = 'path/to/my/image.jpg';

    Line Join

    context.lineJoin = 'miter|round|bevel';

    Line Cap

    context.lineCap = 'butt|round|square';

    Shadow

    context.shadowColor = 'black';
    context.shadowBlur = 20;
    context.shadowOffsetX = 10;
    context.shadowOffsetY = 10;

    Alpha (Opacity)

    context.globalAlpha = 0.5; // between 0 and 1

    Color Formats
    String

    context.fillStyle = 'red';

    Hex Long

    context.fillStyle = '#ff0000';

    Hex Short

    context.fillStyle = '#f00';

    RGB

    context.fillStyle = 'rgb(255,0,0)';

    RGBA

    context.fillStyle = 'rgba(255,0,0,1)';

    Paths
    Begin Path

    context.beginPath();

    Line

    context.lineTo(x, y);

    Arc

    context.arc(x, y, radius, startAngle, endAngle, counterClockwise);

    Quadratic curve

    context.quadraticCurveTo(cx, cy, x, y);

    Bezier curve

    context.bezierCurveTo(cx1, cy1, cx2, cy2, x, y);

    Close Path

    context.closePath();

    Images
    Draw Image with default size

    var imageObj = new Image();
    imageObj.onload = function() {
      context.drawImage(imageObj, x, y);
    };
    imageObj.src = 'path/to/my/image.jpg';

    Draw image and set size

    var imageObj = new Image();
    imageObj.onload = function() {
      context.drawImage(imageObj, x, y, width, height);
    };
    imageObj.src = 'path/to/my/image.jpg';

    Crop image

    var imageObj = new Image();
    imageObj.onload = function() {
      context.drawImage(imageObj, sx, sy, sw, sh, dx, dy, dw, dh);
    };
    imageObj.src = 'path/to/my/image.jpg';

    Text
    Fill Text

    context.font = '40px Arial';
    context.fillStyle = 'red';
    context.fillText('Hello World!', x, y);

    Stroke Text

    context.font = '40pt Arial';
    context.strokeStyle = 'red';
    context.strokeText('Hello World!', x, y);

    Bold Text

    context.font = 'bold 40px Arial';

    Italic Text

    context.font = 'italic 40px Arial';

    Text Align

    context.textAlign = 'start|end|left|center|right';

    Text Baseline

    context.textBaseline = 'top|hanging|middle|alphabetic|ideographic
    |bottom';

    Get Text Width

    var width = context.measureText('Hello world').width;

    Transforms
    Translate

    context.translate(x, y);

    Scale

    context.scale(x, y);

    Rotate

    context.rotate(radians);

    Flip Horizontally

    context.scale(-1, 1);

    Flip Vertically

    context.scale(1, -1);

    Custom Transform

    context.transform(a, b, c, d ,e, f);

    Set Transform

    context.setTransform(a, b, c, d ,e, f);

    Shear

    context.transform(1, sy, sx, 1, 0, 0);

    Reset

    context.setTransform(1, 0, 0, 1, 0, 0);

    State Stack
    Push State onto Stack

    context.save();

    Pop State off of Stack

    context.restore();

    Clipping
    Clip

    // draw path here
    context.clip();

    Image Data
    Get Image Data

    var imageData = context.getImageData(x, y, width, height);
    var data = imageData.data;

    Loop Through Image Pixels

    var imageData = context.getImageData(x, y, width, height);
    var data = imageData.data;
    var len = data.length;
    var i, red, green, blue, alpha;

    for(i = 0; i < len; i += 4) {
      red = data[i];
      green = data[i + 1];
      blue = data[i + 2];
      alpha = data[i + 3];
    }

    Loop Through Image Pixels With Coordinates

    var imageData = context.getImageData(x, y, width, height);
    var data = imageData.data;
    var x, y, red, green, blue, alpha;

    for(y = 0; y < imageHeight; y++) {
      for(x = 0; x < imageWidth; x++) {
        red = data[((imageWidth * y) + x) * 4];
        green = data[((imageWidth * y) + x) * 4 + 1];
        blue = data[((imageWidth * y) + x) * 4 + 2];
        alpha = data[((imageWidth * y) + x) * 4 + 3];
      }
    }

    Set Image Data

    context.putImageData(imageData, x, y);

    Data URLs
    Get Data URL

    var dataURL = canvas.toDataURL();

    Render Canvas with Data URL

    var imageObj = new Image();
    imageObj.onload = function() {
      context.drawImage(imageObj, 0, 0);
    };

    imageObj.src = dataURL;

    Composites
    Composite Operations

    context.globalCompositeOperation = 'source-atop|source-in|source-out|source-over|destination-atop|destination-in|destination-out|destination-over|lighter|xor|copy';

</pre>

-----index-----
<!-- index.html-->
<!DOCTYPE html>
<html>

<head>
    <title>html Base</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }
        video {
            margin: 10px, auto;
            width: 250px;
            height: auto;
        }

          .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;

        }

        .header {
            width: 100%;
            padding: 20px;
            text-align: center;
        }

        .columns {
            display: flex;
            width: 80%;
            margin-top: 20px;
        }

        .column {
            padding: 20px;
            box-sizing: border-box;
        }

        .column.left {
            width: 30%;
            border:    1px solid #000;
        }

        .column.right {
        margin: 0 auto; /* Center horizontally */
        width: 60%;
        border: 1px solid #000;
        text-align: center; /* Center video vertically */
    }

    .column.right video {
        max-width: 100%;
        height: auto;
    }
    .note{
       color:red;
       font-size:24px;
    }
    </style>
</head>
<body>
    <div class="wrapper">
        <div class="header">
            <h1>HTML base</h1>
        </div>
        <div class="columns">


<pre {{ preformatted_text|safe }}>
&lt;!-- index.html--&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;

&lt;head&gt;
    &lt;title&gt;Home Flask App Builder&lt;/title&gt;
    &lt;style&gt;
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }
        video {
            margin: 10px, auto;
            width: 250px;
            height: auto;
        }

          .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;

        }

        .header {
            width: 100%;
            padding: 20px;
            text-align: center;
        }

        .columns {
            display: flex;
            width: 80%;
            margin-top: 20px;
        }

        .column {
            padding: 20px;
            box-sizing: border-box;
        }

        .column.left {
            width: 30%;
            border:    1px solid #000;
        }

        .column.right {
        margin: 0 auto; /* Center horizontally */
        width: 60%;
        border: 1px solid #000;
        text-align: center; /* Center video vertically */
    }

    .column.right video {
        max-width: 100%;
        height: auto;
    }
    .note{
       color:red;
       font-size:24px;
    }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="wrapper"&gt;
        &lt;div class="header"&gt;
            &lt;h1&gt;HOME index.html&lt;/h1&gt;
        &lt;/div&gt;
        &lt;div class="columns"&gt;
            &lt;div class="column left"&gt;
                &lt;h3&gt;Create Text&lt;/h3&gt;&lt;br /&gt;
                &lt;a class="note" href="{{ url_for('edit_template_page', filename='index.html') }}"&gt;Edit This Page&lt;/a&gt;&lt;/li&gt;&lt;br /&gt;
                &lt;a href="{{ url_for('app_utilities') }}"&gt;Application Utilities&lt;/a&gt;&lt;br /&gt;
                &lt;a href="{{ url_for('image_video') }}"&gt;Image and Video Processing Links&lt;/a&gt;&lt;br /&gt;
                &lt;a href="{{ url_for('index_canvas') }}"&gt;Project Canvas&lt;/a&gt;&lt;br /&gt;&lt;br /&gt;
                &lt;a href="{{ url_for('edit_javascript') }}"&gt;Project JavaScript&lt;/a&gt;&lt;br /&gt;&lt;br /&gt;
                &lt;a href="{{ url_for('edit_template') }}"&gt;Edit Links Listed Below&lt;/a&gt;&lt;p&gt;Edit Index - Edit CSS Files - Edit Canvas
 JS - Edit Formatted Text  - Edit FlaskAppArchitect Description - Edit Formatted Text&lt;/p&gt;
                &lt;/p&gt;
                &lt;a href="{{ url_for('data_page') }}"&gt;Data Page - Snippets,Search ChatGPT,Sqlite3&lt;/a&gt;&lt;br /&gt;&lt;br /&gt;
                &lt;a href="{{ url_for('edit_file') }}"&gt;Edit File&lt;/a&gt;&lt;br /&gt;
                &lt;a href="{{ url_for('edit_formatted') }}"&gt;Edit Formatted Text&lt;/a&gt;&lt;br /&gt;
                &lt;a href="{{ url_for('edit_description') }}"&gt;Edit Description&lt;/a&gt;&lt;br /&gt;
                &lt;a href="{{ url_for('misc_links') }}"&gt;This page contains all active links(I hope)&lt;/a&gt;&lt;br /&gt;
            &lt;/div&gt;
            &lt;div class="column right"&gt;
                &lt;h2&gt;Random Video&lt;/h2&gt;
                &lt;video controls&gt;
                    &lt;source src="{{ video }}" type="video/mp4"&gt;
                    Your browser does not support the video tag.
                &lt;/video&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>

</div>
</div>
</body>
</html>
-----index-----
<form action="{{ url_for('image_directories') }}" method="POST">
    <label for="directory">Select a directory:</label>
    <select id="directory" name="directory">
        <option value="static/Prodia_640x640">static/Prodia_640x640</option>
        <option value="static/LineArt">static/LineArt</option>
        <option value="static/quantized">static/Quantized</option>
        <option value="static/squares">static/squares</option>
        <option value="static/BrightColors">static/BrightColors</option>
    </select>
    <br><br>
    <input type="submit" value="Submit">
</form>

-----index-----
<!-- index.html-->
<!DOCTYPE html>
<html>

<head>
    <title>Image Processing</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }
        video {
            margin: 10px, auto;
            width: 300px;
            height: auto;
        }

          .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;

        }

        .header {
            width: 100%;
            padding: 20px;
            text-align: center;
        }

        .columns {
            display: flex;
            width: 80%;
            margin-top: 20px;
        }

        .column {
            padding: 20px;
            box-sizing: border-box;
        }

        .column.left {
            width: 30%;
            border:    1px solid #000;
        }

        .column.right {
        margin: 0 auto; /* Center horizontally */
        width: 60%;
        border: 1px solid #000;
        text-align: center; /* Center video vertically */
    }

    .column.right video {
        max-width: 100%;
        height: auto;
    }
    .note{
        color:red;
        font-size:24px; 
}
    </style>
</head>
<body>
    <div class="wrapper">
        <div class="header">
            <h1>Image Processing</h1>
            <a class="note" href="{{ url_for('index') }}">HOME</a><br />
        </div>
        <div class="columns">
            <div class="column left">

                <h3>Create Text</h3><br />
                <a href="{{ url_for('app_utilities') }}">Application Utilities</a><br />
                <a href="{{ url_for('feather_files') }}">Feather Images</a><br />
                <a href="{{ url_for('crop') }}">Crop Images</a><br />
                <a href="{{ url_for('view_text') }}">View Text Files</a><br />
                <a href="{{ url_for('edit_file') }}">Edit File</a><br /><br />
                <a href="{{ url_for('edit_formatted') }}">Edit Formatted Text</a><br />
                <a href="{{ url_for('feather_files') }}">Feather Images</a><br />
                <a href="{{ url_for('edit_description') }}">Edit Description</a><br />
                <a href="{{ url_for('image_stuff') }}">Comic Book Experiment</a><br />
            </div>
            <div class="column right">
                <h2>Right Column</h2>
                <video controls>
                    <source src="{{ video }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
        </div>
    </div>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>

<head>
    <title>Omic Book Experiment</title>

<style>
    html,
    body {
        margin: 0;
        padding: 1%;
        height: 100%;
        font-family: Arial, sans-serif;
    }

    body {
        background-image: url('../static/assets/MemMaker_background.png');
        background-repeat: repeat-y;
        background-size: cover;
        /* Use 'cover' to make the image cover the entire body */
        background-position: top;
    }
    video {
        margin: 10px, auto;
        width: 400px;
        height: auto;
    }

      .wrapper {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 100vh;

    }

    .header {
        width: 100%;
        padding: 20px;
        text-align: center;
    }

    .columns {
        display: flex;
        width: 80%;
        margin-top: 20px;
    }

    .column {
        padding: 20px;
        box-sizing: border-box;
    }

    .column.left {
        width: 30%;
        border:    1px solid #000;
    }

    .column.right {
    margin: 0 auto; /* Center horizontally */
    width: 60%;
    border: 1px solid #000;
    text-align: center; /* Center video vertically */
}

.column.right video {
    max-width: 100%;
    height: auto;
}
 
.comic-page {
    width: 85%;
      display: flex;
      flex-direction: column;
      align-items: center;
      background-color: #f0f0f0;
      padding: 20px;
    }
    
    .panel {
      position: relative;
      border: 2px solid black;
      margin: 10px;
      padding: 10px;
      background-color: white;
    }
    
    .speech-bubble {
      position: absolute;
      background-color: yellow;
      border-radius: 10px;
      padding: 5px;
      font-weight: bold;
    }

    .speech-bubble2 {
      position: absolute;
      background-color: yellow;
      border-radius: 10px;
      padding: 5px;
      font-weight: bold;
    }
    
    .narrative-element {
      font-size: 24px;
      color: red;
      text-transform: uppercase;
    }
    .small {
      width: 200px;
      height: auto;
    }
    .medium {
      width: 250px;
      height: auto;
    }

 
        .container {
            width: 75%;
            display: flex; /* Use flexbox to align divs side by side */
        }

        .div1, .div2 {
            width: 50%; /* Each div takes up 50% of the container's width */
            padding: 20px;
            box-sizing: border-box;
            border: 1px solid #ccc;
        }
    </style>  

</head>
<body>
<div class="wrapper">
    <div class="header">
        <h1>Comic Book Experiment</h1>
    </div>




<div class="container">
    <div class="div1">
      <div class="speech-bubble">Hello there!</div>
      <img class="small" src="{{ url_for('static', filename='images/Leonardo/character2.jpg') }}" alt="Character 1">

    </div>
    <div class="div2">
        <div class="narrative-element">WQW !</div>
        <div class="speech-bubble2">Watch out!</div>

        <img class="medium" src="{{ url_for('static', filename='images/Leonardo/character1.jpg') }}" alt="Character 1">

 
      
    </div>
  </div>
  

-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Image Upload and Video Generation</title>
</head>
<body>
    <h1>Upload Images and Generate Video</h1>
    <form method="POST" action="{{ url_for('image_to_video') }}">
        <label for="selected_directory">Select an image directory:</label>
        <select id="selected_directory" name="selected_directory" required>
            {% for directory in image_directories %}
                <option value="{{ directory }}">{{ directory }}</option>
            {% endfor %}
        </select>
        <input type="submit" value="Generate Video">
    </form>  <br /><br /><br />       

    <video width="320" height="240" controls>
        <source src="{{ url_for('static', filename=video2) }}" type="video/mp4">
        </video>
</body>
</html>


-----index-----
<!-- aigeneration_links.html-->
<!DOCTYPE html>
<html>

<head>
  <title>Image and Video Generation</title>
  <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/body.css') }}"

</head>

<body>
  <div>
    <div class="header">
      <h1>Image and Video Links</h1>
<a class="note"href="{{ url_for('index') }}">HOME</a><br />

    </div>
    <div class="columns">
      <div class="column left">
        <h3>Image</h3>
<a class="note"href="{{ url_for('edit_template_page', filename='image_video.html') }}">Edit This Page</a><br />

        <a href="{{ url_for('fade_index') }}">Create YouTube "SHORT" from Image Directory</a><br />
        <a href="{{ url_for('capture_and_overlay') }}">Falkon Captures</a><br />
        <a href="{{ url_for('mk_background') }}">Create Video From Thumbnail Cache</a><br />
        <a href="{{ url_for('add_border') }}">Add a border to an image.</a><br />
        <a href="{{ url_for('comic_book') }}">Project Underway_Create a Comic Book Page.</a><br />
        <a href="{{ url_for('video_index') }}">View Archived Videos</a><br />
        <p>Archive videos are created special to store images. These videos may be coverted to a directory of images for image processing.</p>
        <a href="{{ url_for('add_files') }}">Convert video to unique images static/mp4_images</a><br />



        <h3>Video</h3><br />
        <video width="200" height="auto" controls>
          <source src="static/assets/result_voice.mp4" type="video/mp4">
          Your browser does not support the video tag.
        </video><br />
        <video width="300" height="auto" controls>
          <source src="static/assets/NearDone.mp4" type="video/mp4">
          Your browser does not support the video tag.
        </video><br /><a href="{{ url_for('large_video') }}">See Above Video Full Size</a><br /><br /><br /><br />
        <a style="font-size: 24px;margin-left: 10%;color: #29b2f1;" href="{{ url_for('indeX') }}">Link to indeX: Create
          an Avatar</a><br />
        <p>
        <h1 style="color: brown;">Creating a speaking Avatar with A Flask App. <br />Click the videos below for
          step-by-step instructions. </h1> <a href="{{ url_for('index') }}">RETURN HOME</a><br />
        </p>
        <video controls class="resizedvideo">
          <source src="static/assets/result_cl.webm" type="video/mp4">
          Your browser does not support the video tag.
        </video><br />

        <a href="{{ url_for('text_mp3') }}">First: Create the mp3</a><br />

        <video controls class="resizedvideo">
          <source src="static/assets/result_convert_mp3_wav.webm" type="video/mp4">
          Your browser does not support the video tag.
        </video><br />
        <a href="{{ url_for('convert_mp3_to_wav') }}">Second: convert_mp3_to_wav</a><br />
        <video controls class="resizedvideo">
          <source src="static/assets/result_indian.webm" type="video/mp4">
          Your browser does not support the video tag.
        </video><br />
        <a href="{{ url_for('generate_vid') }}">Third: Create a Video the same length as the wav Created</a><br />
        <video controls class="resizedvideo">
          <source src="static/assets/Water-blinking.webm" type="video/mp4">
          Your browser does not support the video tag.
        </video><br />
        <a href="{{ url_for('create_avatar') }}">Fourth and Last Step: Create Avatar</a><br />
        <br /><br />
        <a href="{{ url_for('upload_file') }}">Upload Image</a><br />

        <form action="/search" method="GET">
          <label for="search-term">Search:</label>
          <input type="text" id="search-term" name="q">
          <button type="submit">Search</button>
        </form>
        <br />

      </div>
      <div class="column right">
        <h3>Debug test</h3>
        <a href="{{ url_for('make_text') }}">Create a Text File</a><br />

        <a href="{{ url_for('choose_dir') }}">Debug Test</a><br />
        <a href="{{ url_for('mkblend_video') }}">Create a Blended Video</a><br />

        <video controls class="resized-video">
          <source src="static/assets/result_cl.webm" type="video/mp4">
          Your browser does not support the video tag.
        </video>
        <br />
        <img style="width: 30%; height: auto;" src="{{ url_for('static', filename='assets/woman2.png') }}"
          alt="Example image"><br />

        <h2 style="color: brown;">Create a VIdeo of Images - Using Minterpolate</h2>
        <style>
          .resized-video {
            width: 35%;
            height: auto;
          }
        </style>

        <video controls class="resized-video">
          <source src="static/assets/Final_End.mp4" type="video/mp4">
          Your browser does not support the video tag.
        </video><br />
        <video controls class="resized-video">
          <source src="static/assets/Final_End-0.mp4" type="video/mp4">
          Your browser does not support the video tag.
        </video>
        <br />
        <video controls class="resized-video">
          <source src="static/assets/video_in_a_video-02.mp4" type="video/mp4">
          Your browser does not support the video tag.
        </video><br />

        <form method="post" action="/videos" enctype="multipart/form-data">
          <label for="input_video">Select input video file:</label><br>
          <input type="file" id="input_video" name="input_video"><br><br>
          <input type="submit" value="Submit">

        </form>
      </div>


    </div>
  </div>
</body>

</html>
-----index-----
<!DOCTYPE html>
<html>

<head>
  <title>My Flask App</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <script src="{{ url_for('static', filename='js/script.js') }}"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <style>
    .resizedvideo {
      width: 200px;
      height: 200px;
    }

    .section {
      margin-top: 50px;
      width: 95%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
    }

    .sectionl {
      width: 35%;
      display: flex;
      flex-direction: column;
      align-items: left;
      justify-content: left;
      height: 100vh;
    }

    .sectionr {
      width: 35%;
      display: flex;
      flex-direction: column;
      align-items: right;
      justify-content: right;
      height: 100vh;
    }
  </style>
  <style>
    html {
      font-family: sans-serif;
    background-color: black;
    }
    body {
      width: 95%;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      background-color: rgb(167, 196, 189);
      color: black;
    }
    h1 {
      color: rgb(255, 255, 255);
    }
    #wrapper {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      background-color: teal;
    }
    </style>
</head>

<body>
  <center>  
  <div class="container">
<p>
    <h1 style="color: brown;">Creating a speaking Avatar with A Flask App. <br />Click the videos below for
      step-by-step instructions. </h1>  <a href="{{ url_for('index') }}">RETURN HOME</a><br />
    </p>
      <video controls class="resizedvideo">
        <source src="static/assets/result_cl.webm" type="video/mp4">
        Your browser does not support the video tag.
      </video><br />

      <a href="{{ url_for('text_mp3') }}">First:  Create the mp3</a><br />

      <video controls class="resizedvideo">
        <source src="static/assets/result_convert_mp3_wav.webm" type="video/mp4">
        Your browser does not support the video tag.
      </video><br />
      <a href="{{ url_for('convert_mp3_to_wav') }}">Second: convert_mp3_to_wav</a><br />
      <video controls class="resizedvideo">
        <source src="static/assets/result_indian.webm" type="video/mp4">
        Your browser does not support the video tag.
      </video><br />
      <a href="{{ url_for('generate_vid') }}">Third: Create a Video the same length as the wav Created</a><br />
      <video controls class="resizedvideo">
        <source src="static/assets/Water-blinking.webm" type="video/mp4">
        Your browser does not support the video tag.
      </video><br />
      <a href="{{ url_for('create_avatar') }}">Fourth and Last Step: Create Avatar</a><br />
      <br /><br />
      <a href="{{ url_for('upload_file') }}">Upload Image</a><br />

      <form action="/search" method="GET">
        <label for="search-term">Search:</label>
        <input type="text" id="search-term" name="q">
        <button type="submit">Search</button>
      </form>
      <br />
      <h3>Debug test</h3>
      <a href="{{ url_for('make_text') }}">Create a Text File</a><br />
      
      <a href="{{ url_for('choose_dir') }}">Debug Test</a><br />
      <a href="{{ url_for('mkblend_video') }}">Create a Blended Video</a><br />
    </div>
</center>
  <footer class="footer">
    <center>
      <video controls class="resized-video">
        <source src="static/assets/result_cl.webm" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      &nbsp;&nbsp;&nbsp;&nbsp;
      <img style="width: 30%; height: auto;" src="{{ url_for('static', filename='images/image2.jpg') }}"
        alt="Example image"><br />&nbsp;&nbsp;&nbsp;
    </center>
    <h2 style="color: brown;">Create a VIdeo of Images - Using Minterpolate</h2>
    <style>
      .resized-video {
        width: 25%;
        height: auto;
      }
    </style>
<center>
    <video controls class="resized-video">
      <source src="static/assets/Final_End.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video>&nbsp;&nbsp;&nbsp;&nbsp;
    <video controls class="resized-video">
      <source src="static/assets/Final_End-0.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video>
    &nbsp;&nbsp;&nbsp;&nbsp;
    <video controls class="resized-video">
      <source src="static/assets/video_in_a_video-02.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video>

    <form method="post" action="/videos" enctype="multipart/form-data">
      <label for="input_video">Select input video file:</label><br>
      <input type="file" id="input_video" name="input_video"><br><br>
      <input type="submit" value="Submit">
    </center>
    </form>
    <br /><br />
    <hr>
    <a href="{{ url_for('mk_background') }}">Creat Video From Thumbnail Cache</a><br />
    TEST
    <a href="{{ url_for('add_border') }}">Add a border to an image.</a><br />
    <a href="https://www.youtube.com/@totallyinsaneart3345" target="_blank ">Totally Insane Art</a><br />
    <a href="https://www.youtube.com/@JackNorthrup" target="_blank ">Jack Northrup</a><br />
    <a href="https://app.prodia.com/#/" target="_blank ">prodia</a><br />
    <a href="https://app.leonardo.ai/" target="_blank ">leonardo.ai</a><br />
  </footer>
  </div>

</body>

</html>
-----index-----
<!DOCTYPE html>
<html>

<head>
  <title>My Flask App</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <script src="{{ url_for('static', filename='js/script.js') }}"></script>

</head>

<body>
  <div class="wrapper">
    <header class="header">
      <h1 style="color: brown;">Image Processing With Flask and Executeable Functions</h1><br />
      <p>Below are links to various Image Processing Functions. </p>
    </header>

    <div class="content">
      <a href="{{ url_for('get_gallery') }}">View Images</a><br />
      <a href="{{ url_for('view_thumbs') }}">View Thumbnails</a><br />
      <a href="{{ url_for('upload_file') }}">Upload Image</a><br />
      <a href="{{ url_for('flask_info') }}">Video</a><br />
      <a href="{{ url_for('add_text') }}">Add text to chat.txt</a><br />
      <a href="{{ url_for('search_txt') }}">Search chat.txt</a><br />
      <a href="{{ url_for('blend_pil') }}">upload and blend images.</a><br />
      <a href="{{ url_for('add_border') }}">Add a border to an image.</a><br />
      <a href="{{ url_for('process_images') }}">Process Images With Mask</a><br />
      <a href="{{ url_for('text_mp3') }}">Create an mp3 from aText Entry</a><br />
    </div>
    <div class="content">
      <a href="{{ url_for('generate_video') }}">Create an mp4 from video_resources</a><br />
      <a href="{{ url_for('generate_video2') }}">Create an mp4 from Uploads</a><br />
      <a href="{{ url_for('image_directories') }}">Choose Image directories</a><br />
      <a href="{{ url_for('select_playmp3') }}">Select and play mp3 from audio_mp3/</a><br />
      <a href="{{ url_for('make_animation') }}">Create an Animated Gif (20 images @ 1 per second.)</a><br />
      <a href="{{ url_for('build_stackedvids') }}">Video Stacked on Images</a><br />
      <a href="{{ url_for('build_stackedvid') }}">Two Video Stacked</a><br />
      <a href="{{ url_for('title_page') }}">Create a title Page</a><br />
      <a href="{{ url_for('add_title') }}">Add a Title to a Video</a><br />
      <a href="{{ url_for('add_effects') }}">Add effects to a Video</a><br />
      <a href="{{ url_for('choose_dir') }}">Choose a directory</a><br />

      <form action="{{ url_for('clean_images_route') }}" method="POST">
        <button type="submit">Clean Images</button>
      </form>
      <form action="/search" method="GET">
        <label for="search-term">Search:</label>
        <input type="text" id="search-term" name="q">
        <button type="submit">Search</button>
    </form>
    <form method="post" action="/mk_vid" enctype="multipart/form-data">
      <label for="directory">Select a directory:</label>
      <select id="directory" name="directory" required>
          {% for directory in directories %}
              <option value="{{ directory }}">{{ directory }}</option>
          {% endfor %}
      </select>
      <br><br>
      <input type="submit" value="Process Video">
  </form>
  <h1>Text to Video Conversion</h1>
  <form method="post" action="/maketext" enctype="multipart/form-data">
      <label for="input_file">Select a text file:</label><br>
      <input type="file" id="input_file" name="input_file" required><br><br>
      <input type="submit" value="Convert to Video">
  </form>
  <a href="/format_text">Format Text</a>
    </div>
    <footer class="footer">
      <center>
        &nbsp;&nbsp;<img style="width: 30%; height: auto;"
          src="{{ url_for('static', filename='images/' + random_image_file) }}"
          alt="Example image">&nbsp;&nbsp;&nbsp;&nbsp;
        <img style="width: 30%; height: auto;" src="{{ url_for('static', filename='images/image2.jpg') }}"
          alt="Example image"><br />&nbsp;&nbsp;&nbsp;
      </center>
      <h2 style="color: brown;">Links to YouTube Channels</h2>
      <a href="https://www.youtube.com/@totallyinsaneart3345" target="_blank ">Totally Insane Art</a><br />
      <a href="https://www.youtube.com/@JackNorthrup" target="_blank ">Jack Northrup</a><br />
      <a href="https://app.prodia.com/#/" target="_blank ">prodia</a><br />
      <a href="https://app.leonardo.ai/" target="_blank ">leonardo.ai</a><br />
    </footer>
  </div>

</body>

</html>
-----index-----
<!-- index.html-->
<!DOCTYPE html>
<html>

<head>
    <title>Home Flask App Builder</title>
    <style>
        html,body{
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
            /* Image is centered vertically and horizontally at all times */
            background-position: center center;
            /* Image doesn't repeat */
            background-repeat: no-repeat;
            font-family: Arial, sans-serif;
            /* Makes the image fixed in the viewport so that it doesn't move when
            the content height is greater than the image height */
            background-attachment: fixed;
        }
        font-family: Arial, sans-serif;
        video {
            margin: 10px, auto;
            width: 250px;
            height: auto;
        }

          .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;

        }

        .header {
            width: 100%;
            padding: 10px;
            text-align: center;
        }

        .columns {
            display: flex;
            width: 95%;
            margin-top: 10px;
        }

        .column {
            padding: 5px;
            margin-left: 10px;
            margin-right: 10px;
            box-sizing: border-box;
        }

        .column.left {
            width: 50%;
            border:    1px solid #000;
        }

        .column.right {
        margin: 0 auto; /* Center horizontally */
        width: 50%;
        border: 1px solid #000;
        text-align: center; /* Center video vertically */
    }

    .column.right video {
        max-width: 100%;
        height: auto;
    }
    .note{
       color:darkgreen;
       font-size:26px;
    }
    p{
       padding-top: -20px;
    }
    </style>
</head>
<body>
    <div class="wrapper">
        <div class="header">
            <h1 style = color:darkgreen;" >HOME index.html</h1>
            <a class="note" href="{{ url_for('edit_template_page', filename='index.html') }}">Edit This Page</a></li><br />
        </div>
        <div class="columns">
            <div class="column left">
                <h3>Links</h3>
                
                <a href="{{ url_for('app_utilities') }}">Application Utilities</a><br />
                <a href="{{ url_for('image_video') }}">Image and Video Processing Links</a><br />
                <a href="{{ url_for('view_gallery.gallery_index') }}">View Gallery for Image Directories</a><br />
                <a href="{{ url_for('create_comic.create_comic_index') }}">Create Comic Border</a><br />
                <a href="{{ url_for('index_canvas') }}">Project Canvas</a><br /><br />
                <a href="{{ url_for('edit_javascript') }}">Project JavaScript</a><br /><br />
                <a href="{{ url_for('edit_template') }}">Edit Links Listed Below</a>
                <p>Edit Index - Edit CSS Files - Edit Canvas JS - Edit Formatted Text - Edit FlaskAppArchitect Description - Edit Formatted Text</p>
                
                <a href="{{ url_for('data_page') }}">Data Page - Snippets,Search ChatGPT,Sqlite3</a><br /><br />
                <a href="{{ url_for('edit_file') }}">Edit File</a><br />
                <a href="{{ url_for('edit_formatted') }}">Edit Formatted Text</a><br />
                <a href="{{ url_for('edit_description') }}">Edit Description</a><br />
                <a href="{{ url_for('misc_links') }}">This page contains all active links(I hope)</a><br />
            </div>
            <div class="column right">
                <h2>Random Video</h2>
                <video controls>
                    <source src="{{ video }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
        </div>
    </div>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
  <head>
    <title>My Flask App</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>

  </head>
  <body>
<div class="wrapper">
  <header class="header"><h2 style="color: brown;">Image Processing With Flask</h2></header>
  <aside class="sidebar"><h2 style="color: brown;">AI Art Processing</h2>
  <p>Below is a random image from the gallery.</p>
  <img style="width: 92%; height: auto;" src="{{ url_for('static', filename='images/' + random_image_file) }}" alt="Example image"><br />
  <img src="{{ url_for('static', filename='images/image2.jpg') }}" alt="Example image"><br /> 
    </aside>


 <article class="content">
    <h1>Links and Executeable Functions</h1>
    <p>Below are links to various Image Processing Functions. </p>
    <a href="{{ url_for('get_gallery') }}">View Images</a><br />
    <a href="{{ url_for('view_thumbs') }}">View Thumbnails</a><br />
    <a href="{{ url_for('upload_file') }}">Upload Image</a><br />
    <a href="{{ url_for('flask_info') }}">Video</a><br />
    <a href="{{ url_for('add_text') }}">Add text to chat.txt</a><br />
    <a href="{{ url_for('search') }}">Search chat.txt</a><br />
    <a href="{{ url_for('blend_pil') }}">upload and blend images.</a><br />
    <a href="{{ url_for('add_border') }}">Add a border to an image.</a><br />
    <a href="{{ url_for('process_images') }}">Process Images With Mask</a><br /> 
    <a href="{{ url_for('text_mp3') }}">Create an mp3 from aText Entry</a><br />
    <a href="{{ url_for('generate_video') }}">Create an mp4 from video_resources</a><br />
    <a href="{{ url_for('generate_video2') }}">Create an mp4 from Uploads</a><br />
    <a href="{{ url_for('image_directories') }}">Choose Image directories</a><br />
    <a href="{{ url_for('select_playmp3') }}">Select and play mp3 from audio_mp3/</a><br />
    <a href="{{ url_for('make_animation') }}">Create an Animated Gif (20 images @ 1 per second.)</a><br />
    <a href="{{ url_for('build_stackedvids') }}">Video Stacked on Images</a><br /> 
    <a href="{{ url_for('build_stackedvid') }}">Two Video Stacked</a><br /> 
    <a href="{{ url_for('title_page') }}">Create a title Page</a><br />
    <a href="{{ url_for('add_title') }}">Add a Title to a Video</a><br />
    <form action="{{ url_for('clean_images_route') }}" method="POST">
      <button type="submit">Clean Images</button>
  </form>
  </article>
  <footer class="footer">
    <h2 style="color: brown;">Links to YouTube Channels</h2>
    <a href="https://www.youtube.com/@totallyinsaneart3345" target="_blank ">Totally Insane Art</a><br />
    <a href="https://www.youtube.com/@JackNorthrup" target="_blank ">Jack Northrup</a><br />
    <a href="https://app.prodia.com/#/" target="_blank ">prodia</a><br />
    <a href="https://app.leonardo.ai/" target="_blank ">leonardo.ai</a><br />
  </footer>
</div>

  </body>
  </html>

-----index-----
<!DOCTYPE html>
<html lang="en">

<head>
  <title>Create Scrolling Text</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/Style.css') }}">

</head>

<body>

  <div class="header">
    <h3>Flask VideoMaker V2.1</h3>
    <p>Below is an example of 'Type' of video this application can create. First Create a text file. You can hand write
      it or use ChatGPT. Then you format the text in lines of five words per line. Next create a video of scrolling text
      That is read as the text scrolls by. Then create an Image_Video which gradually fades from one image to another. A
      image directory is required. for best results be sure all images are the same size. The last step is add the
      Image_Video to the scrolling text.'</p>
    <p>Avatar_Maker is included (Link is in the Black Band below) to create video introductions. This app is all ready
      created, but not yet connected to the Flask VideoMaker</p>
    <video width="200" height="auto" controls>
      <source src="static/assets/result_voice.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video><br />
    <video width="300" height="auto" controls>
      <source src="static/assets/NearDone.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video><br /><a href="{{ url_for('large_video') }}">See Above Video Full Size</a><br /><br /><br /><br />

  </div>

  <div class="topnav">
    <a style="font-size: 24px;margin-left: 10%;color: #29b2f1;" href="{{ url_for('indeX') }}">Link to indeX: Create an Avatar</a><br /><br />
    <a style="font-size: 24px;margin-left: 10%;color: #29b2f1;" href="{{ url_for('data_page') }}">Link to Database:</a><&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <a style="font-size: 24px;margin-left: 10%;color: #29b2f1;" href="{{ url_for('index_FLASK') }}">Extras:</a>
  </div>
  

  <div class="row">
    <div class="column">
      <h2>Create a Text File</h2>
      <center>Play Me</center>
      <video width="150" height="auto" controls>
        <source src="static/assets/This_Column.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video><br />

      <h3>Create Text</h3><br />
      <a href="{{ url_for('mk_text') }}">Create a Text File</a><br /><br />
      <a href="{{ url_for('format_file') }}">Format Text Files</a><br /><br />
      <a href="{{ url_for('view_text') }}">View Text Files</a><br /><br />
      <a href="{{ url_for('edit_file') }}">Edit File</a><br /><br />
      <a href="{{ url_for('edit_formatted') }}">Edit Formatted Text</a><br /><br />
      
      <video width="150" height="auto" controls>
        <source src="static/assets/asset_video.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video><br />
    
    
    
    
    
    </div>

    <div class="column">
      <h2>Create Scrolling Text Background</h2>
      <h3>Audio to Video Conversion</h3>
      <form action="{{ url_for('convert') }}" method="POST" enctype="multipart/form-data">
        <label for="audio_file">Audio MP3 or Wav:</label>
        <input type="file" name="audio_file" accept=".mp3,.wav" required>
        <br><br />
        <label for="formatted_text_file">Formatted Text File:</label>
        <input type="file" name="formatted_text_file" accept=".txt" required>
        <br>
        <input type="submit" value="Convert1280x720">
      </form>
      <br />
      <hr><br />
      <form action="{{ url_for('convert512') }}" method="POST" enctype="multipart/form-data">
        <label for="audio_file">Audio MP3 or Wav:</label>
        <input type="file" name="audio_file" accept=".mp3,.wav" required>
        <br><br />
        <label for="formatted_text_file">Formatted Text File:</label>
        <input type="file" name="formatted_text_file" accept=".txt" required>
        <br>
        <input type="submit" value="Convert512x1024">
      </form>
      <hr><br />
      <form method="post" action="/videos" enctype="multipart/form-data">
        <label for="input_video">Select MP4 Video for Minterpolate Transitions :</label><br>
        <input type="file" id="input_video" name="input_video"><br><br>
        <input type="submit" value="Submit">
      </form><br/>

        <video width="150" height="auto" controls>
        <source src="static/assets/Final_End_Dance.mp4" type="video/mp4">
      </video><br />
    </div>

    <div class="column">
      <h2>Create Left Side Animation</h2>
      <h3>Choose a Directory</h3>
      <form id="directoryForm" method="post" action="/mkblend_videos">
          <select name="selected_directory" id="directoryInput">
              <option value="" disabled selected>Select a directory</option>
              <option value="static/images/512x1536-woman">512x1536-woman</option>
              <option value="static/images/abstract_beauty">abstract_beauty</option>
              <option value="static/images/beautiful_girl">beautiful_girl</option>
              <option value="static/images/Beautiful_Warrior">Beautiful_Warrior</option>
          </select>
          <button type="submit">Submit</button>
      </form>
      <h3>Select Directory</h3>
      <form action="/mkblend_videos" method="post">
        <label for="directory">Choose a directory make a short mp4:</label>
        <select name="directory" id="directory">
          {% for directory in directories %}
          <option value="{{ directory }}">{{ directory }}</option>
          {% endfor %}
        </select>
        <br><br>
        <input type="submit" value="Generate Video">
      </form>
        <h2>Create Stacked Videos</h2>
      <a href="{{ url_for('build_stackedvids') }}">Create Stacked Video</a><br /><br />
      <button onclick="callFlaskFunction()">Generate Video</button>
      <h3>Result Video Minterpolate Transitions</h3>
      <video id="myVideo" width="150" height="auto" controls>
        <source src="static/assets/Final_End.mp4" type="video/mp4">
        </video>
        Your browser does not support the video tag.

    </div>
  <div>
    <a style="font-size: large;color: bisque;" href="{{ url_for('process_imagez') }}">Zooms and Zoom</a><br /><br />

  <script>
    function callFlaskFunction() {
      var xhr = new XMLHttpRequest();
      xhr.open('GET', '/resize_and_overlay_videos', true);
      xhr.responseType = 'blob';

      xhr.onload = function (e) {
        if (this.status == 200) {
          var videoBlob = this.response;
          var videoUrl = URL.createObjectURL(videoBlob);

          var videoElement = document.getElementById('myVideo');
          videoElement.src = videoUrl;
        }
      };

      xhr.send();
    }
  </script>

  <center>
  
<h3>Outline Jpeg</h3>
      <form action="/outline_j" method="post" enctype="multipart/form-data">
          <label for="file">Select Image:</label>
          <input type="file" name="file" id="file" accept="image/*">
          <input type="submit" value="Outline J">
      </form>

      <h3>Outline Png</h3>
      <form action="/outline_p" method="post" enctype="multipart/form-data">
          <label for="file">Select Image:</label>
          <input type="file" name="file" id="file" accept="image/*">
          <input type="submit" value="Outline p">
      </form>
  </center>
  </div>

</body>
</body>

</html>

-----index-----
<!DOCTYPE html>
<html>

<head>
  <title>My Flask App</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <script src="{{ url_for('static', filename='js/script.js') }}"></script>
 <title>My Flask App</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <script src="{{ url_for('static', filename='js/script.js') }}"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <style>
    .resizedvideo {
      width: 200px;
      height: 200px;
    }

    .section {
      margin-top: 50px;
      width: 95%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
    }

    .sectionl {
      width: 35%;
      display: flex;
      flex-direction: column;
      align-items: left;
      justify-content: left;
      height: 100vh;
    }

    .sectionr {
      width: 35%;
      display: flex;
      flex-direction: column;
      align-items: right;
      justify-content: right;
      height: 100vh;
    }
    html {
      font-family: sans-serif;
    background-color: black;
    }
    body {
      width: 95%;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      background-color: rgb(167, 196, 189);
      color: black;
    }
    h1 {
      color: rgb(255, 255, 255);
    }
    #wrapper {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      background-color: teal;
    }
    </style>
</head>

<body>  <center>  
    <!DOCTYPE html>
    <html>
    <head>
        <title>Select Video</title>
    </head>
    <body>
        <h1>Select Video</h1>
        <a href="{{ url_for('index') }}">Main Home Index</a><br /> <br /> 
        <video controls class="resized-video">
          <source src="static/new_video/result_voice.mp4" type="video/mp4">
          Your browser does not support the video tag.
        </video>
        <br />
        This is the path to the above video:<br />
        <code>static/new_video/result_voice.mp4</code><br />
         <form action="/generate_blank_video" method="post" enctype="multipart/form-data">
            <label for="selected_video">Select Video:</label>
            <input type="file" name="selected_video" id="selected_video">
            <br><br>
            <input type="submit" value="static/new_video/result_voice.mp4">
        </form>
                 
        <a href="{{ url_for('create_text_file') }}">Create a Blank Text</a><br /> 
        <a href="{{ url_for('overlay_text') }}">Overlay Blank Text with Text</a><br /> 
        <a href="{{ url_for('add_borders') }}">Add the Overlay to a Border</a><br /> 
    </body>
    </html>
    
        <br><br>


















  <div class="container">

    <h1 style="color: brown;">Creating a speaking Avatar with A Flask App. <br />Click the videos below for
      step-by-step instructions. </p></h1>  

      <video controls class="resizedvideo">
        <source src="static/assets/result_cl.webm" type="video/mp4">
        Your browser does not support the video tag.
      </video><br />

        <a href="{{ url_for('generate_blank_video') }}">First: generate_blank_video</a><br />

</center>
  <footer class="footer">
    <center>
      <video controls class="resized-video">
        <source src="static/assets/result_cl.webm" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      &nbsp;&nbsp;&nbsp;&nbsp;
      <img style="width: 30%; height: auto;" src="{{ url_for('static', filename='images/image2.jpg') }}"
        alt="Example image"><br />&nbsp;&nbsp;&nbsp;
    </center>
    <h2 style="color: brown;">Links to YouTube Channels</h2>
    <style>
      .resized-video {
        width: 25%;
        height: auto;
      }
    </style>

    <video controls class="resized-video">
      <source src="static/assets/Talking_AI_Images.webm" type="video/mp4">
      Your browser does not support the video tag.
    </video>
  <div class="wrapper">
    <header class="header">
      <h1 style="color: brown;">Image Processing With Flask and Executeable Functions</h1><br />
      <p>Below are links to various Image Processing Functions. </p>
    </header>

    <div class="content">
      <a href="{{ url_for('generate_blank_video') }}">View Images</a><br />
      
    <h1>Random Image</h1>
    <img src="{{ url_for('static', filename='images/' + random_image_file) }}" alt="Random Image">
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Flask App</title>
</head>
<body>
    <h1>Flask App</h1>
    <video width="512" height="auto" controls>
        <source src="{{ final_video }}" type="video/mp4">
        Your browser does not support the video tag.
    </video>
    <video width="512" height="auto" controls>
        <source src="static/videos/old_woman.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>


    <a href="{{ url_for('update_database') }}">Home</a><br />

    
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Flask App</title>
</head>
<body>
    <h1>Flask App</h1>
    <video width="512" height="auto" controls>
        <source src="{{ final_video }}" type="video/mp4">
        Your browser does not support the video tag.
    </video>
    <video width="512" height="auto" controls>
        <source src="static/videos/old_woman.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>


    <a href="{{ url_for('update_database') }}">Home</a><br />

    
</body>
</html>

-----index-----
<!DOCTYPE html>
<html lang="en">
<head>
    <title>{% block title %}{% endblock %}</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Link to your style.css file -->
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        {% block content %}{% endblock %}
    </div>
    <a href="{{ url_for('add_code') }}">Edit</a>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>

<head>
  <title>My Flask App</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <script src="{{ url_for('static', filename='js/script.js') }}"></script>
 <title>My Flask App</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <script src="{{ url_for('static', filename='js/script.js') }}"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <style>
    .resizedvideo {
      width: 200px;
      height: 200px;
    }
    .resized_video {
      width: 300px;
      height: auto;
    }

    .section {
      margin-top: 50px;
      width: 95%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
    }

    .sectionl {
      width: 35%;
      display: flex;
      flex-direction: column;
      align-items: left;
      justify-content: left;
      height: 100vh;
    }

    .sectionr {
      width: 35%;
      display: flex;
      flex-direction: column;
      align-items: right;
      justify-content: right;
      height: 100vh;
    }
  </style>
  <style>
    html {
      font-family: sans-serif;
    background-color: black;
    }
    body {
      width: 95%;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      background-color: rgb(167, 196, 189);
      color: black;
    }
    h1 {
      color: rgb(255, 255, 255);
    }
    #wrapper {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      background-color: teal;
    }
    </style>
</head>

<body>  <center>  
    <div class="wrapper">
    <header class="header">
      <h1 style="color: brown;">Image Processing With Flask and Executeable Functions</h1><br />
      <p>Below are links to many various Image Processing Functions. </p>
    </header>

    <div class="content">
      <a href="{{ url_for('get_gallery') }}">View Images</a><br />
      <a href="{{ url_for('view_thumbs') }}">View Thumbnails</a><br />
      <a href="{{ url_for('upload_file') }}">Upload Image</a><br />
      <a href="{{ url_for('flask_info') }}">Video</a><br />
      <a href="{{ url_for('add_text') }}">Add text to chat.txt</a><br />
      <a href="{{ url_for('search_txt') }}">Search chat.txt</a><br />
      <a href="{{ url_for('blend_pil') }}">upload and blend images.</a><br />
      <a href="{{ url_for('add_border') }}">Add a border to an image.</a><br />
      <a href="{{ url_for('process_images') }}">Process Images With Mask</a><br />
      <a href="{{ url_for('text_mp3') }}">Create an mp3 from aText Entry</a><br />
      <a style="color: brown;" href="{{ url_for('view_log') }}">View Log/app.log</a><br />
<hr>
    </div>
    <div class="content">
      <a href="{{ url_for('generate_video') }}">Create an mp4 from video_resources</a><br />
      <a href="{{ url_for('generate_video2') }}">Create an mp4 from Uploads</a><br />
      <a href="{{ url_for('generate_video3') }}">Choose A directory to create video</a><br />
      <a href="{{ url_for('image_directories') }}">Choose Image directories</a><br />
      <a href="{{ url_for('select_playmp3') }}">Select and play mp3 from audio_mp3/</a><br />
      <a href="{{ url_for('make_animation') }}">Create an Animated Gif (20 images @ 1 per second.)</a><br />
      <a href="{{ url_for('build_stackedvids') }}">Video Stacked on Images</a><br />
      <a href="{{ url_for('build_stackedvid') }}">Two Video Stacked</a><br />
      <a href="{{ url_for('title_page') }}">Create a title Page</a><br />
      <a href="{{ url_for('add_title') }}">Add a Title to a Video</a><br />
      <a href="{{ url_for('add_effects') }}">Add effects to a Video</a><br />
      <a href="{{ url_for('choose_dir') }}">Choose a directory</a><br />
      <a href="{{ url_for('indexA') }}">Working With Text</a><br />

      <form action="{{ url_for('clean_images_route') }}" method="POST">
        <button type="submit">Clean Images</button>
      </form>
      <form action="/search" method="GET">
        <label for="search-term">Search:</label>
        <input type="text" id="search-term" name="q">
        <button type="submit">Search</button>
    </form>
    <form method="post" action="/mk_vid" enctype="multipart/form-data">
      <label for="directory">Select a directory:</label>
      <select id="directory" name="directory" required>
          {% for directory in directories %}
              <option value="{{ directory }}">{{ directory }}</option>
          {% endfor %}
      </select>
      <br><br>
      <input type="submit" value="Process Video">
  </form>
  <h1>Text to Video Conversion</h1>
  <form method="post" action="/maketext" enctype="multipart/form-data">
      <label for="input_file">Select a text file:</label><br>
      <input type="file" id="input_file" name="input_file" required><br><br>
      <input type="submit" value="Convert to Video">
  </form>
  <a href="/format_text">Format Text</a>
    </div>
    <footer class="footer">

      <h2 style="color: brown;">Links to YouTube Channels</h2>
      <a href="https://www.youtube.com/@totallyinsaneart3345" target="_blank ">Totally Insane Art</a><br />
      <a href="https://www.youtube.com/@JackNorthrup" target="_blank ">Jack Northrup</a><br />
      <a href="https://app.prodia.com/#/" target="_blank ">prodia</a><br />
      <a href="https://app.leonardo.ai/" target="_blank ">leonardo.ai</a><br />
    </footer>
  </div>

</body>

</html>
-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Capture Tube</title>
</head>
<body>
    <h1>Capture Video Tube</h1>
    <a href="/capture_overlay_verify">Start Capture Regular</a><br />
    <a href="/capture_overlay_short">Start Capture Short</a>
    <h1>Welcome to Your Flask App</h1>
    <p>Create a text image</p>
    <a href="{{ url_for('create_text') }}">Create Text Image</a>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>

<head>
  <title>My Flask App</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <script src="{{ url_for('static', filename='js/script.js') }}"></script>
 <title>My Flask App</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
  <script src="{{ url_for('static', filename='js/script.js') }}"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <style>
    .resizedvideo {
      width: 200px;
      height: 200px;
    }
    .resized_video {
      width: 300px;
      height: auto;
    }

    .section {
      margin-top: 50px;
      width: 95%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
    }

    .sectionl {
      width: 35%;
      display: flex;
      flex-direction: column;
      align-items: left;
      justify-content: left;
      height: 100vh;
    }

    .sectionr {
      width: 35%;
      display: flex;
      flex-direction: column;
      align-items: right;
      justify-content: right;
      height: 100vh;
    }
  </style>
  <style>
    html {
      font-family: sans-serif;
    background-color: black;
    }
    body {
      width: 95%;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      background-color: rgb(167, 196, 189);
      color: black;
    }
    h1 {
      color: rgb(255, 255, 255);
    }
    #wrapper {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      background-color: teal;
    }
    </style>
</head>

<body>  <center>  
    <div class="wrapper">
    <header class="header">
      <h1 style="color: brown;">Image Processing With Flask and Executeable Functions</h1><br />
      <p>Below are links to various Image Processing Functions. </p>
    </header>

    <div class="content">
      <a href="{{ url_for('get_gallery') }}">View Images</a><br />
      <a href="{{ url_for('view_thumbs') }}">View Thumbnails</a><br />
      <a href="{{ url_for('upload_file') }}">Upload Image</a><br />
      <a href="{{ url_for('flask_info') }}">Video</a><br />
      <a href="{{ url_for('add_text') }}">Add text to chat.txt</a><br />
      <a href="{{ url_for('search_txt') }}">Search chat.txt</a><br />
      <a href="{{ url_for('blend_pil') }}">upload and blend images.</a><br />
      <a href="{{ url_for('add_border') }}">Add a border to an image.</a><br />
      <a href="{{ url_for('process_images') }}">Process Images With Mask</a><br />
      <a href="{{ url_for('text_mp3') }}">Create an mp3 from aText Entry</a><br />
      <a style="color: brown;" href="{{ url_for('view_log') }}">View Log/app.log</a><br />
      <a style="color: brown;" href="{{ url_for('self_check') }}">flake8 check and view Log/flake.info</a><br />
    </div>
    <div class="content">
      <a href="{{ url_for('generate_video') }}">Create an mp4 from video_resources</a><br />
      <a href="{{ url_for('generate_video2') }}">Create an mp4 from Uploads</a><br />
      <a href="{{ url_for('generate_video3') }}">Choose A directory to create video</a><br />
      <a href="{{ url_for('image_directories') }}">Choose Image directories</a><br />
      <a href="{{ url_for('select_playmp3') }}">Select and play mp3 from audio_mp3/</a><br />
      <a href="{{ url_for('make_animation') }}">Create an Animated Gif (20 images @ 1 per second.)</a><br />
      <a href="{{ url_for('build_stackedvids') }}">Video Stacked on Images</a><br />
      <a href="{{ url_for('build_stackedvid') }}">Two Video Stacked</a><br />
      <a href="{{ url_for('title_page') }}">Create a title Page</a><br />
      <a href="{{ url_for('add_title') }}">Add a Title to a Video</a><br />
      <a href="{{ url_for('add_effects') }}">Add effects to a Video</a><br />
      <a href="{{ url_for('choose_dir') }}">Choose a directory</a><br />
      <a href="{{ url_for('indexA') }}">Working With Text</a><br />

      <form action="{{ url_for('clean_images_route') }}" method="POST">
        <button type="submit">Clean Images</button>
      </form>
      <form action="/search" method="GET">
        <label for="search-term">Search:</label>
        <input type="text" id="search-term" name="q">
        <button type="submit">Search</button>
    </form>
    <form method="post" action="/mk_vid" enctype="multipart/form-data">
      <label for="directory">Select a directory:</label>
      <select id="directory" name="directory" required>
          {% for directory in directories %}
              <option value="{{ directory }}">{{ directory }}</option>
          {% endfor %}
      </select>
      <br><br>
      <input type="submit" value="Process Video">
  </form>
  <h1>Text to Video Conversion</h1>
  <form method="post" action="/maketext" enctype="multipart/form-data">
      <label for="input_file">Select a text file:</label><br>
      <input type="file" id="input_file" name="input_file" required><br><br>
      <input type="submit" value="Convert to Video">
  </form>
  <a href="/format_text">Format Text</a>
    </div>
    <footer class="footer">

      <h2 style="color: brown;">Links to YouTube Channels</h2>
      <a href="https://www.youtube.com/@totallyinsaneart3345" target="_blank ">Totally Insane Art</a><br />
      <a href="https://www.youtube.com/@JackNorthrup" target="_blank ">Jack Northrup</a><br />
      <a href="https://app.prodia.com/#/" target="_blank ">prodia</a><br />
      <a href="https://app.leonardo.ai/" target="_blank ">leonardo.ai</a><br />
    </footer>
  </div>

</body>

</html>
-----index-----
<!-- index.html-->
<!DOCTYPE html>
<html>

<head>
    <title>Home Canvas Project</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }
        video {
            margin: 10px, auto;
            width: 250px;
            height: auto;
        }

          .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;

        }

        .header {
            width: 100%;
            padding: 20px;
            text-align: center;
        }

        .columns {
            display: flex;
            width: 80%;
            margin-top: 20px;
        }

        .column {
            padding: 20px;
            box-sizing: border-box;
        }

        .column.left {
            width: 30%;
            border:    1px solid #000;
        }

        .column.right {
        margin: 0 auto; /* Center horizontally */
        width: 60%;
        border: 1px solid #000;
        text-align: center; /* Center video vertically */
    }

    .column.right video {
        max-width: 100%;
        height: auto;
    }
    .note{
          font-size:25px;
          color:red;
   }
    </style>
</head>
<body>
    <div class="wrapper">
        <div class="header">
            <h1>HOME index.html</h1>
            <a href ="https://www.youtube.com/playlist?list=PLpPnRKq7eNW3We9VdCfx9fprhqXHwTPXL">External YouTube Link JavaScript Tutorial</a><br />
        </div>
        <div class="columns">
            <div class="column left">
            
                <h3>Create Text</h3><br />
                <a href="{{ url_for('canvas') }}">First Canvas Project</a><br />
                <a href="{{ url_for('one_canvas') }}">One Canvas</a><br />
                <a href="{{ url_for('two_canvas') }}">Two Canvas</a><br />
                <a class="note" href="{{ url_for('edit_canvas') }}">Edit a Canvas HTMl</a><br />
                <a class="note" href="{{ url_for('edit_canvas') }}">Edit a Canvas JavaScript</a><br />
<hr>
                <a href="{{ url_for('misc_links') }}">This page contains all active links(I hope)</a><br />
            </div>
            <div class="column right">
                <h2>Random Video</h2>
                <video controls>
                    <source src="{{ video }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
        </div>
    </div>
</body>
</html>

-----index-----
<!-- index.html-->
<!DOCTYPE html>
<html>

<head>
    <title>Home Flask App Builder</title>
    <title>Edit Template</title>
     <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/body.css') }}">
  
</head> 

<body>
    <div class="wrapper">
        <div class="header">
            <h1 style = color:darkgreen;" >HOME index.html</h1>
            <a class="note" href="{{ url_for('edit_template_page', filename='index.html') }}">Edit This Page</a></li><br />
        </div>
        <div class="columns">
            <div class="column left">
                <h3>Links</h3>
                
                <a href="{{ url_for('edit_template') }}">Edit Links Listed Below</a><br />
                <a href="{{ url_for('ffmpeg_commands') }}">Various Ffmpeg Commands</a>

            </div>
            <div class="column right">
                <h2>Random Video</h2>
                <video controls>
                    <source src="{{ video }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
        </div>
    </div>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>

<head>
</head>

<body>
  <center>  
    <div class="container">
      <img style="width: 150px; height: auto;" src="{{ url_for('static', filename=random_image_file) }}">
      <br />
      <h3>TESTS</h3><br />
      <a href="{{ url_for('mk_text') }}">Create a Text File</a><br /><br />
      <a href="{{ url_for('format_file') }}">Format Text Files</a><br /><br />
      <a href="{{ url_for('view_text') }}">View Text Files</a><br /><br />
      <a href="{{ url_for('edit_file') }}">Edit File</a><br /><br />

      <h1>Video Conversion</h1>
      <form action="/convert" method="POST" enctype="multipart/form-data">
          <input type="file" name="audio_file" accept=".mp3">
          <button type="submit">Convert</button>
      </form>
      
      <form action="{{ url_for('convert') }}" method="POST" enctype="multipart/form-data">
        <input type="file" name="text_file">
        <input type="submit" value="Convert">
      </form>
    </div>
  </center>
  
  <footer class="footer">
    <center>
      This is new text
    </center>
  </footer>
</body>

</html>

-----index-----
<html>
  <body>
    <center>
      <h1>Search</h1>
      <form action="/search_database" method="POST">
        <label for="search_term">Search Term:</label>
        <input type="text" id="search_term" name="search_term"><br>

        <label for="search_area">Search Area:</label>
        <select id="search_area" name="search_area">
          <option value="description">Description</option>
          <option value="code">Code Snippet</option>
          <option value="keywords">Keywords</option>
        </select><br>

        <input type="submit" value="Search">
      </form>

      <h1>Enter Data</h1>
      <form action="/insert_data" method="POST">
        <label for="description">Description:</label>
        <textarea id="description" name="description"></textarea><br>

        <label for="code">Code Snippet:</label>
        <textarea id="code" name="code"></textarea><br>

        <label for="keywords">Keywords:</label>
        <textarea id="keywords" name="keywords"></textarea><br>

        <input type="submit" value="Submit">
      </form>
      <hr>

     <!-- Assuming you have a table displaying search results -->
<!-- Assuming you have a table displaying search results -->
<table>
    <thead>
      <tr>
        <th>ID</th>
        <th>Description</th>
        <th>Code</th>
        <th>Keywords</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <!-- Loop through the search results to generate rows -->
      {% for result in results %}
      <tr>
        <td>{{ result[0] }}</td>
        <td>{{ result[1] }}</td>
        <td>{{ result[2] }}</td>
        <td>{{ result[3] }}</td>
        <td>
          <!-- Add a link to the edit page for each row -->
          <a href="{{ url_for('edit_data', rowid=result[0]) }}">Edit</a>
        </td>
      </tr>
      {% endfor %}
    </tbody>

  </table>
  <form action="{{ url_for('edit_data_page', rowid=rowid[0]) }}" method="POST">
    <label for="row_id">Enter Row ID:</label>
    <input type="text" id="row_id" name="row_id">
    <input type="submit" value="Submit">
</form>

<form action="{{ url_for('edit_data', rowid=rowid) }}" method="POST">
    <label for="description">Description:</label>
    <textarea id="description" name="description"></textarea>
    <label for="code">Code:</label>
    <textarea id="code" name="code"></textarea>
    <label for="keywords">Keywords:</label>
    <textarea id="keywords" name="keywords"></textarea>
    <input type="submit" value="Update">
</form>

    </center>
  </body>
</html>

-----index-----
<!-- index.html-->
<!DOCTYPE html>
<html>

<head>
    <title>indexdb</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }
        video {
            margin: 10px, auto;
            width: 250px;
            height: auto;
        }

          .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;

        }

        .header {
            width: 100%;
            padding: 20px;
            text-align: center;
        }

        .columns {
            display: flex;
            width: 80%;
            margin-top: 20px;
        }

        .column {
            padding: 20px;
            box-sizing: border-box;
        }

        .column.left {
            width: 30%;
            border:    1px solid #000;
        }

        .column.right {
        margin: 0 auto; /* Center horizontally */
        width: 50%;
        border: 1px solid #000;
        text-align: center; /* Center video vertically */
    }

    </style>
</head>
<body>

        <div class="header">   <h1>Welcome to the indexdb</h1></div>
    <div class="columns">
<div class="column left">
 
    <p>Choose an option below:</p>
    <ul>
        <li><a href="{{ url_for('select_by_id_form') }}">Select by ID Form</a></li>
        <li><a href="{{ url_for('search_by_rowid') }}">Search by Row ID</a></li>
        <li><a href="{{ url_for('search_database') }}">Search the Database</a></li>
        <li><a href="{{ url_for('edit_data_page') }}">Edit Data</a></li>
        <li><a href="{{ url_for('insert_data') }}">Insert Data</a></li>
        <li><a href="{{ url_for('get_rowid_form') }}">Enter Row ID to Edit</a></li>
    </ul>
    <a style ="font-size: 24px;color: brown;" href="{{ url_for('index') }}">HOME</a>
</div>
<div class="column right">
                <h2>Random Video</h2>
<p>This Video will eventually be instructions on info on creation/using this page</p>
                <video controls>
                    <source src="{{ video }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div></div>
</body>
</html>

-----index-----
<!-- index.html-->
<!DOCTYPE html>
<html>

<head>
    <title>Home Flask App Builder</title>
    <title>Edit Template</title>
     <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/body.css') }}">
  
</head> 

<body>
    <div class="wrapper">
        <div class="header">
            <h1 style = color:darkgreen;" >HOME index.html</h1>

        </div>
        <div class="columns">
            <div class="column left">
                <h3>Links</h3>
                
                <a href="{{ url_for('mkblend_video') }}">mkblend_video</a><br />
                <a href="{{ url_for('add_effects') }}">add_effects</a>

            </div>
            <div class="column right">
                <h2>Random Video</h2>
                <video controls>
                    <source src="{{ video }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
        </div>
    </div>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Insert Data</title>
</head>
<body>
    <h1>Insert Data</h1>
    <form action="{{ url_for('insert_data') }}" method="post">
        <label for="description">Description:</label>
        <input type="text" name="description" id="description" required>
        <br>
        <label for="code">Code:</label>
        <textarea name="code" id="code" rows="8" cols="50" required></textarea>
        <br>
        <label for="keywords">Keywords:</label>
        <input type="text" name="keywords" id="keywords" required>
        <br>
        <button type="submit">Insert Data</button>
    </form>
    <br>
    <a href="{{ url_for('indexdb') }}">Go back to the Index Page</a>
</body>
</html>

-----index-----
<!-- index.html-->
<!DOCTYPE html>
<html>

<head>
    <title>Home Flask App Builder</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }
        video {
            margin: 10px, auto;
            width: 250px;
            height: auto;
        }

          .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;

        }

        .header {
            width: 100%;
            padding: 20px;
            text-align: center;
        }

        .columns {
            display: flex;
            width: 80%;
            margin-top: 20px;
        }

        .column {
            padding: 20px;
            box-sizing: border-box;
        }

        .column.left {
            width: 30%;
            border:    1px solid #000;
        }

        .column.right {
        margin: 0 auto; /* Center horizontally */
        width: 60%;
        border: 1px solid #000;
        text-align: center; /* Center video vertically */
    }

    .column.right video {
        max-width: 100%;
        height: auto;
    }
    </style>
</head>
<body>
    <div class="wrapper">
        <div class="header">
            <h1>HOME index.html</h1>
        </div>
        <div class="columns">
            <div class="column left">
                <h3>Create Text</h3><br />
                <a href="{{ url_for('large_script') }}">JavaScript Alice Demo</a><br />
                <a href="{{ url_for('image_video') }}">Image and Video Processing Links</a><br />
                <a href="{{ url_for('index_canvas') }}">Project Canvas</a><br /><br />
                <a href="{{ url_for('edit_script') }}">Project JavaScript</a><br /><br />
                <a href="{{ url_for('edit_template') }}">Edit Template HTML Files</a><br /><br />
                <a href="{{ url_for('edit_file') }}">Edit File</a><br />
                <a href="{{ url_for('edit_formatted') }}">Edit Formatted Text</a><br />
                <a href="{{ url_for('edit_description') }}">Edit Description</a><br />
                <a href="{{ url_for('misc_links') }}">This page contains all active links(I hope)</a><br />
            </div>
            <div class="column right">
                <h2>Random Video</h2>
                <video controls>
                    <source src="{{ video }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
        </div>
    </div>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
	<title>Generate Video 2</title>
	<style>
		.video {
			display: inline-block;
			margin: 20px;
		}
		.thumbnail {
			width: 320px;
			height: 180px;
			background-size: cover;
		}
	</style>
</head>
<body>
	<h1>Generate Video 2</h1>
	
	{% if video_path %}
		<h2>Generated Video</h2>
		<video width="640" height="360" controls>
			<source src="{{ video_url }}" type="video/mp4">
			Your browser does not support the video tag.
		</video>
	{% endif %}
	
	{% if selected_videos %}
		<h2>Selected Videos</h2>
		{% for video in selected_videos %}
			<div class="video">
				<a href="{{ url_for('generate_video2') }}?remove_video={{ video }}">
					<button>Remove</button>
				</a>
				<div class="thumbnail" style="background-image: url({{ url_for('static', filename='thumbnails/' + video + '.jpg') }})"></div>
				<p>{{ video }}</p>
			</div>
		{% endfor %}
	{% endif %}
	
	<h2>Available Videos</h2>
	{% for video in available_videos %}
		<div class="video">
			<a href="{{ url_for('generate_video2') }}?add_video={{ video }}">
				<button>Add</button>
			</a>
			<div class="thumbnail" style="background-image: url({{ url_for('static', filename='thumbnails/' + video + '.jpg') }})"></div>
			<p>{{ video }}</p>
		</div>
	{% endfor %}
</body>
</html>

-----index-----
<!-- index.html-->
<!DOCTYPE html>
<html>

<head>
    <title>Home Flask App Builder</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }

            canvas {border: 1px solid #999999}
        </style>
        <script src="{{ url_for('static', filename='canvas/codespace_api_canvas.js') }}"></script>
        <script src="{{ url_for('static', filename='canvas/kaleidoscope1_canvas.js') }}"></script>
        <title>Kaleidoscope</title>
    </head>
    <body onload="init()">
        <div style="min-width: 400px; display: inline-block"></div>
        <canvas id="kCanvas" width="600" height="600"></canvas>
        <canvas style="visibility: hidden;" id="dCanvas" width="400" height="400"></canvas>
    </body>
</html>

-----index-----
<!DOCTYPE HTML ><html><head>
<!-- Code from https://www.pepperoni.blog/canvas-kaleidoscope/ -->
<!-- Modified by Juan A. Villalpando - http://kio4.com/appinventor/169X_javascript_caleidoscopio.htm -->

<!-- DELETE ZOOM -->
<!-- <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"> -->
</head>
<body>
<img  src= "" id="base"  style="display:none">
<img  src= "" id="baseR" style="display:none">
<canvas width="1024" height="1024" id="c"></canvas>

<script type="text/javascript">
    var base64 =  window.AppInventor.getWebViewString(); // Entrada de datos.

	 document.getElementById('base').setAttribute('src', base64);
	 document.getElementById('baseR').setAttribute('src', base64);
</script>

<script type="text/javascript">
window.addEventListener("load", function(){
    var c = document.getElementById("c");
    var baseImg = document.getElementById("base");
    var baseRImg = document.getElementById("baseR");
    var ctx = c.getContext("2d");
    var pat = ctx.createPattern(baseImg, "repeat");
    var patR = ctx.createPattern(baseRImg, "repeat");
    var patDim = 150; //pattern is 150x150 square.
    var SqrtOf3_4 = Math.sqrt(3)/2;
    //height of triangle side given side length of 150 is:
    var height =  SqrtOf3_4 * patDim;
var offset = 0;
ctx.translate(-0.5*patDim, 0);
var fn = function(alternateMode){
    offset = (offset - 1) % 1024
    var i = 0;


    //draw kaleidoscope first row.
    ctx.save();
    ctx.fillStyle=pat;
    ctx.translate(0, offset);
    while(i <= 3){
      ctx.beginPath();
      ctx.moveTo(0,-offset);
      ctx.lineTo(patDim, -offset);
      ctx.lineTo(0.5*patDim, height-offset);
      ctx.closePath();
      ctx.fill();
      if(i%3==0){
        ctx.translate(patDim,-offset);
        ctx.rotate(-120*Math.PI/180);
        ctx.translate(-patDim,offset);
      }
      else if(i%3==1){
        if(alternateMode){
          ctx.rotate(120*Math.PI/180);
          ctx.translate(-3*patDim, 0);
          ctx.rotate(-120*Math.PI/180);
        }
        ctx.translate(0.5*patDim, height-offset);
        ctx.rotate(-120*Math.PI/180);

-----index-----
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>

<head>
  <title>Directions are on The Bottom of the Page</title>
  <style type="text/css">
    body {
      background: url("http://madhatterstamps.com/backg.jpg") fixed center no-repeat;
    }
  </style>
  <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
  <meta http-equiv="content-script-type" content="text/javascript">
  <meta http-equiv="content-style-type" content="text/css">
  <meta http-equiv="content-language" content="en">
  <meta http-equiv="pragma" content="no-cache">
  <meta name="robots" content="INDEX,FOLLOW">
  <meta name="description"
    content="supplier of rubber stamps, mad hatter, Alice in wonderland, arts and crafts, scrapbooks, ATC suplies,">
  <meta name="keywords"
    content="collage, rubber stamps, mad hatter, Alice in wonderland, arts and crafts, collage kits, scrapbooks, tea party, coloring book, fun, stamp like mad ">
  <meta name="Copyright" content="Mad Hatter Dot Com">
  <meta name="Language" content="en-us">
  <meta name="Publisher" content="Mad Hatter Dot Com">
  <meta name="Distribution" content="global">
  <meta name="Rating" content="general">
  <meta name="author" content="webmaster@madhatterstamps.com">
  <meta name="revisit-after" content="30 days">
  <style>
    <!--
    .dragme {
      position: relative;
    }
    -->
  </style>
  <script language="JavaScript1.2">
  
    
    var ie = document.all;
    var nn6 = document.getElementById && !document.all;

    var isdrag = false;
    var x, y;
    var dobj;

    function movemouse(e) {
      if (isdrag) {
        dobj.style.left = nn6 ? tx + e.clientX - x : tx + event.clientX - x;
        dobj.style.top = nn6 ? ty + e.clientY - y : ty + event.clientY - y;
        return false;
      }
    }

    function selectmouse(e) {
      var fobj = nn6 ? e.target : event.srcElement;
      var topelement = nn6 ? "HTML" : "BODY";

      while (fobj.tagName != topelement && fobj.className != "dragme") {
        fobj = nn6 ? fobj.parentNode : fobj.parentElement;
      }

      if (fobj.className == "dragme") {
        isdrag = true;
        dobj = fobj;
        tx = parseInt(dobj.style.left + 0);
        ty = parseInt(dobj.style.top + 0);
        x = nn6 ? e.clientX : event.clientX;
        y = nn6 ? e.clientY : event.clientY;
        document.onmousemove = movemouse;
        return false;
      }
    }

    document.onmousedown = selectmouse;
    document.onmouseup = new Function("isdrag=false");

    //-->
  </script>
</head>

<body
  style="background-image: url('static/images/make/scene_back.jpg'); color: rgb(204, 204, 204); background-color: rgb(153, 255, 153);"
  vlink="#551a8b" alink="#ee0000" link="#0000ee">
  <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">
    <tbody>
      <tr>
        <td colspan="2" rowspan="1" style="vertical-align: top;">
          <p> </p>


          <img class="dragme" src="static/images/make/Image2.gif">
          <img class="dragme" style="width: 59px; height: 104px;" src="static/images/make/flower2.gif"><img
            class="dragme" style="width: 74px; height: 74px;" src="static/images/make/rat.gif">
          <img class="dragme" style="width: 77px; height: 138px;" src="static/images/make/Tag.gif"><br>
          <br>
          <img class="dragme" src="static/images/make/naughty.gif"><br>
          <img class="dragme" style="width: 329px; height: 84px;" src="static/images/make/back7.gif">
          <img class="dragme" style="width: 42px; height: 75px;" src="static/images/make/flower2.gif">
          <img class="dragme" style="width: 40px; height: 71px;" src="static/images/make/flower2.gif">
          <img class="dragme" style="width: 40px; height: 71px;" src="static/images/make/flower2.gif">
          <img class="dragme" style="width: 99px; height: 89px;" src="static/images/make/butter1.gif">
          <img class="dragme" style="width: 37px; height: 66px;" src="static/images/make/flower2.gif"><br>
          <img class="dragme" src="static/images/make/back6.gif">
          <img class="dragme" style="width: 37px; height: 66px;" src="static/images/make/flower2.gif">
          <img class="dragme" style="width: 59px; height: 104px;" src="static/images/make/flower2.gif">
          <img class="dragme" style="width: 68px; height: 120px;" src="static/images/make/flower1.gif"><br>
          <img class="dragme" style="width: 79px; height: 64px;" src="static/images/make/butter2.gif">
          <img class="dragme" style="width: 229px; height: 67px;" src="static/images/make/grass.gif">
          <img class="dragme" style="width: 250px; height: 78px;" src="static/images/make/grass.gif">
          <img class="dragme" style="width: 81px; height: 120px;" src="static/images/make/treesmall.gif"> <br>
          <br>
          <br>
          <img class="dragme" style="width: 37px; height: 66px;" src="static/images/make/flower2.gif"><img
            class="dragme" style="width: 37px; height: 66px;" src="static/images/make/flower2.gif">
          <img class="dragme" style="width: 69px; height: 56px;" src="static/images/make/butter2.gif">
          <img class="dragme" style="width: 99px; height: 89px;" src="static/images/make/butter1.gif">
          <img class="dragme" style="width: 101px; height: 81px;" src="static/images/make/butter2.gif">
          <img class="dragme" style="width: 54px; height: 96px;" src="static/images/make/flower2.gif">
          <img class="dragme" style="width: 176px; height: 179px;" src="static/images/make/ul.png">
          <img class="dragme" src="ur.gif"><img class="dragme" style="width: 130px; height: 175px;"
            src="static/images/make/rabbit3.gif"><br>
          <img class="dragme" style="width: 63px; height: 56px;" src="static/images/make/butter1.gif">
          <img class="dragme" style="width: 68px; height: 88px;" src="static/images/make/flower1.gif">
          <img class="dragme" style="width: 42px; height: 75px;" src="static/images/make/flower1.gif">
          <img class="dragme" style="width: 31px; height: 55px;" src="static/images/make/flower2.gif">
          <img class="dragme" style="width: 32px; height: 57px;" src="static/images/make/flower1.gif">
          <img class="dragme" style="width: 71px; height: 102px;" src="static/images/make/flower1.gif">
          <img class="dragme" style="width: 76px; height: 134px;" src="static/images/make/flower2.gif">
          <img class="dragme" style="width: 123px; height: 150px;" src="static/images/make/treesmall.gif">
          <img class="dragme" style="width: 78px; height: 96px;" src="static/images/make/treesmall.gif">
          <img class="dragme" style="width: 76px; height: 134px;" src="static/images/make/flower2.gif"><br>
          &nbsp;<img class="dragme" style="width: 213px; height: 241px;" src="static/images/make/shapes2.gif">
          <img class="dragme" src="static/images/make/lr.gif">
          <img class="dragme" src="static/images/make/ll.gif">
        </td>
        <td style="vertical-align: top;">
          <img class="dragme" style="width: 314px; height: 425px;" src="static/images/make/treesmall.gif"><br>
          <br>
          <br>
          <br>
          <br>
          <img class="dragme" style="width: 221px; height: 267px;" src="static/images/make/Aliceflamingo.gif"><br>
          <br>
          <img class="dragme" style="width: 174px; height: 213px;" src="static/images/make/treesmall.gif">
        </td>
      </tr>
    </tbody>
  </table>
  <br>
  <div style="text-align: center;"><big><big><big><br style="color: rgb(204, 0, 0); font-weight: bold;">
        </big><span style="color: rgb(0, 0, 0); font-weight: bold;">All Items
          except for the background may be dragged and dropped<br>
          Items you do not wish to use, may be dragged from the top of the image <br>
          and pulled off the screen on to bottom <br>
          If you scroll down to far just scroll back up to original position<br>
          and all items will be in place.<br>
        </span></big></big><span style="color: rgb(128, 191, 255);"><big style="color: rgb(255, 0, 0);"><span
          style="font-weight: bold;">With
          Microsoft Explore you may use
          full page viewing . . </span></big></span><br style="font-weight: bold;">
    <span style="color: rgb(128, 191, 255);"><big style="color: rgb(255, 0, 0);"><span style="font-weight: bold;">Create
          your picture</span></big></span><br style="font-weight: bold;">
    <span style="color: rgb(128, 191, 255);"><big style="color: rgb(255, 0, 0);"><span style="font-weight: bold;">Press
          Print Screen </span></big></span><br style="font-weight: bold;">
    <span style="color: rgb(128, 191, 255);"><big style="color: rgb(255, 0, 0);"><span style="font-weight: bold;">Paste
          in Paint Shop </span></big></span><br style="font-weight: bold;">
    <span style="color: rgb(128, 191, 255);"><big style="color: rgb(255, 0, 0);"><span style="font-weight: bold;">name
          and save . . </span></big></span><br>
    <span style="color: rgb(128, 191, 255);"><big style="color: rgb(255, 0, 0);"><span style="font-weight: bold;">May be
          used as a windows Background<br>
          <br>

  </div>
</body>

</html>
-----index-----
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>

<head>
  <title>Directions are on The Bottom of the Page</title>
  <style type="text/css">
    body {
      background: url("http://madhatterstamps.com/backg.jpg") fixed center no-repeat;
    }
  </style>
  <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
  <meta http-equiv="content-script-type" content="text/javascript">
  <meta http-equiv="content-style-type" content="text/css">
  <meta http-equiv="content-language" content="en">
  <meta http-equiv="pragma" content="no-cache">
  <meta name="robots" content="INDEX,FOLLOW">
  <meta name="description"
    content="supplier of rubber stamps, mad hatter, Alice in wonderland, arts and crafts, scrapbooks, ATC suplies,">
  <meta name="keywords"
    content="collage, rubber stamps, mad hatter, Alice in wonderland, arts and crafts, collage kits, scrapbooks, tea party, coloring book, fun, stamp like mad ">
  <meta name="Copyright" content="Mad Hatter Dot Com">
  <meta name="Language" content="en-us">
  <meta name="Publisher" content="Mad Hatter Dot Com">
  <meta name="Distribution" content="global">
  <meta name="Rating" content="general">
  <meta name="author" content="webmaster@madhatterstamps.com">
  <meta name="revisit-after" content="30 days">
  <style>
    <!--
    .dragme {
      position: relative;
    }
    -->
  </style>
  <script language="JavaScript1.2">
  
    
    var ie = document.all;
    var nn6 = document.getElementById && !document.all;

    var isdrag = false;
    var x, y;
    var dobj;

    function movemouse(e) {
      if (isdrag) {
        dobj.style.left = nn6 ? tx + e.clientX - x : tx + event.clientX - x;
        dobj.style.top = nn6 ? ty + e.clientY - y : ty + event.clientY - y;
        return false;
      }
    }

    function selectmouse(e) {
      var fobj = nn6 ? e.target : event.srcElement;
      var topelement = nn6 ? "HTML" : "BODY";

      while (fobj.tagName != topelement && fobj.className != "dragme") {
        fobj = nn6 ? fobj.parentNode : fobj.parentElement;
      }

      if (fobj.className == "dragme") {
        isdrag = true;
        dobj = fobj;
        tx = parseInt(dobj.style.left + 0);
        ty = parseInt(dobj.style.top + 0);
        x = nn6 ? e.clientX : event.clientX;
        y = nn6 ? e.clientY : event.clientY;
        document.onmousemove = movemouse;
        return false;
      }
    }

    document.onmousedown = selectmouse;
    document.onmouseup = new Function("isdrag=false");

    //-->
  </script>
</head>

<body
  style="background-image: url('static/images/make/scene_back.jpg'); color: rgb(204, 204, 204); background-color: rgb(153, 255, 153);"
  vlink="#551a8b" alink="#ee0000" link="#0000ee">
  <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">
    <tbody>
      <tr>
        <td colspan="2" rowspan="1" style="vertical-align: top;">
          <p> </p>


          <img class="dragme" src="static/images/make/Image2.gif">
          <img class="dragme" style="width: 59px; height: 104px;" src="static/images/make/flower2.gif"><img
            class="dragme" style="width: 74px; height: 74px;" src="static/images/make/rat.gif">
          <img class="dragme" style="width: 77px; height: 138px;" src="static/images/make/Tag.gif"><br>
          <br>
          <img class="dragme" src="static/images/make/naughty.gif"><br>
          <img class="dragme" style="width: 329px; height: 84px;" src="static/images/make/back7.gif">
          <img class="dragme" style="width: 42px; height: 75px;" src="static/images/make/flower2.gif">
          <img class="dragme" style="width: 40px; height: 71px;" src="static/images/make/flower2.gif">
          <img class="dragme" style="width: 40px; height: 71px;" src="static/images/make/flower2.gif">
          <img class="dragme" style="width: 99px; height: 89px;" src="static/images/make/butter1.gif">
          <img class="dragme" style="width: 37px; height: 66px;" src="static/images/make/flower2.gif"><br>
          <img class="dragme" src="static/images/make/back6.gif">
          <img class="dragme" style="width: 37px; height: 66px;" src="static/images/make/flower2.gif">
          <img class="dragme" style="width: 59px; height: 104px;" src="static/images/make/flower2.gif">
          <img class="dragme" style="width: 68px; height: 120px;" src="static/images/make/flower1.gif"><br>
          <img class="dragme" style="width: 79px; height: 64px;" src="static/images/make/butter2.gif">
          <img class="dragme" style="width: 229px; height: 67px;" src="static/images/make/grass.gif">
          <img class="dragme" style="width: 250px; height: 78px;" src="static/images/make/grass.gif">
          <img class="dragme" style="width: 81px; height: 120px;" src="static/images/make/treesmall.gif"> <br>
          <br>
          <br>
          <img class="dragme" style="width: 37px; height: 66px;" src="static/images/make/flower2.gif"><img
            class="dragme" style="width: 37px; height: 66px;" src="static/images/make/flower2.gif">
          <img class="dragme" style="width: 69px; height: 56px;" src="static/images/make/butter2.gif">
          <img class="dragme" style="width: 99px; height: 89px;" src="static/images/make/butter1.gif">
          <img class="dragme" style="width: 101px; height: 81px;" src="static/images/make/butter2.gif">
          <img class="dragme" style="width: 54px; height: 96px;" src="static/images/make/flower2.gif">
          <img class="dragme" style="width: 176px; height: 179px;" src="static/images/make/ul.png">
          <img class="dragme" src="ur.gif"><img class="dragme" style="width: 130px; height: 175px;"
            src="static/images/make/rabbit3.gif"><br>
          <img class="dragme" style="width: 63px; height: 56px;" src="static/images/make/butter1.gif">
          <img class="dragme" style="width: 68px; height: 88px;" src="static/images/make/flower1.gif">
          <img class="dragme" style="width: 42px; height: 75px;" src="static/images/make/flower1.gif">
          <img class="dragme" style="width: 31px; height: 55px;" src="static/images/make/flower2.gif">
          <img class="dragme" style="width: 32px; height: 57px;" src="static/images/make/flower1.gif">
          <img class="dragme" style="width: 71px; height: 102px;" src="static/images/make/flower1.gif">
          <img class="dragme" style="width: 76px; height: 134px;" src="static/images/make/flower2.gif">
          <img class="dragme" style="width: 123px; height: 150px;" src="static/images/make/treesmall.gif">
          <img class="dragme" style="width: 78px; height: 96px;" src="static/images/make/treesmall.gif">
          <img class="dragme" style="width: 76px; height: 134px;" src="static/images/make/flower2.gif"><br>
          &nbsp;<img class="dragme" style="width: 213px; height: 241px;" src="static/images/make/shapes2.gif">
          <img class="dragme" src="static/images/make/lr.gif">
          <img class="dragme" src="static/images/make/ll.gif">
        </td>
        <td style="vertical-align: top;">
          <img class="dragme" style="width: 314px; height: 425px;" src="static/images/make/treesmall.gif"><br>
          <br>
          <br>
          <br>
          <br>
          <img class="dragme" style="width: 221px; height: 267px;" src="static/images/make/Aliceflamingo.gif"><br>
          <br>
          <img class="dragme" style="width: 174px; height: 213px;" src="static/images/make/treesmall.gif">
        </td>
      </tr>
    </tbody>
  </table>
  <br>
  <div style="text-align: center;"><big><big><big><br style="color: rgb(204, 0, 0); font-weight: bold;">
        </big><span style="color: rgb(0, 0, 0); font-weight: bold;">All Items
          except for the background may be dragged and dropped<br>
          Items you do not wish to use, may be dragged from the top of the image <br>
          and pulled off the screen on to bottom <br>
          If you scroll down to far just scroll back up to original position<br>
          and all items will be in place.<br>
        </span></big></big><span style="color: rgb(128, 191, 255);"><big style="color: rgb(255, 0, 0);"><span
          style="font-weight: bold;">With
          Microsoft Explore you may use
          full page viewing . . </span></big></span><br style="font-weight: bold;">
    <span style="color: rgb(128, 191, 255);"><big style="color: rgb(255, 0, 0);"><span style="font-weight: bold;">Create
          your picture</span></big></span><br style="font-weight: bold;">
    <span style="color: rgb(128, 191, 255);"><big style="color: rgb(255, 0, 0);"><span style="font-weight: bold;">Press
          Print Screen </span></big></span><br style="font-weight: bold;">
    <span style="color: rgb(128, 191, 255);"><big style="color: rgb(255, 0, 0);"><span style="font-weight: bold;">Paste
          in Paint Shop </span></big></span><br style="font-weight: bold;">
    <span style="color: rgb(128, 191, 255);"><big style="color: rgb(255, 0, 0);"><span style="font-weight: bold;">name
          and save . . </span></big></span><br>
    <span style="color: rgb(128, 191, 255);"><big style="color: rgb(255, 0, 0);"><span style="font-weight: bold;">May be
          used as a windows Background<br>
          <br>

  </div>
</body>

</html>
-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Large Video Page</title>
</head>
<body>
    <h1>Large Video Page</h1>
    <a style="color: brown;font-size: large;" href="{{ url_for('index') }}">HOME</a><br />
    <video controls>
        <source src="{{ url_for('static', filename='assets/NearDone.mp4') }}" type="video/mp4">
        Your browser does not support the video tag.
    </video>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>List of Routes</title>
</head>
<body>
    <h1>List of Routes</h1>
    <ul>
        {% for function in functions %}
        <li>{{ function }}</li>
        {% endfor %}
    </ul>
</body>
</html>
-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Log Viewer</title>

    <style>
        pre {
            white-space: pre-wrap;
        }
    </style>


</head>
<body>
    <pre>{{ log_content }}</pre>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
	<title>Animated GIF</title>
</head>
<body>
	<img src="{{ gif_filename }}" alt="Animated GIF">
</body>
</html>
-----index-----
<!-- index.html-->
<!DOCTYPE html>
<html>

<head>
    <title>Misc_Links</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }

        video {
            margin: 10px, auto;
            width: 250px;
            height: auto;
        }

        .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;

        }

        .header {
            width: 100%;
            padding: 20px;
            text-align: center;
        }

        .columns {
            display: flex;
            width: 80%;
            margin-top: 20px;
        }

        .column {
            padding: 20px;
            margin: 2px,2px,2px,2px;
            box-sizing: border-box;
        }

        .column.left {
            width: 40%;
            
            border: 1px solid #000;
        }

        .column.right {
            width: 40%;
              border: 1px solid #000;
            text-align: center;

        }

        .column.right video {
            max-width: 100%;
            height: auto;
        }
    </style>
</head>

<body>
    <div class="wrapper">
        <div class="header">
            <h1>Misc_Links</h1>
        </div>
        <div class="columns">
            <div class="column left">
                <a href="/capture_overlay_verify">Start Capture Regular</a><br />
                <a href="/capture_overlay_short">Start Capture Short</a>
                <a href="{{ url_for('create_text') }}">Create Text Image</a>
                    <a href="{{ url_for('select_by_id_form') }}">Select by ID Form</a><br />
                    <a href="{{ url_for('search_by_rowid') }}">Search by Row ID</a><br />
                    <a href="{{ url_for('search_database') }}">Search the Database</a><br />
                    <a href="{{ url_for('edit_data_page') }}">Edit Data</a><br />
                    <a href="{{ url_for('insert_data') }}">Insert Data</a><br />
                    <a href="{{ url_for('get_rowid_form') }}">Enter Row ID to Edit</a><br />

                <a href="{{ url_for('get_gallery') }}">View Images</a><br />
                <a href="{{ url_for('view_thumbs') }}">View Thumbnails</a><br />
                <a href="{{ url_for('upload_file') }}">Upload Image</a><br />
                <a href="{{ url_for('flask_info') }}">Video</a><br />
                <a href="{{ url_for('add_text') }}">Add text to chat.txt</a><br />
                <a href="{{ url_for('search_txt') }}">Search chat.txt</a><br />
                <a href="{{ url_for('blend_pil') }}">upload and blend images.</a><br />
                <a href="{{ url_for('add_border') }}">Add a border to an image.</a><br />
                <a href="{{ url_for('process_images') }}">Process Images With Mask</a><br />
                <a href="{{ url_for('text_mp3') }}">Create an mp3 from aText Entry</a><br />
                <a href="{{ url_for('view_log') }}">View Log/app.log</a><br />
                <a href="{{ url_for('index') }}">Home (index)</a><br />
                <a href="{{ url_for('format_file') }}">Format Text Files</a><br />
                <a href="{{ url_for('view_text') }}">view_text Text Files</a><br />
                <a href="{{ url_for('generate_video') }}">Create an mp4 from video_resources</a><br />
                <a href="{{ url_for('generate_video2') }}">Create an mp4 from Uploads</a><br />
                <a href="{{ url_for('generate_video3') }}">Choose A directory to create video</a><br />
                <a href="{{ url_for('image_directories') }}">Choose Image directories</a><br />
                <a href="{{ url_for('select_playmp3') }}">Select and play mp3 from audio_mp3/</a><br />
                <a href="{{ url_for('make_animation') }}">Create an Animated Gif (20 images @ 1 per second.)</a><br />
                <a href="{{ url_for('build_stackedvids') }}">Video Stacked on Images</a><br />
                <a href="{{ url_for('build_stackedvid') }}">Two Video Stacked</a><br />
                <a href="{{ url_for('title_page') }}">Create a title Page</a><br />
                <a href="{{ url_for('add_title') }}">Add a Title to a Video</a><br />
                <a href="{{ url_for('add_effects') }}">Add effects to a Video</a><br />
                <a href="{{ url_for('choose_dir') }}">Choose a directory</a><br />
                <a href="{{ url_for('indexA') }}">Working With Text</a><br />
                <a href="{{ url_for('app_utilities') }}">Application Utilities</a><br />
                <a href="{{ url_for('image_processing') }}">Image Processing Links</a><br />
                <a href="{{ url_for('format_file') }}">Format Text Files</a><br />
                <a href="{{ url_for('view_text') }}">View Text Files</a><br />
                <a href="{{ url_for('edit_file') }}">Edit File</a><br />
                <a href="{{ url_for('edit_formatted') }}">Edit Formatted Text</a><br />
                <a href="{{ url_for('app_utilities') }}">Application Utilities</a><br />
                <a href="{{ url_for('image_processing') }}">Image Processing Links</a><br />
                <a href="{{ url_for('format_file') }}">Format Text Files</a><br />
                <a href="{{ url_for('view_text') }}">View Text Files</a><br />
                <a href="{{ url_for('edit_file') }}">Edit File</a><br />
                <a href="{{ url_for('edit_formatted') }}">Edit Formatted Text</a><br />
                <a href="{{ url_for('index') }}">Home (index)</a><br />
                <a href="{{ url_for('format_file') }}">Format Text Files</a><br />
                <a href="{{ url_for('view_text') }}">view_text Text Files</a><br />
                <a href="{{ url_for('image_stuff') }}">Comic Book Experiment</a><br />
                <a href="{{ url_for('edit_description') }}">Edit Description</a><br /><br>
                <a href="{{ url_for('edit_description') }}">Edit Description</a><br />
            </div>
            <div class="column right">
                <a href="{{ url_for('mk_text') }}">Create a Text File</a><br />
                <a href="{{ url_for('format_file') }}">Format Text Files</a><br />
                <a href="{{ url_for('view_text') }}">View Text Files</a><br />
                <a href="{{ url_for('edit_file') }}">Edit File</a><br />
                <a href="{{ url_for('edit_formatted') }}">Edit Formatted Text</a><br />
                <a href="{{ url_for('mk_background') }}">Creat Video From Thumbnail Cache</a><br />
                <a href="{{ url_for('add_border') }}">Add a border to an image.</a><br />
                <a href="{{ url_for('get_gallery') }}">View Images</a><br />
                <a href="{{ url_for('view_thumbs') }}">View Thumbnails</a><br />
                <a href="{{ url_for('upload_file') }}">Upload Image</a><br />
                <a href="{{ url_for('flask_info') }}">Video</a><br />
                <a href="{{ url_for('add_text') }}">Add text to chat.txt</a><br />
                <a href="{{ url_for('search') }}">Search chat.txt</a><br />
                <a href="{{ url_for('blend_pil') }}">upload and blend images.</a><br />
                <a href="{{ url_for('add_border') }}">Add a border to an image.</a><br />
                <a href="{{ url_for('process_images') }}">Process Images With Mask</a><br />
                <a href="{{ url_for('text_mp3') }}">Create an mp3 from aText Entry</a><br />
                <a href="{{ url_for('generate_video') }}">Create an mp4 from video_resources</a><br />
                <a href="{{ url_for('generate_video2') }}">Create an mp4 from Uploads</a><br />
                <a href="{{ url_for('image_directories') }}">Choose Image directories</a><br />
                <a href="{{ url_for('select_playmp3') }}">Select and play mp3 from audio_mp3/</a><br />
                <a href="{{ url_for('make_animation') }}">Create an Animated Gif (20 images @ 1 per second.)</a><br />
                <a href="{{ url_for('build_stackedvids') }}">Video Stacked on Images</a><br />
                <a href="{{ url_for('build_stackedvid') }}">Two Video Stacked</a><br />
                <a href="{{ url_for('title_page') }}">Create a title Page</a><br />
                <a href="{{ url_for('add_title') }}">Add a Title to a Video</a><br />
                    <form action="{{ url_for('clean_images_route') }}" method="POST">
                        <button type="submit">Clean Images</button>
                    </form>
                    <form action="/search" method="GET">
                        <label for="search-term">Search:</label>
                        <input type="text" id="search-term" name="q">
                        <button type="submit">Search</button>
                    </form>

                    <a href="https://www.youtube.com/@totallyinsaneart3345" target="_blank ">Totally Insane
                        Art</a><br />
                    <a href="https://www.youtube.com/@JackNorthrup" target="_blank ">Jack Northrup</a><br />
                    </video>
            </div>
        </div>
    </div>
</body>

</html>
-----index-----
<!DOCTYPE html>
<html>

<head>
    <title>Text Entry</title>
</head>

<body>
    <h1>Enter Text</h1>
    <form method="POST" action="/mk_text">
        <textarea name="text" rows="10" cols="50"></textarea>
        <br>
        <input type="submit" value="Save">
    </form>
    <ul>
        <li><a href="{{ url_for('index') }}">Home (index)</a></li><br />
        <li><a href="{{ url_for('format_file') }}">Format Text Files</a></li><br />
        <li><a href="{{ url_for('view_text') }}">view_text Text Files</a></li><br />
    </ul>
</body>

</html>
-----index-----
<!DOCTYPE html>
<html>
<head>
  <title>Blend Images</title>
</head>
<body>
  <h1>Blend Images</h1>

  <video width="480" height="auto" controls>
    <source src="{{ video }}" type="video/mp4">
    Your browser does not support the video tag.
  </video><br /><br /><br />
  <video width="480" height="auto" controls>
    <source src="static/animate/TEMP5.mp4" type="video/mp4">
    Your browser does not support the video tag.
  </video><br />
  <video width="480" height="auto" controls>
    <source src="static/animate/TEMP5.webm" type="video/webp">
    Your browser does not support the video tag.
  </video><br />
  
</html>
-----index-----
<!DOCTYPE html>
<html>
<head>
  <title>Blend Images</title>
</head>
<body>
  <h1>Blend Images</h1>

  <video width="480" height="auto" controls>
    <source src="{{ video }}" type="video/mp4">
    Your browser does not support the video tag.
  </video><br /><br /><br />
  <video width="480" height="auto" controls>
    <source src="static/animate/TEMP5.mp4" type="video/mp4">
    Your browser does not support the video tag.
  </video><br />
  <video width="480" height="auto" controls>
    <source src="static/animate/TEMP5.webm" type="video/webp">
    Your browser does not support the video tag.
  </video><br />
  
</html>
-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>mkmoz</title>
</head>
<body>
    <h1>Generated Thumbnail</h1>
    <img src="{{ url_for('static', filename=filename) }}" alt="Thumbnail Image">
</body>
</html>


-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Make Background</title>
</head>
<body>
    <h1>Generated Thumbnail</h1>
    <img src="{{ url_for('static', filename=filename) }}" alt="Thumbnail Image">
    <hr>
         <video width="512" height="auto" controls>
        <source src="{{ url_for('static', filename=video) }}" type="video/mp4">
    </video><br />
       
</body>
</html>
-----index-----
<!DOCTYPE html>
<html>

<head>
    <title>Crop Images</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }
        video {
            margin: 10px, auto;
            width: 200px;
            height: auto;
        }

          .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;

        }

        .header {
            width: 100%;
            padding: 20px;
            text-align: center;
        }

        .columns {
            display: flex;
            width: 80%;
            margin-top: 20px;
        }

        .column {
            padding: 20px;
            box-sizing: border-box;
        }

        .column.left {
            width: 30%;
            border:    1px solid #000;
        }

        .column.right {
        margin: 0 auto; /* Center horizontally */
        width: 60%;
        border: 1px solid #000;
        text-align: center; /* Center video vertically */
    }

    .column.right video {
        max-width: 100%;
        height: auto;
    }
    </style>
</head>
<body>
    <div class="wrapper">
        <div class="header">
            <h1>Crop Images</h1>
            <a href="{{ url_for('index') }}">HOME</a><br />
        </div>
        <div class="columns">
            <div class="column left">

                <h3>Create Text</h3><br />
                <a href="{{ url_for('app_utilities') }}">Application Utilities</a><br />
                <a href="{{ url_for('image_processing') }}">Image Processing Links</a><br />
                <a href="{{ url_for('format_file') }}">Format Text Files</a><br />
                <a href="{{ url_for('view_text') }}">View Text Files</a><br />
                <a href="{{ url_for('edit_file') }}">Edit File</a><br />


                <a href="{{ url_for('edit_description') }}">Edit Description</a><br />
                 <video controls>
                    <source src="{{ video }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
            <div class="column right">
                
   <h2>Image Cropping</h2>
    <form method="POST" enctype="multipart/form-data" action="{{ url_for('crop') }}">
        <input type="file" name="image">
        <input type="submit" value="Upload">
    </form>

    {% if image_path %}
    <h2>Cropped Image Preview</h2>
    <img src="{{ image_path }}" alt="Cropped Image">
    <form method="POST" action="{{ url_for('crop_and_save') }}">
        <input type="hidden" name="image_path" value="{{ image_path }}">
        <label for="x">X Coordinate: </label>
        <input type="number" name="x" required><br>
        <label for="y">Y Coordinate: </label>
        <input type="number" name="y" required><br>
        <label for="width">Width: </label>
        <input type="number" name="width" required><br>
        <label for="height">Height: </label>
        <input type="number" name="height" required><br>
        <input type="submit" value="Crop and Save">
    </form>
    <form method="POST" action="{{ url_for('move_cropped') }}">

        <input type="submit" value="Move Cropped Image">
    </form>

    {% endif %}
<br/> <img src="{{mv_img}}">
               
            </div>
        </div>
    </div>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Select and Play MP3</title>
</head>
<body>
    <h1>Select and Play MP3</h1>
    <li><a href="{{ url_for('index') }}">HOME</a></li>
    
    <form method="POST">
        <label for="selected_directory">Select a directory:</label>
        <select name="selected_directory" id="selected_directory">
            {% for directory in directories %}
                <option value="{{ directory }}" {% if selected_directory == directory %}selected{% endif %}>{{ directory }}</option>
            {% endfor %}
        </select>
        <button type="submit">Select Directory</button>
    </form>

    {% if selected_directory %}
        <form method="POST">
            <label for="mp3_file">Choose an MP3 file:</label>
            <select name="mp3_file" id="mp3_file">
                <option value="">-- Select MP3 File --</option>
                {% for mp3 in mp3_files %}
                    <option value="{{ mp3 }}">{{ mp3 }}</option>
                {% endfor %}
            </select>
            <button type="submit">Play</button>
        </form>
    {% endif %}

    <audio controls id="audio-player">
        <source src="" type="audio/mpeg">
    </audio>

    <script>
        const mp3Select = document.getElementById('mp3_file');
        const selectedDirectory = document.getElementById('selected_directory');
        const audioPlayer = document.getElementById('audio-player');

        mp3Select.addEventListener('change', function() {
            const selectedFile = mp3Select.value;
            const selectedDir = selectedDirectory.value;
            const filePath = selectedDir + selectedFile;
            audioPlayer.src = filePath;
            audioPlayer.load(); // Load the new source
            audioPlayer.play(); // Start playing
        });
    </script>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>MP4 to Image Converter</title>
</head>
<body>
    <h1>MP4 to Image Converter</h1>
    <form method="POST" enctype="multipart/form-data">
        <label for="mp4_file">Select an MP4 file:</label>
        <input type="file" name="mp4_file" id="mp4_file" accept=".mp4" required>
        <br>
        <label for="action">Choose an action:</label>
        <select name="action" id="action" required>
            <option value="save">Save Frames as Images</option>
            <option value="delete">Delete MP4 File</option>
        </select>
        <br>
        <input type="submit" value="Submit">
    </form>
</body>
</html>


-----index-----
<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<style>
canvas {
    border:1px solid #d3d3d3;
    background-color: #f1f1f1;
}
</style>
</head>
<body onload="startGame()">
<script>

var myGamePiece;
var myObstacles = [];
var myScore;

function startGame() {
    myGamePiece = new component(30, 30, "red", 10, 120);
    myGamePiece.gravity = 0.05;
    myScore = new component("30px", "Consolas", "black", 280, 40, "text");
    myGameArea.start();
}

var myGameArea = {
    canvas : document.createElement("canvas"),
    start : function() {
        this.canvas.width = 480;
        this.canvas.height = 270;
        this.context = this.canvas.getContext("2d");
        document.body.insertBefore(this.canvas, document.body.childNodes[0]);
        this.frameNo = 0;
        this.interval = setInterval(updateGameArea, 20);
        },
    clear : function() {
        this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
    }
}

function component(width, height, color, x, y, type) {
    this.type = type;
    this.score = 0;
    this.width = width;
    this.height = height;
    this.speedX = 0;
    this.speedY = 0;    
    this.x = x;
    this.y = y;
    this.gravity = 0;
    this.gravitySpeed = 0;
    this.update = function() {
        ctx = myGameArea.context;
        if (this.type == "text") {
            ctx.font = this.width + " " + this.height;
            ctx.fillStyle = color;
            ctx.fillText(this.text, this.x, this.y);
        } else {
            ctx.fillStyle = color;
            ctx.fillRect(this.x, this.y, this.width, this.height);
        }
    }
    this.newPos = function() {
        this.gravitySpeed += this.gravity;
        this.x += this.speedX;
        this.y += this.speedY + this.gravitySpeed;
        this.hitBottom();
    }
    this.hitBottom = function() {
        var rockbottom = myGameArea.canvas.height - this.height;
        if (this.y > rockbottom) {
            this.y = rockbottom;
            this.gravitySpeed = 0;
        }
    }
    this.crashWith = function(otherobj) {
        var myleft = this.x;
        var myright = this.x + (this.width);
        var mytop = this.y;
        var mybottom = this.y + (this.height);
        var otherleft = otherobj.x;
        var otherright = otherobj.x + (otherobj.width);
        var othertop = otherobj.y;
        var otherbottom = otherobj.y + (otherobj.height);
        var crash = true;
        if ((mybottom < othertop) || (mytop > otherbottom) || (myright < otherleft) || (myleft > otherright)) {
            crash = false;
        }
        return crash;
    }
}

function updateGameArea() {
    var x, height, gap, minHeight, maxHeight, minGap, maxGap;
    for (i = 0; i < myObstacles.length; i += 1) {
        if (myGamePiece.crashWith(myObstacles[i])) {
            return;
        } 
    }
    myGameArea.clear();
    myGameArea.frameNo += 1;
    if (myGameArea.frameNo == 1 || everyinterval(150)) {
        x = myGameArea.canvas.width;
        minHeight = 20;
        maxHeight = 200;
        height = Math.floor(Math.random()*(maxHeight-minHeight+1)+minHeight);
        minGap = 50;
        maxGap = 200;
        gap = Math.floor(Math.random()*(maxGap-minGap+1)+minGap);
        myObstacles.push(new component(10, height, "green", x, 0));
        myObstacles.push(new component(10, x - height - gap, "green", x, height + gap));
    }
    for (i = 0; i < myObstacles.length; i += 1) {
        myObstacles[i].x += -1;
        myObstacles[i].update();
    }
    myScore.text="SCORE: " + myGameArea.frameNo;
    myScore.update();
    myGamePiece.newPos();
    myGamePiece.update();
}

function everyinterval(n) {
    if ((myGameArea.frameNo / n) % 1 == 0) {return true;}
    return false;
}

function accelerate(n) {
    myGamePiece.gravity = n;
}
</script>
<br>
<button onmousedown="accelerate(-0.2)" onmouseup="accelerate(0.05)">ACCELERATE</button>
<p>Use the ACCELERATE button to stay in the air</p>
<p>How long can you stay alive?</p>
<button type="button"
onclick="document.getElementById('demo').innerHTML = Date()">
Click me to display Date and Time.</button>

<p id="demo"></p>

</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Outlined Image</title>
</head>
<body>
    <h1>Outlined Image</h1>
    Original:
    <img src="{{ image_orig }}" alt="original Image" style="width: 300px; height: auto;">&nbsp;&nbsp;&nbsp;
    Outlined:
    <img src="{{ image_path }}" alt="outlined Image" style="width: 300px; height: auto;">&nbsp;&nbsp;&nbsp;
    Blk-n-White:
    <img src="{{ image_path2 }}" alt="black_Image" style="width: 300px; height: auto;">
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Overlay Text</title>
</head>
<body style="background-color: cadetblue;">
    <h1>Overlay Text Result</h1>
    <a href="{{ url_for('indexA') }}">HOME</a><br />
    <img src="{{ output_image_path }}" alt="Overlay Text Result">
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>HTML Viewer</title>
    <script src="https://cdn.skypack.dev/dat.gui@0.7.7"></script>
    {% for script_file in script_files %}
        <script>
            {{ script_file | safe }}
        </script>
    {% endfor %}

    <style type="text/css">
        html{
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        
        body {
            margin: 0;
            padding: 0;
            color: #fff;
            background-color: #000;
        }
        
        canvas {
            -webkit-tap-highlight-color: transparent;
            tap-highlight-color: transparent;
            -webkit-user-select: none;
            user-select: none;
            cursor: pointer;
        }
        </style>   
</head>
<body>
    <canvas id="canvas"></canvas>
    <div id="output">
        {{ html_content | safe }}
    </div>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>HTML Viewer</title>
    <script src="https://cdn.skypack.dev/dat.gui@0.7.7"></script>
    <script src="script.js"></script>
</head>
<body>
    <canvas id="canvas"></canvas>
    <div id="output">
        {{ html_content | safe }}
    </div>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>HTML Viewer</title>
    <!--script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r67/three.min.js"></script
https://zeptojs.com/
    -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <style>
        body{ background-color:bisque; }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>

    <script src="static/scripts/script.js"></script>
    <script>
        // Replace this with your actual AJAX request
        $.ajax({
            url: '/save_favicon',
            method: 'POST',
            contentType: 'application/json', // Set the content type to JSON
            data: JSON.stringify({ "image_data": imageData }), // Your JSON data here
            success: function(response) {
                console.log(response); // Handle the response from the server
            },
            error: function(xhr, textStatus, errorThrown) {
                console.error(xhr.responseText); // Handle errors
            }
        });
    </script>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>HTML Viewer</title>
    <!--script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r67/three.min.js"></script
https://zeptojs.com/
    -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <style>
        body{ background-color:bisque; }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>

    <script src="static/scripts/two_canvas.js"></script>
    <script>
        // Replace this with your actual AJAX request
        $.ajax({
            url: '/save_favicon',
            method: 'POST',
            contentType: 'application/json', // Set the content type to JSON
            data: JSON.stringify({ "image_data": imageData }), // Your JSON data here
            success: function(response) {
                console.log(response); // Handle the response from the server
            },
            error: function(xhr, textStatus, errorThrown) {
                console.error(xhr.responseText); // Handle errors
            }
        });
    </script>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>HTML Viewer</title>
</head>
<body>
    <h1>HTML Viewer</h1>
    <div id="output">
        {{ html_content | safe }}
    </div>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
  <head>
    <title>Upload Images to Blend</title>
  </head>
  <body>
    <a style ="font-size: 24px;color: brown;" href="{{ url_for('index') }}">HOME</a>
    <h1>Upload Images to Blend</h1>
    <form action="{{ url_for('process_images') }}" method="post" enctype="multipart/form-data">
      <p>Select the first image:</p>
      <input type="file" name="image1"><br>
      <p>Select the second image:</p>
      <input type="file" name="image2"><br>
      <p>Select the third image:</p>
      <input type="file" name="image3"><br><br>
      <input type="submit" value="Process Images">
    </form>

  <br>
    <img src="{{ url_for('static', filename='images/image2.jpg') }}" alt="Example image"><br />
  </body>
</html>


-----index-----
<!-- app_utilities.html-->
<!DOCTYPE html>
<html>

<head>
    <title>Processing Text - txt and html files</title>
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/body.css') }}">
</head>

<body>
    <div class="wrapper">
        <div class="header">
            <h1>Processing Text - txt and html files</h1>
        </div>
        <div class="columns">
            <div class="column left">
<a style="font-size:30px;color:red;" href="{{ url_for('index') }}">HOME</a><br /><br /><br />
                <a href="{{ url_for('mk_text') }}">Create a Text File</a><br />
                <a href="{{ url_for('view_text') }}">View Text Files</a><br />
                <a href="{{ url_for('edit_file') }}">Edit Text File</a><br /><br />
                <a href="{{ url_for('format_file') }}">Format Text Files</a><br />
                <a href="{{ url_for('edit_formatted') }}">Edit Formatted Text</a><br /><br />
                <a href="{{ url_for('edit_template') }}">Edit a Template</a><br /><br />
                <a href="{{ url_for('the_description') }}">View FlaskAppArchitect Description</a><br />
                <a href="{{ url_for('edit_description') }}">Edit FlaskAppArchitect Description</a><br /><br />
                <a href="{{ url_for('enter_code') }}">Enter Code in codehints.txt</a><br />
                <a href="{{ url_for('search_code') }}">Search Code Hints</a><br /><br />

                <a href="{{ url_for('edit_css') }}">Edit Css Files</a><br />
                <a href="{{ url_for('terminal_index') }}">Terminal Emulator</a><br />
             
            </div>
            <div class="column right">
                <h2>Random Video</h2>
                <p>This will eventually be an instruction video on how to use this page</p><br />

                <video controls>
                    <source src="{{ video }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>

            </div>
        </div>
    </div>
</body>
</html>

-----index-----
{% extends 'base1.html' %}

{% block title %}
    Products
{% endblock %}

{% block content %}
    <h1>Products</h1>
    <table>
        <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Description</th>
            <th>Price</th>
            <th>Actions</th>
        </tr>
        {% for product in products %}
        <tr>
            <td>{{ product[0] }}</td>
            <td>{{ product[1] }}</td>
            <td>{{ product[2] }}</td>
            <td>{{ product[3] }}</td>
            <td>
                <a href="{{ url_for('edit_product', product_id=product[0]) }}">Edit</a>
                <form action="{{ url_for('delete_product', product_id=product[0]) }}" method="post">
                    <button type="submit">Delete</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </table>
    <hr>
    <h1>Add New Product</h1>
    <form action="/products" method="post">
        <label for="name">Name:</label>
        <input type="text" name="name"><br>
        <label for="description">Description:</label>
        <input type="text" name="description"><br>
        <label for="price">Price:</label>
        <input type="text" name="price"><br>
        <input type="submit" value="Add Product">
    </form>
{% endblock %}

-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Resize and Overlay Videos</title>
</head>
<body>
    <h1>Resize and Overlay Videos</h1>

    <video controls>
        <source src="{{ video_path }}" type="video/mp4">
        Your browser does not support the video tag.
    </video>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
  <head>
    <title>Uploaded Image</title>
  </head>
  <body style="background-color:powderblue;">
    <center>
    <h1>Uploaded Image</h1>
    <a style="color:red;font-size: large;" href="{{ url_for('index') }}">RETURN HOME</a><br /><br /> 
    <img src="{{ url_for('static', filename='images/uploads/' + filename) }}" alt="Uploaded Image">
  </center>
  </body>
</html>


-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Search Results</title>
</head>
<body>
    <h1>Search Results</h1>
    <ul>
        {% for result in results %}
            <pre>{{ result }}</pre>
        {% endfor %}
    </ul>
</body>
</html>


-----index-----
<!DOCTYPE html>
<html>
  <head>
    <title>Uploaded Video</title>
  </head>
  <body>
    <h1>Uploaded Video</h1>
    <p>Here is your video:</p>
    <video width="480" height="480" controls>
      <source src="{{ url_for('static', filename=output_file) }}?timestamp={{ timestamp }}" type="video/mp4">
      Your browser does not support the video tag.
    </video>
    <p>Timestamp: {{ timestamp }}</p>
  </body>
</html>

-----index-----
<!-- app_utilities.html-->
<!DOCTYPE html>
<html>

<head>
    <title>Run Bash Command</title>
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
</head>

<body>
    <div class="wrapper">
        <div class="header">
            <h1>Run Bash Command</h1>
        </div>
            <div class="column left">
    <form action="{{ url_for('run_bash') }}" method="POST">
        <label for="bash_command">Enter Bash Command:</label>
        <textarea name="bash_command" id="bash_command" rows="4" cols="50"></textarea>
        <br>
        <button type="submit">Run Command</button>
    </form>
    
    <h2>Result:</h2>
    <pre>{{ result }}</pre>
</div>
            <div class="column right">
                <h2>Random Video</h2>
                <p>This will evenually be an instruction video on how to use this page</p><br />

                <video controls>
                    <source src="{{ video }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>

            </div>

        </div>
</body>
</html>


-----index-----
<!-- save_canvas_script.html-->
    <!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <script src="{{ url_for('static', filename=script_file) }}"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <title>JavaScript Script Editor</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.js"></script>
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }

        video {
            margin: 10px, auto;
            width: 250px;
            height: auto;
        }

        .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;

        }

        .header {
            width: 100%;
            padding: 20px;
            text-align: center;
        }

        .columns {
            display: flex;
            width: 80%;
            margin-top: 20px;
        }

        .column {
            padding: 20px;
            box-sizing: border-box;
        }

        .column.left {
            width: 30%;
            border: 1px solid #000;
        }

        .column.right {
            margin: 0 auto;
            /* Center horizontally */
            width: 60%;
            border: 1px solid #000;
            text-align: center;
            /* Center video vertically */
        }

        .column.right video {
            max-width: 100%;
            height: auto;
        }
    </style>
</head>


</head>

<body>
    <div class="wrapper">
        <div class="columns">
            <div class="column left">

                <head>
                    <h2>JavaScript Script Editor</h2>
                </head><br />
                <a style="font-size:30px;color:red;" href="{{ url_for('index') }}">HOME</a><br /><br /><br />

                <form action="/preview" method="POST">
                    <textarea id="editor" name="script"></textarea>
                    <br>
                    <input type="submit" value="Preview">
                </form><br />
                <hr>
                <form action="/preview_two_canvas" method="POST">
                    <textarea id="editor" name="script"></textarea>
                    <br>
                    <input type="submit" value="Preview Two">
                </form><br />


                <a href="/edit_script">Edit Script</a><br />
                <script>
                    var editor = ace.edit("editor");
                    editor.setTheme("ace/theme/monokai");
                    editor.getSession().setMode("ace/mode/javascript");
                </script><br /><br />
                <button id="captureButton">capture_video</button><br />
                <button id="capture_square">capture_square</button><br />
            </div>
            <div class="column right">
                <h2>Random Video</h2>
                <p>This will eventually be an instruction video on how to use this page</p><br />

                <video controls>
                    <source src="{{ video }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                <br /><br />>

                <audio id="audioPlayer" controls>
                    <source src="{{ url_for('static', filename='MUSIC/Blue_Mood-Robert_Munzinger.mp3') }}"
                        type="audio/mpeg">
                    Your browser does not support the audio element.
                </audio>
                <br />

                <script>
                    var audioPlayer = document.getElementById('audioPlayer');
                    var playButton = document.getElementById('playButton');

                    playButton.addEventListener('click', function () {
                        audioPlayer.play();
                    });
                </script><br />


                <script>
                    document.getElementById("captureButton").addEventListener("click", function () {
                        fetch('/capture_video')  // Replace with the correct route to capture video
                            .then(response => response.json())
                            .then(data => {
                                console.log(data.message);  // Print the response from the server
                            })
                            .catch(error => {
                                console.error(error);
                            });
                    });
                </script>

                <script>
                    document.getElementById("capture_square").addEventListener("click", function () {
                        fetch('/capture_square')  // Replace with the correct route to capture video
                            .then(response => response.json())
                            .then(data => {
                                console.log(data.message);  // Print the response from the server
                            })
                            .catch(error => {
                                console.error(error);
                            });
                    });
                </script>

            </div>
        </div>
    </div>
</body>

</html>
-----index-----
<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <title>JavaScript Script Editor</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.js"></script>
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }

        video {
            margin: 10px, auto;
            width: 250px;
            height: auto;
        }

        .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;

        }

        .header {
            width: 100%;
            padding: 20px;
            text-align: center;
        }

        .columns {
            display: flex;
            width: 80%;
            margin-top: 20px;
        }

        .column {
            padding: 20px;
            box-sizing: border-box;
        }

        .column.left {
            width: 30%;
            border: 1px solid #000;
        }

        .column.right {
            margin: 0 auto;
            /* Center horizontally */
            width: 60%;
            border: 1px solid #000;
            text-align: center;
            /* Center video vertically */
        }

        .column.right video {
            max-width: 100%;
            height: auto;
        }
    </style>
</head>


</head>

<body>
    <div class="wrapper">
        <div class="columns">
            <div class="column left">

                <head>
                    <h2>JavaScript Script Editor</h2>
                </head><br />
                <a style="font-size:30px;color:red;" href="{{ url_for('index') }}">HOME</a><br /><br /><br />

                <form action="/preview" method="POST">
                    <textarea id="editor" name="script"></textarea>
                    <br>
                    <input type="submit" value="Preview">
                </form><br />
                <hr>
                <form action="/preview_two_canvas" method="POST">
                    <textarea id="editor" name="script"></textarea>
                    <br>
                    <input type="submit" value="Preview Two">
                </form><br />


                <a href="/edit_script">Edit Script</a><br />
                <script>
                    var editor = ace.edit("editor");
                    editor.setTheme("ace/theme/monokai");
                    editor.getSession().setMode("ace/mode/javascript");
                </script><br /><br />
                <button id="captureButton">capture_video</button><br />
                <button id="capture_square">capture_square</button><br />
            </div>
            <div class="column right">
                <h2>Random Video</h2>
                <p>This will eventually be an instruction video on how to use this page</p><br />

                <video controls>
                    <source src="{{ video }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                <br /><br />>

                <audio id="audioPlayer" controls>
                    <source src="{{ url_for('static', filename='MUSIC/Blue_Mood-Robert_Munzinger.mp3') }}"
                        type="audio/mpeg">
                    Your browser does not support the audio element.
                </audio>
                <br />

                <script>
                    var audioPlayer = document.getElementById('audioPlayer');
                    var playButton = document.getElementById('playButton');

                    playButton.addEventListener('click', function () {
                        audioPlayer.play();
                    });
                </script><br />


                <script>
                    document.getElementById("captureButton").addEventListener("click", function () {
                        fetch('/capture_video')  // Replace with the correct route to capture video
                            .then(response => response.json())
                            .then(data => {
                                console.log(data.message);  // Print the response from the server
                            })
                            .catch(error => {
                                console.error(error);
                            });
                    });
                </script>

                <script>
                    document.getElementById("capture_square").addEventListener("click", function () {
                        fetch('/capture_square')  // Replace with the correct route to capture video
                            .then(response => response.json())
                            .then(data => {
                                console.log(data.message);  // Print the response from the server
                            })
                            .catch(error => {
                                console.error(error);
                            });
                    });
                </script>

            </div>
        </div>
    </div>
</body>

</html>
-----index-----
<<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search by Row ID</title>
</head>
<body>
    <h1>Search Data by Row ID</h1>
    <form action="{{ url_for('search_database') }}" method="post">
        <label for="search_area">Select Search Area:</label>
        <select name="search_area" id="search_area" required>
            <option value="rowid">Row ID</option>
            <option value="description">Description</option>
            <option value="code">Code</option>
            <option value="keywords">Keywords</option>
        </select>
        <br>
        <label for="search_term">Enter Search Term:</label>
        <input type="text" name="search_term" id="search_term" required>
        <br>
        <button type="submit">Search</button>
    </form>
    <br>
    <a href="{{ url_for('indexdb') }}">Go back to the Index Page</a>
</body>
</html>

-----index-----
<!--search_chat.html-->
<!DOCTYPE html>
<html>
<head>
    <title>Search Chat</title>
</head>
<body>
    <h1>Search Results for "{{ query }}"</h1>
    
    <form method="GET" action="{{ url_for('search_chat') }}">
        <label for="search">Search:</label>
        <input type="text" id="search" name="q" value="{{ query }}">
        <input type="submit" value="Search">
    </form>
    
    <ul>
        {% for message in results %}
            <li>{{ message.content }}</li>
        {% endfor %}
    </ul>
</body>
</html>

-----index-----
<!-- search_data.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Code Snippets</title>
 
    <link rel="stylesheet" href="static/css/flask.css">

</head>
<body>
    <h2>Search Code Snippets</h2>
    <form method="POST">
        <label for="keyword">Enter Keyword:</label>
        <input type="text" name="keyword">
        <input type="submit" value="Search">
    </form>
<ul>
   <li><a style="font-size: 24px;color: brown;" href="{{ url_for('index') }}">HOME</a></li><br />
    <li><a style="font-size: 24px;color: brown;" href="{{ url_for('data_page') }}">Data Page</a></li><br />
</ul>

</body>
</html>
-----index-----
<html>
<body>
    <center>
    <h1>Search</h1>
    <form action="/search_database" method="POST">
        <label for="search_term">Search Term:</label>
        <input type="text" id="search_term" name="search_term"><br>

        <label for="search_area">Search Area:</label>
        <select id="search_area" name="search_area">
            <option value="description">Description</option>
            <option value="code">Code Snippet</option>
            <option value="keywords">Keywords</option>
        </select><br>

        <input type="submit" value="Search">
    </form>
</center>
</body>
</html>

-----index-----
<!-- search_results.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Results</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
   <style>
   body {

    background-image: url('../static/assets/MemMaker_background.png');
    background-repeat: repeat-y;
    background-size: contain;
    background-position: top;
    font-family: Arial, sans-serif;
}
</style>
</head>
<body>
    <h2>Search Again or Enter Data</h2>

    <ul>
        <li><a href="{{ url_for('search_code') }}">Back to Search</a></li>
        <li><a href="{{ url_for('enter_code') }}">Make a CodeHints Entry</a></li>
    </ul>
    <a style="font-size: 24px;color: brown;" href="{{ url_for('index') }}">HOME</a>


    <h1>Search Results for "{{ keyword }}"</h1>
    
    {% if code_blocks %}
        <ul>
            {% for block in code_blocks %}
                <li>
                    <strong>Timestamp and Code Block:</strong><br>
                    <pre>{{ block.code_block }}</pre>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No matching code blocks found.</p>
    {% endif %}
    
 
</body>
</html>

-----index-----
# -------- search.html ----------------
<!DOCTYPE html>
<html>
<head>
    <title>Search Page</title>
</head>
<body>
    <h1>Search</h1>
    <form method="POST" action="{{ url_for('search_text') }}">
        <input type="text" name="phrase" placeholder="Enter your search phrase">
        <button type="submit">Search</button>
    </form>
</body>
</html>



-----index-----
# -------- search.html ----------------
<!DOCTYPE html>
<html>
<head>
    <title>Search Page</title>
</head>
<body>
    <h1>Search</h1>
    <form method="POST" action="{{ url_for('search_txt') }}">
        <input type="text" name="phrase" placeholder="Enter your search phrase">
        <button type="submit">Search</button>
    </form>
</body>
</html>



-----index-----
<!DOCTYPE html>
<html>
  <head>
    <title>Select Border</title>
  </head>
  <body>
    <h1>Select Border</h1>
    <form method="POST" action="{{ url_for('apply_border') }}">
      <input type="hidden" name="image" value="{{ request.args.get('image') }}">
      {% for border in borders %}
        <img src="{{ url_for('static', filename='transparent_borders/'+border) }}" alt="{{ border }}" width="200" height="200">
        <input type="radio" name="border" value="{{ border }}">&nbsp;&nbsp;
      {% endfor %}
      <input type="submit" value="Apply Border">
    </form>
  </body>
</html>

<!--
  <html>
  <head>
    <title>Add Border</title>
    <style>
      .thumbnail-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
        max-width: 1000px; /* adjust this value to your liking */
        margin: 0 auto;
      }

      .thumbnail {
        flex-basis: calc(20% - 10px); /* adjust this value to change the number of columns */
        margin-bottom: 20px;
      }
    </style>
  </head>
  <body>
    <h1>Add Border</h1>
    <div class="thumbnail-container">
      {% for thumbnail in thumbnails %}
        <div class="thumbnail">
          <a href="{{ url_for('select_border', image=thumbnail.replace('thumbnail_', '')) }}">
            <img src="{{ url_for('static', filename='thumbnails/'+thumbnail) }}" alt="{{ thumbnail }}" style="border: 10px solid transparent; box-shadow: 0 0 0 10px #fff, 0 0 0 15px #000;">
          </a>
        </div>
      {% endfor %}
    </div>
  </body>
</html>
-->
-----index-----
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Select by ID Form</title>
</head>
<body>
    <h1>Select Data by ID</h1>
    <form action="{{ url_for('handle_select_by_id') }}" method="post">
        <label for="search_term">Enter Row ID:</label>
        <input type="text" name="search_term" id="search_term" required>
        <button type="submit">Search</button>
    </form>
    <br>
    <p>Or</p>
    <a href="{{ url_for('indexdb') }}">Go back to the Index Page</a>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Select a Text File</title>
</head>
<body>
    <h1>Select a Text File</h1>
    <ul>
        {% for filename in text_files %}
        <li><a href="{{ url_for('display_text', filename=filename) }}">{{ filename }}</a></li>
        {% endfor %}
    </ul>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
  <head>
    <title>Select MP3</title>
 <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }
        video {
            margin: 10px, auto;
            width: 250px;
            height: auto;
        }

          .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;

        }

        .header {
            width: 100%;
            padding: 20px;
            text-align: center;
        }

        .columns {
            display: flex;
            width: 80%;
            margin-top: 20px;
        }

        .column {
            padding: 20px;
            box-sizing: border-box;
        }

        .column.left {
            width: 30%;
            border:    1px solid #000;
        }

        .column.right {
        margin: 0 auto; /* Center horizontally */
        width: 60%;
        border: 1px solid #000;
        text-align: center; /* Center video vertically */
    }

    .column.right video {
        max-width: 100%;
        height: auto;
    }
    </style>
</head>

<body>
    <h1>Select MP3</h1>
    <form action="{{ url_for('select_mp3') }}" method="POST">
      <label for="selected_mp3">Select an MP3 file:</label>
      <select name="selected_mp3" id="selected_mp3">
        {% for mp3_file in mp3_files %}
        <option value="{{ mp3_file }}">{{ mp3_file }}</option>
        {% endfor %}
      </select>
      <br>
      <input type="submit" value="Select">
    </form>
  </body>
</html>

-----index-----
<!DOCTYPE html>
<html>

<head>
    <title>Select Order</title>
</head>

<body>
    <h1>Select the order of the videos:</h1>
    <form method="POST" action="{{ url_for('select_order') }}">
        {% for thumbnail_path in thumbnail_paths %}
        <img src="{{ thumbnail_path }}" alt="Video thumbnail">
        <label for="order_{{ loop.index }}">Video {{ loop.index }}:</label>
        <input type="radio" name="order" value="{{ loop.index }}" id="order_{{ loop.index }}" required><br>
        {% endfor %}
        <input type="submit" value="Join Videos">
    </form>
</body>

</html>
-----index-----
<!-- index.html-->
<!DOCTYPE html>
<html>

<head>
    <title>Select and Play mp3</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }

        video {
            margin: 10px, auto;
            width: 200px;
            height: auto;
        }

        .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;

        }

        .header {
            width: 100%;
            padding: 20px;
            text-align: center;
        }

        .columns {
            display: flex;
            width: 80%;
            margin-top: 20px;
        }

        .column {
            padding: 20px;
            box-sizing: border-box;
        }

        .column.left {
            width: 30%;
            border: 1px solid #000;
        }

        .column.right {
            margin: 0 auto;
            /* Center horizontally */
            width: 60%;
            border: 1px solid #000;
            text-align: center;
            /* Center video vertically */
        }

        .column.right video {
            max-width: 100%;
            height: auto;
        }
    </style>
</head>

<body>
    <div class="wrapper">
        <div class="header">
            <h1>Select and Play mp3</h1>
            <a href="{{ url_for('index') }}">HOME</a> |
        </div>
        <div class="columns">
            <div class="column left">

                <h3>Links</h3><br />
                <a href="{{ url_for('app_utilities') }}">Application Utilities</a><br /><br />
                <a href="{{ url_for('image_processing') }}">Image Processing Links</a><br /><br />
                <a href="{{ url_for('format_file') }}">Format Text Files</a><br /><br />
                <a href="{{ url_for('view_text') }}">View Text Files</a><br /><br />
                <a href="{{ url_for('edit_file') }}">Edit File</a><br /><br />
                <a href="{{ url_for('edit_formatted') }}">Edit Formatted Text</a><br /><br />

                <a href="{{ url_for('edit_description') }}">Edit Description</a><br /><br />
              
            </div>
            <div class="column right">
    <form method="POST">
        <label for="selected_directory">Select a directory:</label>
        <select name="selected_directory" id="selected_directory">
            {% for directory in directories %}
                <option value="{{ directory }}">{{ directory }}</option>
            {% endfor %}
        </select>
        <button type="submit">Select Directory</button>
    </form>
    
    {% if selected_directory %}
        <form method="POST">
            <label for="mp3_file">Choose an MP3 file:</label>
            <select name="mp3_file" id="mp3_file">
                {% for mp3 in mp3_files %}
                    <option value="{{ mp3 }}">{{ mp3 }}</option>
                {% endfor %}
            </select>
            <button type="submit">Play</button>
        </form>
    {% endif %}
                <video controls>
                    <source src="{{ video }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
        </div>
    </div>
</body>

</html>
-----index-----
<!-- index.html-->
<!DOCTYPE html>
<html>

<head>
    <title>Select and Play mp3</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }

        video {
            margin: 10px, auto;
            width: 200px;
            height: auto;
        }

        .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;

        }

        .header {
            width: 100%;
            padding: 20px;
            text-align: center;
        }

        .columns {
            display: flex;
            width: 80%;
            margin-top: 20px;
        }

        .column {
            padding: 20px;
            box-sizing: border-box;
        }

        .column.left {
            width: 30%;
            border: 1px solid #000;
        }

        .column.right {
            margin: 0 auto;
            /* Center horizontally */
            width: 60%;
            border: 1px solid #000;
            text-align: center;
            /* Center video vertically */
        }

        .column.right video {
            max-width: 100%;
            height: auto;
        }
    </style>
</head>

<body>
    <div class="wrapper">
        <div class="header">
            <h1>Select and Play mp3</h1>
            <a href="{{ url_for('index') }}">HOME</a> |
        </div>
        <div class="columns">
            <div class="column left">

                <h3>Links</h3><br />
                <a href="{{ url_for('app_utilities') }}">Application Utilities</a><br /><br />
                <a href="{{ url_for('image_processing') }}">Image Processing Links</a><br /><br />
                <a href="{{ url_for('format_file') }}">Format Text Files</a><br /><br />
                <a href="{{ url_for('view_text') }}">View Text Files</a><br /><br />
                <a href="{{ url_for('edit_file') }}">Edit File</a><br /><br />
                <a href="{{ url_for('edit_formatted') }}">Edit Formatted Text</a><br /><br />

                <a href="{{ url_for('edit_description') }}">Edit Description</a><br /><br />
              
            </div>
            <div class="column right">
             <h1>Select and Play an MP3</h1>
    
    <form method="POST">
        <label for="mp3_file">Choose an MP3 file:</label>
        <select name="mp3_file" id="mp3_file">
            {% for mp3 in mp3_files %}
                <option value="{{ mp3 }}">{{ mp3 }}</option>
            {% endfor %}
        </select>
        <button type="submit">Play</button>
    </form>
    
    <h2>Available MP3 files:</h2>
    <ul>
        {% for mp3 in mp3_files %}
            <li>{{ mp3 }}</li>
        {% endfor %}
    </ul>
                <video controls>
                    <source src="{{ video }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
        </div>
    </div>
</body>

</html>
-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Select and Play MP3</title>
</head>
<body>
    <form method="GET">
        <label for="selected_directory">Select a directory:</label>
        <select name="selected_directory" id="selected_directory">
            {% for directory in directories %}
                <option value="{{ directory }}" {% if selected_directory == directory %}selected{% endif %}>{{ directory }}</option>
            {% endfor %}
        </select>
        <button type="submit">Select Directory</button>
    </form>
    
    <form method="POST">
        <label for="mp3_file">Choose an MP3 file:</label>
        <select name="mp3_file" id="mp3_file">
            {% for mp3 in mp3_files %}
                <option value="{{ mp3 }}">{{ mp3 }}</option>
            {% endfor %}
        </select>
        <button type="submit" id="play_button">Play</button>
    </form>
    
    <audio controls id="audio_player">
        <source src="" type="audio/mpeg" id="audio_source">
    </audio>

    <script>
        const directorySelect = document.getElementById('selected_directory');
        const playButton = document.getElementById('play_button');
        const mp3Select = document.getElementById('mp3_file');
        const audioPlayer = document.getElementById('audio_player');
        
        directorySelect.addEventListener('change', function() {
            const selectedDir = directorySelect.value;
            const updateUrl = `{{ url_for('select_playmp3') }}?selected_directory=${selectedDir}`;
            window.location.href = updateUrl;
        });

        playButton.addEventListener('click', function() {
            const selectedFile = mp3Select.value;
            const selectedDir = directorySelect.value;
            const filePath = `{{ url_for('static', filename='') }}${selectedDir}/${selectedFile}`;
            
            const audioSource = document.getElementById('audio_source');
            audioSource.src = filePath;
            
            audioPlayer.load();
            audioPlayer.play();
        });
    </script>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
  <head>
    <title>Show Blended Image</title>
  </head>
  <body>
    <h1>Blended Image</h1>
    <img src="{{ blended_image_url }}" alt="Blended Image">
  </body>
</html>


-----index-----
<!DOCTYPE html>
<html>
  <head>
    <title>Blended Image</title>
  </head>
  <body>
    <h1>Blended Image</h1>
    <img src="{{ url_for('static', filename='blended.jpg') }}" alt="Blended Image">
  </body>
</html>


-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Show Generated Comic Border</title>
</head>
<body>
    <h1>Show Generated Comic Border</h1>
    <img src="{{ url_for('static', filename='borders/' + border_name) }}" alt="Generated Comic Border">

</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
  <head>
    <title>Square Video</title>
<style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }
        video {
            margin: 10px, auto;
            width: 400px;
            height: auto;
        }

          .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;

        }

        .header {
            width: 100%;
            padding: 20px;
            text-align: center;
        }

        .columns {
            display: flex;
            width: 80%;
            margin-top: 20px;
        }

        .column {
            padding: 20px;
            box-sizing: border-box;
        }

        .column.left {
            width: 30%;
            border:    1px solid #000;
        }

        .column.right {
        margin: 0 auto; /* Center horizontally */
        width: 60%;
        border: 1px solid #000;
        text-align: center; /* Center video vertically */
    }

    .column.right video {
        max-width: 100%;
        height: auto;
    }
    </style>
  </head>
  <body>
    <h1>Square Video</h1>
    <p>Here is your square video:</p>
         <video width="480" height="480" controls>
          <source src="{{ url_for('static', filename='temp.mp4') }}" type="video/mp4">
          Your browser does not support the video tag.
        </video>
      </body>
    </html>
    
  </body>
</html>

-----index-----
<!DOCTYPE html>
<html>
  <head>
    <title>Square Video</title>
  </head>
  <body>
    <video width="640" height="1280" controls>
      <source src="{{ squarevid_url }}" type="video/mp4">
    </video>
  </body>
</html>


-----index-----
<!DOCTYPE html>
<html>
<head>
  <title>Success</title>
</head>
<body>
  <h1>Success</h1>
  <p>File "{{ original_file }}" formatted and saved as "{{ modified_file }}"</p>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Select and Play MP3</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background-image: url('/static/images/largegiger/DreamShaper_v5_A_dystopian_city_street_level_view_populated_by_0.jpg');
            background-size: cover;
            background-position: center center;
            background-attachment: fixed;
            font-family: Arial, sans-serif;
        }
        h1 {
            text-align: center;
            padding-top: 20px;
            position: relative; /* Needed for absolute positioning of shadow */
            color: white; /* Set text color */
        }
        h1::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1; /* Behind the text */
            background-color: white;
            filter: blur(15px); /* Adjust blur radius as needed */
            opacity: 0.5; /* Adjust opacity as needed */
        }
        form {
            text-align: center;
            margin-top: 30px;
        }
        select, input {
            padding: 5px;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <h1>Select and Play MP3</h1>
    <form method="post">
        <select name="mp3_file">
            {% for file in mp3_files %}
                <option value="{{ file }}">{{ file }}</option>
            {% endfor %}
        </select>
        <br><br>
        <input type="submit" value="Play">
    </form>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Terminal Emulator</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='xterm/xterm.css') }}">
    <script src="{{ url_for('static', filename='xterm/xterm.js') }}"></script>
</head>
<body>
    <div id="terminal"></div>
    <script>
        const term = new Terminal();
        term.open(document.getElementById('terminal'));

        let userInput = '';

        term.onKey(e => {
            const printable = !e.domEvent.altKey && !e.domEvent.ctrlKey && !e.domEvent.metaKey;

            if (e.domEvent.key === 'Enter') {
                const command = userInput;
                fetch('/execute_command', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: `command=${encodeURIComponent(command)}`,
                })
                .then(response => response.json())
                .then(data => {
                    term.write('\r\n' + data.output + '\r\n$ ');
                });

                userInput = '';
            } else if (printable) {
                term.write(e.key);
                userInput += e.key;
            }
        });

        term.write('$ ');

    </script>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Terminal Emulator</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='xterm/xterm.css') }}">
    <script src="{{ url_for('static', filename='xterm/xterm.js') }}"></script>
</head>
<body>
    <div id="terminal"></div>
    <script>
        const term = new Terminal();
        term.open(document.getElementById('terminal'));

        term.onKey(e => {
    // Capture user input and send it to the server when Enter is pressed
    if (e.domEvent.key === 'Enter') {
        const command = term.buffer.getLine(term.buffer.ybase + term.buffer.y).translateToString();
        fetch('/execute_command', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded',
            },
            body: `command=${encodeURIComponent(command)}`,
        })
            .then(response => response.json())
            .then(data => {
                term.write('\r\n' + data.output + '\r\n$ ');
            });
    } else {
        term.write(e.key); // Write the captured key to the terminal
    }
});

term.write('$ ');


    </script>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Terminal Emulator</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='xterm/xterm.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <script src="{{ url_for('static', filename='xterm/xterm.js') }}"></script>
</head>
<body>
    <div id="terminal"></div>
    <script>
        const term = new Terminal();
        term.open(document.getElementById('terminal'));
    
        let userInput = '';
    
        term.onKey(e => {
            const printable = !e.domEvent.altKey && !e.domEvent.ctrlKey && !e.domEvent.metaKey;
    
            if (e.domEvent.key === 'Enter') {
                const command = userInput;
                fetch('/execute_command', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: `command=${encodeURIComponent(command)}`,
                })
                .then(response => response.json())
                .then(data => {
                    // Clear the terminal and display the response output
                    term.clear();
                    console.log(data.output);

                    const formattedOutput = data.output.replace(/\n/g, '\r\n');
                    term.write(formattedOutput);
                    term.write('$ ');
                });
    
                userInput = '';
            } else if (printable) {
                term.write(e.key);
                userInput += e.key;
            }
        });
    
        term.writeln('$ ');
    
    </script>
    
    
</body>
</html>

-----index-----
<!-- index.html-->
<!DOCTYPE html>
<html>

<head>
    <title>indexdb</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }

        video {
            margin: 10px, auto;
            width: 250px;
            height: auto;
        }

        .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;

        }

        .header {
            width: 100%;
            padding: 20px;
            text-align: center;
        }

        .columns {
            display: flex;
            width: 80%;
            margin-top: 20px;
        }

        .column {
            padding: 20px;
            box-sizing: border-box;
        }

        .column.left {
            width: 30%;
            border: 1px solid #000;
        }

        .column.right {
            margin: 0 auto;
            /* Center horizontally */
            width: 50%;
            border: 1px solid #000;
            text-align: center;
            /* Center video vertically */
        }
    </style>
</head>

<body>
    <div class="wrapper">
        <div class="header">
            <h1>indexdb</h1>
        </div>
        <div class="columns">

            <p>Choose an option below:</p>
            <ul>
                <li><a href="{{ url_for('select_by_id_form') }}">Select by ID Form</a></li>
                <li><a href="{{ url_for('search_by_rowid') }}">Search by Row ID</a></li>
                <li><a href="{{ url_for('search_database') }}">Search the Database</a></li>
                <li><a href="{{ url_for('edit_data_page') }}">Edit Data</a></li>
                <li><a href="{{ url_for('insert_data') }}">Insert Data</a></li>
                <li><a href="{{ url_for('get_rowid_form') }}">Enter Row ID to Edit</a></li>
            </ul>
            <a style="font-size: 24px;color: brown;" href="{{ url_for('index') }}">HOME</a>
        </div>
        <div class="column right">
            <h2>Right Column</h2>
            <video controls>
                <source src="{{ video }}" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        </div>
    </div>
</body>

</html>
-----index-----
<!DOCTYPE html>
<html>
<head>
  <title>Success</title>
{
	width: 100%;
	height: 100%;
	overflow: hidden;
}

body {
	margin: 0;
	padding: 0;
	color: #fff;
	background-color: #000;
}

canvas {
	-webkit-tap-highlight-color: transparent;
	tap-highlight-color: transparent;
	-webkit-user-select: none;
	user-select: none;
	cursor: pointer;
}
</style>

<script type="text/javascript">
	// Wobble by @neave

window.requestAnimationFrame =
	window.requestAnimationFrame ||
	window.webkitRequestAnimationFrame ||
	window.mozRequestAnimationFrame ||
	window.msRequestAnimationFrame ||
	function(callback) {
		setTimeout(callback, 1000 / 60);
	};

Array.prototype.shuffle = function() {
	var j, temp;
	for (var i = this.length - 1; i > 0; i--) {
		j = Math.floor(Math.random() * (i + 1));
		temp = this[i];
		this[i] = this[j];
		this[j] = temp;
	}
	return this;
};

Math.clamp = function(n, min, max) {
	return Math.max(min, Math.min(n, max));
};

var get = document.querySelector.bind(document),
	on = document.addEventListener.bind(document),
	mouseOff = -1000,
	mouseX,
	mouseY,
	viscosity = 25,
	damping = 0.1,
	totalPoints,
	dist,
	scale,
	canvas,
	context,
	surfaces,
	palleteNum = 0,
	palleteFirst = ['0cf', '0fc', 'ff0', 'f0c', 'c0f'],
	palletes = [
		['000', 'ff0', 'f0f', '0ff', 'fff'],
		['000', 'fff', '000', 'fff', '000'],
		['333', '666', '999', 'ccc', 'fff'],
		['300', '600', 'f00', '600', '300'],
		['305', '606', '907', 'c08', 'f09'],
		['036', '067', '098', '0c9', '0fa'],
		['00a0b0', '6a4a3c', 'cc333f', 'eb6841', 'edc951'],
		['264653', '2a9d8f', 'e9c46a', 'f4a261', 'e76f51'],
		['300018', '5a3d31', '837b47', 'adb85f', 'e5edb8'],
		['343838', '005f6b', '008c9e', '00b4cc', '00dffc'],
		['3fb8af', '7fc7af', 'dad8a7', 'ff9e9d', 'ff3d7f'],
		['413e4a', '73626e', 'b38184', 'f0b49e', 'f7e4be'],
		['452632', '91204d', 'e4844a', 'e8bf56', 'e2f7ce'],
		['594f4f', '547980', '45ada8', '9de0ad', 'e5fcc2'],
		['5d4157', '838689', 'a8caba', 'cad7b2', 'ebe3aa'],
		['81657e', '3ea3af', '9fd9b3', 'f0f6b9', 'ff1d44'],
		['899aa1', 'bda2a2', 'fbbe9a', 'fad889', 'faf5c8'],
		['99b898', 'fecea8', 'ff847c', 'e84a5f', '2a363b'],
		['ab526b', 'bca297', 'c5ceae', 'f0e2a4', 'f4ebc3'],
		['acdeb2', 'e1eab5', 'edad9e', 'fe4b74', '390d2d'],
		['b9d7d9', '668284', '2a2829', '493736', '7b3b3b'],
		['bbbb88', 'ccc68d', 'eedd99', 'eec290', 'eeaa88'],
		['cff09e', 'a8dba8', '79bd9a', '3b8686', '0b486b'],
		['d1f2a5', 'effab4', 'ffc48c', 'ff9f80', 'f56991'],
		['d3e2b6', 'c3dbb4', 'aaccb1', '87bdb1', '68b3af'],
		['e0ffb3', '61c791', '31797d', '2a2f36', 'f23c55'],
		['e25858', 'e9d6af', 'ffffdd', 'c0efd2', '384252'],
		['e8608c', '71cbc4', 'fff9f4', 'cdd56e', 'ffbd68'],
		['e8ddcb', 'cdb380', '036564', '033649', '031634'],
		['e94e77', 'd68189', 'c6a49a', 'c6e5d9', 'f4ead5'],
		['eee6ab', 'c5bc8e', '696758', '45484b', '36393b'],
		['efffcd', 'dce9be', '555152', '2e2633', '99173c'],
		['f04155', 'ff823a', 'f2f26f', 'fff7bd', '95cfb7'],
		['f8b195', 'f67280', 'c06c84', '6c5b7b', '355c7d'],
		['f8f4d7', 'f4dec2', 'f2b4a8', 'e98977', 'f4b36c'],
		['fad089', 'ff9c5b', 'f5634a', 'ed303c', '3b8183'],
		['fe4365', 'fc9d9a', 'f9cdad', 'c8c8a9', '83af9b'],
		['ff4e50', 'fc913a', 'f9d423', 'ede574', 'e1f5c4'],
		['ff9900', '424242', 'e9e9e9', 'bcbcbc', '3299bb'],
		['ffed90', 'a8d46f', '359668', '3c3251', '341139']
	];

function Point(x, y) {
	this.x = x;
	this.y = y;

	this.ix = x;
	this.iy = y;

	this.vx = 0;
	this.vy = 0;
}

Point.prototype.move = function() {
	var width = canvas.width / scale;
	var height = canvas.height / scale;
	this.vx += (this.ix - this.x) / viscosity * width;
	this.vy += (this.iy - this.y) / viscosity * height;

	var dx = this.x * width - mouseX / scale,
		dy = this.y * height - mouseY / scale;

	if (Math.sqrt(dx * dx + dy * dy) < dist) {
		var a = Math.atan2(dy, dx);
		this.vx += (Math.cos(a) * viscosity - dx) / viscosity;
		this.vy -= (Math.sin(a) * viscosity - dy) / viscosity;
	}

	this.vx *= (1 - damping);
	this.vy *= (1 - damping);
	this.x += this.vx / width;
	this.y += this.vy / height;

	if (this.y < 0) {
		this.y = 0;
	} else if (this.y > 1) {
		this.y = 1;
	}
};

function Surface(y) {
	this.y = y;
	this.resize();
}

Surface.prototype.draw = function() {
	var p = this.points[totalPoints - 1],
		cx,
		cy;

	context.fillStyle = this.color;
	context.beginPath();
	context.moveTo(p.x * canvas.width, p.y * canvas.height);

	for (var i = totalPoints - 1; i > 0; i--) {
		p = this.points[i];
		p.move();

		cx = (p.x + this.points[i - 1].x) / 2 * canvas.width;
		cy = (p.y + this.points[i - 1].y) / 2 * canvas.height;

		if (i === 1) {
			cx = canvas.width;
		} else if (i === totalPoints - 1) {
			context.bezierCurveTo(p.x * canvas.width, p.y * canvas.height, cx, cy, cx, cy);
			p.x = 0;
		}

		context.bezierCurveTo(p.x * canvas.width, p.y * canvas.height, cx, cy, cx, cy);
	}

	context.lineTo(canvas.width, canvas.height);
	context.lineTo(0, canvas.height);
	context.closePath();
	context.fill();
};

Surface.prototype.resize = function() {
	this.points = [];
	for (var i = totalPoints; i--; ) {
		this.points.push(new Point(i / (totalPoints - 3), this.y));
	}
};

Surface.prototype.wobble = function() {
	for (var i = totalPoints - 1; i > 0; i--) {
		this.points[i].vy += (Math.random() - 0.5) * dist * 0.6;
	}
};

function setPallete() {
	canvas.style.backgroundColor = '#' + palletes[palleteNum][0];
	for (var i = surfaces.length; i--; ) {
		surfaces[surfaces.length - i - 1].color = '#' + palletes[palleteNum][i + 1];
	}
}

function nextPallete() {
	palleteNum++;
	if (palleteNum >= palletes.length) {
		palleteNum = 0;
		palletes.shuffle();
	}
	setPallete();
}

function wobbleSuraces() {
	resizeSuraces();

	for (var i = surfaces.length; i--; ) {
		surfaces[i].wobble();
	}
	nextPallete();
}

function drawSurfaces() {
	context.clearRect(0, 0, canvas.width, canvas.height);
	for (var i = surfaces.length; i--; ) {
		surfaces[i].draw();
	}
}

function resizeSuraces() {
	scale = window.devicePixelRatio || 1;

	canvas.width = innerWidth * scale;
	canvas.height = innerHeight * scale;
	canvas.style.width = innerWidth + 'px';
	canvas.style.height = innerHeight + 'px';

	totalPoints = Math.round(Math.clamp(Math.pow(Math.random() * 8, 2), 16, innerWidth / 35));
	dist = Math.clamp(innerWidth / 4, 150, 200);

	for (var i = surfaces.length; i--; ) {
		surfaces[i].resize();
	}
	drawSurfaces();
}

function update() {
	requestAnimationFrame(update);
	drawSurfaces();
}

function init() {
	canvas = get('canvas');
	context = canvas.getContext('2d');

	canvas.ontouchmove = function(event) {
		mouseX = event.targetTouches[0].pageX * scale;
		mouseY = event.targetTouches[0].pageY * scale;
	};

	canvas.ontouchstart = function(event) {
		event.preventDefault();
	};

	canvas.ontouchend = function(event) {
		wobbleSuraces();
		mouseX = mouseY = mouseOff;
	};

	canvas.onmousemove = function(event) {
		mouseX = event.pageX * scale;
		mouseY = event.pageY * scale;
	};

	canvas.onmousedown = wobbleSuraces;

	canvas.onmouseleave = function() {
		mouseX = mouseY = mouseOff;
	};

	surfaces = [
		new Surface(4/5),
		new Surface(3/5),
		new Surface(2/5),
		new Surface(1/5)
	];

	palletes.shuffle();
	palletes.unshift(palleteFirst);
	setPallete(0);

	window.onresize = resizeSuraces;
	resizeSuraces();
	update();
}

on('DOMContentLoaded', init);

</script>
</head>
<body>
	<canvas></canvas>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>HTML Viewer</title>
</head>
<body>
    <canvas id="canvas"></canvas>

    <script src="../scripts/script.js"></script>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>JavaScript Script Editor</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.js"></script>
</head>
<body>
    <h1>JavaScript Script Editor</h1>
    <div id="myElement">Element to Change Color</div>
    <button id="myButton">Click Me</button>

    <script>
        // Function to display a greeting message
        function sayHello(name) {
            console.log(`Hello, ${name}!`);
        }

        // Invoke the sayHello function
        sayHello("John");

        // Function to calculate the sum of two numbers
        function sum(a, b) {
            return a + b;
        }

        // Calculate and display the sum
        var result = sum(10, 5);
        console.log("Sum:", result);

        // Function to change the background color of an element
        function changeBackgroundColor(elementId, color) {
            var element = document.getElementById(elementId);
            element.style.backgroundColor = color;
        }

        // Change the background color of an element with ID 'myElement'
        changeBackgroundColor('myElement', 'lightblue');

        // Event listener to handle button click
        var button = document.getElementById('myButton');
        button.addEventListener('click', function() {
            alert('Button clicked!');
        });
    </script>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Text File Created</title>
</head>
<body>
    <h1>Text File Created</h1>
    <p>Text file created at: {{ text_file_path }}</p>
</body>
</html>

-----index-----
<!doctype html>
<html>
    <head>
        <title>Text to Speech</title>
    </head>
    <body>
        <h1>Text to Speech</h1>
        <form method="post" enctype="multipart/form-data">
            <input type="file" name="file">
            <br><br>
            <textarea name="text" rows="5" cols="30"></textarea>
            <br><br>
            <input type="submit" value="Submit">
        </form>
        {% if filename %}
            <p>Text: {{ text }}</p>
            <audio controls>
                <source src="{{ filename }}" type="audio/mpeg">
            </audio>
        {% endif %}
    </body>
</html>

-----index-----
<!doctype html>
<html>

<head>
    <title>Text to Speech</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/Style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <style>
        a {
            font-size: 20px;
            margin-left: 10%;
            color: #053b68;
        }

        pre {
            font-size: 20px;
            margin-left: 10%;
            text-align: left;
            color: #010f1a;
            white-space: pre-wrap;
            /* Since CSS 2.1 */
            white-space: -moz-pre-wrap;
            /* Mozilla, since 1999 */
            white-space: -pre-wrap;
            /* Opera 4-6 */
            white-space: -o-pre-wrap;
            /* Opera 7 */
            word-wrap: break-word;
            /* Internet Explorer 5.5+ */
        }
        p{
            font-size: 25px;
            margin: 10px,auto;
            text-align: center;
            color: #010f1a; 
        }
        textarea{
            font-size: 20px;
            margin-left: 10%;
            text-align: left;
            color: #010f1a;
            white-space: pre-wrap;
            /* Since CSS 2.1 */
            white-space: -moz-pre-wrap;
            /* Mozilla, since 1999 */
            white-space: -pre-wrap;
            /* Opera 4-6 */
            white-space: -o-pre-wrap;
            /* Opera 7 */
            word-wrap: break-word;
            /* Internet Explorer 5.5+ */
        }
    </style>
</head>

<body>
    <div class="header">
        <h1>Text to Speech</h1>
        <p>Enter some text and click submit to hear it spoken aloud.</p>
        <a href="{{ url_for('indeX') }}">home</a><br />
        <form method="post">
            <textarea name="text" rows="15" cols="50"></textarea>
            <br><br>
            <input type="submit" value="Submit">
        </form>
        {% if filename %}
        <p>Text: {{ text }}</p>
        <audio controls>
            <source src="{{ filename }}" type="audio/mpeg">
        </audio>
        {% endif %}

        <audio controls id="audio-player">
            <source src="{{ filename }}" type="audio/mpeg">
        </audio>

        <button onclick="document.getElementById('audio-player').play()">Play</button>
        <br /><br />
        <a href="{{ url_for('indeX') }}">When Finished click home to return: <span
                style="color:rgb(250, 5, 5);font-size: large;">&nbsp;&nbsp;&nbsp;HOME</span></a><br /><br />
        <pre>
Notice in the example text below, 'have' is spelled 'hav' so it is pronounced correctly.
Also mp3 is spelled out  M P 3 so it is also pronounced correctly.
-------------------------------------------------------------------------- 
In order to create a speaking avatar you need to follow a series of steps.
The first step is to create the text that will be spoken.
Press the button called create the M P 3
The page opened will hav a text area.
Enter the text you wish to hav spoken.
When the text has been enter you must click the submit button.
The M P 3 will be created and played back to you.
The M P 3 file will use the first twenty characters of the text generated as a filename. 
You may wish to hav a copy of the text in case it does not sound right.
Then you just paste it in, correct it, and a new file will be created.
--------------------------------------------------------------------------
Once you hav the M P 3 file it must be converted to a wav format.
Simply press the Convert M P 3 two wave link below this video.
It is super fast and a screen pops up to indicate the process has been completed.
--------------------------------------------------------------------------
At this point you should have an M P 3 file and it has been converted to a wave file.
Now you must pick an image and convert it to an M P 4.
The M P 4 will be the same length as the M P 3.
That will be done by pressing the,
Create a Video the same length as the wav Created link.
--------------------------------------------------------------------------
Now you hav an M P 4 file and a wav file.
Now for the hard stuff. 
Not for you, but for your computer.
You just click Create Avatar.
If you do not have a G P U, It will probably put your computer to the max.
As soon as you click it you will be directed to page, generate avatar.
Set back and relax it will take some time to generate.
If it is too much for your computer, you will find a link to Jupyter Co lab notebook.
Co Lab provides a free G P U service and is much faster.
--------------------------------------------------------------------------  
     </pre>
</body>

</html>
-----index-----
<!--enter_data.html Template:-->
<!DOCTYPE html>
<html>
<head>
    <title>The FlaskAppArchitect File</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
<script>
        function playAudio() {
            var audio = document.getElementById("audio");
            audio.play();
        }

        function pauseAudio() {
            var audio = document.getElementById("audio");
            audio.pause();
        }

        function setVolume(volume) {
            var audio = document.getElementById("audio");
            audio.volume = volume;
        }
    </script>
    <style>
        pre span{
            color: rgb(4, 18, 139);
            font-size: larger;
            font-weight: bold;
            width: 65%;
            word-wrap: break-word; /* Add this line to wrap text */

        }
    </style>
</head>
<body>
    <h2>Data Entry</h2>


<audio id="audio" controls>
        <source src="{{ url_for('static', filename='audio_mp3/flask_javascript.mp3') }}" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <br>
    
    <button onclick="playAudio()">Play</button>
    <button onclick="pauseAudio()">Pause</button>
    
    <br><br>
    
    <input type="range" min="0" max="1" step="0.1" value="1" oninput="setVolume(this.value)">
    

<pre>

#!/home/jack/Desktop/FlaskAppArchitect/env/bin/python
<span>The #! identifies the location and the interpreter /home/jack/Desktop/StoryMaker/ is the location
    and env/bin/python is the interpreter. The env is a virtual enviroment.
    env/bin/python
</span>
#!/home/jack/Desktop/FlaskAppArchitect_Flask_App_Creator/env/bin/python
from moviepy.editor import *
from flask import Flask, render_template, request, redirect, url_for, send_from_directory, Response, flash, request, session,jsonify
from flask import send_file, g
import os
import pygame
from gtts import gTTS
import cv2
import dlib
import numpy as np
from random import randint
from moviepy.editor import VideoFileClip, ImageClip, CompositeVideoClip
from moviepy.editor import concatenate_videoclips, AudioFileClip
import moviepy.editor as mp
import moviepy.editor
import subprocess
from pathlib import Path as change_ext
import re
from io import BytesIO
import io
import matplotlib.pyplot as plt
import sqlite3
import random
import glob
import signal
import base64
import tempfile
import datetime
import imageio
import time
from werkzeug.utils import secure_filename
import shutil
from search import search
import clean_images
from time import sleep
from pydub import AudioSegment
from PIL import Image, ImageDraw, ImageFont
import uuid
import logging
from logging.handlers import RotatingFileHandler
from flask_cors import CORS
import json
# Initialize Flask app
app = Flask(__name__)
# allow CORS
CORS(app) 


app.secret_key = os.urandom(24)
# Create a logger object
logger = logging.getLogger(__name__)
logger.setLevel(logging.DEBUG)

# Create a formatter for the log messages
formatter = logging.Formatter(
    '%(asctime)s %(levelname)s: %(message)s [in %(pathname)s:%(lineno)d]')

# Create a file handler to write log messages to a file
file_handler = RotatingFileHandler(
    'Logs/app.log', maxBytes=10000, backupCount=1)
file_handler.setLevel(logging.DEBUG)
file_handler.setFormatter(formatter)

# Add the file handler to the logger
logger.addHandler(file_handler)

# Set up logging for the Flask app
logger.addHandler(file_handler)
# Define a route for your Flask app

SDIR = "static/"
# Define the file path to store the script content
script_file = os.path.join(os.getcwd(),SDIR, 'scripts', 'scripts.js')

@app.route('/hello_world')
def hello_world():
    TExt = "TEXT TEST 6789"
    logger.debug('This is a debug message: %s', TExt)

    TEXT = "TEXT TEST abcd"
    logger.debug('This is a debug message: %s', TEXT)

    return "Hello, World!"


directory_path = "static/current_project"
if not os.path.exists(directory_path):
    os.makedirs(directory_path)
app.config['UPLOAD_FOLDER'] = 'static/images/uploads'
app.config['RESULTS_FOLDER'] = 'static/videos/results'
app.config['THUMBNAILS_FOLDER'] = 'static/images/thumbnails'
app.config['CHECKPOINT_PATH'] = 'checkpoints/wav2lip_gan.pth'
app.config['AUDIO_PATH'] = 'sample_data/input_audio.wav'
app.config['video_PATH'] = 'sample_data/input_videio.mp4'
app.config['DATABASE'] = 'code.db'  # SQLite database file

app.secret_key = "your_secret_key"  # Add a secret key for session management
@app.route('/favicons.ico')
def favicons():
    return send_from_directory(os.path.join(app.root_path, 'static'), 'favicon.ico', mimetype='image/vnd.microsoft.icon')
@app.route('/favicon.ico')
def favicon():
    # Set the size of the favicon
    size = (16, 16)

    # Create a new image with a transparent background
    favicon = Image.new('RGBA', size, (0, 0, 0, 0))

    # Create a drawing object
    draw = ImageDraw.Draw(favicon)

    # Draw a yellow square
    square_color = (255, 0, 255)
    draw.rectangle([(0, 0), size], fill=square_color)

    # Draw a red circle
    circle_center = (size[0] // 2, size[1] // 2)
    circle_radius = size[0] // 3
    logger.info(f'circle_center, circle_radius:,{circle_center} {circle_radius}')
    circle_color = (255, 255, 0)
    draw.ellipse(
        [(circle_center[0] - circle_radius, circle_center[1] - circle_radius),
         (circle_center[0] + circle_radius, circle_center[1] + circle_radius)],
        fill=circle_color
    )

    # Save the image to a memory buffer
    image_buffer = io.BytesIO()
    favicon.save(image_buffer, format='ICO')
    image_buffer.seek(0)

    return Response(image_buffer.getvalue(), content_type='image/x-icon')


# use the search function as a route
app.add_url_rule('/search', 'search', search)


def zip_lists(list1, list2):
    return zip(list1, list2)


app.jinja_env.filters['zip'] = zip_lists

directory_path = 'temp'  # Replace with the desired directory path
# Create the directory if it doesn't exist
os.makedirs(directory_path, exist_ok=True)


# Walk through all directories and subdirectories


def findvideos():
    videoroot_directory = "static"
    MP4 = []
    for dirpath, dirnames, filenames in os.walk(videoroot_directory):
        for filename in filenames:
            if filename.endswith(".mp4") and "Final" in filename:
                MP4.append(os.path.join(dirpath, filename))
    if MP4:
        last_video = session.get("last_video")
        new_video = random.choice([video for video in MP4 if video != last_video])
        session["last_video"] = new_video
        return new_video
    else:
        return None

@app.route("/")
def index():
    video = findvideos()
    return render_template('index.html', video=video)
@app.route("/index2")
def index2():
    image_dir = 'static/images/MISC_MIX'
    image_files = [f for f in os.listdir(image_dir) if f.endswith('.jpg')]
    random_image_file = random.choice(image_files)
    return render_template('index2.html', random_image_file="images/MISC_MIX/" + random_image_file)


def generate_output():
    # Specify the path to your Bash script
    bash_script_path = '/home/jack/Desktop/StoryMaker/MakeVideo'

    # Execute the Bash script
    subprocess.run(['bash', bash_script_path])
    # Backup the result_videoxx.mp4 file
    current_datetime = str(int(time.time()))
    backup_filename = f"static/{current_datetime}.mp4"
    original_filename = "results/result_voice.mp4"
    shutil.copyfile(original_filename, backup_filename)
    return redirect('/final_lipsync')


@app.route('/create_avatar', methods=['GET', 'POST'])
def create_avatar():
    if request.method == 'POST':
        # check_point = os.path.join(app.config['CHECKPOINT_PATH'], 'checkpoints/wav2lip_gan.pth')

        return Response(generate_output(), mimetype='text/plain')
    else:
        return render_template('create_avatar.html')


@app.route('/run_command', methods=['GET'])
def run_command():
    # Specify the path to your Bash script
    bash_script_path = 'MakeVideo'

    # Execute the Bash script
    subprocess.run(['bash', bash_script_path])
    # Backup the result_videoxx.mp4 file
    current_datetime = str(int(time.time()))
    backup_filename = f"static/{current_datetime}.mp4"
    shutil.copyfile("results/result_voice.mp4", backup_filename)
    redirect('/final_lipsync')


@app.route('/result/<filename>')
def result(filename):
    return render_template('result.html', filename=filename)


@app.route('/convert_mp3_to_wav', methods=['GET', 'POST'])
def convert_mp3_to_wav():
    if request.method == 'POST':
        mp3_file = request.files['mp3_file']
        mp3_filename = mp3_file.filename
        mp3_path = os.path.join(app.static_folder, 'audio_mp3', mp3_filename)
        mp3_file.save(mp3_path)

        wav_filename = 'input_audio.wav'
        wav_path = os.path.join('sample_data', wav_filename)

        sound = AudioSegment.from_mp3(mp3_path)
        sound.export(wav_path, format='wav')

        return 'MP3 file converted to WAV successfully'
    else:
        return render_template('convert_mp3_to_wav.html')


@app.route('/final_lipsync')
def final_lipsync():
    VIDEO = 'result/result_voice.mp4'
    return render_template('final_lipsync.html', video=VIDEO)


@app.route('/text_mp3', methods=['GET', 'POST'])
def text_mp3():
    if request.method == 'POST':
        # Get the text from the textarea
        text = request.form['text']
        text0 = text
        # Remove whitespace from the text
        text = text.replace(" ", "")
        # Create a filename based on the first 25 characters of the text
        filename = "static/audio_mp3/" + text[:25] + ".mp3"
        textname = text[:25] + ".txt"
        # Save the text to a text file
        textname = textname.strip()
        with open("static/text/" + textname, 'w') as f:
            f.write(text0)
        filename = filename.strip()  # remove the newline character
        # Create a gTTS object and save the audio file
        tts = gTTS(text)
        filename = filename.strip()
        tts.save(filename)
        shutil.copy(filename, 'static/TEMP.mp3')
        # Play the mp3 file
        pygame.mixer.init()
        pygame.mixer.music.load(filename)
        pygame.mixer.music.play()
        # Wait for the audio to finish playing
        while pygame.mixer.music.get_busy():
            pygame.time.Clock().tick(10)
        # Stop pygame and exit the program
        pygame.mixer.quit()
        pygame.quit()
        # Return the text and filename to the template
        return render_template('text_mp3.html', text=text, filename=filename)
    else:
        # Render the home page template
        return render_template('text_mp3.html')


@app.route('/mp3_upload', methods=['POST'])
def mp3_upload():
    if 'file' not in request.files:
        return 'No file uploaded', 400

    file = request.files['file']
    if file.filename == '':
        return 'No file selected', 400

    if file:
        audio_file = 'static/TEMP.mp3'
        file.save(audio_file)
        return render_template('player.html', audio_file=audio_file)


@app.route('/generate_video', methods=['GET', 'POST'])
def generate_video():
    if request.method == 'POST':
        # Set the input and output filenames
        eyes_filename = 'static/TEMP.png'
        input_filename = 'static/TEMP2.mp4'
        output_filename = 'static/TEMP2.mp4'

        # Set the paths for the video and audio files
        audio_file = 'static/TEMP.mp3'
        output_filenames = 'static/TEMP.mp4'

        # Extract eyes from the uploaded image and save as eyes_test.png
        image_path = "static/TEMP.jpg"
        shape_predictor_path = "/home/jack/hidden/shape_predictor_68_face_landmarks.dat"
        extract_eyes(image_path, eyes_filename, shape_predictor_path)

        # Load the image clip
        image_clip = ImageClip(image_path, duration=30)

        # Set the final clip properties
        final_clip = image_clip.set_audio(None)
        final_clip = final_clip.set_position('center')

        # Write the final video
        final_clip.write_videofile(
            output_filename, codec='libx264', fps=30, audio=False)

        # Load the input video without audio
        input_clip = VideoFileClip(input_filename, audio=False)

        # Load the eye image clip
        eyes_clip = ImageClip(eyes_filename)

        # Create multiple looping clips
        clips = []
        for i in range(8):
            loop_clip = mkloop(input_clip, eyes_clip)
            clips.append(loop_clip)

        # Concatenate all the clips
        final_clips = concatenate_videoclips(clips)

        # Write the final video
        final_clips.write_videofile(
            output_filenames, codec='libx264', fps=input_clip.fps, audio=False)

        # Load the video and audio files
        video_clip = VideoFileClip(output_filenames)
        audio_clip = AudioFileClip(audio_file)

        # Set the duration of the final video to match the audio clip's duration
        final_duration = audio_clip.duration + .5

        # Set the video clip's duration to match the final duration
        video_clip = video_clip.set_duration(final_duration)

        # Set the audio of the video clip to be the same as the loaded audio clip
        video_clip = video_clip.set_audio(audio_clip)

        # Write the final video file
        output_path = "static/final_video_blinking.mp4"
        video_clip.write_videofile(
            output_path, codec='libx264', audio_codec='aac', fps=24)
        shutil.copy(output_path, 'results/final_video_blinking.mp4')
        return render_template('generate_video.html', video_path=output_path)

    return render_template('generate_video.html')
# Function to extract eyes from an image using dlib


def extract_eyes(image_path, eyes_filename, shape_predictor_path):
    # Load the image and shape predictor model
    image = cv2.imread(image_path)
    detector = dlib.get_frontal_face_detector()
    predictor = dlib.shape_predictor(shape_predictor_path)

    # Convert the image to grayscale
    gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)

    # Detect faces in the image
    faces = detector(gray)

    # Iterate over the detected faces and extract the eye regions
    for face in faces:
        landmarks = predictor(gray, face)

        # Extract the coordinates of the left eye
        left_eye_pts = [(landmarks.part(i).x, landmarks.part(i).y)
                        for i in range(36, 42)]

        # Extract the coordinates of the right eye
        right_eye_pts = [(landmarks.part(i).x, landmarks.part(i).y)
                         for i in range(42, 48)]

        # Create a transparent image with an alpha channel
        transparent_image = np.zeros(
            (image.shape[0], image.shape[1], 4), dtype=np.uint8)

        # Define the skin color (e.g., light brown or tan) in BGR format
        # skin_color_bgr = (210, 180, 140)
        skin_color_bgr = (80, 80, 40)

        # Convert BGR to RGB
        skin_color_rgb = (skin_color_bgr[2],
                          skin_color_bgr[1], skin_color_bgr[0])

        # Draw the eye regions on the transparent image with the skin color and alpha channel
        cv2.fillPoly(transparent_image, [np.array(
            left_eye_pts)], skin_color_rgb + (200,))
        cv2.fillPoly(transparent_image, [np.array(
            right_eye_pts)], skin_color_rgb + (200,))
        blurred_image = cv2.GaussianBlur(transparent_image, (5, 5), 0)
        # Save the transparent image with only the eyes as a PNG file
        cv2.imwrite(eyes_filename, blurred_image)
# Function to create a looping clip with blinking eyes


def mkloop(input_clip, eyes_clip):
    # Set the duration of the eye image clip
    eyes_duration = 0.1  # seconds

    # Set the position of the eye image clip
    eyes_position = 'center'

    # Set the start time of the eye image clip
    blink_start_time = randint(2, 4)

    # Create a CompositeVideoClip with the input video and the eye image clip
    final_clip = CompositeVideoClip([input_clip, eyes_clip.set_duration(eyes_duration)
                                     .set_position(eyes_position)
                                     .set_start(blink_start_time)])

    # Calculate the duration of the final clip
    final_duration = blink_start_time + eyes_duration + \
        randint(2, 4)  # 5 to 8 seconds after the blink

    # Set the duration of the final clip
    final_clip = final_clip.set_duration(final_duration)
    return final_clip


def apply_text(mp4_path, text, x, y):
    video = moviepy.editor.VideoFileClip(mp4_path)
    font = "/home/jack/fonts/OpenSansBold.ttf"
    text_clip = moviepy.editor.TextClip(
        text, font=font, fontsize=24, color="white")

    try:
        x = int(x)
        y = int(y)
    except ValueError:
        raise ValueError(
            "Invalid position values. Please provide integer values for x and y.")

    if not (0 <= x <= video.w):
        raise ValueError(
            "Invalid x position. Must be within the width of the video.")

    if not (0 <= y <= video.h):
        raise ValueError(
            "Invalid y position. Must be within the height of the video.")

    text_clip = text_clip.set_position((x, y))

    # Check if duration is None and set a default value if necessary
    video_duration = video.duration if video.duration is not None else 0
    text_clip_duration = text_clip.duration if text_clip.duration is not None else 0

    # Set the duration of the video and text clips
    duration = max(video_duration, text_clip_duration)
    video = video.set_duration(duration)
    text_clip = text_clip.set_duration(duration)

    # Create the composite video by overlaying the text clip onto the video clip
    new_video = moviepy.editor.CompositeVideoClip([video, text_clip])

    # Save the new video with the applied text
    new_mp4_path = 'static/TTMP.mp4'
    new_video.write_videofile(
        new_mp4_path, codec='libx264', audio_codec='aac', remove_temp=False)

    return new_mp4_path


@app.route("/apply_text_to_video", methods=["POST", "GET"])
def apply_text_to_video():
    if request.method == "POST":
        file = request.files["mp4_file"]
        if file.filename == '':
            return redirect(request.url)
        file.save('static/TTMP.mp4')

        mp4_path = 'static/TTMP.mp4'
        text = request.form["text"]
        x = request.form["x"]
        y = request.form["y"]
        new_mp4_path = apply_text(mp4_path, text, x, y)
        return render_template("apply_text_to_video.html", new_mp4_path=new_mp4_path)
    else:
        return render_template("apply_text_to_video.html")


# Get a list of existing subdirectories in the video resources directory
existing_subdirectories = [subdir for subdir in os.listdir(
    "static/current_project") if os.path.isdir(os.path.join("static/current_project", subdir))]


@app.route('/uploads', methods=['GET', 'POST'])
def upload_files():
    video_resources_dir = "static/current_project"
    if request.method == 'POST':
        # Get the selected subdirectory from the form
        selected_subdirectory = request.form.get('subdirectory')

        # Check if the selected subdirectory exists
        if selected_subdirectory in existing_subdirectories:
            # Handle the uploaded file
            file = request.files['file']
            if file:
                # Save the file to the selected subdirectory
                file.save(os.path.join(video_resources_dir,
                          selected_subdirectory, file.filename))
                # Get the URL for the uploaded image
                image_path = url_for('static', filename=os.path.join(
                    'current_project', selected_subdirectory, file.filename))
                return render_template('upload_files.html', image_path=image_path)
            else:
                return 'No file selected.'
        else:
            return 'Invalid subdirectory selected.'
    # Render the upload form with the list of existing subdirectories
    return render_template('upload_files.html', subdirectories=existing_subdirectories)


@app.route('/get_files', methods=['POST'])
def get_files():
    subdirectory = request.form.get('subdirectory')
    file_options = []
    if subdirectory and subdirectory in existing_subdirectories:
        subdirectory_path = os.path.join(
            "static/current_project", subdirectory)
        files = os.listdir(subdirectory_path)
        file_options = [
            f'<option value="{file}">{file}</option>'
            for file in files
            if os.path.isfile(os.path.join(subdirectory_path, file))
        ]
    return ''.join(file_options)


@app.route('/image_list')
def image_list():
    image_directory = 'static/current_project/Narrators'
    image_list = [
        filename
        for filename in os.listdir(image_directory)
        if filename.endswith('.jpg')
    ]
    return render_template('image_list.html', image_list=image_list)


@app.route('/upload', methods=['POST', 'GET'])
def upload():
    filename = request.form['filename']
    if filename:
        src_path = 'static/current_project/Narrators/' + filename
        dest_path = 'static/TEMP.jpg'
        shutil.copyfile(src_path, dest_path)
        return redirect('/')
    else:
        return 'No file selected.'


# List of image directories (you can add more as needed)
image_directories = glob.glob('static/images/*')

@app.route("/mkblend_video", methods=['GET', 'POST'])
def mkblend_video():
    if request.method == 'POST':
        selected_directory = request.form.get('selected_directory')

        if selected_directory:
            # Create a temporary directory to save the images
            temp_dir = tempfile.mkdtemp()

            # Loop through the files in the selected directory and move them to the temporary directory
            chosen_directory = os.path.join('static/images', selected_directory)
            for filename in os.listdir(chosen_directory):
                if filename.endswith('.jpg') or filename.endswith('.png'):
                    source_path = os.path.join(chosen_directory, filename)
                    target_path = os.path.join(temp_dir, filename)
                    os.rename(source_path, target_path)
                    logger.debug('Moved file: %s', filename)
    
        image_list = glob.glob(temp_dir + "*.jpg")
        logger.debug('IMAGE_LIST: %s', image_list)
        # Shuffle and select a subset of images
        # random.shuffle(image_list)
        image_list = sorted(image_list)
        logger.debug('Selected image filenames: %s', image_list)
        # Print the number of selected images
        print(len(image_list))
        logger.debug('Number of files: %s', len(image_list))

        def changeImageSize(maxWidth, maxHeight, image):
            widthRatio = maxWidth / image.size[0]
            heightRatio = maxHeight / image.size[1]
            newWidth = int(widthRatio * image.size[0])
            newHeight = int(heightRatio * image.size[1])
            newImage = image.resize((newWidth, newHeight))
            return newImage

        # Get the size of the first image
        if image_list:
            imagesize = Image.open(image_list[0]).size

            for i in range(len(image_list) - 1):
                imag1 = image_list[i]
                imag2 = image_list[i + 1]
                image1 = Image.open(imag1)
                image2 = Image.open(imag2)

                image3 = changeImageSize(imagesize[0], imagesize[1], image1)
                image4 = changeImageSize(imagesize[0], imagesize[1], image2)

                image5 = image3.convert("RGBA")
                image6 = image4.convert("RGBA")

                text = "animate/"
                for ic in range(0, 100):
                    inc = ic * 0.01
                    # inc = ic * 0.08
                    sleep(0.1)
                    # Gradually increase opacity
                    alphaBlended = Image.blend(image5, image6, alpha=inc)
                    alphaBlended = alphaBlended.convert("RGB")
                    current_time = datetime.datetime.now()
                    filename = current_time.strftime(
                        '%Y%m%d_%H%M%S%f')[:-3] + '.jpg'
                    alphaBlended.save(f'{text}{filename}')
                    # shutil.copy(f'{text}{filename}', {temp_dir}+'TEMP.jpg')
                    shutil.copy(f'{text}{filename}', os.path.join(temp_dir, 'TEMP.jpg'))

                    if ic % 25 == 0:
                        print(i, ":", ic, end=" . ")
                    if ic % 100 == 0:
                        logger.debug('Image Number: %.2f %d', inc, ic)

            from moviepy.video.io.ImageSequenceClip import ImageSequenceClip
            # Get the list of files sorted by creation time
            imagelist = sorted(glob.glob('animate/*.jpg'),
                               key=os.path.getmtime)

            # Create a clip from the images
            clip = ImageSequenceClip(imagelist, fps=30)

            # Write the clip to a video file using ffmpeg
            current_time = datetime.datetime.now()
            filename = "static/animate/TEMP3a.mp4"
            clip.write_videofile(
                filename, fps=24, codec='libx265', preset='medium')
            store = "static/videos/" + \
                current_time.strftime('%Y%m%d_%H%M%S%f')[:-3] + 'jul27.mp4'
            # Replace with the desired path for the converted video file
            output_file = "static/animate/TEMP5.mp4"
            # Replace with the desired path for the converted video file
            webm_file = "static/animate/TEMP5.webm"
            ffmpeg_cmd = [
                'ffmpeg', '-i', filename, '-c:v', 'libx264', '-crf', '23', '-preset', 'medium', '-c:a', 'aac',
                '-b:a', '128k', '-movflags', '+faststart', '-y', output_file
            ]
            subprocess.run(ffmpeg_cmd)
            ffmpeg_cmd2 = [
                'ffmpeg', '-i', filename, '-c:v', 'libx264', '-crf', '23', '-preset', 'medium', '-c:a', 'aac',
                '-b:a', '128k', '-movflags', '+faststart', '-y', webm_file
            ]
            subprocess.run(ffmpeg_cmd2)
            shutil.copy(filename, store)
            return render_template('mkblend_video.html', video=filename)

    return render_template('choose_directory.html')


def changeImageSize(maxWidth, maxHeight, image):
    widthRatio = maxWidth / image.size[0]
    heightRatio = maxHeight / image.size[1]
    newWidth = int(widthRatio * image.size[0])
    newHeight = int(heightRatio * image.size[1])
    newImage = image.resize((newWidth, newHeight))
    return newImage


directories = [
    "static/images/512x1536-woman",
    "static/images/abstract_beauty",
    "static/images/beautiful_girl",
    "static/images/Beautiful_Warrior"
]


@app.route("/mkblend_videos", methods=['POST', 'GET'])
def mkblend_videos():
    # Get the selected directory from the form data
    selected_directory = request.form.get('selected_directory')
    logger.debug('Selected Directory: %s', selected_directory)
    # Check if the selected directory is valid
    if selected_directory and selected_directory in directories:
        # Use glob to get the list of files within the selected directory
        filelist = glob.glob(os.path.join(selected_directory, '*.jpg'))
        logger.debug('Selected directory: %s', selected_directory)
        image_list = filelist
        # Shuffle and select a subset of images
        image_list = filelist
        random.shuffle(image_list)
        image_list = random.sample(image_list, 29)
        # Get the size of the first image
        imagesize = Image.open(image_list[0]).size

        # Print the number of selected images
        print("IMAGE_LIST_length:", len(image_list))

        for i in range(len(image_list) - 1):
            imag1 = image_list[i]
            imag2 = image_list[i + 1]
            image1 = Image.open(imag1)
            image2 = Image.open(imag2)

            image3 = changeImageSize(imagesize[0], imagesize[1], image1)
            image4 = changeImageSize(imagesize[0], imagesize[1], image2)

            image5 = image3.convert("RGBA")
            image6 = image4.convert("RGBA")

            text = "animate/"
            # for ic in range(0,125):
            for ic in range(0, 100):
                inc = ic * .01
                sleep(.1)
                # gradually increase opacity
                alphaBlended = Image.blend(image5, image6, alpha=inc)
                alphaBlended = alphaBlended.convert("RGB")
                current_datetime = str(int(time.time()))
                filename = current_datetime[:-3] + '.jpg'
                alphaBlended.save(f'{text}{filename}')
                if ic % 25 == 0:
                    print(ic, ":", inc, end=" . ")

    from moviepy.video.io.ImageSequenceClip import ImageSequenceClip
    # Get the list of files sorted by creation time
    imagelist2 = sorted(glob.glob('animate/*.jpg'), key=os.path.getmtime)

    # Create a clip from the images
    clip = ImageSequenceClip(imagelist2, fps=30)

    # Write the clip to a video file using ffmpeg
    current_datetime = str(int(time.time()))
    filename = "static/animate/TEMP3a.mp4"
    clip.write_videofile(filename, fps=24, codec='libx265', preset='medium')
    store = "static/videos/" + current_datetime[:-3] + 'july27.mp4'
    # Replace with the desired path for the converted video file
    output_file = "static/animate/TEMP5.mp4"
    # webm_file = "static/animate/TEMP5.webm"  #Replace with the desired path for the converted video file
    ffmpeg_cmd = ['ffmpeg', '-i', filename, '-c:v', 'libx264', '-crf', '23', '-preset',
                  'medium', '-c:a', 'aac', '-b:a', '128k', '-movflags', '+faststart', '-y', output_file]
    subprocess.run(ffmpeg_cmd)
    # ffmpeg_cmd2 = ['ffmpeg', '-i', filename, '-c:v', 'libx264', '-crf', '23', '-preset', 'medium', '-c:a', 'aac', #'-b:a', '128k', '-movflags', '+faststart', '-y', webm_file]
    # subprocess.run(ffmpeg_cmd2)
    shutil.copy(filename, store)
    return render_template('mkblend_videos.html', video=filename)


@app.route('/generate_vid', methods=['GET', 'POST'])
def generate_vid():
    current_datetime = str(int(time.time()))
    str_current_datetime = str(current_datetime)
    logger.debug('Generating video', str_current_datetime)
    if request.method == 'POST':
        # Load the audio file
        audio_file = request.files['audio']
        # , 'input_audio.mp3')
        filename = os.path.join(app.config['AUDIO_PATH'])
        logger.info(f'Audio path: {filename}')
        audio_file.save(filename)
        print("FILENAME:", filename)

        # Get the duration of the audio using ffprobe
        command = f"ffprobe -v error -show_entries format=duration -of default=noprint_wrloggers=1:nokey=1 {filename}"
        duration = subprocess.check_output(command.split())
        duration = float(duration.strip().decode())
        logger.info(f'Duration: {duration}')
        # Load the image file
        image_file = request.files['image']
        image_path = os.path.join(
            app.config['UPLOAD_FOLDER'], secure_filename(image_file.filename))
        logger.info(f'Image path: {image_path}')
        image_file.save(image_path)

        # Create the video
        # video_path = os.path.join(app.config['VIDEO_PATH'])#, 'sample_data/input_video.mp4')
        video_path = 'sample_data/input_video.mp4'
        logger.info(f'Video path: {video_path}')
        ffmpeg_command = f"ffmpeg -loop 1 -i {image_path} -c:v libx264 -t {duration+ 0.5} -pix_fmt yuv420p -y {video_path}"
        subprocess.run(ffmpeg_command, shell=True)

        return f'Video created: {video_path}'

    return render_template('generate_vid.html')
# Define route to display upload form


@app.route('/upload_file', methods=['POST', 'GET'])
def upload_file():
    if request.method == 'POST':
        # Check if file was uploaded
        if 'file' not in request.files:
            logger.error('No file was uploaded')
            flash('Error: No file was uploaded')
            return redirect(request.url)

        logger.error('request.files[\'file\']')
        file = request.files['file']

        # Check if file was selected
        if file.filename == '':
            logger.error('No file was selected')
            flash('Error: No file was selected')
            return redirect(request.url)

        # Define allowed file extensions
        ALLOWED_EXTENSIONS = {'png', 'jpg', 'jpeg', 'gif'}

        # Define function to check file extension
        def allowed_file(filename):
            return '.' in filename and filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS

        # Check if file is allowed
        if not allowed_file(file.filename):
            # logger.error(f"File '{file.filename}' is not allowed")
            logger.error("File '" + file.filename + "' is not allowed")
            flash("Error: File '" + file.filename + "'close is not allowed")
            return redirect(request.url)

        # Save the file
        try:
            filename = secure_filename(file.filename)
            file.save(os.path.join(app.config['UPLOAD_FOLDER'], filename))
            logger.info(f'File {filename} saved')
            logger.info('FILENAME:', os.path.join(
                app.config['UPLOAD_FOLDER'], filename))
        except Exception as e:
            logger.error(f'Error saving file: {e}')
            flash('Error: Unable to save file')
            return redirect(request.url)

        # Redirect to the result page
        logger.info(f'File-Result {filename} SAVED')
        return redirect(url_for('result', filename=filename))

    # Return the upload form for GET requests
    return render_template('upload_file.html')


@app.route('/uploads/<filename>')
def uploaded_file(filename):
    return send_from_directory(app.config['UPLOAD_FOLDER'], filename)


@app.route('/make_text', methods=['GET', 'POST'])
def make_text():
    DIR = 'static/text/'
    if request.method == 'POST':
        # Get the text entered in the textarea
        text = request.form.get('text')

        # Generate a filename using the first 25 letters of the text
        text = text.replace(' ', '_')
        filename = text[:25]

        # Save the text to a file
        with open(f'{DIR}{filename}.txt', 'w') as file:
            file.write(text)

        return 'Text saved successfully!'
    else:
        return render_template('make_text.html')


# directories = ['static/images', 'static/images/squares', 'static/final_videos', 'static/Dreamlike_art',
#              'static/squares', 'static/images/uploads', 'static/Final_Fantasy', 'static/final_images', 'static/thumbnails']
directories = glob.glob('static/images/*')

# Route for the home page


@app.route('/home')
def home():
    return render_template('choose_dir.html', directories=directories)
# Route for choosing a directory


@app.route('/choose_dir', methods=['GET', 'POST'])
def choose_dir():
    if request.method == 'POST':
        selected_directory = request.form.get('directory', directories)
        TExt = "TEXT TEST"
        logger.error('No file was selected: %s', TExt)
        logger.debug('Debug was selected: %s', TExt)
        if selected_directory is None:
            # Handle the case where no directory is selected
            logger.error('No directory selected')
            return 'No directory selected!'
        # Rest of the code...
        # Use the selected_directory variable in your logic to generate the video
        # Make sure to update the paths according to the selected directory
        logger.debug('Selected directory: %s', selected_directory)
        # Get the list of image files in the selected directory
        image_filenames = random.sample(
            glob.glob(selected_directory + '/*.jpg'), 30)
        logger.debug('Selected image filenames: %s', image_filenames)

        image_clips = []
        for filename in image_filenames:
            # Open the image file and resize it to 512x768
            logger.debug('Processing image: %s', filename)
            image = Image.open(filename)
            # image = image.resize((512, 768), Image.ANTIALIAS)
            # Convert the PIL Image object to a NumPy array
            image_array = np.array(image)
            # Create an ImageClip object from the resized image and set its duration to 1 second
            image_clip = ImageClip(image_array).set_duration(1)
            # Append the image clip to the list
            image_clips.append(image_clip)

        logger.debug('Number of image clips: %d', len(image_clips))

        # Concatenate all the image clips into a single video clip
        video_clip = concatenate_videoclips(image_clips, method='compose')
        timestr = time.strftime("%Y%m%d-%H%M%S")
        # Set the fps value for the video clip
        video_clip.fps = 24
        # Write the video clip to a file
        video_file = f'static/videos/random_images_{timestr}_video.mp4'
        output_p = 'static/videos/random_images_video.mp4'
        logger.debug('Output video file path: %s', video_file)
        logger.debug('Final video file path: %s', output_p)

        video_clip.write_videofile(video_file, fps=24)

        try:
            shutil.copy(video_file, output_p)
        except Exception as e:
            logger.error('Error occurred while copying file: %s', str(e))
            return f"Error occurred while copying file: {str(e)}"

        # Return the rendered template with the list of directories and output path
        return render_template('choose_dir.html', directories=directories, output_path=output_p)

    # If the request method is GET, render the form template with the list of directories
    output_p = 'static/videos/random_images_video.mp4'
    return render_template('choose_dir.html', directories=directories, output_path=output_p)


@app.route('/convert', methods=['GET', 'POST'])
def convert():
    if request.method == 'POST':
        try:
            audio_file = request.files['audio_file']
            # Path for audio file
            audio_file_path = f'static/audio_mp3/{audio_file.filename}'
            # Save the audio file to the specified location
            audio_file.save(audio_file_path)

            formatted_text_file = request.files['formatted_text_file']
            # Path for formatted text file
            formatted_text_file_path = f'static/formatted_text/{formatted_text_file.filename}'
            # Save the formatted text file to the specified location
            formatted_text_file.save(formatted_text_file_path)

            output_filename = datetime.datetime.now().strftime('%Y-%m-%d') + '.mp4'
            output_path = 'static/videos/' + output_filename
            # Define the ffmpeg command
            # Create the blank video
            # ffmpeg -f lavfi -i color='#470000'@0x0:s=1280x720:rate=60,format=rgba -t 280 -y blank.mp4
            command = [
                'ffmpeg',
                '-i', audio_file_path,
                '-f', 'lavfi',
                '-i', f"color='#470000'@0.0:s=1280x720:rate=60,format=rgba",
                '-vf', f"drawtext=textfile='{os.path.abspath(formatted_text_file_path)}':y=(h-220)-12*t:x=580:fontcolor=orange:fontfile=/home/jack/Arimo-Regular.ttf:fontsize=26",
                '-t', '280',
                '-y', output_path
            ]

            logger.debug(f"Command: {' '.join(command)}")

            subprocess.run([str(arg) for arg in command], check=True)
            video = f'{output_filename}'
            return render_template('convert.html', video=output_path)
        except Exception as _:
            logger.exception("An error occurred during video conversion:")
            return render_template('error.html', message="An error occurred during video conversion.")
    else:
        return render_template('convert_form.html')


@app.route('/convert512', methods=['GET', 'POST'])
def convert512():
    if request.method == 'POST':
        try:
            audio_file = request.files['audio_file']
            # Path for audio file
            audio_file_path = f'static/audio_mp3/{audio_file.filename}'
            # Save the audio file to the specified location
            audio_file.save(audio_file_path)
            # Get the duration of the audio using ffprobe
            command = f"ffprobe -v error -show_entries format=duration -of default=noprint_wrloggers=1:nokey=1 {audio_file_path}"
            duration = subprocess.check_output(command.split())
            duration = float(duration.strip().decode())
            length = int(duration + 5)
            logger.info(f'Duration-512: {length}')
            formatted_text_file = request.files['formatted_text_file']
            # Path for formatted text file
            formatted_text_file_path = f'static/formatted_text/{formatted_text_file.filename}'
            # Save the formatted text file to the specified location
            formatted_text_file.save(formatted_text_file_path)

            output_filename = datetime.datetime.now().strftime('%Y-%m-%d') + '.mp4'
            output_path = 'static/videos/' + output_filename
            # Define the ffmpeg command
            # Create the blank video
            # ffmpeg -f lavfi -i color='#470000'@0x0:s=1280x720:rate=60,format=rgba -t 280 -y blank.mp4
            # y=(h-120)-12*t:x=24:
            command = [
                'ffmpeg',
                '-i', audio_file_path,
                '-f', 'lavfi',
                '-i', f"color='#470000'@0.0:s=512x1024:rate=60,format=rgba",
                '-vf', f"drawtext=textfile='{os.path.abspath(formatted_text_file_path)}':y=(h-120)-10*t:x=24:fontcolor=orange:fontfile=/home/jack/Arimo-Regular.ttf:fontsize=20",
                '-t', f'{length}', '-y', output_path
            ]

            logger.debug(f"Command: {' '.join(command)}")

            subprocess.run([str(arg) for arg in command], check=True)
            video = f'{output_filename}'
            return render_template('convert512.html', video=output_path)
        except Exception as e:
            logger.exception("An error occurred during video conversion:")
            return render_template('error.html', message="An error occurred during video conversion.")
    else:
        return render_template('convert_form512.html')


@app.route('/mk_text', methods=['GET', 'POST'])
def mk_text():
    DIR = "static/text/"
    if request.method == 'POST':
        text = request.form.get('text')
        tex = text.replace(" ", "_")
        filename = tex[:25]
        with open(f'{DIR}{filename}.txt', 'w') as file:
            file.write(text)
        return render_template('mk_text.html', text=text, filename=f'{filename}.txt')
    else:
        return render_template('mk_text.html')


@app.route('/list_files')
def list_files():
    static_text_dir = 'static/text/'
    files = os.listdir(static_text_dir)
    files = [file for file in files if os.path.isfile(
        os.path.join(static_text_dir, file))]
    return str(files)


@app.route('/format_file', methods=['POST', 'GET'])
def format_file():
    static_text_dir = 'static/text/'
    static_format_dir = 'static/formatted_text/'
    if request.method == 'POST':
        filename = request.form.get('filename')
        file_path = os.path.join(static_text_dir, filename)
        if not os.path.isfile(file_path):
            return render_template('error.html', message=f'File "{filename}" does not exist')
        with open(file_path, 'r') as file:
            content = file.read()
        words = content.split()
        formatted_content = '\n'.join(
            [' '.join(words[i:i + 5]) for i in range(0, len(words), 5)])
        modified_filename = filename.replace('.txt', '') + 'FORMATTED.txt'
        modified_file_path = os.path.join(static_format_dir, modified_filename)
        with open(modified_file_path, 'w') as modified_file:
            modified_file.write(formatted_content)
            logger.debug('This is Formated Content: %s', formatted_content)
            logger.debug('This is Formated file: %s', modified_file_path)
        return render_template('success.html', original_file=filename, modified_file=modified_filename)

    file_options = []
    for file_name in os.listdir(static_text_dir):
        if file_name.endswith('.txt'):
            file_options.append(file_name)

    return render_template('form.html', file_options=file_options)


@app.route('/view_text')
def view_text():
    text_files_dir = 'static/text/'
    text_files = []
    for filename in os.listdir(text_files_dir):
        if filename.endswith('.txt'):
            text_files.append(filename)
    return render_template('select_file.html', text_files=text_files)


@app.route('/view_text/<filename>')
def display_text(filename):
    text_file_path = f'static/text/{filename}'
    try:
        with open(text_file_path, 'r') as file:
            file_contents = file.read()
        return render_template('view_text.html', file_contents=file_contents, filename=filename)
    except FileNotFoundError:
        return f'Text file {filename} not found.'


@app.route('/edit_file', methods=['GET', 'POST'])
def edit_file():
    if request.method == 'POST':
        filename = request.form.get('filename')
        text = request.form.get('text')
        with open(f'static/text/{filename}', 'w') as file:
            file.write(text)
    text_files_dir = 'static/text/'
    text_files = []
    for filename in os.listdir(text_files_dir):
        if filename.endswith('.txt'):
            text_files.append(filename)
    fvideo = findvideos()        
    return render_template('edit_file.html', text_files=text_files, video=fvideo)


@app.route('/edit_formatted', methods=['GET', 'POST'])
def edit_formatted():
    if request.method == 'POST':
        filename = request.form.get('filename')
        text = request.form.get('text')
        with open(f'static/formatted_text/{filename}', 'w') as file:
            file.write(text)
    text_files_dir = 'static/formatted_text/'
    text_files = []
    for filename in os.listdir(text_files_dir):
        if filename.endswith('.txt'):
            text_files.append(filename)
    return render_template('edit_formatted.html', text_files=text_files)


@app.route('/get_formatted_content/<filename>')
def get_formatted_content(filename):
    file_path = os.path.join('static/formatted_text', filename)
    with open(file_path, 'r') as file:
        content = file.read()
    return content


@app.route('/get_file_content/<filename>')
def get_file_content(filename):
    file_path = os.path.join('static/text', filename)
    with open(file_path, 'r') as file:
        content = file.read()
    return content


@app.route('/indeX')
def indeX():
    return render_template('indeX.html')


@app.route('/resize_and_overlay_videos')
def resize_and_overlay_videos():
    # Path to the videos
    static_video_path = 'static/videos/2023-07-07.mp4'
    input_video_path = 'static/animate/topvideo.mp4'
    output_video_path = 'static/output/resulta.mp4'

    # Resize the input video using FFmpeg
    resize_command = f'ffmpeg -i {input_video_path} -vf "scale=410:820" -y resized.mp4'
    subprocess.call(resize_command, shell=True)

    # Overlay the resized video on the background video using FFmpeg
    overlay_command = f'ffmpeg -i {static_video_path} -i resized.mp4 -filter_complex "overlay=25:25" -y {output_video_path}'
    subprocess.call(overlay_command, shell=True)

    # Remove the temporary resized video
    subprocess.call('rm resized.mp4', shell=True)

    # Return the final video as a response
    return send_file(output_video_path, mimetype='video/mp4')


@app.route('/resize_and_overlay_videos_page')
def resize_and_overlay_videos_page():
    output_video_path = 'static/output/resulta.mp4'
    return render_template('resize_and_overlay_videos.html', video=output_video_path)


@app.route('/build_stackedvids')
def build_stackedvids():
    # Get a random video and image from the static folder
    video_filename = random.choice(glob.glob('static/square_vids/*.mp4'))
    image_filename = random.choice(glob.glob('static/squares/*.jpg'))

    # Load the video and image files as clips
    video_clip = VideoFileClip(video_filename)
    image_clip = ImageClip(image_filename)

    # Set the duration of the image clip to match the duration of the video clip
    image_clip = image_clip.set_duration(video_clip.duration)

    # Resize the clips to 640x640 and 640x640 respectively
    video_clip = video_clip.resize((640, 640))
    image_clip = image_clip.resize((640, 640))

    # Create a black clip to fill the remaining space below the image
    black_clip = ColorClip(size=(640, 640), color=(
        0, 0, 0)).set_duration(video_clip.duration)

    # Combine the clips vertically using CompositeVideoClip
    final_clip = CompositeVideoClip([
        video_clip.set_position(('center', 'top')),
        image_clip.set_position(('center', 640)),
        black_clip.set_position(('center', 640 + 640))
    ], size=(640, 1280))

    # Export the final clip as a video file
    timestr = time.strftime("%Y%m%d-%H%M%S")
    video_filename = 'static/stacked_vids/stacked_vids' + timestr + 'video.mp4'
    final_clip_path = 'static/stacked_vids/stacked_videos.mp4'
    final_clip.write_videofile(final_clip_path)
    final_clip.write_videofile(video_filename)

    return render_template('/build_stackedvids.html', stackedvid_url=final_clip_path)


@app.route('/build_stackedvid')
def build_stackedvid():
    # Get a random video and image from the static folder
    video_filename = random.choice(glob.glob('static/square_vids/*.mp4'))
    videofilename = random.choice(glob.glob('static/square_vids/*.mp4'))

    # Load the video and image files as clips
    video_clip = VideoFileClip(video_filename)
    videoclip = VideoFileClip(videofilename)

    # Set the duration of the image clip to match the duration of the video clip
    videoclip = videoclip.set_duration(video_clip.duration)

    # Resize the clips to 640x640 and 640x640 respectively
    video_clip = video_clip.resize((640, 640))
    videoclip = videoclip.resize((640, 640))

    # Create a black clip to fill the remaining space below the image
    black_clip = ColorClip(size=(640, 640), color=(
        0, 0, 0)).set_duration(video_clip.duration)

    # Combine the clips vertically using CompositeVideoClip
    final_clip = CompositeVideoClip([
        video_clip.set_position(('center', 'top')),
        videoclip.set_position(('center', 640)),
        black_clip.set_position(('center', 640 + 640))
    ], size=(640, 1280))

    # Export the final clip as a video file
    timestr = time.strftime("%Y%m%d-%H%M%S")
    video_filename = 'static/stacked_vids/stacked_vids' + timestr + 'video.mp4'
    final_clip_path = 'static/stacked_vids/stacked_videos.mp4'
    final_clip.write_videofile(final_clip_path)
    final_clip.write_videofile(video_filename)

    return render_template('/build_stackedvid.html', stackedvid_url=final_clip_path)


@app.route('/clean_images', methods=['POST'])
def clean_images_route():
    clean_images()
    logger.error('line 210 clean_images_route')
    return redirect(url_for('index'))


@app.route('/get_gallery')
def get_gallery():
    image_dir = '/mnt/HDD500/flask/FLASK/static/images/uploads'
    image_names = os.listdir(image_dir)
    return render_template('get_gallery.html', image_names=image_names)


@app.route('/uploads/<filename>')
def send_image(filename):
    return send_from_directory('static/images/uploads', filename)


@app.route('/uploads/thumbnails/<filename>')
def send_image_thumb(filename):
    return send_from_directory('static/images/uploads/thumbnails', filename)


@app.route('/flask_info')
def flask_info():
    return render_template('flask_info.html')


@app.route('/add_effects')
def add_effects():
    return '''
        <form method="post" action="/video" enctype="multipart/form-data">
            <label for="input_video">Select input video file:</label><br>
            <input type="file" id="input_video" name="input_video"><br><br>
            <input type="submit" value="Submit">
        </form>
    '''


@app.route('/video', methods=['GET', 'POST'])
def process_video():
    DIR = "static/"
    input_video = request.files['input_video']

    # Save the uploaded video to a file
    input_video.save(f"{DIR}input_video.mp4")

    # Run FFmpeg commands
    command1 = f"ffmpeg -nostdin -i {DIR}input_video.mp4 -filter:v \"minterpolate='mi_mode=mci:mc_mode=aobmc:vsbmc=1:fps=10'\" -c:v libx264 -r 20 -pix_fmt yuv420p -c:a copy -y {DIR}output.mp4"

    subprocess.run(command1, shell=True, stderr=subprocess.PIPE,
                   universal_newlines=True)

    command2 = f"ffmpeg -nostdin -i {DIR}output.mp4 -vf mpdecimate,setpts=N/FRAME_RATE/TB -c:v libx264 -r 30 -pix_fmt yuv420p -c:a copy -y {DIR}mpdecimate.mp4"

    subprocess.run(command2, shell=True, stderr=subprocess.PIPE,
                   universal_newlines=True)

    # DIR = "/home/jack/Desktop/ffmpeg_flask/"
    command3 = f"ffmpeg -i static/mpdecimate.mp4 -filter_complex \"[0:v]trim=duration=14,loop=500:1:0[v];[1:a]afade=t=in:st=0:d=1,afade=t=out:st=0.9:d=2[a1];[v][0:a][a1]concat=n=1:v=1:a=1\" -c:v libx264 -r 30 -pix_fmt yuv420p -c:a aac -b:a 192k -shortest -y static/output.mp4"
    subprocess.run(command3, shell=True, stderr=subprocess.PIPE,
                   universal_newlines=True)

    now = datetime.datetime.now().strftime("%Y-%m-%d_%H-%M-%S")
    shutil.copy(f"{DIR}output.mp4", f"{DIR}{now}_output.mp4")
    logger.info(f'my_video: f"{DIR}mpdecimate.mp4"')
    video_file = "static/outputALL.mp4"
    command4 = f'ffmpeg -i "{DIR}mpdecimate.mp4" -i "{DIR}mpdecimate.mp4" -i "{DIR}mpdecimate.mp4" -i "{DIR}mpdecimate.mp4" -i "{DIR}mpdecimate.mp4" -filter_complex "[0:v]trim=duration=15[v0];[1:v]trim=duration=15[v1];[2:v]trim=duration=15[v2];[3:v]trim=duration=15[v3];[4:v]trim=duration=15[v4];[v0][v1][v2][v3][v4]concat=n=5:v=1:a=0" -c:v libx264 -pix_fmt yuv420p -shortest -y {video_file}'
    subprocess.run(command4, shell=True, stderr=subprocess.PIPE,
                   universal_newlines=True)
    now = datetime.datetime.now().strftime("%Y-%m-%d_%H-%M-%S")
    diR = f"{DIR}/square_videos/"
    logger.info(f'diR: f"{diR}mpdecimate.mp4"')
    shutil.copy(f"{video_file}", f"{diR}{now}_outputALL.mp4")
    logger.info(f'diR: {diR}mpdecimate.mp4')
    return render_template('final.html', video_file=video_file)


def get_all_mp4_videos():
    mp4_videos = []
    for root, dirs, files in os.walk('static'):
        for file in files:
            if file.endswith('.mp4'):
                mp4_videos.append(os.path.join(root, file))
    return mp4_videos


@app.route('/play/<path:video_path>')
def play(video_path):
    return send_file(video_path)


@app.route('/select_order', methods=['GET', 'POST'])
def select_order():
    # Set a default value for output_path
    output_path = 'static/videos/concatenated_video.mp4'
    if request.method == 'POST':
        # Get the order of the videos from the form data
        order = request.form.getlist('order')
        # Join the videos in the specified order
        join_videos(order, output_path)
        # Set the timestamped output path
        timestamp = datetime.datetime.now().strftime('%Y%m%d_%H%M%S')
        new_output_path = f'static/videos/concatenated_{timestamp}XX.mp4'
        shutil.copy(output_path, new_output_path)
        # Redirect to the download page
        return redirect(url_for('download'))
    else:
        # Get the paths to the video files in the directory
        video_dir = 'static/videos'
        video_files = [os.path.join(video_dir, filename) for filename in os.listdir(
            video_dir) if filename.endswith('.mp4')]
        # Render the template with the list of video files and the output path
        return render_template('select_order.html', video_files=video_files, output_path=output_path)


def join_videos(video_paths, output_path):
    # Generate a list of input arguments for FFmpeg
    input_args = []
    for path in video_paths:
        input_args.extend(['-i', path])
    # Join the videos using FFmpeg
    subprocess.run(['ffmpeg', *input_args, '-filter_complex', 'concat=n={}:v=1:a=0'.format(
        len(video_paths)), '-c:v', 'libx264', '-crf', '23', '-preset', 'veryfast', '-y', output_path])
    # output_path = 'static/videos/concatenated_video.mp4'
    timestamp = datetime.datetime.now().strftime('%Y%m%d_%H%M%S')
    new_output_path = f'static/videos/concatenated_{timestamp}XX.mp4'
    shutil.copy(output_path, new_output_path)


@app.route('/videos', methods=['POST'])
def process_videos():
    DIR = "static/"
    input_video = request.files['input_video']
    ""
    # Save the uploaded video to a file
    input_video.save(f"{DIR}input_video2.mp4")

    command1 = f"ffmpeg -nostdin -i {DIR}input_video2.mp4 -filter:v \"minterpolate='mi_mode=mci:mc_mode=aobmc:vsbmc=1:fps=10'\" -c:v libx264 -r 20 -pix_fmt yuv420p -c:a copy -y {DIR}alice/output2.mp4"
    subprocess.run(command1, shell=True, stderr=subprocess.PIPE,
                   universal_newlines=True)

    command2 = f"ffmpeg -hide_banner -i {DIR}alice/output2.mp4 -filter:v \"setpts=5*PTS,minterpolate='fps=25:scd=none:me_mode=bidir:vsbmc=1:search_param=200'\" -t 58 -y {DIR}alice/final2.mp4"
    subprocess.run(command2, shell=True, stderr=subprocess.PIPE,
                   universal_newlines=True)

    command3 = f"ffmpeg -hide_banner -i {DIR}alice/final2.mp4 -filter:v \"setpts=5*PTS,minterpolate='fps=25:scd=none:me_mode=bidir:vsbmc=1:search_param=200'\" -t 58 -y {DIR}alice/final5.mp4"
    subprocess.run(command3, shell=True, stderr=subprocess.PIPE,
                   universal_newlines=True)

    # Add music to the video
    init = randint(10, 50)
    MUSIC = ["static/music/Born_a_Rockstar-Instrumental-NEFFEX.mp3", "static/music/Cattle-Telecasted.mp3", "static/music/Bite_Me-Clean-NEFFEX.mp3", "static/music/El_Secreto-Yung_Logos.mp3", "static/music/Blue_Mood-Robert_Munzinger.mp3", "static/music/Escapism-Yung_Logos.mp3", "static/music/Enough-NEFFEX.mp3", "static/music/As_You_Fade_Away-NEFFEX.mp3", "static/music/Culture-Anno_Domini_Beats.mp3", "static/music/Contrast-Anno_Domini_Beats.mp3", "static/music/Diving_in_Backwards-Nathan_Moore.mp3",
             "static/music/Aztec_Empire-Jimena_Contreras.mp3", "static/music/Devil_s_Organ-Jimena_Contreras.mp3", "static/music/Alpha_Mission-Jimena_Contreras.mp3", "static/music/Changing-NEFFEX.mp3", "static/music/Anxiety-NEFFEX.mp3", "static/music/6-Shots-NEFFEX.mp3", "static/music/DimishedReturns.mp3", "static/music/Drum_Meditation.mp3", "static/music/ChrisHaugen.mp3", "static/music/DoveLove-Moreira.mp3", "static/music/DesertPlanet.mp3", "static/music/David_Fesliyan.mp3"]

    music = random.choice(MUSIC)
    command3 = f"ffmpeg -i {DIR}alice/final5.mp4 -ss {init} -i {music} -af 'afade=in:st=0:d=4,afade=out:st=55:d=3' -map 0:0 -map 1:0 -shortest -y {DIR}alice/Final_End.mp4"
    subprocess.run(command3, shell=True)

    # Save the output video to a file
    now = datetime.datetime.now().strftime("%Y-%m-%d_%H-%M-%S")
    shutil.copy(f"{DIR}alice/output2.mp4", f"{DIR}alice/{now}_output.mp4")
    shutil.copy(f"{DIR}alice/Final_End.mp4", f"{DIR}alice/{now}_Final.mp4")
    shutil.copy(f"{DIR}alice/Final_End.mp4", f"{DIR}alice/Final_End_mix.mp4")
    return render_template('final.html', video_file="alice/Final_End.mp4")


@app.route('/large_video')
def large_video():
    return render_template('large_video.html')


@app.route('/add_border')
def add_border():
    images = [f for f in os.listdir(
        'static/images/uploads/') if os.path.isfile(os.path.join('static/images/uploads/', f))]
    thumbnails = []
    for image in images:
        with Image.open('static/images/uploads/' + image) as img:
            img.thumbnail((200, 200))
            thumbnail_name = 'thumbnail_' + image
            img.save('static/thumbnails/' + thumbnail_name)
            thumbnails.append(thumbnail_name)
    return render_template('add_border.html', images=images, thumbnails=thumbnails)


@app.route('/select_border')
def select_border():
    borders = os.listdir('static/transparent_borders/')
    return render_template('select_border.html', borders=borders)


@app.route('/apply_border', methods=['POST', 'GET'])
def apply_border():
    selected_image = request.form['image']
    selected_border = request.form['border']
    try:
        with Image.open('static/images/uploads/' + selected_image) as img:
            with Image.open('static/transparent_borders/' + selected_border) as border:
                img = img.resize(border.size)
                img.paste(border, (0, 0), border)
                final_image_name = 'final_' + selected_image
                img.save('static/final_images/' + final_image_name)
        return render_template('final_image.html', final_image=final_image_name, message='Border applied successfully.')
    except Exception as e:
        error_message = f'An error occurred: {str(e)}. Please try again.'
        return render_template('apply_border.html', image=selected_image, border=selected_border, error_message=error_message)


@app.route('/select_border_image', methods=['GET'])
def select_border_image():
    try:
        image = request.args.get('image')
        if not image:
            raise ValueError('No image selected.')
        return render_template('select_border.html', image=image, borders=os.listdir('static/transparent_borders/'))
    except Exception as e:
        error_message = f'An error occurred: {str(e)}. Please try again.'
        return render_template('add_border.html', error_message=error_message)


@app.route('/overlay_text', methods=['GET'])
def overlay_text():
    # Load the blank image
    blank_image_path = 'static/new_video/Border-plain.png'
    blank_image = Image.open(blank_image_path)

    # Load the text file and format its contents
    text_file_path = 'static/new_video/text_file.txt'
    with open(text_file_path, 'r') as file:
        text_contents = file.read()

    formatted_text = f"{text_contents}"  # Format the contents as desired

    # Set the font properties
    font_size = 21
    font_color = (255, 255, 255)  # White color
    font_path = '/home/jack/fonts/source-sans-pro-semibold.ttf'

    font = ImageFont.truetype(font_path, font_size)

    # Create a new image with the same size as the blank image and transparent background
    text_overlay = Image.new('RGBA', blank_image.size, (0, 0, 0, 0))

    # Draw the formatted text onto the overlay image
    draw = ImageDraw.Draw(text_overlay)
    text_position = (50, 600)  # Adjust the position as needed
    draw.text(text_position, formatted_text, font=font, fill=font_color)

    # Merge the overlay image with the blank image
    final_image = Image.alpha_composite(
        blank_image.convert('RGBA'), text_overlay)

    # Save the final image
    output_image_path = 'static/new_video/output_image.png'
    final_image.save(output_image_path)

    return render_template('overlay_text.html', output_image_path=output_image_path)


@app.route('/create_text_file', methods=['GET', 'POST'])
def create_text_file():
    if request.method == 'POST':
        # Get the text content from the textarea
        text_content = request.form.get('textarea_content')

        # Create the file path
        text_file_path = os.path.join('static/new_video', 'text_file.txt')

        # Write the text content to the file
        with open(text_file_path, 'w') as file:
            file.write(text_content)

        return render_template('text_file_created.html', text_file_path=text_file_path)

    return render_template('create_text_file.html')


def allowed_file(filename):
    return '.' in filename and filename.rsplit('.', 1)[1].lower() == 'jpg'


@app.route('/generate_video3', methods=['GET', 'POST'])
def generate_video3():
    if request.method == 'POST':
        # Check if any files were uploaded
        if 'file' not in request.files:
            error_message = "No files uploaded."
            logger.error(error_message)
            return render_template('generate_video3.html', error_message=error_message)

        files = request.files.getlist('file')

        # Check if files were selected
        if len(files) == 0:
            error_message = "No files selected."
            logger.error(error_message)
            return render_template('generate_video3.html', error_message=error_message)

        # Check if the files have supported extensions
        for file in files:
            if not allowed_file(file.filename):
                error_message = f"Invalid file extension for {file.filename}. Only JPG files are allowed."
                logger.error(error_message)
                return render_template('generate_video3.html', error_message=error_message)

        # Create a temporary directory to save the uploaded files
        temp_dir = os.path.join('static', 'temp')
        os.makedirs(temp_dir, exist_ok=True)

        # Save the uploaded files to the temporary directory
        saved_files = []
        for file in files:
            filename = secure_filename(file.filename)
            file_path = os.path.join(temp_dir, filename)
            file.save(file_path)
            saved_files.append(file_path)

        # Randomly select 30 image files
        selected_images = random.sample(saved_files, min(30, len(saved_files)))

        # Create a list of image clips from the selected images
        image_clips = []
        for image_file in selected_images:
            image_clip = mp.ImageClip(image_file, duration=1)
            image_clips.append(image_clip)

        # Concatenate the image clips into a video clip
        video_clip = mp.concatenate_videoclips(image_clips)

        # Set the output video path
        output_path = os.path.join('static', 'videos', 'generated_video.mp4')

        # Write the video clip to the output file
        video_clip.write_videofile(output_path, fps=24)

        # Delete the uploaded files after processing
        for file_path in saved_files:
            os.remove(file_path)

        # Return the generated video URL to the client
        video_url = url_for('static', filename='videos/generated_video.mp4')
        return render_template('generate_video3.html', video_url=video_url)

    # Render the initial form
    return render_template('generate_video3.html')


@app.route('/generate_video2')
def generate_video2():
    # Get the pythonlist of image files in the static/final_images/ directory
    # image_filenames = random.sample(glob.glob('static/final_images/*.jpg'),25)
    # image_filenames = random.sample(glob.glob('static/images/uploads/*.jpg'),30)
    # image_filenames = random.sample(glob.glob('static/alien_files/*.jpg'),30)
    image_filenames = random.sample(
        glob.glob('/mnt/HDD500/collections/absrtact/*.jpg'), 30)
    print(image_filenames, end="-")

    image_clips = []
    for filename in image_filenames:
        # Open the image file and resize it to 512x768
        image = Image.open(filename)
        image = image.resize((512, 768), Image.ANTIALIAS)
        print(image)
        # Convert the PIL Image object to a NumPy array
        image_array = np.array(image)
        # Create an ImageClip object from the resized image and set its duration to 1 second
        image_clip = ImageClip(image_array).set_duration(1)

        # Append the image clip to the list
        image_clips.append(image_clip)

    # Concatenate all the image clips into a single video clip
    video_clip = concatenate_videoclips(image_clips, method='compose')
    timestr = time.strftime("%Y%m%d-%H%M%S")
    # Set the fps value for the video clip
    video_clip.fps = 24
    # Write the video clip to a file
    video_path = 'static/videos/random_images' + timestr + 'video.mp4'
    video_clip.write_videofile(video_path, fps=24)
    video_clip.write_videofile('static/videos/TEMPvideo.mp4', fps=24)

    # Return a message to the client
    return render_template('generate_video2.html', video_url='static/videos/TEMPvideo.mp4')
    # return render_template('generate_video2.html' ,video_url='/static/videos/TEMPvideo.mp4', video_path=video_path)


@app.route('/ffmpeg_ctl', methods=['GET', 'POST'])
def ffmpeg_ctl():
    if request.method == 'POST':
        # Access the numeric input value from the form data
        number = request.form.get('number')
        # Process the value as needed
        # ...

    return render_template('ffmpeg_ctl.html')


@app.route('/mkmoz', methods=['GET', 'POST'])
def mkmoz():
    im = Image.new("RGB", (2048, 2048), (250, 250, 250))
    for i in range(0, 2500):
        if i < 500:
            DIR = "/home/jack/.cache/thumbnails/large/*.png"
        if i > 500:
            DIR = "/home/jack/.cache/thumbnails/normal/*.png"
        # if i> 2495:DIR = "/home/jack/.cache/thumbnails/large/*.png"
        thumb = random.choice(glob.glob(DIR))
        print("THUMB:", thumb)
        Thum = Image.open(thumb)
        im.paste(Thum, ((randint(0, im.size[0])), randint(0, im.size[1]) - 50))
        filename = "static/images/ThumbNails.png"
        im.save(filename)
        Filename = "images/ThumbNails.png"
    return render_template("mkmoz.html", filename=Filename)


@app.route('/mk_background', methods=['GET', 'POST'])
def mk_background():
    im = Image.new("RGB", (8000, 512), (127, 255, 127))
    for i in range(0, 1000):
        if i < 250:
            DIR = "/home/jack/.cache/thumbnails/large/*.png"
        else:
            DIR = "/home/jack/.cache/thumbnails/normal/*.png"
        thumb = random.choice(glob.glob(DIR))
        print("THUMB:", thumb)
        Thum = Image.open(thumb)
        im.paste(Thum, ((randint(0, im.size[0])), randint(0, im.size[1]) - 50))
        filename = "static/images/ThumbNails_Background.png"
        im.save(filename)
    return redirect('/mkvid')


@app.route('/mkvid')
def mkvid():
    Filename = "static/images/ThumbNails_Background.png"
    Video_file = "static/images/ThumbNails_Background_FFmpeg.mp4"
    command = [
        'FFmpeg', '-hide_banner',
        '-loop', '1', '-i', 'static/images/ThumbNails_Background.png',
        '-vf', 'scale=8000:512,scroll=horizontal=0.0001,crop=768:512:0:0,format=yuv420p',
        '-t', '240', '-y', 'static/images/ThumbNails_Background_FFmpeg.mp4'
    ]
    subprocess.run(command)
    return redirect('/mkvid2')


@app.route('/mkvid2')
def mkvid2():
    command2 = [
        'ffmpeg', '-hide_banner',
        '-i', 'static/images/ThumbNails_Background_FFmpeg.mp4',
        '-vf', 'scale=512:768,setsar=1/1',
        '-c:a', 'copy', '-y', 'static/images/long_512-768.mp4'
    ]
    subprocess.run(command2)
    Filenamez = "images/ThumbNails_Background.png"
    Video_filez = "images/long_512-768.mp4"
    return render_template("mkvid2.html", filename=Filenamez, video=Video_filez)


def get_db():
    db = getattr(g, '_database', None)
    if db is None:
        db = g._database = sqlite3.connect(app.config['DATABASE'])
    return db


@app.teardown_appcontext
def close_connection(exception):
    db = getattr(g, '_database', None)
    if db is not None:
        db.close()


@app.route('/view_thumbs')
def view_thumbs():
    # Define the directory where the images are located
    image_directory = 'static/images/uploads'
    # Get a list of all the image files in the directory
    image_files = [f for f in os.listdir(
        image_directory) if f.endswith('.jpg') or f.endswith('.png')]
    # Create a list of dictionaries containing the image file name and URL
    image_list = [{'name': f, 'url': f'/images/uploads/{f}'}
                  for f in image_files]
    # Render the template with the list of images
    return render_template('view_thumbs.html', image_list=image_list)


@app.route('/add_text', methods=['GET', 'POST'])
def add_text():
    if request.method == 'POST':
        text = request.form['text']
        now = datetime.datetime.now()
        timestamp = now.strftime("%Y-%m-%d %H:%M:%S")
        text = f'Text Entry: {timestamp} {text}'
        with open('chat.txt', 'a') as file:
            file.write(f'\n{text}')
        return render_template('add_text.html', message='Text added successfully')
    else:
        return render_template('add_text.html')


@app.route('/search_txt', methods=['GET', 'POST'])
def search_txt():
    if request.method == 'POST' and 'phrase' in request.form:
        phrase = request.form['phrase']
        with open('chat.txt', 'r') as file:
            lines = file.readlines()
        results = []
        for i, line in enumerate(lines):
            if phrase in line:
                start = max(0, i - 5)
                end = min(len(lines), i + 6)
                context = lines[start:end]
                for j, context_line in enumerate(context):
                    if phrase in context_line:
                        results.append(f'Line {start+j}: {context_line}')
                    else:
                        results.append(f'Line {start+j}: {context_line}')
        return render_template('results.html', results=results)
    return render_template('search_txt.html')


@app.route('/blend_pil', methods=['POST', 'GET'])
def blend_pil():
    if request.method == 'POST':
        # Get the uploaded images
        img1 = request.files['img1']
        img2 = request.files['img2']
        img3 = request.files['img3']

        # Open the images using PIL
        img1_pil = Image.open(img1)
        img2_pil = Image.open(img2)
        img3_pil = Image.open(img3)

        # Blend the images
        blended_pil = Image.blend(img1_pil, img2_pil, 1 / 3)
        blended_pil = Image.blend(blended_pil, img3_pil, 1 / 3)

        # Return the blended image as a response
        # Since we are not saving it to the server, we can use a BytesIO object to avoid creating a temporary file
        img_io = BytesIO()
        blended_pil.save(img_io, 'JPEG', quality=70)
        current_datetime = datetime.now()
        str_current_datetime = str(current_datetime)
        file_name = "static/images/uploads/blended_pil" + \
            str_current_datetime + "XXXX.jpg"
        blended_pil.save(file_name, format='JPEG')
        img_io.seek(0)

        # Generate the HTML for displaying the blended image in the template
        blended_image_data = base64.b64encode(
            img_io.getvalue()).decode('utf-8')
        blended_image_url = f"data:image/jpeg;base64,{blended_image_data}"
        # blended_image_url = blended_image_url.resize(( blended_image_url.size[0]//2, blended_image_url.size[1]//2), Image.ANTIALIAS)
        # Pass the URL of the blended image to the template
        return render_template('show_blend_pil.html', blended_image_url=blended_image_url)
    return render_template('blend_pil.html')


@app.route('/process_images', methods=['POST', 'GET'])
def process_images():
    if request.method == 'POST':
        # read the images from the request
        img1 = Image.open(request.files['image1'].stream).convert('RGB')
        img2 = Image.open(request.files['image2'].stream).convert('L')
        img3 = Image.open(request.files['image3'].stream).convert('RGB')

        # resize the images to have the same shape
        img1 = img1.resize((img2.width, img2.height))
        img3 = img3.resize((img2.width, img2.height))

        # convert the mask to binary
        threshold = 127
        mask = Image.eval(img2, lambda px: 255 if px > threshold else 0)

        # apply the mask
        img = Image.composite(img1, img3, mask)

        # save the image to a file
        output = BytesIO()
        current_datetime = datetime.now()
        str_current_datetime = str(current_datetime)
        file_name = "static/images/" + str_current_datetime + "XXXX.jpg"
        img.save(file_name, format='JPEG')
        img.save(output, format='JPEG')
        output.seek(0)

        # encode the image to bytes
        img_bytes = output.getvalue()

        # return the image as a response
        return Response(img_bytes, mimetype='image/jpeg')
    return render_template('process_images.html')


@app.route('/image_directories', methods=['GET', 'POST'])
def image_directories():
    image_directories = ['static/Prodia_640x640', 'static/LineArt',
                         'static/Quantized', 'static/squares', 'static/BrightColors']
    if request.method == 'POST':
        # Rest of the code

        directory = request.form['directory']
        # Check that the directory parameter is not empty
        if directory:
            logger.info(
                'Redirecting endpoint with directory: %s', directory)
            # Check that the directory is a valid directory path
            if os.path.isdir(directory):
                # Pass the directory value to the square_video endpoint
                logger.info(
                    'Redirecting to square_video endpoint with directory: %s', directory)
                return redirect(url_for('square_video', directory=directory))
            else:
                # Render an error template if the directory parameter is not a valid directory path
                logger.error('Invalid directory parameter: %s', directory)
                return render_template('error.html', message='Please enter a valid directory path.')
        else:
            # Render an error template if the directory parameter is empty
            logger.error('Directory parameter is empty')
            return render_template('error.html', message='Please enter a directory path.')
    else:
        # Pass the list of image directories to the template
        return render_template('image_directories.html', image_directories=image_directories)


#USE_AUDIO_MP3 = False  # Set this to True if you want to use 'static/audio_mp3/'
#MDIR = 'static/music/' if not USE_AUDIO_MP3 else 'static/audio_mp3/'

# ...
@app.route('/select_playmp3', methods=['GET', 'POST'])
def select_playmp3():
    selected_directory = request.args.get('selected_directory')  # Use args instead of form for GET method
    selected_mp3 = request.form.get('mp3_file')  # Check the name attribute of your form input
    
    print(f"Selected Directory: {selected_directory}")
    print(f"Selected MP3: {selected_mp3}")
    
    directories = ['static/audio_mp3/', 'static/music/']
    mp3_files = []

    if selected_directory:
        mp3_files = [f for f in os.listdir(selected_directory) if f.endswith('.mp3')]
    
    if request.method == 'POST' and selected_mp3 and selected_directory:
        mp3_path = os.path.join(selected_directory, selected_mp3)
        
        pygame.mixer.init()
        pygame.mixer.music.load(mp3_path)
        pygame.mixer.music.play()
        
        while pygame.mixer.music.get_busy():
            pygame.time.Clock().tick(10)
        
        pygame.mixer.quit()
        pygame.quit()
    
    fvideo = findvideos()
    return render_template('select_playmp3.html', directories=directories, selected_directory=selected_directory, mp3_files=mp3_files, video=fvideo)



@app.route("/make_animation")
def make_animation():
    # Get a list of all files in the final_images directory
    # image_files = os.listdir("static/final_images/")
    # DIR = "/home/jack/Desktop/HDD500/collections/gypsy_files/"
    # DIR = "/home/jack/Desktop/HDD500/collections/hippy_files/"
    #DIR = "/mnt/HDD500/collections/jungle/exotic_lithograph_prints-Playground_AI_files/512x768/"
    DIR = "static/images/clip_drop/"
    selected_files = random.sample(glob.glob(DIR + '*.jpg'), 30)
    print(selected_files)
    #image_files = os.listdir(DIR)
    # image_files = os.listdir("/mnt/HDD500/collections/640x640-alien/")
    # Select 20 random files from the list
    #selected_files = random.sample(image_files, 30)

    # Load each selected file, resize it to 400x600, and save it to a temporary directory
    resized_images = []
    for filename in selected_files:
        print(filename)
        with Image.open(filename) as img:

            img = img.resize((400, 600))
            temp_filename = "static/tmp/" + filename
            img.save(temp_filename)
            resized_images.append(temp_filename)

    # Create an animated GIF from the resized images

    gif_filename = "static/animated_gifs/animated.gif"
    with imageio.get_writer(gif_filename, mode='I', duration=1) as writer:
        for filename in resized_images:
            image = imageio.imread(filename)
            writer.append_data(image)
    import shutil

    timestr = time.strftime("%Y%m%d-%H%M%S")

    src = 'static/animated_gifs/animated.gif'
    dst = 'static/animated_gifs/animated' + timestr + '.gif'
    # 2nd option
    shutil.copy(src, dst)
    # Return a template that displays the GIF
    return render_template("make_animation.html", gif_filename=gif_filename)


@app.route('/title_page', methods=['GET', 'POST'])
def title_page():
    if request.method == 'POST':
        # Get the text input and image file from the form data
        text = request.form['text']
        image = request.files['image']

        # Save the image to a temporary location
        image_path = os.path.join(
            app.config['UPLOAD_FOLDER'], secure_filename(image.filename))
        image.save(image_path)

        # Open the image file
        image = Image.open(image_path)

        # Create a drawing context on the image
        draw = ImageDraw.Draw(image)

        # Define the font and font size for the text
        font = ImageFont.truetype('static/fonts/OpenSansBold.ttf', 50)
        # Split the text by newline characters
        lines = text.split("  ")

        # Calculate the size of each line and get the maximum width
        line_sizes = [draw.textsize(line, font) for line in lines]
        max_line_width = max([size[0] for size in line_sizes])

        # Calculate the total size of the text
        text_width = max_line_width
        text_height = sum([size[1] for size in line_sizes])

        # Calculate the position of the text in the center of the image
        x = (640 - text_width) / 2
        y = (640 - text_height) / 2

        # Calculate the size of the text
        text_width, text_height = draw.textsize(text, font)

        # Calculate the position of the text in the center of the image
        x = (640 - text_width) / 2
        y = (640 - text_height) / 2

        # Add the text to the image
        draw.text((x, y), text, font=font, fill=(0, 0, 0, 255))

        # Save the image to the static folder with a unique filename
        inc = text.replace(" ", "")
        filenamex = os.path.join(
            app.static_folder, 'title_pages', f'{inc}_{hash(text)}.png')
        image.save(filenamex)
        filename = 'static/title_pages/title_page.png'
        shutil.copy(filenamex, filename)
        logger.error('filename: %s', filename)

        # print(inc[:5])
        # Remove the temporary image file
        # os.remove(image_path)
        filenamev = 'title_pages/title_page.png'
        # Return the rendered template with the image filename
        return render_template('title_page.html', filename=filenamev)
    filenamev = 'title_pages/title_page.png'
    return render_template('title_page.html', filename=filenamev)


@app.route('/add_title', methods=['GET', 'POST'])
def add_title():
    # Create the final_videos directory if it does not exist
    final_videos_dir = os.path.join(app.static_folder, 'final_videos')
    if not os.path.exists(final_videos_dir):
        os.makedirs(final_videos_dir)

    if request.method == 'POST':
        logger.debug('Entering POST request handler for /add_title')
        # Get the paths of the selected video and title page
        video_path = os.path.join(
            app.static_folder, 'videos', request.form['video'])
        title_page_path = os.path.join(
            app.static_folder, 'title_pages', request.form['title_page'])
        logger.debug(f'video_path: {video_path}')
        logger.debug(f'title_page_path: {title_page_path}')

        # Load the video and title page as clips
        video_clip = VideoFileClip(video_path)
        title_page_clip = ImageClip(title_page_path).set_duration(2)

        # Add the title page to the video for the first 2 seconds
        final_clip = concatenate_videoclips(
            [title_page_clip, video_clip.subclip(2)])

        # Save the final video to the final_videos directory
        final_filename = f"{os.path.splitext(request.form['video'])[0]}_{os.path.splitext(request.form['title_page'])[0]}.mp4"
        final_path = os.path.join(final_videos_dir, final_filename)
        logger.debug(f'final_path: {final_path}')
        final_clip.write_videofile(final_path)

        # Return a response to the user indicating that the video with title page was created
        message = f"The video with title page was created and saved to {final_path}"
        return render_template('add_title.html', message=message)

    # If the request method is GET, render the add_title.html template
    logger.debug('Entering GET request handler for /add_title')
    videos = os.listdir(os.path.join(app.static_folder, 'square_vids'))
    title_pages = os.listdir(os.path.join(app.static_folder, 'title_pages'))
    logger.debug(f'videos: {videos}')
    logger.debug(f'title_pages: {title_pages}')
    return render_template('add_title.html', videos=videos, title_pages=title_pages)


def get_rowid():
    # Connect to the database
    db = sqlite3.connect('code.db')
    cursor = db.cursor()
    row_id = request.form['row_id']
    # Execute a query to retrieve the rowid
    cursor.execute("SELECT rowid FROM snippets WHERE rowid = ?", (rowid,))

    # Fetch the result
    result = cursor.fetchone()

    # Close the database connection
    db.close()

    # Check if a rowid was found
    if result:
        rowid = result[0]
    else:
        # Handle the case when no rowid is found
        rowid = None

    return rowid


@app.route('/indexA')
def indexA():
    image_dir = 'static/images'
    image_files = [f for f in os.listdir(image_dir) if f.endswith('.jpg')]
    random_image_file = random.choice(image_files)
    logger.info(f"Random image file selected: {random_image_file}")
    return render_template('indexA.html', random_image_file=random_image_file)


@app.route('/index_FLASK')
def index_FLASK():
    image_dir = 'static/images'
    image_files = [f for f in os.listdir(image_dir) if f.endswith('.jpg')]
    random_image_file = random.choice(image_files)
    logger.info(f"Random image file selected: {random_image_file}")

    return render_template('index_FLASK.html')


# Configuration
app.config['DATABASE'] = 'code.db'


def get_db():
    db = getattr(g, '_database', None)
    if db is None:
        db = g._database = sqlite3.connect("code.db")
    return db


@app.teardown_appcontext
def close_connection(exception):
    db = getattr(g, '_database', None)
    if db is not None:
        db.close()


@app.before_first_request
def create_table():
    db = get_db()
    cursor = db.cursor()

    cursor.execute('''
        CREATE TABLE IF NOT EXISTS products (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            name TEXT NOT NULL,
            description TEXT,
            price REAL
        )
    ''')

    db.commit()


@app.teardown_appcontext
def close_connection(exception):
    db = getattr(app, '_database', None)
    if db is not None:
        db.close()


@app.route('/indexD')
def indexD():
    return redirect('/products')


@app.route('/products', methods=['GET', 'POST'])
def products():
    if request.method == 'POST':
        name = request.form['name']
        description = request.form['description']
        price = request.form['price']

        db = get_db()
        cursor = db.cursor()
        cursor.execute("INSERT INTO products (name, description, price) VALUES (?, ?, ?)",
                       (name, description, price))
        db.commit()

    db = get_db()
    cursor = db.cursor()
    cursor.execute("SELECT * FROM products")
    products = cursor.fetchall()

    return render_template('products.html', products=products)


@app.route('/edit/<int:product_id>', methods=['GET', 'POST'])
def edit_product(product_id):
    if request.method == 'POST':
        name = request.form['name']
        description = request.form['description']
        price = request.form['price']

        db = get_db()
        cursor = db.cursor()
        cursor.execute("UPDATE products SET name=?, description=?, price=? WHERE id=?",
                       (name, description, price, product_id))
        db.commit()

        return redirect('/products')

    db = get_db()
    cursor = db.cursor()
    cursor.execute("SELECT * FROM products WHERE id=?", (product_id,))
    product = cursor.fetchone()

    return render_template('edit_product.html', product=product)


@app.route('/delete/<int:product_id>', methods=['POST'])
def delete_product(product_id):
    db = get_db()
    cursor = db.cursor()
    cursor.execute("DELETE FROM products WHERE id=?", (product_id,))
    db.commit()

    return redirect('/products')
# Function to create the database and table
    
@app.route('/access_database')
def access_database():
    db_path = os.path.join(os.path.dirname(__file__), 'code.db')
    conn = sqlite3.connect(db_path)
    cursor = conn.cursor()
    cursor.execute('SELECT * FROM snippets')
    code = cursor.fetchall()
    conn.close()
    return render_template('database.html', code=code)
# Function to create the database and table


def create_databaseD():
    conn = sqlite3.connect('code.db')
    cursor = conn.cursor()
    # cursor.execute("CREATE TABLE snippets (description TEXT, code TEXT, keywords TEXT)")
    cursor.execute('''
        CREATE TABLE IF NOT EXISTS snippets (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            description TEXT NOT NULL,
            code TEXT,
            keywords TEXT
        )
    ''')
    conn.commit()
    conn.close()
# Route to display all code


@app.route('/code', methods=['GET'])
def display_code():
    conn = sqlite3.connect('code.db')
    cursor = conn.cursor()
    cursor.execute('SELECT * FROM snippets')
    code = cursor.fetchall()
    conn.close()

    # Define the HTML code for the form
    form_code = """
    <h1>Add New code</h1>
    <form action="/code" method="post">
        <label for="description">Description:</label>
        <textarea type="description" name="description" rows="8" cols="90%"></textarea><br />
        <label for="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Code:</label>
        <textarea type="text" name="code" rows="8" cols="90%"></textarea><br>
        <label for="keywords">Keywords:</label>
        <input style="width:53%;height: 25px;" type="keywords" name="keywords"><br>
        <input type="submit" value="Add code">
    </form>
    """

    return render_template('code.html', code=code, form_code=form_code)
# Route to add a new code


@app.route('/code', methods=['POST'])
def add_code():
    description = request.form['description']
    code = request.form['code']
    keywords = request.form['keywords']

    conn = sqlite3.connect('code.db')
    cursor = conn.cursor()
    cursor.execute('INSERT INTO snippets (description, code, keywords) VALUES (?, ?, ?)',
                   (description, code, keywords))
    conn.commit()
    conn.close()
    return redirect(url_for('display_code'))
# Route to edit a code


@app.route('/edit_code/<int:code_id>', methods=['GET', 'POST'])
def edit_code(code_id):
    conn = sqlite3.connect('code.db')
    cursor = conn.cursor()

    if request.method == 'POST':
        description = request.form['description']
        code = request.form['code']
        keywords = request.form['keywords']

        cursor.execute('UPDATE snippets SET description=?, code=?, keywords=? WHERE id=?',
                       (description, code, keywords, code_id))
        conn.commit()
        conn.close()
        return redirect(url_for('display_code'))

    cursor.execute('SELECT * FROM snippets WHERE id = ?', (code_id,))
    code = cursor.fetchone()
    conn.close()
    return render_template('edit_code.html', code=code)
# Route to delete a code


@app.route('/delete_code/<int:code_id>', methods=['POST'])
def delete_code(code_id):
    conn = sqlite3.connect('code.db')
    cursor = conn.cursor()
    cursor.execute('DELETE FROM snippets WHERE id = ?', (code_id,))
    conn.commit()
    conn.close()
    return redirect(url_for('display_code'))


@app.route('/indexE')
def indexE():
    # Get a list of directories within static/images
    image_directories = os.listdir(os.path.join(app.static_folder, 'images'))

    # Create a dropdown menu with the list of directories
    dropdown_menu = ""
    for directory in image_directories:
        dropdown_menu += f'<option value="{directory}">{directory}</option>'

    return f"""
    <!DOCTYPE html>
    <html>
    <body>
        <h2>Upload a file</h2>
        <form action="/uploadN" method="post" enctype="multipart/form-data">
            <select name="directory">
                {dropdown_menu}
            </select>
            <input type="file" name="file">
            <input type="submit" value="Upload">
        </form>
    </body>
    </html>
    """


@app.route('/uploadN', methods=['POST'])
def upload_fileN():
    # Check if a file was submitted in the request
    if 'file' not in request.files:
        return redirect(url_for('indexD'))

    file = request.files['file']

    # Check if the file is not empty
    if file.filename == '':
        return redirect(url_for('indexE'))

    # Save the file to the desired directory
    save_path = os.path.join('static', 'temp_images', file.filename)
    file.save(save_path)

    return f'The file {file.filename} has been uploaded successfully!'


def FilenameByTime(directory):
    timestr = time.strftime("%Y%m%d-%H%M%S")
    filename = directory + "/" + timestr + "_.png"
    return filename


def change_extension(orig_file, new_extension):
    p = change_ext(orig_file)
    new_name = p.rename(p.with_suffix(new_extension))
    return new_name


def auto_canny(image, sigma=0.33):
    # compute the median of the single channel pixel intensities
    v = np.median(image)
    # apply automatic Canny edge detection using the computed median
    lower = int(max(0, (1.0 - sigma) * v))
    upper = int(min(255, (1.0 + sigma) * v))
    edged = cv2.Canny(image, lower, upper)
    # return the edged image
    return edged
# image = cv2.imread('mahotastest/orig-color.png')


def change_extension(orig_file, new_extension):
    p = change_ext(orig_file)
    new_name = p.rename(p.with_suffix(new_extension))
    return new_name


def outlineJ(filename1, outfile_jpg, sigma=0.33):
    """
    USE:
    filename1 = '/home/jack/Desktop/Imagedata/0-original-images/07082orig.jpg' 
    outfile_jpg = '/home/jack/Desktop/dockercommands/images/useresult.png'
    outlineJ(filename1,outfile_jpg)
    """
    image = cv2.imread(filename1)
    edged = auto_canny(image, sigma=0.33)
    inverted = cv2.bitwise_not(edged)
    cv2.imwrite("static/outlines/temp2.png", inverted)
    cv2.imwrite(FilenameByTime("static/outlines/"), inverted)
    # Open Front Image
    # frontimage = Image.open('mahotastest/inverted-bitwise-note3_6.png').convert("1")
    frontimage = Image.open('static/outlines/temp2.png').convert("1")
    frontImage = frontimage.convert("RGBA")
    datas = frontImage.getdata()
    newData = []
    for item in datas:
        if item[0] == 255 and item[1] == 255 and item[2] == 255:
            newData.append((255, 255, 255, 0))
        else:
            newData.append(item)

    frontImage.putdata(newData)
    # Open Background Image
    background = Image.open(filename1)
    # Calculate width to be at the center
    width = (frontimage.width - frontimage.width) // 2
    # Calculate height to be at the center
    height = (frontimage.height - frontimage.height) // 2
    # Paste the frontImage at (width, height)
    background.paste(frontImage, (width, height), frontImage)
    # Save this image
    background.save(outfile_jpg)
    savefile = FilenameByTime("static/outlines/")
    background.save(savefile)
    # background = background.convert("RGB")
    return background


def outlineP(filename1, outfile_png):
    """
    USE:
    filename1 = '/home/jack/Desktop/Imagedata/0-original-images/07082orig.jpg'
    outfile_jpg = '/home/jack/Desktop/dockercommands/images/useresult.png'
    outlineP(filename1,outfile_png)
    """
    image = cv2.imread(filename1)
    edged = auto_canny(image, sigma=0.33)
    inverted = cv2.bitwise_not(edged)
    cv2.imwrite("static/outlines/temp2.png", inverted)
    cv2.imwrite(FilenameByTime("static/outlines/"), inverted)
    # Open Front Image
    # frontimage = Image.open('mahotastest/inverted-bitwise-note3_6.png').convert("1")
    frontimage = Image.open('static/outlines/temp2.png').convert("1")
    frontImage = frontimage.convert("RGBA")
    datas = frontImage.getdata()
    newData = []
    for item in datas:
        if item[0] == 255 and item[1] == 255 and item[2] == 255:
            newData.append((255, 255, 255, 0))
        else:
            newData.append(item)

    frontImage.putdata(newData)
    # Open Background Image
    background = Image.open(filename1)
    # Calculate width to be at the center
    width = (frontimage.width - frontimage.width) // 2
    # Calculate height to be at the center
    height = (frontimage.height - frontimage.height) // 2
    # Paste the frontImage at (width, height)
    background.paste(frontImage, (width, height), frontImage)
    # Save this image
    background.save(outfile_png, format="png")
    savefile = FilenameByTime("static/outlines/")
    background.save(savefile, format="png")
    # background = background.convert("RGB")
    return background


@app.route('/outline_j', methods=['POST'])
def outline_j():
    if request.method == 'POST':
        # Get the uploaded image file from the form data
        file = request.files['file']

        # Save the uploaded file to a temporary location

        temp_path = 'static/outlines/temp_image.jpg'
        file.save(temp_path)

        # Process the image using outlineJ function
        output_path = 'static/outlines/outlined_image_j.jpg'
        outlineJ(temp_path, output_path)
        output_path2 = "static/outlines/temp2.png"
        # Return the path to the processed image to display it on a page
        return render_template('outlined_image.html', image_orig=temp_path, image_path=output_path, image_path2=output_path2)


@app.route('/outline_p', methods=['POST'])
def outline_p():
    if request.method == 'POST':
        # Get the uploaded image file from the form data
        file = request.files['file']

        # Save the uploaded file to a temporary location
        temp_path = 'static/temp_image.jpg'
        image_orig = temp_path
        file.save(temp_path)

        # Process the image using outlineP function
        output_path = 'static/outlines/outlined_image_p.png'
        outlineP(temp_path, output_path)
        output_path2 = "static/outlines/temp2.png"
        # Return the path to the processed image to display it on a page
        return render_template('outlined_image.html', image_orig=temp_path, image_path=output_path, image_path2=output_path2)


def zoom_effect(bg_file, fg_file):
    bg = Image.open(bg_file).convert('RGBA')
    SIZE = bg.size
    bg = bg.resize((SIZE), Image.BICUBIC)
    fg = Image.open(fg_file).convert('RGBA')
    fg = fg.resize((SIZE), Image.BICUBIC)
    fg_copy = fg.copy()
    fg_copy = fg_copy.resize((int(fg_copy.width), int(fg_copy.height)))
    result_images = []
    for i in range(200):
        size = (int(fg_copy.width * (i + 1) / 200),
                int(fg_copy.height * (i + 1) / 200))
        fg_copy_resized = fg_copy.resize(size)
        fg_copy_resized.putalpha(int((i + 1) * 255 / 200))
        fg_copy_resized = fg_copy_resized.convert('RGBA')
        fg_copy_resized.putalpha(int((i + 1) * 255 / 200))
        result = bg.copy()
        x = int((bg.width - fg_copy_resized.width) / 2)
        y = int((bg.height - fg_copy_resized.height) / 2)
        result.alpha_composite(fg_copy_resized, (x, y))
        # result.save("gifs/_"+str(i)+".png")
        result_images.append(result)

    return result_images  # Move the return statement outside the for loop


def create_mp4_from_images(images_list, output_file, fps):
    # Convert PIL Image objects to NumPy arrays
    image_arrays = [np.array(image) for image in images_list]

    # Create the video clip from the NumPy arrays
    clip = ImageSequenceClip(image_arrays, fps=fps)

    # Write the video to the output file
    clip.write_videofile(output_file, codec="libx264", fps=fps)


@app.route('/upload_form')
def upload_form():
    return render_template('upload_form.html')


@app.route('/process_imagez', methods=['POST', 'GET'])
def process_imagez():
    if 'bg_image' not in request.files or 'fg_image' not in request.files:
        return redirect(url_for('upload_form'))

    bg_image = request.files['bg_image']
    fg_image = request.files['fg_image']

    if bg_image.filename == '' or fg_image.filename == '':
        return redirect(url_for('upload_form'))

    bg_filename = 'background.png'
    fg_filename = 'foreground.png'

    bg_image.save(bg_filename)
    fg_image.save(fg_filename)

    bg_file_path = os.path.abspath(bg_filename)
    fg_file_path = os.path.abspath(fg_filename)

    images_list = zoom_effect(bg_file_path, fg_file_path)

    output_mp4_file = 'static/overlay_zooms/imagez_video.mp4'
    frames_per_second = 30
    create_mp4_from_images(images_list, output_mp4_file, frames_per_second)

    # Clean up temporary files
    # os.remove(bg_filename)
    # os.remove(fg_filename)
    file_bytime = time.strftime("%Y%m%d-%H%M%S") + ".mp4"

    shutil.copy('static/overlay_zooms/imagez_video.mp4',
                'static/overlay_zooms/' + file_bytime)
    video_url = url_for('static', filename=output_mp4_file)
    return render_template('upload.html', video_url=video_url)


app.config['DATABASE'] = 'code.db'

# Set up logger
# logger.basicConfig(level=logger.DEBUG)
# logger = logger.getLogger(__name__)


def get_db():
    db = getattr(g, '_database', None)
    if db is None:
        db = g._database = sqlite3.connect(app.config['DATABASE'])
    return db


@app.route('/indexdb')
def indexdb():
    logger.debug("Accessing indexdb route")
    video = findvideos()
    return render_template('indexdb.html',video=video)


@app.route('/select_by_id_form', methods=['POST', 'GET'])
def select_by_id_form():
    logger.debug("Accessing select_by_id_form route")
    return render_template('select_by_id_form.html')


@app.route('/search_by_rowid', methods=['GET', 'POST'])
def search_by_rowid():
    logger.debug("Accessing search_by_rowid route")
    return render_template('search_by_rowid.html')

# ...
# ...
# ...
# Function to get a list of image files from the selected directory


def get_image_list(selected_directory):
    image_extensions = ['.jpg', '.jpeg', '.png', '.gif']
    image_list = [f for f in os.listdir(selected_directory) if os.path.isfile(
        os.path.join(selected_directory, f)) and f.lower().endswith(tuple(image_extensions))]
    print(image_list)
    return image_list


@app.route('/Index', methods=['GET', 'POST'])
def Index():
    if request.method == 'POST':
        selected_directory = request.form['selected_directory']
        image_list = get_image_list(selected_directory)
        images = [os.path.join(selected_directory, image)
                  for image in image_list]

        clips = [ImageClip(m).set_duration(0.5) for m in images]
        concat_clip = concatenate_videoclips(clips, method="compose")
        uid = str(uuid.uuid4())  # Generate a unique ID using uuid
        mp4_file = os.path.join("static", "videos", f"{uid}.mp4")
        concat_clip.write_videofile(mp4_file, fps=24)
        return render_template('Index.html', video=mp4_file)
    else:
        directory_list = glob.glob("static/images/*/", recursive=True)
        return render_template('Index.html', directory_list=directory_list)
# ...
# ...

# ...


@app.route('/edit_data_page', methods=['GET', 'POST'])
@app.route('/edit_data_page/<int:rowid>', methods=['GET', 'POST'])
def edit_data_page(rowid=None):
    db = get_db()
    cursor = db.cursor()

    if request.method == 'POST':
        description = request.form['description']
        code = request.form['code']
        keywords = request.form['keywords']

        if rowid is not None:
            # Update the data in the database for the given rowid
            cursor.execute("UPDATE snippets SET description = ?, code = ?, keywords = ? WHERE rowid = ?",
                           (description, code, keywords, rowid))
        else:
            # Insert the data into the database as a new row
            cursor.execute("INSERT INTO snippets (description, code, keywords) VALUES (?, ?, ?)",
                           (description, code, keywords))

        db.commit()

        # Close the database connection
        cursor.close()
        db.close()

        return redirect(url_for('indexdb'))

    if rowid is not None:
        # If a rowid is provided, retrieve the data from the database
        # based on the provided rowid and render the edit_data.html template
        cursor.execute("SELECT * FROM snippets WHERE rowid = ?", (rowid,))
        data = cursor.fetchone()

        if data is None:
            # If no data is found for the given rowid, return an error message
            return "Error: Data not found for the provided Row ID."

        # Convert the fetched data to a dictionary for easier access in the template
        data = {
            'rowid': data[0],
            'description': data[1],
            'code': data[2],
            'keywords': data[3]
        }

    else:
        # If no rowid is provided, create an empty data dictionary
        data = {}

    # Close the database connection
    cursor.close()
    db.close()

    return render_template('edit_data.html', data=data)
# ...


@app.route('/get_rowid_form', methods=['GET', 'POST'])
def get_rowid_form():
    if request.method == 'POST':
        rowid = request.form['rowid']
        return redirect(url_for('edit_data_page', rowid=rowid))
    return render_template('get_rowid_form.html')

# ...


@app.route('/search_database', methods=['POST', 'GET'])
def search_database():
    logger.debug("Accessing search_database route")
    if request.method == 'POST':
        search_term = request.form['search_term']
        search_area = request.form['search_area']
    else:
        # For GET requests, get the search_term and search_area from the query string
        search_term = request.args.get('search_term')
        search_area = request.args.get('search_area')

    if not search_term or not search_area:
        logger.debug(
            "Redirecting to indexdb due to missing search_term or search_area")
        # Redirect to the main index page if search_term or search_area is missing
        return redirect('/indexdb')

    db = get_db()
    cursor = db.cursor()

    if search_area == 'rowid':
        cursor.execute(
            "SELECT rowid, * FROM snippets WHERE rowid = ?", (search_term,))
    elif search_area == 'description':
        cursor.execute(
            "SELECT rowid, * FROM snippets WHERE description LIKE ?", ('%' + search_term + '%',))
    elif search_area == 'code':
        cursor.execute(
            "SELECT rowid, * FROM snippets WHERE code LIKE ?", ('%' + search_term + '%',))
    elif search_area == 'keywords':
        cursor.execute(
            "SELECT rowid, * FROM snippets WHERE keywords LIKE ?", ('%' + search_term + '%',))
    else:
        logger.debug("Redirecting to indexdb due to invalid search area")
        # Redirect to the main index page if an invalid search area is provided
        return redirect('/indexdb')

    results = cursor.fetchall()
    logger.debug("Rendering db_results.html template with search results")
    return render_template('db_results.html', results=results)


@app.route('/insert_data', methods=['POST', 'GET'])
def insert_data():
    logger.debug("Accessing insert_data route")
    if request.method == 'POST':
        description = request.form['description']
        code = request.form['code']
        keywords = request.form['keywords']

        # Assuming you have the database connection and cursor defined
        db = get_db()
        cursor = db.cursor()

        cursor.execute("INSERT INTO snippets (description, code, keywords) VALUES (?, ?, ?)",
                       (description, code, keywords))
        db.commit()

        # Close the database connection
        cursor.close()
        db.close()

        logger.debug("Redirecting to indexdb after inserting data")
        return redirect(url_for('indexdb'))

    # If the request method is not POST (e.g., GET), render the insert_data.html template
    logger.debug("Rendering insert_data.html template")
    return render_template('insert_data.html')


@app.route('/select_by_id', methods=['POST', 'GET'])
def handle_select_by_id():
    logger.debug("Accessing select_by_id route")
    if request.method == 'POST':
        row_id = request.form['search_term']
    else:
        row_id = request.args.get('search_term')

    db = get_db()
    cursor = db.cursor()

    cursor.execute("SELECT * FROM snippets WHERE rowid = ?", (row_id,))
    data = cursor.fetchone()

    cursor.close()
    db.close()

    if data is not None:
        id_value = data[0]
        description = data[1]
        code = data[2]
        keywords = data[3]

        logger.debug("Rendering display_data.html template with selected data")
        return render_template('display_data.html', id_value=id_value, description=description, code=code, keywords=keywords)
    else:
        logger.debug("Rendering display_data.html template with no data found")
        return render_template('display_data.html', id_value=row_id, description="", code="", keywords="")
def extract_code_blocks(file_path):
    with open(file_path) as file:
        content = file.read()
    return content.split("--Code Start:")[1:]

def format_datetime(datetime_str):
    return datetime_str.replace("_", " ")

@app.route('/enter_code', methods=['GET', 'POST'])
def enter_code():
    formatted_datetime = ""  # Initialize the variable
    if request.method == 'POST':
        code_block = request.form['code_block']
        formatted_datetime = datetime.datetime.now().strftime("%a_%d_%b_%Y %H:%M:%S")
        with open('codeshints.txt', 'a') as file:
            file.write(f"--Code Start:\n{formatted_datetime}\n{code_block}\n--Code End:\n\n")
        # Log code entry
        logger.debug('New code entered: %s', code_block)
    return render_template('enter_data.html', formatted_datetime=formatted_datetime)

@app.route('/search_code', methods=['GET', 'POST'])
def search_code():
    if request.method == 'POST':
        keyword = request.form['keyword']
        code_blocks = extract_code_blocks('codeshints.txt')
        filtered_blocks = [block for block in code_blocks if keyword in block]
        formatted_datetime_blocks = []
        
        for block in filtered_blocks:
            match = re.search(r"\w+_\d+_\w+_\d+_\d+:\d+:\d+", block)
            if match:
                formatted_datetime = format_datetime(match.group(0))
            else:
                formatted_datetime = "Unknown datetime format"
            
            formatted_datetime_blocks.append(
                {"datetime": formatted_datetime, "code_block": block}
            )
            
        # Log search activity
        logger.debug('Keyword searched: %s', keyword)
        return render_template('search_results.html', keyword=keyword, code_blocks=formatted_datetime_blocks)
    
    return render_template('search_data.html')



@app.route('/tube_index')
def tube_index():
    return render_template('tube_index.html')

@app.route('/data_page')
def data_page():
    return render_template('data_page.html')    


@app.route('/capture_overlay_verify')
def capture_overlay_verify():
    logger.info('Capture process started')
    logger.info('POST request received')

    datename = subprocess.run(
        ["date", "+%Y-%m-%d_%H-%M-%S"], capture_output=True, text=True).stdout.strip()
    capture_filename = f"{datename}.mp4"
    # Create the file path using os.path.join()
    base_folder = "static"
    subfolder = "assets"
    original_filename = os.path.join(
        app.root_path, base_folder, subfolder, f"overlaid_{capture_filename}")
    overlayed_filename = os.path.join(
        app.root_path, base_folder, subfolder, f"overlaid_{capture_filename}")
    verification_filename = os.path.join(
        app.root_path, base_folder, subfolder, f"verification_{capture_filename}")
    logger.info(f'File path original_filename created: {original_filename}')
    logger.info(f'File path overlayed_filename created: {overlayed_filename}')
    logger.info(f' verification_filename created: {verification_filename}')
    sleep(5)
    # Capture screen
    capture_command = [
        "ffmpeg", "-ss", "2", "-f", "x11grab", "-framerate", "24",
        "-video_size", "690x445", "-i", ":0.0+130,250", "-f", "alsa",
        "-i", "plughw:0,0", "-f", "pulse", "-i", "default",
        "-filter_complex", "[1:a]volume=0.1,apad[headset_audio];[2:a]volume=2.0,apad[system_audio];[headset_audio][system_audio]amix=inputs=2[a]",
        "-map", "0:v", "-map", "[a]", "-c:v", "libx264", "-r", "24",
                "-g", "48", "-c:a", "aac", "-b:a", "128k", "-t", "58", "-y", original_filename
    ]
    subprocess.run(capture_command)
    logger.info('Screen captured', capture_command)
    # Overlay videos
    overlay_command = [
        "ffmpeg", "-i", "background.mp4", "-i", original_filename, "-filter_complex",
        f"[1:v]scale=460:300[ovrl];[0:v][ovrl]overlay=W-w-25:H-h-400[out]",
        "-map", "[out]", "-map", "1:a", "-c:v", "libx264", "-crf", "18", "-c:a", "aac",
                "-strict", "-2", "-y", "-t", "58", overlayed_filename
    ]
    subprocess.run(overlay_command)
    logger.info('Videos overlaid', overlay_command)

    # Verify sound
    verification_command = [
        "ffmpeg", "-i", "background.mp4", "-i", overlayed_filename, "-filter_complex",
        f"[1:v]scale=460:300[ovrl];[0:v][ovrl]overlay=W-w-25:H-h-400[out]",
        "-map", "[out]", "-map", "1:a", "-c:v", "libx264", "-crf", "18", "-c:a", "aac",
                "-strict", "-2", "-y", "-t", "58", verification_filename
    ]
    subprocess.run(verification_command)
    logger.info('Sound verified', verification_command)

    logger.info('Capture process completed', verification_filename)
    return render_template('view_capture.html', video_filename=verification_filename)

# ...


@app.route('/create_text', methods=['GET', 'POST'])
def create_text():
    if request.method == 'POST':
        text = request.form['text']
        image = Image.new('RGB', (512, 512), color='beige')
        draw = ImageDraw.Draw(image)

        # Load the custom font and set the size
        font_path = '/home/jack/fonts/OpenSans-Bold.ttf'
        font_size = 50
        font = ImageFont.truetype(font_path, font_size)

        lines = text.split('\n')[:5]

        y = 10
        for line in lines:
            line = line.rstrip()  # Strip the newline character
            # Calculate the width and height of the text
            text_width, text_height = draw.textsize(line, font=font)

            # Draw the text
            draw.text(((512 - text_width) // 2, y),
                      line, fill='black', font=font)
            y += text_height + 5  # Move down for the next line

        output_path = os.path.join(
            app.root_path, 'static', 'assets', '512x512_text.jpg')
        image.save(output_path)
        # return send_from_directory('static/assets', '512x512_text.jpg', as_attachment=True)
        return render_template('view_textimage.html', image_filename='assets/512x512_text.jpg')
    return render_template('create_text.html')


@app.route('/view_log')
def view_log():
    with open('Logs/app.log', 'r') as log_file:
        log_content = log_file.read()
    return render_template('log_viewer.html', log_content=log_content)


@app.route('/self_check')
def self_check():
    try:
        if os.path.exists('Logs'):
            timestamp = datetime.datetime.now().strftime("%Y%m%d%H%M%S")
            new_filename = f'Logs/{timestamp}.info'
            shutil.copy('Logs/flake8.info', new_filename)
            
        result = subprocess.run(['flake8', '-v', 'MemMakerWdb'],
                                stdout=subprocess.PIPE, stderr=subprocess.PIPE, text=True)
        
        with open('Logs/flake8.info', 'w') as flake_file:
            flake_file.write(result.stdout)
        
        return redirect(url_for('view_flake8'))
    except Exception as e:
        return f"Self-check failed. Error: {e}"

@app.route('/view_flake8')
def view_flake8():
    with open('Logs/flake8.info', 'r') as flake_file:
        flake_content = flake_file.read()
    return render_template('flake8_viewer.html', flake_content=flake_content)
def get_image_directories():
    dirs = os.listdir(os.path.join('static', 'images'))
    DIR = sorted(dirs)
    return DIR

def feather_image(input_path):
    try:
        logger.info("Feathering image: %s", input_path)
        
        # Load the image
        giger = cv2.imread(input_path)
        l_row, l_col, nb_channel = giger.shape
        rows, cols = np.mgrid[:l_row, :l_col]
        radius = np.sqrt((rows - l_row/2)**2 + (cols - l_col/2)**2)
        alpha_channel = np.zeros((l_row, l_col))
        
        # Calculate alpha channel values
        r_min, r_max = 1./3 * radius.max(), 0.6 * radius.max()
        alpha_channel[radius < r_min] = 1
        alpha_channel[radius > r_max] = 0
        gradient_zone = np.logical_and(radius >= r_min, radius <= r_max)
        alpha_channel[gradient_zone] = (r_max - radius[gradient_zone]) / (r_max - r_min)
        alpha_channel *= 255
        
        # Create feathered image
        feathered = np.empty((l_row, l_col, nb_channel + 1), dtype=np.uint8)
        feathered[..., :3] = giger[:]
        feathered[..., -1] = alpha_channel[:]
        
        # Save the feathered image
        timestamp = datetime.datetime.now().strftime('%Y%m%d%H%M%S')
        output_path = os.path.join('static', 'images', 'feathers', f'{timestamp}.png')
        plt.imsave(output_path, feathered, format="png")
        logger.info("Feathered image saved at: %s", output_path)

        return output_path
    except Exception as e:
        logger.error("An error occurred during feathering: %s", str(e))
        return None
@app.route('/feather_files', methods=['GET', 'POST'])
def feather_files():
    if request.method == 'POST':
        selected_directories = request.form.getlist('directories')  # Use 'directories' instead of 'directory'
        selected_directories = sorted(selected_directories)
        if selected_directories:
            images = os.listdir(os.path.join('static', 'images', selected_directories[0]))
            return render_template('feather_files.html', directories=get_image_directories(), selected_directory=selected_directories[0], images=images)
        
        selected_image = request.form.get('image')
        if selected_image:
            selected_directory = request.form.get('selected_directory')  # Add this line to retrieve selected_directory
            image_path = os.path.join('static', 'images', selected_directory, selected_image)
            feathered_image_path = feather_image(image_path)
            return render_template('feather_files.html', directories=get_image_directories(), selected_directory=selected_directory, images=os.listdir(os.path.join('static', 'images', selected_directory)), feathered_image_path=feathered_image_path)
    
    return render_template('feather_files.html', directories=get_image_directories())
@app.route('/word_cloud')
def word_cloud():
    code_blocks = extract_code_blocks('codeshints.txt')
    extracted_lines = []

    for block in code_blocks:
        lines = block.split("\n")[:3]  # Extract the first three lines
        extracted_lines.append("\n".join(lines))

    return render_template('word_cloud.html', extracted_lines=extracted_lines)
# ------------
static_dir = 'static'
text_dir = os.path.join(static_dir, 'text')
original_text_dir = os.path.join(text_dir, 'original')
os.makedirs(original_text_dir, exist_ok=True)

def load_original_text_file(filename):
    original_file_path = os.path.join(text_dir, filename)
    with open(original_file_path, 'r') as file:
        return file.read()

def save_original_text_file(filename, content):
    now = datetime.datetime.now().strftime("%Y%m%d_%H%M%S")
    new_filename = f"{filename}_{now}.txt"
    new_file_path = os.path.join(original_text_dir, new_filename)
    with open(new_file_path, 'w') as file:
        file.write(content)

def edit_and_save_text_file(filename, content):
    save_original_text_file(filename, content)
    edited_file_path = os.path.join(text_dir, filename)
    with open(edited_file_path, 'w') as file:
        file.write(content)

@app.route('/edit_text')
def edit_text():
    filenames = [f for f in os.listdir(text_dir) if f.endswith('.txt')]
    return render_template('edit_text.html', filenames=filenames)

@app.route('/edit_text_page')
def edit_text_page():
    selected_filename = request.args.get('filename')
    original_content = load_original_text_file(selected_filename)
    return render_template('edit_text_page.html', selected_filename=selected_filename, original_content=original_content)

@app.route('/edit_text_save', methods=['POST'])
def edit_text_save():
    edited_content = request.form['edited_content']
    selected_filename = request.form['filename']
    edit_and_save_text_file(selected_filename, edited_content)
    return redirect(url_for('edit_text'))

@app.route('/the_description')
def the_description():
    return render_template('the_description.html')

@app.route('/run')
def run():
    return render_template('execute.html')
def save_script_to_file(script):
    # Retrieve textarea content
    script_content = script.strip('\r')
    for line in script_content.splitlines():
        if line.startswith('#'):
            script_head = script_content.replace(line, f"echo {line}")
            print("SCRIPT HEAD: ",script_head)

    # Generate unique filename
    current_datetime = datetime.datetime.now().strftime("%Y%m%d%H%M%S")
    filename = "static/scripts/"+current_datetime + "_script.sh"

    # Save content to file
    with open(filename, "w") as file:
        file.write(script_content)

    return filename
def list_functions():
    # Retrieve all function names from the script
    script_filenames = glob.glob("static/scripts/*.sh")
    
    for script_filename in script_filenames:
        with open(script_filename, "r") as file:
            script_content = file.read()
            print(script_content)

    # Find all function names
    function_names = re.findall(r"function\s+(\w+)\s*\(\)", script_content)
    return function_names
@app.route('/execute', methods=['POST', 'GET'])
def execute():
    # Extract the bash script from the textarea
    script = request.form['script']
    save_script_to_file(script)
    # Execute the bash script using subprocess
    result = subprocess.run(script, shell=True, capture_output=True, text=True)

    # Return the result to the client
    list_functions()

    # Return the result to the client
    list_functions()

    # Retrieve all function names from the script
    script_filenames = glob.glob("static/scripts/*.sh")
    CONTENT = []
    filename = []
    for script_filename in script_filenames:
        filename.append(script_filename)
        with open(script_filename, "r") as file:
            script_content = file.read()
            CONTENT.append(script_content)

    return render_template("view_execute.html", content=CONTENT, result=filename)

@app.route('/list_functions')
def list_functions():
    route_lines = get_route_lines()
    return render_template('list_functions.html', functions=route_lines)

def get_route_lines():
    with open('MemMakerWdb', 'r') as file:
        route_lines = [
            re.split(r'[,/]', line.strip())[1].replace("'", "").replace(")", "").replace('"', '').replace(" ", "")
            for line in file
            if line.strip() != '' and line.strip() != '@app.route("/")' and line.startswith('@app.route')
        ]
    return route_lines

# Call the function to get the route lines
route_lines = get_route_lines()
# Print the result
for line in route_lines:
    print(line)
    
    
@app.route('/all_routes')
def all_routes(): 
        return render_template('all_routes.html')
 
@app.route('/edit_description', methods=['GET', 'POST'])
def edit_description():
    # Open the 'the_description.html' file and read its contents
    with open('templates/the_description.html', 'r') as file:
        description = file.read()

    return render_template('edit_the_description.html', description=description)
    
@app.route('/save_description', methods=['POST'])
def save_description():
    # Retrieve the updated description from the form submission
    updated_description = request.form['description']

    # Open the 'the_description.html' file in write mode and save the updated description
    with open('templates/the_description.html', 'w') as file:
        file.write(updated_description)

    return redirect('/edit_description')

@app.route('/app_utilities')
def app_utilities():
    video = findvideos()
    return render_template('app_utilities.html', video=video)
@app.route("/image_processing")
def image_processing():
    video = findvideos()
    return render_template('image_processing.html', video=video)

template_dir = 'templates'
original_template_dir = os.path.join(template_dir, 'original')
os.makedirs(original_template_dir, exist_ok=True)

def load_original_template_file(filename):
    original_file_path = os.path.join(template_dir, filename)
    with open(original_file_path, 'r') as file:
        return file.read()

def save_original_template_file(filename, content):
    now = datetime.datetime.now().strftime("%Y%m%d_%H%M%S")
    new_filename = f"{filename}_{now}.txt"
    new_file_path = os.path.join(original_template_dir, new_filename)
    with open(new_file_path, 'w') as file:
        file.write(content)

def edit_and_save_template_file(filename, content):
    save_original_template_file(filename, content)
    edited_file_path = os.path.join(template_dir, filename)
    with open(edited_file_path, 'w') as file:
        file.write(content)

@app.route('/edit_template')
def edit_template():
    filenames = [f for f in os.listdir(template_dir) if f.endswith('.html')]
    filenames = sorted(filenames)
    fvideo = findvideos()
    return render_template('edit_template.html', filenames=filenames, video=fvideo)

@app.route('/edit_template_page')
def edit_template_page():
    selected_filename = request.args.get('filename')
    original_content = load_original_template_file(selected_filename)
    return render_template('edit_template_page.html', selected_filename=selected_filename, original_content=original_content)

@app.route('/edit_template_save', methods=['POST'])
def edit_template_save():
    edited_content = request.form['edited_content']
    selected_filename = request.form['filename']
    edit_and_save_template_file(selected_filename, edited_content)
    return redirect(url_for('edit_template'))
@app.route('/images/<path>')
def show_images(path):
    # get the full path of the directory
    basepath = os.path.join('static', 'images', path)
    # get the file names in the directory
    file_list = os.listdir(basepath)
    # filter out non-image files
    image_list = [f for f in file_list if f.endswith('.jpg') or f.endswith('.png')]
    # pass the image names to the template
    return render_template('thumbnailz.html', images=image_list, path=path)

@app.route('/code_editor')
def code_editor():
    
    return render_template('code_editor.html')

@app.route('/save', methods=['POST'])
def save():
    content = request.form.get('content')  # Get the content from the AJAX request
    file_path = 'static/text/Experimental.txt'  # Specify the file path where you want to save

    # Write the content to the file
    with open(file_path, 'w') as file:
        file.write(content)

    return jsonify({'message': 'File saved successfully'})

video_process = None

@app.route('/run_capture', methods=['POST'])
def run_capture():
    global video_process
    
    # Specify the path to your Bash script
    bash_script_path = 'STREAM-save-local'
    
    # Execute the Bash script and save the process ID
    video_process = subprocess.Popen(['bash', bash_script_path])
    
    return jsonify({'message': 'Video capture started'})

@app.route('/stop_capture', methods=['POST'])
def stop_capture():
    global video_process
    
    if video_process:
        # Send a termination signal to stop the process gracefully
        os.killpg(os.getpgid(video_process.pid), signal.SIGTERM)
        video_process = None
        return jsonify({'message': 'Video capture stopped'})
    else:
        return jsonify({'message': 'Video capture process not found'})

@app.route('/capture_html')
def capture_html():
    return render_template('capture.html')

@app.route('/youtube_videos')
def youtube_videos():
    return render_template('youtube_videos.html')


@app.route('/aigeneration_links')
def aigeneration_links():
    return render_template('aigeneration_links.html')


@app.route('/index_bash')
def index_bash():
    return render_template('run_bash.html')

@app.route('/run_bash', methods=['POST'])
def run_bash():
    bash_command = request.form.get('bash_command')
    
    try:
        result = subprocess.check_output(bash_command, shell=True, text=True, stderr=subprocess.STDOUT)
    except subprocess.CalledProcessError as e:
        result = e.output
    video = findvideos()
    return render_template('run_bash.html', result=result, video=video)
css_dir = 'static/css'
original_css_dir = os.path.join(css_dir, 'original')
os.makedirs(original_css_dir, exist_ok=True)

def load_original_css_file(filename):
    original_file_path = os.path.join(css_dir, filename)
    with open(original_file_path, 'r') as file:
        return file.read()

def save_original_css_file(filename, content):
    now = datetime.datetime.now().strftime("%Y%m%d_%H%M%S")
    new_filename = f"{filename}_{now}.css"
    new_file_path = os.path.join(original_css_dir, new_filename)
    with open(new_file_path, 'w') as file:
        file.write(content)

def edit_and_save_css_file(filename, content):
    save_original_css_file(filename, content)
    edited_file_path = os.path.join(css_dir, filename)
    with open(edited_file_path, 'w') as file:
        file.write(content)

@app.route('/edit_css')
def edit_css():
    filenames = [f for f in os.listdir(css_dir) if f.endswith('.css')]
    filenames = sorted(filenames)
    #render template
    return render_template ('edit_css.html', filenames=filenames)

@app.route('/edit_css_page')
def edit_css_page():
    selected_filename = request.args.get('filename')
    original_content = load_original_css_file(selected_filename)
    return render_template('edit_css_page.html', selected_filename=selected_filename, original_content=original_content)

@app.route('/edit_css_save', methods=['POST'])
def edit_css_save():
    edited_content = request.form['edited_content']
    selected_filename = request.form['filename']
    edit_and_save_css_file(selected_filename, edited_content)
    return redirect(url_for('edit_css'))
@app.route('/terminal_index')
def terminal_index():
    return render_template('terminal_index.html')

@app.route('/execute_command', methods=['POST'])
def execute_command():
    command = request.form.get('command')
    try:
        output = subprocess.check_output(command, shell=True, text=True, stderr=subprocess.STDOUT)
    except subprocess.CalledProcessError as e:
        output = e.output
    return jsonify({'output': output})

@app.route('/comic_book')
def comic_book():
    return render_template('comic_book.html')

@app.route('/image_stuff')
def image_stuff():
    return render_template('image_stuff.html')

UPLOAD_FOLDER = 'static/uploads'
app.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER

@app.route('/crop', methods=['GET', 'POST'])
def crop():
    image_path = None
    if request.method == 'POST' and 'image' in request.files:
        image = request.files['image']
        if image.filename != '':
            filename = secure_filename(image.filename)
            image_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)
            image.save(image_path)
    fvideo = findvideos()        
    return render_template('crop.html', image_path=image_path, video=fvideo)

@app.route('/crop_and_save', methods=['POST'])
def crop_and_save():
    image_path = request.form.get('image_path')
    x = int(request.form.get('x'))
    y = int(request.form.get('y'))
    width = int(request.form.get('width'))
    height = int(request.form.get('height'))

    try:
        image = Image.open(image_path)
        cropped_image = image.crop((x, y, x + width, y + height))
        cropped_image.save('static/cropped_image.jpg')
        return render_template('crop.html', image_path='static/cropped_image.jpg')
    except Exception as e:
        return f"Error: {str(e)}"
def move_cropped_image():
    source_path = 'static/cropped_image.jpg'

    if not os.path.exists(source_path):
        return "Source file does not exist", 404

    destination_folder = 'static/images/Leonardo'
    image_ = f'cropped_{str(uuid.uuid4())}.jpg'

    try:
        os.makedirs(destination_folder, exist_ok=True)
    except OSError as e:
        return f"Failed to create destination folder: {e}", 500

    destination_path = os.path.join(destination_folder, image_)

    try:
        shutil.move(source_path, destination_path)
    except FileNotFoundError:
        return "Source file does not exist", 404
    except shutil.Error as e:
        return f"Error occurred while moving the file: {e}", 500
    return destination_path
@app.route('/move_cropped', methods=['GET', 'POST'])
def move_cropped():
    if request.method == 'POST':
        destination_path = move_cropped_image()
        source_path = 'static/cropped_image.jpg'
        fvideo =findvideos()
        return render_template('move_cropped.html', mv_img=destination_path, video=fvideo)
    else:
        return "Method not allowed", 405

@app.route('/edit_images_video')
def edit_images_video():
    fvideo = findvideos()
    return render_template('edit_images_video.html',video=fvideo)

@app.route('/mp3_player')
def mp3_player():
    mp3_files = [file for file in os.listdir('static/music') if file.endswith('.mp3')]
    return render_template('mp3_player.html', mp3_files=mp3_files)
@app.route('/NOTES')
def plain_html():
    return render_template('NOTES.html')
@app.route('/edit_script', methods=['GET', 'POST'])
def edit_script():
    logger.info('Edit script page accessed')
    script_dir = "static/scripts/"
    script_files = []
    for filename in os.listdir(script_dir):
        if filename.endswith('.js'):
            script_files.append(filename)
    print(script_files)
    if request.method == 'POST':
        selected_file = request.form['script_file']
        if selected_file.endswith('.js'):
            selected_file_path = os.path.join(script_dir, selected_file)
            shutil.copy(selected_file_path, script_file)
            with open(selected_file_path, 'r') as file:
                script_content = file.read()
            logger.info(f'Selected script file: {selected_file}')
            return render_template('edit_script.html', script_files=script_files, script_content=script_content)
        
@app.route('/edit_canvas_script', methods=['GET', 'POST'])
def edit_canvas_script():
    logger.info('Edit script page accessed')
    script_dir = "static/scripts/"
    script_files = []
    for filename in os.listdir(script_dir):
        if filename.endswith('canvas.js'):
            script_files.append(filename)
    print(script_files)
    if request.method == 'POST':
        selected_file = request.form['script_file']
        if selected_file.endswith('canvas.js'):
            selected_file_path = os.path.join(script_dir, selected_file)
            shutil.copy(selected_file_path, script_file)
            with open(selected_file_path, 'r') as file:
                script_content = file.read()
            logger.info(f'Selected script file: {selected_file}')
            return render_template('edit_script.html', script_files=script_files, script_content=script_content)       

    logger.info('No script file selected')
    return render_template('edit_script.html', script_files=script_files)

@app.route('/save_script', methods=['POST'])
def save_script():
    logger.info('Save script request received')
    # Retrieve the updated script content from the form data
    updated_script = request.form.get('script_content')
    # Write the updated script content to the file
    with open(script_file, 'w') as file:
        file.write(updated_script)
        # Log the updated script content
        logger.info(f'Updated script:\n{updated_script}')

    return render_template('save_script.html',script_file=script_file)

@app.route('/save_canvas_script', methods=['POST', 'GET'])
def save_canvas_script():
    logger.info('Save script request received')
    # Retrieve the updated script content from the form data
    updated_script = request.form.get('script_content')
    # Write the updated script content to the file
    logger.info("UPDATED_SCRIPT:",updated_script)
  
    logger.info("SCRIPT_FILE:",script_file)

    with open(script_file, 'w') as file:
        file.write(updated_script)
        # Log the updated script content
        logger.info(f'Updated script:\n{updated_script}')

    return render_template('save_canvas_script.html',script_file=script_file)

@app.route('/preview', methods=['GET', 'POST'])
def preview():
    logger.info('Preview page accessed')
    script_file = 'static/scripts/script.js'  # Path to the script file

    # Check if the script file exists
    if os.path.isfile(script_file):
        logger.info(f'Script file found: {script_file}')
        # Read the content of the script file
        with open(script_file, 'r') as file:
            script_content = file.read()
            logger.info(f'Script content:\n{script_content}')
    else:
        logger.warning('No script file found')
        script_content = 'No script file found'

    # HTML content to be displayed
    html_content = "<p>This is a dynamic HTML content. It can include various elements, <br />such as paragraphs, headings, lists, etc.</p>"
    
    
@app.route('/preview_two_canvass', methods=['GET', 'POST'])
def preview_two_canvass():
    logger.info('Preview page accessed')
    script_file = 'static/scripts/two_canvas.js'  # Path to the script file

    # Check if the script file exists
    if os.path.isfile(script_file):
        logger.info(f'Script file found: {script_file}')
        # Read the content of the script file
        with open(script_file, 'r') as file:
            script_content = file.read()
            logger.info(f'Script content:\n{script_content}')
    else:
        logger.warning('No script file found')
        script_content = 'No script file found'

    # HTML content to be displayed
    html_content = "<p>This is a dynamic HTML content. It can include various elements, <br />such as paragraphs, headings, lists, etc.</p>"

    return render_template('preview_two_canvas.html', html_content=html_content, script_content=script_content)
@app.route('/capture_video')
def capture_video():
    now = datetime.now().strftime('%Y-%m-%d_%H-%M-%S')
    video_filename = f'static/captured_video_{now}.mp4'
    
    command = f"sleep 5 && ffmpeg -f x11grab -framerate 24 -video_size 1366x760 -i :0.0 -f alsa -i plughw:0,0 -f pulse -i default -filter_complex '[1:a]volume=0.1[headset_audio];[2:a]volume=1[system_audio];[headset_audio][system_audio]amix=inputs=2[a]' -map 0:v -map '[a]' -c:v libx264 -r 24 -g 48 -c:a aac -b:a 128k -t 58 {video_filename}"
    
    #command = f'ffmpeg -f x11grab -framerate 24 -video_size 1366x760 -i :0.0 -f alsa -i plughw:0,0 -f pulse -i default -filter_complex "[1:a]volume=0.1[headset_audio];[2:a]volume=1[system_audio];[headset_audio][system_audio]amix=inputs=2[a],[0:v]scale=512x666[aout]" -map "[aout]" -map "[a]" -c:v libx264 -r 24 -g 48 -c:a aac -b:a 128k -t 58 -y {video_filename}'
     
    logger.info(f'Command: {command}')  # Additional informational log  
    try:
        subprocess.run(command, shell=True, check=True, capture_output=True)
        shutil.copy(video_filename, 'static/LIVE2.mp4')
        return "Video captured successfully"
    except subprocess.CalledProcessError as e:
        return f"Error capturing video: {str(e)}"
    
@app.route('/capture_square')
def capture_square():
    now = datetime.now().strftime('%Y-%m-%d_%H-%M-%S')
    videos_filename = f'static/captured_square_{now}.mp4'
    
    command2 = (f'sleep 5 && ffmpeg -f x11grab -framerate 24 -video_size 580x580 -i :0+374,170 -f alsa -i plughw:0,0 -f pulse -i default -filter_complex "[1:a]volume=0.1[headset_audio];[2:a]volume=1[system_audio];[headset_audio][system_audio]amix=inputs=2[a],[0:v]scale=512x666[aout]" -map "[aout]" -map "[a]" -c:v libx264 -r 24 -g 48 -c:a aac -b:a 128k -t 58 -y {videos_filename}'
)

    
    logger.info(f'Command: {command2}')  # Additional informational log  
    try:
        subprocess.run(command2, shell=True, check=True, capture_output=True)
        shutil.copy(videos_filename, 'static/square2.mp4')
        return "Video captured successfully"
    except subprocess.CalledProcessError as e:
        return f"Error capturing video: {str(e)}"   
    
@app.route('/misc_links')
def misc_links():
        return render_template('misc_links.html')   


@app.route('/search_chat')
def search_chat():
    # Load the conversations JSON file
    with open('static/chat/conversations.json', 'r') as f:
        conversations = json.load(f)
    
    # Get the search query from the request parameters
    query = request.args.get('q')

    # Search the conversations for the query and collect results
    results = []
    for conversation in conversations:
        if 'messages' in conversation:
            for message in conversation['messages']:
                if 'content' in message and query.lower() in message['content'].lower():
                    results.append(message)

    # Render the search results in the template
    return render_template('search_chat.html', output=results)  # Pass 'results' instead of 'output'

@app.route('/canvas')
def canvas():
        return render_template('canvas.html') 
      
@app.route('/index_canvas')
def index_canvas():
        fvideo = findvideos()
        return render_template('index_canvas.html', video=fvideo)   

@app.route('/one_canvas')
def one_canvas():
        return render_template('one_canvas.html')  
    
@app.route('/two_canvas')
def two_canvas():
        return render_template('two_canvas.html') 
      
def load_original_canvas_file(filename):
    original_file_path = os.path.join(template_dir, filename)
    with open(original_file_path, 'r') as file:
        return file.read()

def save_original_canvas_file(filename, content):
    now = datetime.datetime.now().strftime("%Y%m%d_%H%M%S")
    new_filename = f"{filename}_{now}canvas.txt"
    new_file_path = os.path.join(original_template_dir, new_filename)
    with open(new_file_path, 'w') as file:
        file.write(content)

def edit_and_save_canvas_file(filename, content):
    save_original_canvas_file(filename, content)
    edited_file_path = os.path.join(template_dir, filename)
    with open(edited_file_path, 'w') as file:
        file.write(content)


@app.route('/edit_canvas')
def edit_canvas():
    filenames = [f for f in os.listdir(template_dir) if f.endswith('canvas.html')]
    filenames = sorted(filenames)
    fvideo = findvideos()
    return render_template('edit_canvas.html', filenames=filenames, video=fvideo)

@app.route('/edit_canvas_page')
def edit_canvas_page():
    selected_filename = request.args.get('filename')
    original_content = load_original_canvas_file(selected_filename)
    return render_template('edit_canvas_page.html', selected_filename=selected_filename, original_content=original_content)

@app.route('/edit_canvas_save', methods=['POST'])
def edit_canvas_save():
    edited_content = request.form['edited_content']
    selected_filename = request.form['filename']
    print("CANVAS_SAVE",edited_content, selected_filename)
    edit_and_save_canvas_file(selected_filename, edited_content)
    return redirect(url_for('edit_canvas'))

if __name__ == '__main__':
    create_databaseD()  # Create the database and table before starting the app
    app.run(debug=True, host='0.0.0.0', port=5200)

-----index-----

{% extends "base.html" %}

{% block content %}
  <h1>Thumbnails</h1>

  <div class="thumbnails-container">
    {% for thumbnail_path, video_path in thumbnail_paths|zip(video_paths) %}
      <div class="thumbnail">
        <a href="{{ url_for('play', video_path=video_path) }}">
          <img src="{{ url_for('static', filename=thumbnail_path[7:]) }}" class="img-thumbnail">
        </a>
      </div>
    {% endfor %}
  </div>

  <style>
    .thumbnails-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
    }
    .thumbnail {
      width: calc(11.11% - 10px);
      margin-bottom: 20px;
    }
    .thumbnail img {
      width: 100%;
    }
  </style>
{% endblock %}

-----index-----
#!/mnt/HDD500/FLASK/flask_venv/bin/python
import subprocess
import logging
from flask import Flask, render_template, send_from_directory, request, redirect, url_for, flash
from flask import jsonify, send_file , Response
import os
from logging.handlers import RotatingFileHandler
import datetime
import glob
from werkzeug.utils import secure_filename
import time
from clean_images import clean_images
import matplotlib.pyplot as plt
import numpy as np
from io import BytesIO
from PIL import Image, ImageDraw, ImageFont
import pygame
import random
from gtts import gTTS
from moviepy.editor import ImageClip, AudioFileClip, CompositeVideoClip, concatenate_videoclips
from io import BytesIO
import base64
import imageio
import shutil
# Define the Flask application
app = Flask(__name__)  

def zip_lists(list1, list2):
    return zip(list1, list2)

app.jinja_env.filters['zip'] = zip_lists

def get_all_mp4_videos():
    mp4_videos = []
    for root, dirs, files in os.walk('static'):
        for file in files:
            if file.endswith('.mp4'):
                mp4_videos.append(os.path.join(root, file))
    return mp4_videos

def generate_thumbnails(mp4_videos, thumbnail_size=120):
    for video in mp4_videos:
        thumbnail_path = os.path.splitext(video)[0] + '.jpg'
        os.system(f'ffmpeg -i "{video}" -ss 00:00:01 -vf scale={thumbnail_size}:-1 -vframes 1 -y "{thumbnail_path}"')

@app.route('/thumbnails')
def thumbnails():
    mp4_videos = get_all_mp4_videos()
    generate_thumbnails(mp4_videos)
    thumbnail_paths = [os.path.splitext(video)[0] + '.jpg' for video in mp4_videos]
    video_paths = [os.path.splitext(video)[0] + '.mp4' for video in mp4_videos]
    return render_template('thumbnails.html', thumbnail_paths=thumbnail_paths, video_paths=video_paths)

@app.route('/')
def index():
    image_dir = 'static/images'
    image_files = [f for f in os.listdir(image_dir) if f.endswith('.jpg')]
    random_image_file = random.choice(image_files)
    return render_template('index.html', random_image_file=random_image_file)


app.secret_key = os.urandom(24)

app.config['UPLOAD_FOLDER'] = 'static/images/uploads'
app.config['RESULTS_FOLDER'] = 'static/videos/results'
app.config['THUMBNAILS_FOLDER'] = 'static/images/thumbnails'
#app.config['CHECKPOINT_PATH'] = '/home/jack/Desktop/FlaskApp/Wav2Lip/checkpoints/wav2lip_gan.pth'
#app.config['AUDIO_PATH'] = '/home/jack/Desktop/FlaskApp/Wav2Lip/content/sample_data/input_audio.wav'

# Create a formatter for the log messages
formatter = logging.Formatter('%(asctime)s %(levelname)s: %(message)s [in %(pathname)s:%(lineno)d]')

# Create a file handler to write log messages to a file
handler = RotatingFileHandler('Logs/app.log', maxBytes=10000, backupCount=1)
handler.setLevel(logging.DEBUG)
handler.setFormatter(formatter)
random_image_filez = 'blended.jpg'
app.logger.debug("Random image file: %s" % random_image_filez)

# Add the file handler to the Flask app logger
app.logger.addHandler(handler)
app.logger.debug('Entering index function')

# Define route to display upload form
@app.route('/upload_file', methods=['POST', 'GET'])
def upload_file():
    if request.method == 'POST':
        # Check if file was uploaded
        if 'file' not in request.files:
            app.logger.error('No file was uploaded')
            flash('Error: No file was uploaded')
            return redirect(request.url)

        app.logger.error('request.files[\'file\']')
        file = request.files['file']

        # Check if file was selected
        if file.filename == '':
            app.logger.error('No file was selected')
            flash('Error: No file was selected')
            return redirect(request.url)

        # Define allowed file extensions
        ALLOWED_EXTENSIONS = {'png', 'jpg', 'jpeg', 'gif'}

        # Define function to check file extension
        def allowed_file(filename):
            return '.' in filename and filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS

        # Check if file is allowed
        if not allowed_file(file.filename):
             #app.logger.error(f"File '{file.filename}' is not allowed")
             app.logger.error("File '" + file.filename + "' is not allowed")
             flash("Error: File '" + file.filename + "'close is not allowed")
             return redirect(request.url)

        # Save the file
        try:
            filename = secure_filename(file.filename)
            file.save(os.path.join(app.config['UPLOAD_FOLDER'], filename))
            app.logger.info(f'File {filename} saved')
        except Exception as e:
            app.logger.error(f'Error saving file: {e}')
            flash('Error: Unable to save file')
            return redirect(request.url)

        # Redirect to the result page
        return redirect(url_for('result', filename=filename))

    # Return the upload form for GET requests
    return render_template('upload_file.html')


@app.route('/result/<filename>')
def result(filename):
    return render_template('result.html', filename=filename)


@app.route('/process_images', methods=['POST', 'GET'])
def process_images():
    if request.method == 'POST':
        # read the images from the request
        img1 = Image.open(request.files['image1'].stream).convert('RGB')
        img2 = Image.open(request.files['image2'].stream).convert('L')
        img3 = Image.open(request.files['image3'].stream).convert('RGB')
    
        # resize the images to have the same shape
        img1 = img1.resize((img2.width, img2.height))
        img3 = img3.resize((img2.width, img2.height))
    
        # convert the mask to binary
        threshold = 127
        mask = Image.eval(img2, lambda px: 255 if px > threshold else 0)
    
        # apply the mask
        img = Image.composite(img1, img3, mask)
    
        # save the image to a file
        output = BytesIO()
        current_datetime = datetime.now()
        str_current_datetime = str(current_datetime)
        file_name = "static/images/"+str_current_datetime+"XXXX.jpg"
        img.save(file_name, format='JPEG')
        img.save(output, format='JPEG')
        output.seek(0)
    
        # encode the image to bytes
        img_bytes = output.getvalue()
    
        # return the image as a response
        return Response(img_bytes, mimetype='image/jpeg')
    return render_template('process_images.html')


@app.route('/blend_pil', methods=['POST', 'GET'])
def blend_pil():
    if request.method == 'POST':
        # Get the uploaded images
        img1 = request.files['img1']
        img2 = request.files['img2']
        img3 = request.files['img3']

        # Open the images using PIL
        img1_pil = Image.open(img1)
        img2_pil = Image.open(img2)
        img3_pil = Image.open(img3)

        # Blend the images
        blended_pil = Image.blend(img1_pil, img2_pil, 1/3)
        blended_pil = Image.blend(blended_pil, img3_pil, 1/3)

        # Return the blended image as a response
        # Since we are not saving it to the server, we can use a BytesIO object to avoid creating a temporary file
        img_io = BytesIO()
        blended_pil.save(img_io, 'JPEG', quality=70)
        current_datetime = datetime.now()
        str_current_datetime = str(current_datetime)
        file_name = "static/images/uploads/blended_pil"+str_current_datetime+"XXXX.jpg"
        blended_pil.save(file_name, format='JPEG')
        img_io.seek(0)
        
        # Generate the HTML for displaying the blended image in the template
        blended_image_data = base64.b64encode(img_io.getvalue()).decode('utf-8')
        blended_image_url = f"data:image/jpeg;base64,{blended_image_data}"
        #blended_image_url = blended_image_url.resize(( blended_image_url.size[0]//2, blended_image_url.size[1]//2), Image.ANTIALIAS) 
        # Pass the URL of the blended image to the template
        return render_template('show_blend_pil.html', blended_image_url=blended_image_url)      
    return render_template('blend_pil.html')
@app.route('/view_thumbs')
def view_thumbs():
    # Define the directory where the images are located
    image_directory = 'static/images/uploads'
    # Get a list of all the image files in the directory
    image_files = [f for f in os.listdir(image_directory) if f.endswith('.jpg') or f.endswith('.png')]
    # Create a list of dictionaries containing the image file name and URL
    image_list = [{'name': f, 'url': f'/images/uploads/{f}'} for f in image_files]
    # Render the template with the list of images
    return render_template('view_thumbs.html', image_list=image_list)



@app.route('/images/uploads/<filename>')
def image(filename):
    # Define the directory where the images are located
    image_directory = '/mnt/HDD500/FLASK/static/images/uploads'
    # Generate the full path to the requested image file
    image_path = os.path.join(image_directory, filename)
    # Determine the file type based on the file extension
    file_extension = os.path.splitext(filename)[1].lower()
    if file_extension == '.jpg':
        content_type = 'image/jpeg'
    elif file_extension == '.png':
        content_type = 'image/png'
    else:
        # If the file type is not recognized, return a 404 error
        print("abort(404)")
    # Return the image file as a response with the appropriate content type
    with open(image_path, 'rb') as f:
        image_data = f.read()
    return Response(image_data, content_type=content_type)

@app.route('/add_border')
def add_border():
    images = [f for f in os.listdir('static/images/uploads/') if os.path.isfile(os.path.join('static/images/uploads/', f))]
    thumbnails = []
    for image in images:
        with Image.open('static/images/uploads/'+image) as img:
            img.thumbnail((200, 200))
            thumbnail_name = 'thumbnail_'+image
            img.save('static/thumbnails/'+thumbnail_name)
            thumbnails.append(thumbnail_name)
    return render_template('add_border.html', images=images, thumbnails=thumbnails)


@app.route('/select_border')
def select_border():
    borders = os.listdir('static/transparent_borders/')
    return render_template('select_border.html', borders=borders)

@app.route('/apply_border', methods=['POST', 'GET'])
def apply_border():
    selected_image = request.form['image']
    selected_border = request.form['border']
    try:
        with Image.open('static/images/uploads/'+selected_image) as img:
            with Image.open('static/transparent_borders/'+selected_border) as border:
                img = img.resize(border.size)
                img.paste(border, (0, 0), border)
                final_image_name = 'final_'+selected_image
                img.save('static/final_images/'+final_image_name)
        return render_template('final_image.html', final_image=final_image_name, message='Border applied successfully.')
    except Exception as e:
        error_message = f'An error occurred: {str(e)}. Please try again.'
        return render_template('apply_border.html', image=selected_image, border=selected_border, error_message=error_message)

@app.route('/select_border_image', methods=['GET'])
def select_border_image():
    try:
        image = request.args.get('image')
        if not image:
            raise ValueError('No image selected.')
        return render_template('select_border.html', image=image, borders=os.listdir('static/transparent_borders/'))
    except Exception as e:
        error_message = f'An error occurred: {str(e)}. Please try again.'
        return render_template('add_border.html', error_message=error_message)

@app.route("/make_animation")
def make_animation():
    # Get a list of all files in the final_images directory
    #image_files = os.listdir("static/final_images/")
    #DIR = "/home/jack/Desktop/HDD500/collections/gypsy_files/"
    #DIR = "/home/jack/Desktop/HDD500/collections/hippy_files/"
    DIR = "/mnt/HDD500/collections/jungle/exotic_lithograph_prints-Playground_AI_files/512x768/"
    image_files = os.listdir(DIR)
    #image_files = os.listdir("/mnt/HDD500/collections/640x640-alien/")
    # Select 20 random files from the list
    selected_files = random.sample(image_files, 30)
    
    # Load each selected file, resize it to 400x600, and save it to a temporary directory
    resized_images = []
    for filename in selected_files:
        with Image.open(DIR + filename) as img:
            img = img.resize((400, 600))
            temp_filename = "static/tmp/" + filename
            img.save(temp_filename)
            resized_images.append(temp_filename)
    
    # Create an animated GIF from the resized images
 
    gif_filename = "static/animated_gifs/animated.gif"
    with imageio.get_writer(gif_filename, mode='I', duration=1) as writer:
        for filename in resized_images:
            image = imageio.imread(filename)
            writer.append_data(image)
    import shutil

    timestr = time.strftime("%Y%m%d-%H%M%S")

  
    src = 'static/animated_gifs/animated.gif'
    dst = 'static/animated_gifs/animated' + timestr + '.gif'
    # 2nd option
    shutil.copy(src, dst) 
    # Return a template that displays the GIF
    return render_template("make_animation.html", gif_filename=gif_filename)



@app.route('/search', methods=['GET', 'POST'])
def search():
    if request.method == 'POST' and 'phrase' in request.form:
        phrase = request.form['phrase']
        with open('chat.txt', 'r') as file:
            lines = file.readlines()
        results = []
        for i, line in enumerate(lines):
            if phrase in line:
                start = max(0, i-5)
                end = min(len(lines), i+6)
                context = lines[start:end]
                for j, context_line in enumerate(context):
                    if phrase in context_line:
                        results.append(f'Line {start+j}: {context_line}')
                    else:
                        results.append(f'Line {start+j}: {context_line}')
        return render_template('results.html', results=results)
    return render_template('search.html')

from datetime import datetime

@app.route('/add_text', methods=['GET', 'POST'])
def add_text():
    if request.method == 'POST':
        text = request.form['text']
        now = datetime.now()
        timestamp = now.strftime("%Y-%m-%d %H:%M:%S")
        text = f'Text Entry: {timestamp} {text}'
        with open('chat.txt', 'a') as file:
            file.write(f'\n{text}')
        return render_template('add_text.html', message='Text added successfully')
    else:
        return render_template('add_text.html')
# Mp3 page with file upload and textarea to enter text
# Route for the text to speech page
@app.route('/text_mp3', methods=['GET', 'POST'])
def text_mp3():
    if request.method == 'POST':
        # Get the text from the textarea
        text = request.form['text']
        # Remove whitespace from the text
        text = text.replace(" ", "")
        # Create a filename based on the first 20 characters of the text
        filename = "static/audio_mp3/" + text[:20] + ".mp3"
        filename = filename.strip()  # remove the newline character
        # Create a gTTS object and save the audio file
        tts = gTTS(text)
        filename = filename.strip() 
        tts.save(filename)
        # Play the mp3 file
        pygame.mixer.init()
        pygame.mixer.music.load(filename)
        pygame.mixer.music.play()
        # Wait for the audio to finish playing
        while pygame.mixer.music.get_busy():
            pygame.time.Clock().tick(10)
        # Stop pygame and exit the program
        pygame.mixer.quit()
        pygame.quit()
        # Return the text and filename to the template
        return render_template('text_mp3.html', text=text, filename=filename)
    else:
        # Render the home page template
        return render_template('text_mp3.html')

@app.route('/select_playmp3', methods=['GET', 'POST'])
def select_playmp3():
    # Get the list of mp3 files in the static/audio_mp3/ directory
    mp3_files = [f for f in os.listdir('static/audio_mp3/') if f.endswith('.mp3')]
    if request.method == 'POST':
        # Get the selected MP3 file from the dropdown list
        mp3_file = request.form['mp3_file']
        # Play the selected mp3 file
        pygame.mixer.init()
        pygame.mixer.music.load('static/audio_mp3/' + mp3_file)
        pygame.mixer.music.play()
        # Wait for the audio to finish playing
        while pygame.mixer.music.get_busy():
            pygame.time.Clock().tick(10)
        # Stop pygame and exit the program
        pygame.mixer.quit()
        pygame.quit()
    # Render the template with the list of mp3 files
    return render_template('select_playmp3.html', mp3_files=mp3_files)

@app.route('/generate_video')
def generate_video():
    # Get the pythonlist of image files in the static/final_images/ directory  
    #image_filenames = random.sample(glob.glob('static/final_images/*.jpg'),20)
    image_filenames = random.sample(glob.glob('static/video_resources/*.jpg'),30)
    print(image_filenames,end="-")
   
    image_clips = []
    for filename in image_filenames:
        # Open the image file and resize it to 512x768
        image = Image.open(filename)
        image = image.resize((512, 768), Image.ANTIALIAS)
        print(image)
        # Convert the PIL Image object to a NumPy array
        image_array = np.array(image)
        # Create an ImageClip object from the resized image and set its duration to 1 second
        image_clip = ImageClip(image_array).set_duration(1)
        
        # Append the image clip to the list
        image_clips.append(image_clip)
    
    # Concatenate all the image clips into a single video clip
    video_clip = concatenate_videoclips(image_clips, method='compose')
    timestr = time.strftime("%Y%m%d-%H%M%S")
    # Set the fps value for the video clip
    video_clip.fps = 24
    # Write the video clip to a file
    video_clip.write_videofile('static/videos/random_images'+timestr+'video.mp4', fps=24)
    
    # Return a message to the client
    return 'Video generated successfully!'
# List of directories to choose from

directories = ['static/images','static/final_videos', 'static/tmp', 'static/BrightColors','static/final_images', 'static/thumbnails']
import shutil
import logging

@app.route('/choose_dir', methods=['GET', 'POST'])
def choose_dir():
    if request.method == 'POST':
        # Get the selected directory from the form data
        #selected_directory = request.form.get('directory')
        selected_directory = request.args.get('directory')
        print('selected_directory:', selected_directory)
        print('request URL:', request.url)

        
        
        
        # Get the list of image files in the selected directory
        image_filenames = random.sample(glob.glob(selected_directory + '/*.jpg'),30)
   
        image_clips = []
        for filename in image_filenames:
            # Open the image file and resize it to 512x768
            image = Image.open(filename)
            image = image.resize((512, 768), Image.ANTIALIAS)
            print(image)
            # Convert the PIL Image object to a NumPy array
            image_array = np.array(image)
            # Create an ImageClip object from the resized image and set its duration to 1 second
            image_clip = ImageClip(image_array).set_duration(1)
        
            # Append the image clip to the list
            image_clips.append(image_clip)
    
        # Concatenate all the image clips into a single video clip
        video_clip = concatenate_videoclips(image_clips, method='compose')
        timestr = time.strftime("%Y%m%d-%H%M%S")
        # Set the fps value for the video clip
        video_clip.fps = 24
        # Write the video clip to a file
        video_file = 'static/videos/random_images'+timestr+'Xvideo.mp4'
        output_p =   'static/videos/random_images_video.mp4'
        video_clip.write_videofile(video_file, fps=24)
        try:
            shutil.copy(video_file, output_p)
        except FileNotFoundError as e:
            logging.error("Error occurred while copying file: %s", str(e))

        # Return a message to the client
        return 'Video generated successfully!'
    
    output_p = 'static/videos/random_images_video.mp4'
    # If the request method is GET, render the form template with the list of directories
    return render_template('choose_dir.html', directories=directories, output_path=output_p)


@app.route('/generate_video2')
def generate_video2():
    # Get the pythonlist of image files in the static/final_images/ directory  
    image_filenames = random.sample(glob.glob('static/final_images/*.jpg'),25)
    #image_filenames = random.sample(glob.glob('static/images/uploads/*.jpg'),30)
    print(image_filenames,end="-")
   
    image_clips = []
    for filename in image_filenames:
        # Open the image file and resize it to 512x768
        image = Image.open(filename)
        image = image.resize((512, 768), Image.ANTIALIAS)
        print(image)
        # Convert the PIL Image object to a NumPy array
        image_array = np.array(image)
        # Create an ImageClip object from the resized image and set its duration to 1 second
        image_clip = ImageClip(image_array).set_duration(1)
        
        # Append the image clip to the list
        image_clips.append(image_clip)
    
    # Concatenate all the image clips into a single video clip
    video_clip = concatenate_videoclips(image_clips, method='compose')
    timestr = time.strftime("%Y%m%d-%H%M%S")
    # Set the fps value for the video clip
    video_clip.fps = 24
    # Write the video clip to a file
    video_path = 'static/videos/random_images'+timestr+'video.mp4'
    video_clip.write_videofile(video_path, fps=24)
    video_clip.write_videofile('static/videos/TEMPvideo.mp4', fps=24)
    
    # Return a message to the client
    #return render_template('generate_video2.html', video_url='/static/videos/TEMPvideo.mp4')
    return render_template('generate_video2.html' ,video_url='/static/videos/TEMPvideo.mp4', video_path=video_path)


@app.route('/square_video/<path:directory>')
def square_video(directory=None):
    app.logger.info('Directory selected: %s', directory)
    if directory is None:
        app.logger.error('Error: no directory specified')
        return "Error: no directory specified"
    
    # Get the list of image files in the selected directory
    image_filenames = glob.glob(os.path.join(directory, '*.jpg'))
    if not image_filenames:
        app.logger.error('Error: no image files found in directory')
        return "Error: no image files found in directory"
    
    # Randomly select 50 image files from the list
    image_filenames = random.sample(image_filenames, 50)
    
    image_clips = []
    for filename in image_filenames:
        # Open the image file and resize it to 640x640
        image = Image.open(filename)
        image = image.resize((640, 640), Image.ANTIALIAS)
        # Convert the PIL Image object to a NumPy array
        image_array = np.array(image)
        
        # Create an ImageClip object from the resized image and set its duration to 1 second
        image_clip = ImageClip(image_array).set_duration(1)
        # Append the image clip to the list
        image_clips.append(image_clip)
    # Concatenate all the image clips into a single video clip
    video_clip = concatenate_videoclips(image_clips, method='compose')
    # Set the fps value for the video clip
    video_clip.fps = 24
    # Write the video clip to a file
    timestr = time.strftime("%Y%m%d-%H%M%S")
    video_filename = 'static/square_vids/'+timestr+'video.mp4'
    video_clip.write_videofile(video_filename, fps=24)
    video_clip.write_videofile("static/temp.mp4", fps=24)
    video_filename = "static/temp.mp4"
    return redirect(url_for('square_video', directory=directory))

@app.route('/image_directories', methods=['GET', 'POST'])
def image_directories():
    image_directories = ['static/Prodia_640x640', 'static/LineArt', 'static/Quantized', 'static/squares', 'static/BrightColors']
    if request.method == 'POST':
        # Rest of the code

        directory = request.form['directory']
        # Check that the directory parameter is not empty
        if directory:
            app.logger.info('Redirecting endpoint with directory: %s', directory)
            # Check that the directory is a valid directory path
            if os.path.isdir(directory):
                # Pass the directory value to the square_video endpoint
                app.logger.info('Redirecting to square_video endpoint with directory: %s', directory)
                return redirect(url_for('square_video', directory=directory))
            else:
                # Render an error template if the directory parameter is not a valid directory path
                app.logger.error('Invalid directory parameter: %s', directory)
                return render_template('error.html', message='Please enter a valid directory path.')
        else:
            # Render an error template if the directory parameter is empty
            app.logger.error('Directory parameter is empty')
            return render_template('error.html', message='Please enter a directory path.')
    else:
        # Pass the list of image directories to the template
        return render_template('image_directories.html', image_directories=image_directories)

@app.route('/title_page', methods=['GET', 'POST'])
def title_page():
    if request.method == 'POST':
        # Get the text input from the user
        text = request.form['text']
        app.logger.debug('XXXXXXXXXXXXX')
        app.logger.info('This is a test message')
        # Create a transparent image with size 800x600
        IMAGE = random.choice(glob.glob("static/LineArt/*.jpg"))
        image = Image.open(IMAGE)
        
        # Create a drawing context on the image
        draw = ImageDraw.Draw(image)
        
        # Define the font and font size for the text
        font = ImageFont.truetype('static/fonts/OpenSansBold.ttf', 50)
        # Split the text by newline characters
        lines = text.split("  ")


        # Calculate the size of each line and get the maximum width
        line_sizes = [draw.textsize(line, font) for line in lines]
        max_line_width = max([size[0] for size in line_sizes])

        # Calculate the total size of the text
        text_width = max_line_width
        text_height = sum([size[1] for size in line_sizes])

        # Calculate the position of the text in the center of the image
        x = (640 - text_width) / 2
        y = (640 - text_height) / 2

        # Calculate the size of the text
        text_width, text_height = draw.textsize(text, font)
        
        # Calculate the position of the text in the center of the image
        x = (640 - text_width) / 2
        y = (640 - text_height) / 2
        
        # Add the text to the image
        draw.text((x, y), text, font=font, fill=(0, 0, 0, 255))
        
        # Save the image to the static folder with a unique filename
        inc = text.replace(" ","")
        #print(inc[:5])
        filename = os.path.join(app.static_folder, 'title_pages', f'{inc}_{hash(text)}.png')
        image.save(filename)
        
        return render_template('title_page.html', filename=filename)
        
    return render_template('title_page.html')

from flask import Flask, render_template, request
import os
from moviepy.editor import VideoFileClip, ImageClip, CompositeVideoClip, clips_array, concatenate_videoclips, TextClip

@app.route('/add_title', methods=['GET', 'POST'])
def add_title():
    # Create the final_videos directory if it does not exist
    final_videos_dir = os.path.join(app.static_folder, 'final_videos')
    if not os.path.exists(final_videos_dir):
        os.makedirs(final_videos_dir)

    if request.method == 'POST':
        app.logger.debug('Entering POST request handler for /add_title')
        # Get the paths of the selected video and title page
        video_path = os.path.join(app.static_folder, 'square_vids', request.form['video'])
        title_page_path = os.path.join(app.static_folder, 'title_pages', request.form['title_page'])
        app.logger.debug(f'video_path: {video_path}')
        app.logger.debug(f'title_page_path: {title_page_path}')

        # Load the video and title page as clips
        video_clip = VideoFileClip(video_path)
        title_page_clip = ImageClip(title_page_path).set_duration(2)

        # Add the title page to the video for the first 2 seconds
        final_clip = concatenate_videoclips([title_page_clip, video_clip.subclip(2)])

        # Save the final video to the final_videos directory
        final_filename = f"{os.path.splitext(request.form['video'])[0]}_{os.path.splitext(request.form['title_page'])[0]}.mp4"
        final_path = os.path.join(final_videos_dir, final_filename)
        app.logger.debug(f'final_path: {final_path}')
        final_clip.write_videofile(final_path)

        # Return a response to the user indicating that the video with title page was created
        message = f"The video with title page was created and saved to {final_path}"
        return render_template('add_title.html', message=message)

    # If the request method is GET, render the add_title.html template
    app.logger.debug('Entering GET request handler for /add_title')
    videos = os.listdir(os.path.join(app.static_folder, 'square_vids'))
    title_pages = os.listdir(os.path.join(app.static_folder, 'title_pages'))
    app.logger.debug(f'videos: {videos}')
    app.logger.debug(f'title_pages: {title_pages}')
    return render_template('add_title.html', videos=videos, title_pages=title_pages)

@app.route('/build_stackedvids')
def build_stackedvids():
    # Get a random video and image from the static folder
    video_filename = random.choice(glob.glob('static/square_vids/*.mp4'))
    image_filename = random.choice(glob.glob('static/squares/*.jpg'))
    
    # Load the video and image files as clips
    video_clip = VideoFileClip(video_filename)
    image_clip = ImageClip(image_filename)
    
    # Set the duration of the image clip to match the duration of the video clip
    image_clip = image_clip.set_duration(video_clip.duration)
    
    # Resize the clips to 640x640 and 640x640 respectively
    video_clip = video_clip.resize((640, 640))
    image_clip = image_clip.resize((640, 640))
    
    # Create a black clip to fill the remaining space below the image
    black_clip = ColorClip(size=(640, 640), color=(0, 0, 0)).set_duration(video_clip.duration)
    
    # Combine the clips vertically using CompositeVideoClip
    final_clip = CompositeVideoClip([
        video_clip.set_position(('center', 'top')),
        image_clip.set_position(('center', 640)),
        black_clip.set_position(('center', 640 + 640))
    ], size=(640, 1280))
    
    # Export the final clip as a video file
    timestr = time.strftime("%Y%m%d-%H%M%S")
    video_filename = 'static/stacked_vids/stacked_vids'+timestr+'video.mp4'
    final_clip_path = 'static/stacked_vids/stacked_video.mp4'
    final_clip.write_videofile(final_clip_path)
    final_clip.write_videofile(video_filename)
    
    return render_template('/build_stackedvids.html', stackedvid_url=final_clip_path)

from moviepy.editor import *
@app.route('/build_stackedvid')
def build_stackedvid():
    # Get a random video and image from the static folder
    video_filename = random.choice(glob.glob('static/square_vids/*.mp4'))
    videofilename = random.choice(glob.glob('static/square_vids/*.mp4'))
    
    
    # Load the video and image files as clips
    video_clip = VideoFileClip(video_filename)
    videoclip = VideoFileClip(videofilename)
    
    # Set the duration of the image clip to match the duration of the video clip
    videoclip = videoclip.set_duration(video_clip.duration)
    
    # Resize the clips to 640x640 and 640x640 respectively
    video_clip = video_clip.resize((640, 640))
    videoclip = videoclip.resize((640, 640))
    
    # Create a black clip to fill the remaining space below the image
    black_clip = ColorClip(size=(640, 640), color=(0, 0, 0)).set_duration(video_clip.duration)
    
    # Combine the clips vertically using CompositeVideoClip
    final_clip = CompositeVideoClip([
        video_clip.set_position(('center', 'top')),
        videoclip.set_position(('center', 640)),
        black_clip.set_position(('center', 640 + 640))
    ], size=(640, 1280))
    
    # Export the final clip as a video file
    timestr = time.strftime("%Y%m%d-%H%M%S")
    video_filename = 'static/stacked_vids/stacked_vids'+timestr+'video.mp4'
    final_clip_path = 'static/stacked_vids/stacked_videos.mp4'
    final_clip.write_videofile(final_clip_path)
    final_clip.write_videofile(video_filename)
    
    return render_template('/build_stackedvid.html', stackedvid_url=final_clip_path)

@app.route('/clean_images', methods=['POST'])
def clean_images_route():
    clean_images()
    app.logger.error('line 210 clean_images_route')
    return redirect(url_for('index'))

@app.route('/get_gallery')
def get_gallery():
    image_dir = '/home/jack/Desktop/FLASK/static/images/uploads'
    image_names = os.listdir(image_dir)
    return render_template('get_gallery.html', image_names=image_names)

@app.route('/uploads/<filename>')
def send_image(filename):
    return send_from_directory('static/images/uploads', filename)

@app.route('/uploads/thumbnails/<filename>')
def send_image_thumb(filename):
    return send_from_directory('static/images/uploads/thumbnails', filename)
@app.route('/flask_info')
def flask_info():
    return render_template('flask_info.html')
@app.route('/add_effects')
def add_effects():
    return '''
        <form method="post" action="/video" enctype="multipart/form-data">
            <label for="input_video">Select input video file:</label><br>
            <input type="file" id="input_video" name="input_video"><br><br>
            <input type="submit" value="Submit">
        </form>
    '''

@app.route('/video', methods=['GET', 'POST'])
def process_video():
    DIR = "static/"
    input_video = request.files['input_video']
    
    # Save the uploaded video to a file
    input_video.save(f"{DIR}input_video.mp4")
    
    # Run FFmpeg commands
    command1 = f"ffmpeg -nostdin -i {DIR}input_video.mp4 -filter:v \"minterpolate='mi_mode=mci:mc_mode=aobmc:vsbmc=1:fps=10'\" -c:v libx264 -r 20 -pix_fmt yuv420p -c:a copy -y {DIR}output.mp4"    
    
    subprocess.run(command1, shell=True, stderr=subprocess.PIPE, universal_newlines=True)
    
    command2 = f"ffmpeg -nostdin -i {DIR}output.mp4 -vf mpdecimate,setpts=N/FRAME_RATE/TB -c:v libx264 -r 30 -pix_fmt yuv420p -c:a copy -y {DIR}mpdecimate.mp4"
    
    subprocess.run(command2, shell=True, stderr=subprocess.PIPE, universal_newlines=True)
    
    #DIR = "/home/jack/Desktop/ffmpeg_flask/"
    command3 = f"ffmpeg -i static/mpdecimate.mp4 -filter_complex \"[0:v]trim=duration=14,loop=500:1:0[v];[1:a]afade=t=in:st=0:d=1,afade=t=out:st=0.9:d=2[a1];[v][0:a][a1]concat=n=1:v=1:a=1\" -c:v libx264 -r 30 -pix_fmt yuv420p -c:a aac -b:a 192k -shortest -y static/output.mp4"
    subprocess.run(command3, shell=True, stderr=subprocess.PIPE, universal_newlines=True)
    
    now = datetime.now().strftime("%Y-%m-%d_%H-%M-%S")
    shutil.copy(f"{DIR}output.mp4", f"{DIR}{now}_output.mp4")
    logging.info(f'my_video: f"{DIR}mpdecimate.mp4"') 
    video_file="static/outputALL.mp4"     
    command4 = f'ffmpeg -i "{DIR}mpdecimate.mp4" -i "{DIR}mpdecimate.mp4" -i "{DIR}mpdecimate.mp4" -i "{DIR}mpdecimate.mp4" -i "{DIR}mpdecimate.mp4" -filter_complex "[0:v]trim=duration=15[v0];[1:v]trim=duration=15[v1];[2:v]trim=duration=15[v2];[3:v]trim=duration=15[v3];[4:v]trim=duration=15[v4];[v0][v1][v2][v3][v4]concat=n=5:v=1:a=0" -c:v libx264 -pix_fmt yuv420p -shortest -y {video_file}'
    subprocess.run(command4, shell=True, stderr=subprocess.PIPE, universal_newlines=True)
    now = datetime.now().strftime("%Y-%m-%d_%H-%M-%S")
    diR = f"{DIR}/square_videos/"
    logging.info(f'diR: f"{diR}mpdecimate.mp4"')
    shutil.copy(f"{video_file}", f"{diR}{now}_outputALL.mp4")
    logging.info(f'diR: {diR}mpdecimate.mp4')
    return render_template('final.html', video_file=f"static/square_videos/{now}_outputALL.mp4")
'''
@app.route('/generate_video2')
def generate_video2():
    # Get a list of image filenames from the static/final_images/ directory
    image_filenames = random.sample(glob.glob('static/final_images/*.jpg'), 25)

    # Create a list of image clips from the image filenames
    image_clips = []
    for filename in image_filenames:
        # Open the image file and resize it to 512x768
        image = Image.open(filename)
        image = image.resize((512, 768), Image.ANTIALIAS)

        # Convert the PIL Image object to a NumPy array
        image_array = np.array(image)

        # Create an ImageClip object from the resized image and set its duration to 1 second
        image_clip = ImageClip(image_array).set_duration(1)

        # Append the image clip to the list
        image_clips.append(image_clip)

    # Concatenate all the image clips into a single video clip
    video_clip = concatenate_videoclips(image_clips, method='compose')

    # Set the fps value for the video clip
    video_clip.fps = 24

    # Write the video clip to a file
    video_filename = 'static/videos/TEMPvideo.mp4'
    video_clip.write_videofile(video_filename, fps=24)

    # Return the rendered HTML template that displays the video and its path
    return render_template('generate_video2.html', video_url='/' + video_filename, video_path=video_filename)
'''
def get_all_mp4_videos():
    mp4_videos = []
    for root, dirs, files in os.walk('static'):
        for file in files:
            if file.endswith('.mp4'):
                mp4_videos.append(os.path.join(root, file))
    return mp4_videos

@app.route('/play/<path:video_path>')
def play(video_path):
    return send_file(video_path)




@app.route('/select_order', methods=['GET', 'POST'])
def select_order():
    output_path = 'static/videos/concatenated_video.mp4'  # Set a default value for output_path
    if request.method == 'POST':
        # Get the order of the videos from the form data
        order = request.form.getlist('order')
        # Join the videos in the specified order
        join_videos(order, output_path)
        # Set the timestamped output path
        timestamp = datetime.datetime.now().strftime('%Y%m%d_%H%M%S')
        new_output_path = f'static/videos/concatenated_{timestamp}XX.mp4'
        shutil.copy(output_path, new_output_path)
        # Redirect to the download page
        return redirect(url_for('download'))
    else:
        # Get the paths to the video files in the directory
        video_dir = 'static/videos'
        video_files = [os.path.join(video_dir, filename) for filename in os.listdir(video_dir) if filename.endswith('.mp4')]
        # Render the template with the list of video files and the output path
        return render_template('select_order.html', video_files=video_files, output_path=output_path)
         
def join_videos(video_paths, output_path):
    # Generate a list of input arguments for FFmpeg
    input_args = []
    for path in video_paths:
        input_args.extend(['-i', path])
    # Join the videos using FFmpeg
    subprocess.run(['ffmpeg', *input_args, '-filter_complex', 'concat=n={}:v=1:a=0'.format(len(video_paths)), '-c:v', 'libx264', '-crf', '23', '-preset', 'veryfast', '-y', output_path])
    #output_path = 'static/videos/concatenated_video.mp4'
    timestamp = datetime.datetime.now().strftime('%Y%m%d_%H%M%S')
    new_output_path = f'static/videos/concatenated_{timestamp}XX.mp4'
    shutil.copy(output_path, new_output_path)
    
if __name__ == '__main__':
    app.run(debug=True)



-----index-----
<!-- index.html-->
<!DOCTYPE html>
<html>

<head>
    <title>My Flask App</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 1%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        body {
            background-image: url('../static/assets/MemMaker_background.png');
            background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }
        video {
            margin: 10px, auto;
            width: 400px;
            height: auto;
        }

          .wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;

        }

        .header {
            width: 100%;
            padding: 20px;
            text-align: center;
        }

        .columns {
            display: flex;
            width: 80%;
            margin-top: 20px;
        }

        .column {
            padding: 20px;
            box-sizing: border-box;
        }

        .column.left {
            width: 30%;
            border:    1px solid #000;
        }

        .column.right {
        margin: 0 auto; /* Center horizontally */
        width: 60%;
        border: 1px solid #000;
        text-align: center; /* Center video vertically */
    }

    .column.right video {
        max-width: 100%;
        height: auto;
    }
    </style><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body>
    <div class="container">
        <h1>Images in {{ path }}</h1>
        <div class="row">
            <!-- loop over the image names and display them as thumbnails -->
            {% for image in images %}
            <div class="col-md-3">
                <img src="{{ url_for('static', filename='images/' + path + '/' + image) }}" class="img-thumbnail">
            </div>
            {% endfor %}
        </div>
    </div>

    <div class="wrapper">
        <div class="header">
            <h1>Utilities</h1>
        </div>
        <div class="columns">
            <div class="column left">
                <h2>Left Column</h2>
                <h3>Create Text</h3><br />
                <a href="{{ url_for('app_utilities') }}">Application Utilities</a><br /><br />
                <a href="{{ url_for('image_processing') }}">Image Processing Links</a><br /><br />
                <a href="{{ url_for('format_file') }}">Format Text Files</a><br /><br />
                <a href="{{ url_for('view_text') }}">View Text Files</a><br /><br />
                <a href="{{ url_for('edit_file') }}">Edit File</a><br /><br />
                <a href="{{ url_for('edit_formatted') }}">Edit Formatted Text</a><br /><br />

                <a href="{{ url_for('edit_description') }}">Edit Description</a><br /><br />
            </div>
            <div class="column right">
                <h2>Right Column</h2>
                <video controls>
                    <source src="{{ video }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
        </div>
    </div>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Title Page</title>
</head>
<body>
    <h1>Create Title Page</h1>
    <a href="{{ url_for('index') }}">Home</a><br />
    <form method="POST" enctype="multipart/form-data"><br />        
        <label for="text">Text:</label>
        <input type="text" name="text" id="text" required>
        <br>
        <label for="image">Image:</label>
        <input type="file" name="image" id="image" accept="image/*" required>
        <br>
        <input type="submit" value="Create Title Page">
    </form>
{% if filename %}
    <h2>Generated Title Page:</h2>
    <img src="{{ url_for('static', filename=filename) }}" alt="Title Page">
{% endif %}

</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Create A Title Page</title>
</head>
<style>.atext{
    text-align: center;
    background-color: aquamarine;}
    #wrapper{width:50%;
    margin: auto;
   
  width: 50%;
  border: 3px solid green;
  padding: 10px;
        text-align: center;
    background-color: antiquewhite;}</style>
<body class="atext">
    <div id="wrapper">
    <h1>Create Title Page</h1>
    <h2>Enter Twenty characters max, including spaces:</h2>
    <p>A random image will be chosen and this text placed on it to use as a title page. <br />
       The filename will contain the text on the image.</p>
     <form method="POST" enctype="multipart/form-data">
        <label for="text">Text:</label>
        <input type="text" id="text" name="text" required>
        <br>
        <input type="submit" value="Create">
    </form>
    {% if filename %}
    <img src="{{ url_for('static', filename=filename) }}" alt="Title Page">
    {% endif %}
    </div>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Capture Tube</title>
</head>
<body>
    <h1>Capture Video Tube</h1>
    <a href="/capture_overlay_verify">Start Capture Regular</a><br />
    <a href="/capture_overlay_short">Start Capture Short</a>
    <h1>Welcome to Your Flask App</h1>
    <p>Create a text image</p>
    <a href="{{ url_for('create_text') }}">Create Text Image</a>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mouse Particals</title>
    <link rel="stylesheet" href="../static/css/two_css_canvas.css">
</head>

<body><a style="font-size: small;color:lightgray;" href="{{ url_for('index') }}">Return to HOME</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a  style="font-size: small;color:lightgray;" href="{{ url_for('edit_template_page', filename='two_canvas.html') }}">Edit This Page</a>|&nbsp;&nbsp;<a  style="font-size: small;color:lightgray;" href="{{ url_for('edit_canvas_script', filename='scripts_canvas.js') }}">Edit the JavaScript</a>
    <canvas></canvas>
    <script src="../static/canvas/scripts_canvas.js"></script>
</body>

</html>
-----index-----
[
    [
        {
            "role": "system",
            "content": "Here are some updated web searches. Use this to improve user response:[1] \"This will open a window containing the HTML source code of the page. Inspect an HTML Element: Right-click on an element (or a blank area), and choose \"Inspect\" or \"Inspect Element\" to see what elements are made up of (you will see both the HTML and the CSS). You can also edit the HTML or CSS on-the-fly in the Elements or Styles panel that opens.\" URL:https://www.w3schools.com/html/html_basic.asp.[2] \"HTML ( H yper T ext M arkup L anguage) is the code that is used to structure a web page and its content. For example, content could be structured within a set of paragraphs, a list of bulleted points, or using images and data tables. As the title suggests, this article will give you a basic understanding of HTML and its functions. So what is HTML?\" URL:https://developer.mozilla.org/en-US/docs/Learn/Getting_started_with_the_web/HTML_basics.[3] \"HTML (HyperText Markup Language) is a markup language that tells web browsers how to structure the web pages you visit. It can be as complicated or as simple as the web developer wants it to be. HTML consists of a series of elements, which you use to enclose, wrap, or mark up different parts of content to make it appear or act in a certain way.\" URL:https://developer.mozilla.org/en-US/docs/Learn/HTML/Introduction_to_HTML/Getting_started."
        }
    ],
    [
        {
            "role": "system",
            "content": "Here are some updated web searches. Use this to improve user response:[1] \"Here is what is printed: The first line is what is desired and shows up by pasting the html markup into the html file. The second output is what I am getting through accessing the htmlm variable. Does anybody know how to do this? python. html. flask. Share. Improve this question. Follow. asked Jun 20, 2019 at 20:19. Malonga. 35 5. 2.\" URL:https://stackoverflow.com/questions/56693354/how-to-make-html-markup-show-up.[2] \"Docs \u00bb flask \u00bb flask.Markup. View page source. flask.Markup. class flask.Markup [source] Marks a string as being safe for inclusion in HTML/XML output without needing to be escaped. This implements the __html__ interface a couple of frameworks and web applications use.\" URL:https://tedboy.github.io/flask/generated/generated/flask.Markup.html.[3] \"Flask is a lightweight Python framework for web applications that provides the basics for URL routing and page rendering. Flask is called a \"micro\" framework because it doesn't directly provide features like form validation, database abstraction, authentication, and so on.\" URL:https://code.visualstudio.com/docs/python/tutorial-flask."
        }
    ],
    [
        {
            "role": "system",
            "content": "Here are some updated web searches. Use this to improve user response:[1] \"A recent report from London's Express said that each member of the quintet is making roughly $2.5 million per episode this season (which contains five episodes), and they will earn the same amount in next year's eighth and final season.\" URL:https://money.com/heres-how-much-money-the-game-of-thrones-actors-really-make/.[2] \"Stars Sophie Turner (Sansa Stark), Maisie Williams (Arya Stark), and Isaac Hempstead Wright (Bran Stark) were making $175,000 an episode in 2017, according to Variety. Turner acknowledged the pay...\" URL:https://www.businessinsider.com/game-of-thrones-actor-salaries-compared-to-highest-paid-tv-stars-2019-4?op=1.[3] \"When the series began, the Game of Thrones budget to make season 1 was said to be around $50-60 million, which breaks down to $5-6 million per episode. Much of the debut season was shot across Northern Ireland and Malta, but production's reach expanded as Game of Thrones continued.\" URL:https://screenrant.com/game-thrones-budget-show-cost-explained/."
        }
    ],
    [
        {
            "role": "system",
            "content": "Here are some updated web searches. Use this to improve user response:[1] \"Game of Thrones: Winter is Coming is a 2019 massively multiplayer online real-time strategy game (MMORTS) developed and published Yoozoo Games. It is based on the television series Game of Thrones.The game was announced in August 2018, during Gamescom and was released by Yoozoo in March 2019, originally as a browser game. The Steam version was released in November 2019, and the mobile port was ...\" URL:https://en.wikipedia.org/wiki/Game_of_Thrones:_Winter_is_Coming.[2] \"Like most browser games, Game of Thrones: Winter is Coming also has many in-game purchases and microtransactions that can give players a significant edge over the F2P players. Tips and Tricks to Playing Game of Thrones: Winter is Coming. There are lots of ways to play this game. With such a large player base, different gamers have developed ...\" URL:https://best-gamesonline.com/articles/an-expert-guide-to-game-of-thrones-winter-is-coming/.[3] \"Game of Thrones Winter is Coming has been designed to give players a balanced combination of strategy and roleplaying for a unique gameplay experience. Build your base, expand your territory, recruit characters from the show, train your army, and make history. 1. Dive into the World of Westeros. - Westeros Like You've Never Seen It Before: The ...\" URL:https://store.steampowered.com/app/1105420/Game_of_Thrones_Winter_is_Coming."
        }
    ],
    [
        {
            "role": "system",
            "content": "Here are some updated web searches. Use this to improve user response:[1] \"Game of Thrones: Winter is Coming is a 2019 massively multiplayer online real-time strategy game (MMORTS) developed and published Yoozoo Games. It is based on the television series Game of Thrones.The game was announced in August 2018, during Gamescom and was released by Yoozoo in March 2019, originally as a browser game. The Steam version was released in November 2019, and the mobile port was ...\" URL:https://en.wikipedia.org/wiki/Game_of_Thrones:_Winter_is_Coming.[2] \"Like most browser games, Game of Thrones: Winter is Coming also has many in-game purchases and microtransactions that can give players a significant edge over the F2P players. Tips and Tricks to Playing Game of Thrones: Winter is Coming. There are lots of ways to play this game. With such a large player base, different gamers have developed ...\" URL:https://best-gamesonline.com/articles/an-expert-guide-to-game-of-thrones-winter-is-coming/.[3] \"Game of Thrones: Winter Is Coming is a new officially licensed online strategy browser game/MMO that fans can now play for free. What is it, and is it any go...\" URL:https://www.youtube.com/watch?v=5tqW6PxO_rA."
        }
    ],
    [
        {
            "role": "system",
            "content": "Here are some updated web searches. Use this to improve user response:[1] \"Create a repository with the same name as your GitHub username, initializing the repository with a README.md file. For more information, see \" Managing your profile README .\" Edit the README.md file and delete the template text (beginning ### Hi there) that is automatically added when you create the file.\" URL:https://docs.github.com/en/get-started/writing-on-github/getting-started-with-writing-and-formatting-on-github/quickstart-for-writing-on-github.[2] \"How to Write a Good README File for Your GitHub Project Hillary Nyakundi When I was first introduced to GitHub, I had no idea what it was or what it could do. Between you and me, I created the account because I was told every developer should have one where they push their code. For the longest time as a beginner I did nothing with my account.\" URL:https://www.freecodecamp.org/news/how-to-write-a-good-readme-file/.[3] \"Learn advanced formatting features by creating a README for your GitHub profile. About writing and formatting on GitHub GitHub combines a syntax for formatting text called GitHub Flavored Markdown with a few unique writing features. Basic writing and formatting syntax\" URL:https://docs.github.com/articles/markdown-basics."
        }
    ],
    [
        {
            "role": "system",
            "content": "Here are some updated web searches. Use this to improve user response:[1] \"How to Write a Good README File for Your GitHub Project Hillary Nyakundi When I was first introduced to GitHub, I had no idea what it was or what it could do. Between you and me, I created the account because I was told every developer should have one where they push their code. For the longest time as a beginner I did nothing with my account.\" URL:https://www.freecodecamp.org/news/how-to-write-a-good-readme-file/.[2] \"Create a repository with the same name as your GitHub username, initializing the repository with a README.md file. For more information, see \" Managing your profile README .\" Edit the README.md file and delete the template text (beginning ### Hi there) that is automatically added when you create the file.\" URL:https://docs.github.com/en/get-started/writing-on-github/getting-started-with-writing-and-formatting-on-github/quickstart-for-writing-on-github.[3] \"Learn advanced formatting features by creating a README for your GitHub profile. About writing and formatting on GitHub GitHub combines a syntax for formatting text called GitHub Flavored Markdown with a few unique writing features. Basic writing and formatting syntax\" URL:https://docs.github.com/articles/markdown-basics."
        }
    ],
    [
        {
            "role": "system",
            "content": "Here are some updated web searches. Use this to improve user response:[1] \"Disadvantages of flask As it is easy for an amateur or a beginner to learn and create a web development with flask framework, in the same way, a bad developer will write worse code, or in the case of a young developer in training, it will be easier for him to use low-quality code creating a \"bad web application\". Scale\" URL:https://dev.to/detimo/python-flask-pros-and-cons-1mlo.[2] \"Circular dependencies are a common problem. Take a look at the application factory pattern. This can help with both circular dependencies and testing. http://flask.pocoo.org/docs/1./patterns/appfactories/ Example: https://github.com/realpython/cookiecutter-flask-skeleton\" URL:https://www.reddit.com/r/flask/comments/a3sebn/ask_flask_what_are_your_biggest_challenges/.[3] \"The biggest problem is that the Flask mixes imperative and declarative way of configuration and encourages you to do so. To glue all parts together you end up with ugly Python module that is responsible for bootstrapping the app. Mysterious import order (just try to change it!), ifs everywhere, decorators, ugh.\" URL:https://www.ulam.io/blog/is-flask-good-framework-for-application."
        }
    ],
    [
        {
            "role": "system",
            "content": "Here are some updated web searches. Use this to improve user response:[1] \"Ottawa ( / \u02c8\u0252t\u0259w\u0259 / i, / \u02c8\u0252t\u0259w\u0251\u02d0 /; Canadian French: [\u0254taw\u0251]) is the capital city of Canada. It is located in the southern portion of the province of Ontario, at the confluence of the Ottawa River and the Rideau River.\" URL:https://en.wikipedia.org/wiki/Ottawa.[2] \"Ottawa, city, capital of Canada, located in southeastern Ontario. In the eastern extreme of the province, Ottawa is situated on the south bank of the Ottawa River across from Gatineau, Quebec, at the confluence of the Ottawa (Outaouais), Gatineau, and Rideau rivers.\" URL:https://www.britannica.com/place/Ottawa.[3] \"The capital of Canada is Ottawa in the province of Ontario. This city sits along the south side of the Ottawa River, which is located in the southeastern region of the province. It is situated at the confluence of three rivers, those namely being the Ottawa, Gatineau, and Quebec Rivers.\" URL:https://www.worldatlas.com/articles/what-is-the-capital-of-canada.html."
        }
    ],
    [
        {
            "role": "system",
            "content": "Here are some updated web searches. Use this to improve user response:[1] \"1 \"Clickable\" is a quality that applies to something which is shown (rendered), and JSON can be rendered through a gazillion different ways, with half of these possible with a user agent (what the millennials call \"the browser\"). You have unfortunately left us guesstimating how you are rendering the quoted text.\" URL:https://stackoverflow.com/questions/56129722/make-url-in-json-clickable.[2] \"Ask Question Asked 6 years, 5 months ago Modified 3 years, 11 months ago Viewed 71k times 0 I want to create a dynamic array/script and I need to add some link in my JSON return so that, I can create a long array which inculude dynamic list or sources with a prepared JSON file.\" URL:https://stackoverflow.com/questions/42927933/how-can-i-add-a-link-href-hyperlink-in-json-script.[3] \"In another edition to the JSON series, we can also add clickable links are part of the paragraph in the JSON. We can encapsulate the link in the anchor tag <a href='#'></a>. We can add the redirection link in the href so that the user can redirect to the link on click.\" URL:https://dev.to/hardiquedasore/how-to-add-link-to-json-49a3."
        }
    ]
]
-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Image Upload</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/Style.css') }}">
    <style>
        .resizedvideo {
          width: 400px;
          height: auto;
        }
        </style>
</head>
<body>
    <a style ="font-size: 24px;color: rgb(255, 238, 0);" href="{{ url_for('index') }}">HOME</a>
    <h1>Upload Background and Foreground Images</h1>
    <form action="/process_imagez" method="post" enctype="multipart/form-data">
        <label for="bg_image">Background Image:</label>
        <input type="file" name="bg_image" id="bg_image" accept="image/*" required><br>

        <label for="fg_image">Foreground Image:</label>
        <input type="file" name="fg_image" id="fg_image" accept="image/*" required><br>

        <input type="submit" value="Create Video">
    </form>

    {% if video_url %}
    <h2>Generated Video:</h2>
    <video class="resizedvideo" controls>
        <source src="static/overlay_zooms/imagez_video.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>

    <p>{{ video_download_link }}</p>
    {% endif %}
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
  <head>
    <title>Upload Images to Blend</title>
  </head>
  <body>
    <h1>Upload Images to Blend</h1>
    <form action="{{ url_for('upload_blends') }}" method="post" enctype="multipart/form-data">
      <p>Select the first image:</p>
      <input type="file" name="img1"><br>
      <p>Select the second image:</p>
      <input type="file" name="img2"><br>
      <p>Select the third image:</p>
      <input type="file" name="img3"><br><br>
      <input type="submit" value="Blend Images">
    </form>

  <br>
    <img src="{{ url_for('static', filename='images/image2.jpg') }}" alt="Example image"><br />
  </body>
</html>


-----index-----
<!DOCTYPE html>
<html>
  <head>
    <title>File Upload Form</title>
  </head>
  <body>
    <h1>Upload a File</h1>

    <form action="{{ url_for('upload_file') }}" method="POST" enctype="multipart/form-data">
      <input type="file" name="file">
      <input type="submit" value="Upload">
    </form>

    {% if filename %}
    <h2>Uploaded File:</h2>
    <p>Filename: {{ filename }}</p>
    <p>URL: <a href="{{ url_for('uploaded_file', filename=filename) }}">{{ url_for('uploaded_file', filename=filename) }}</a></p>
    <img src="{{ url_for('uploaded_file', filename=filename) }}" alt="Uploaded File">
    {% endif %}

    <br>
    <h1>Upload Background and Foreground Images</h1>
    <form action="/process_images" method="post" enctype="multipart/form-data">
        <input type="file" name="bg_image" accept="image/*" required>
        <input type="file" name="fg_image" accept="image/*" required>
        <input type="submit" value="Create Video">
    </form>

    {% if video_url %}
    <h2>Generated Video:</h2>
    <video controls>
        <source src="{{ video_url }}" type="video/mp4">
        Your browser does not support the video tag.
    </video>
    {% endif %}



    
    <p><a href="{{ url_for('index') }}">Return to index</a></p>
  </body>
</html>

-----index-----
<!doctype html>
<title>Feathering App</title>
<h1>Upload an image to apply feathering</h1>
<form method=post enctype=multipart/form-data>
  <input type=file name=file>
  <input type=submit value=Upload>
</form>

-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Image Upload</title>
</head>
<body>
    <h1>Upload Background and Foreground Images</h1>
    <form action="/process_imagez" method="post" enctype="multipart/form-data">
        <label for="bg_image">Background Image:</label>
        <input type="file" name="bg_image" id="bg_image" accept="image/*" required><br>

        <label for="fg_image">Foreground Image:</label>
        <input type="file" name="fg_image" id="fg_image" accept="image/*" required><br>

        <input type="submit" value="Create Video">
    </form>

    {% if video_url %}
    <h2>Generated Video:</h2>
    <video controls>
        <source src="static/overlay_zooms/imagez_video.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>
    {% endif %}
</body>
</html>

-----index-----
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload and Rename</title>
</head>
<body>
    <h1>Upload a File and Rename it</h1>
    <form action="/upload_file_rename" method="POST" enctype="multipart/form-data">
        <label for="file">Select a File:</label>
        <input type="file" name="file" id="file" required><br><br>

        <label for="new_filename">New Filename:</label>
        <input type="text" name="new_filename" id="new_filename" required><br><br>

        <label for="selected_directory">Destination Directory:</label>
        <input type="text" name="selected_directory" id="selected_directory" required><br><br>

        <label for="width">Width:</label>
        <input type="text" name="width" id="width" value="1366"><br><br>

        <label for="height">Height:</label>
        <input type="text" name="height" id="height" value="768"><br><br>

        <input type="submit" value="Upload and Rename">
    </form>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload File and Rename</title>
</head>
<body>
    <h1>Upload a File and Rename it</h1>
    <form action="/upload_file_rename" method="POST" enctype="multipart/form-data">
        <label for="file">Select a file:</label>
        <input type="file" name="file" id="file" required><br><br>

        <label for="new_filename">New Filename:</label>
        <input type="text" name="new_filename" id="new_filename" required><br><br>

        <label for="selected_directory">Destination Directory:</label>
        <input type="text" name="selected_directory" id="selected_directory" required><br><br>

        <input type="submit" value="Upload and Rename">
    </form>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Video Thumbnails</title>
    <style>
        html,body {margin: 0;padding: 1%; height: 100%;font-family: Arial, sans-serif;}

        body {background-image: url('../static/assets/MemMaker_background.png');background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }
        video {margin: 10px, auto;
            width: 250px;
            height: auto;}

          .wrapper {display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;}

        .header {width: 100%;
            padding: 20px;
            text-align: center;}

        .columns {display: flex;
            width: 80%;
            margin-top: 20px;}

        .column { padding: 20px;
            box-sizing: border-box;}

        .column.left {
            width: 60%;
            border:    1px solid #000;}

        .column.right {
        margin: 0 auto; /* Center horizontally */
        width: 30%;
        border: 1px solid #000;
        text-align: center; /* Center video vertically */}

    .column.right video {
        max-width: 100%;
        height: auto;}
    .note{color:red;font-size:24px;}   
    </style>    
    
    
</head>
<body>
    <h1>Video Thumbnails</h1>
    <ul>
        {% for video in videos %}
        <li>
            <h3>{{ video['name'] }}</h3>
 
            <video width="200" height="auto" controls>
                <source src="{{ url_for('view_archive_videos.play_video', video_name=video['name']) }}" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            


        </li>
        {% endfor %}
    </ul>
</body>
</html>


-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>View Captured Video</title>

    <style>
        html,body {margin: 0;padding: 1%; height: 100%;font-family: Arial, sans-serif;}

        body {background-image: url('../static/assets/MemMaker_background.png');background-repeat: repeat-y;
            background-size: cover;
            /* Use 'cover' to make the image cover the entire body */
            background-position: top;
        }
        video {margin: 10px, auto;
            width: 250px;
            height: auto;}

          .wrapper {display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;}

        .header {width: 100%;
            padding: 20px;
            text-align: center;}

        .columns {display: flex;
            width: 80%;
            margin-top: 20px;}

        .column { padding: 20px;
            box-sizing: border-box;}

        .column.left {
            width: 60%;
            border:    1px solid #000;}

        .column.right {
        margin: 0 auto; /* Center horizontally */
        width: 30%;
        border: 1px solid #000;
        text-align: center; /* Center video vertically */}

    .column.right video {
        max-width: 100%;
        height: auto;}
    .note{color:red;font-size:24px;}   
    </style>
</head>
<body>
    <h1>View Captured Video</h1>
    <video controls>
        <source src="{{ video_filename }}" type="video/mp4">
        Your browser does not support the video tag.
    </video>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Execution Result</title>
    <!DOCTYPE html>
<html lang="en">
<head>
    <title>Execute Bash Script</title>
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">

    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">

</head>
<body>
    <h1>Execution Result</h1>

    <h2>Script Content</h2>

    {% for results in result %}
    <pre>{{ results }}</pre>
    {% endfor %}
    {% for words in content %}

        <pre>{{ words }}</pre>
    {% endfor %}
</body>
</html>


-----index-----
<!DOCTYPE html>
<html>
<head>
  <title>Image Gallery</title>
  <style>
    .gallery {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      align-items: center;
    }

    .gallery img {
      width: 250px;
      height: 250px;
      object-fit: cover;
      margin: 10px;
    }
  </style>
</head>
<body>
<div class="gallery">
  <hr>
  {% for image_url in image_urls %}
    <img src="{{ image_url }}" alt="Image">
  {% endfor %}
</div>
</body>
</html>



-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>View Text File</title>
</head>
<body>
    <h2>Viewing Text Filename: </h2><h3>{{ filename }}</h3>
    <pre>{{ file_contents }}</pre>
</body>
</html>
-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>View Text Image</title>
</head>
<body>
    <h2>View Text Image</h2>
    <img src="{{ url_for('static', filename='assets/512x512_text.jpg') }}" alt="Generated Text Image">
    <br>
    <a href="{{ url_for('create_text') }}">Generate Another Image</a>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Thumbnail Gallery</title>
    <style>
        .gallery {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
        }
        .thumbnail {
            margin: 10px;
            border: 1px solid #ccc;
            box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            width: 200px;
            height: 200px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
    </style>
</head>
<body>
    <h1>Thumbnail Gallery</h1>
    <div class="gallery">
        {% for image in image_list %}
        <div class="thumbnail">
            <a href="{{ image.url }}">
                <img src="{{ image.url }}">
            </a>
        </div>
        {% endfor %}
    </div>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Word Cloud</title>

    <link rel="stylesheet" href="static/css/flask.css">


</head>
<body>
    <h1>First Three Lines from Every Block</h1>

    {% if extracted_lines %}
        <ul>
            {% for lines in extracted_lines %}
                <li>
                    <pre>{{ lines }}</pre>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No code blocks found.</p>
    {% endif %}
    
    <a href="{{ url_for('search_code') }}">Back to Search</a>
</body>
</html>

-----index-----
<!DOCTYPE html>
<html>
<head>
    <title>Display Preformatted Code</title>
    <style>
    pre{
    color:navy;
    font-size:22px;
    }
    .note{
    color:red;
    font-size:24;}
    </style>
</head>
<body>
    <h1>Preformatted Code Example</h1>
                 <a href="{{ url_for('hello') }}">HOME</a><br />
                <a href="{{ url_for('html_base') }}">Html_Base</a><br />
                <a class="note" href="{{ url_for('home') }}">Cheat Sheet</a><br />   
    <h2>Code from code.txt:</h2>
    
    <pre>{{ code_content|safe }}</pre>
</body>
</html>


-----index-----
<!-- code_editor.html-->
<!-- app_utilities.html-->
<!DOCTYPE html>
<html>

<head>
    <title>Embedded YouTube Videos and Links</title>
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flask.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
<style>
.note{
color:darkbrown;
font-size:24px;
}
.Snote{
color:red;
font-size:30px;
}
</style>
</head>

<body>
    <div class="wrapper">
        <div class="header">
            <h1>YouTube Videos</h1>
            <a class = "note" href="{{ url_for('index') }}">Home (index)</a><br />
            <a class = "note" href="https://elements.envato.com/audio/royalty-free-music" 
target="_blank">elements.envato.com/audio/royalty-free-music</a><br /><br />
<a class = "Snote" href="{{ url_for('select_playmp3') }}" target="_blank">Play Music</a>&nbsp;&nbsp;||&nbsp;&nbsp;
<a class="Snote" href="{{ url_for('start_stream') }}" target="_blank">Start Streaming</a>


        </div>
        <div class="columns">
        <div class="column">
            <iframe width="560" height="315" src="https://www.youtube.com/embed/BidxfmuXJL0?si=QzuoU3Ad-n0WFsII" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
        </div>    &nbsp;&nbsp;
<div class="column">
    <iframe width="560" height="315" src="https://www.youtube.com/embed/wpGsHnUlJNY?si=JtmCatIR7YZkD2KN" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe><br />
<iframe width="560" height="315" src="https://www.youtube.com/embed/NEFQ_PgRSmk?si=-35q0H-uSRgxKTLI" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
</div> 
</div>
-----index-----
